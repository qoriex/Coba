(()=>{var rc={6281:(o,C,v)=>{"use strict";var k=v(7396),R=function(){function S(g){if(S.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=g,S.INSTANCE=this}return S.prototype.enable=function(g,c){k.IsInitialized&&(v(4309).wp(g&&c,this._client),v(5823).wp(g,this._client),v(454).wp(g,this._client))},S.prototype.isInitialized=function(){return this._isInitialized},S.prototype.dispose=function(){S.INSTANCE=null,this.enable(!1,!1)},S._methodNames=["debug","info","log","warn","error"],S}();o.exports=R},894:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(5282),R=v(7396),S=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var u=c.session.get(c.CONTEXT_NAME);return u===void 0?null:u},c.generateContextObject=function(u,a,m,f,d,p){return a=a||u,this.enabled?{operation:{name:m,id:u,parentId:a,traceparent:d,tracestate:p},customProperties:new g(f)}:null},c.runWithContext=function(u,a){if(c.enabled)return c.session.bind(a,(m={},m[c.CONTEXT_NAME]=u,m))();return a();var m},c.wrapEmitter=function(u){c.enabled&&c.session.bindEmitter(u)},c.wrapCallback=function(u){return c.enabled?c.session.bind(u):u},c.enable=function(u){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=u,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=v(9562):this.cls=v(3057)),c.session=this.cls.createNamespace("AI-CLS-Session"),R.registerContextPreservation(function(a){return c.session.bind(a)})),this.enabled=!0}},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var u=process.versions.node.split(".");return parseInt(u[0])>3||parseInt(u[0])>2&&parseInt(u[1])>2},c.shouldUseClsHooked=function(){var u=process.versions.node.split(".");return parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=2},c.canUseClsHooked=function(){var u=process.versions.node.split("."),a=parseInt(u[0])>8||parseInt(u[0])>=8&&parseInt(u[1])>=0,m=parseInt(u[0])<8||parseInt(u[0])<=8&&parseInt(u[1])<2,f=parseInt(u[0])>4||parseInt(u[0])>=4&&parseInt(u[1])>=7;return!(a&&m)&&f},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();C.CorrelationContextManager=S;var g=function(){function c(u){this.props=[],this.addHeaderData(u)}return c.prototype.addHeaderData=function(u){var a=u?u.split(", "):[];this.props=a.map(function(m){var f=m.split("=");return{key:f[0],value:f[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(u){return u.key+"="+u.value}).join(", ")},c.prototype.getProperty=function(u){for(var a=0;a<this.props.length;++a){var m=this.props[a];if(m.key===u)return m.value}},c.prototype.setProperty=function(u,a){if(c.bannedCharacters.test(u)||c.bannedCharacters.test(a)){k.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+u+" and value: "+a);return}for(var m=0;m<this.props.length;++m){var f=this.props[m];if(f.key===u){f.value=a;return}}this.props.push({key:u,value:a})},c.bannedCharacters=/[,=]/,c}()},6639:o=>{"use strict";var C=function(){function v(k){if(v.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");v.INSTANCE=this,this._client=k;var R=process.versions.node.split(".");v._canUseUncaughtExceptionMonitor=parseInt(R[0])>13||parseInt(R[0])===13&&parseInt(R[1])>=7}return v.prototype.isInitialized=function(){return this._isInitialized},v.prototype.enable=function(k){var R=this;if(k){this._isInitialized=!0;var S=this;if(!this._exceptionListenerHandle){var g=function(c,u,a){a===void 0&&(a=new Error(v._FALLBACK_ERROR_MESSAGE)),R._client.trackException({exception:a}),R._client.flush({isAppCrashing:!0}),c&&u&&process.listeners(u).length===1&&(console.error(a),process.exit(1))};v._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=g.bind(this,!1),process.on(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=g.bind(this,!0,v.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=g.bind(this,!1),process.on(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(v._canUseUncaughtExceptionMonitor?process.removeListener(v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(v.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(v.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},v.prototype.dispose=function(){v.INSTANCE=null,this.enable(!1),this._isInitialized=!1},v.INSTANCE=null,v.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",v.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",v.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",v._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",v._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",v._canUseUncaughtExceptionMonitor=!1,v}();o.exports=C},8723:(o,C,v)=>{"use strict";var k=v(8605),R=v(7211),S=v(5282),g=v(5740),c=v(9036),u=v(8339),a=v(894),m=v(9962),f=v(8090),d=v(7396),p=function(){function w(y){if(w.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");w.INSTANCE=this,this._client=y}return w.prototype.enable=function(y){this._isEnabled=y,this._isEnabled&&!this._isInitialized&&this._initialize(),d.IsInitialized&&(v(7886).wp(y,this._client),v(4777).wp(y,this._client),v(5071).wp(y,this._client),v(1227).wp(y,this._client))},w.prototype.isInitialized=function(){return this._isInitialized},w.prototype._initialize=function(){var y=this;this._isInitialized=!0;var _=k.get,E=k.request,P=R.request,A=function(O,I){var L=!I[w.disableCollectionRequestOption]&&!O[w.alreadyAutoCollectedFlag];O[w.alreadyAutoCollectedFlag]=!0,O&&I&&L&&(a.CorrelationContextManager.wrapEmitter(O),w.trackRequest(y._client,{options:I,request:O}))};k.request=function(O){for(var I=[],L=1;L<arguments.length;L++)I[L-1]=arguments[L];var D=E.call.apply(E,[k,O].concat(I));return A(D,O),D},R.request=function(O){for(var I=[],L=1;L<arguments.length;L++)I[L-1]=arguments[L];var D=P.call.apply(P,[R,O].concat(I));return A(D,O),D},k.get=function(O){for(var I=[],L=1;L<arguments.length;L++)I[L-1]=arguments[L];var D=(U=k.request).call.apply(U,[k,O].concat(I));return D.end(),D;var U},R.get=function(O){for(var I=[],L=1;L<arguments.length;L++)I[L-1]=arguments[L];var D=(U=R.request).call.apply(U,[R,O].concat(I));return D.end(),D;var U}},w.trackRequest=function(y,_){if(!_.options||!_.request||!y){S.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!_.options,!_.request,!y);return}var E=new u(_.options,_.request),P=a.CorrelationContextManager.getCurrentContext(),A,O;if(P&&P.operation&&P.operation.traceparent&&f.isValidTraceId(P.operation.traceparent.traceId))P.operation.traceparent.updateSpanId(),A=P.operation.traceparent.getBackCompatRequestId();else if(m.w3cEnabled){var I=new f;O=I.toString(),A=I.getBackCompatRequestId()}else A=P&&P.operation&&P.operation.parentId+w.requestNumber+++".";if(g.canIncludeCorrelationHeader(y,E.getUrl())&&_.request.getHeader&&_.request.setHeader&&y.config&&y.config.correlationId){var L=_.request.getHeader(c.requestContextHeader);try{g.safeIncludeCorrelationHeader(y,_.request,L)}catch(M){S.warn("Request-Context header could not be set. Correlation of requests may be lost",M)}if(P&&P.operation)try{if(_.request.setHeader(c.requestIdHeader,A),_.request.setHeader(c.parentIdHeader,P.operation.id),_.request.setHeader(c.rootIdHeader,A),O||P.operation.traceparent)_.request.setHeader(c.traceparentHeader,O||P.operation.traceparent.toString());else if(m.w3cEnabled){var I=new f().toString();_.request.setHeader(c.traceparentHeader,I)}if(P.operation.tracestate){var D=P.operation.tracestate.toString();D&&_.request.setHeader(c.traceStateHeader,D)}var U=P.customProperties.serializeToHeader();U&&_.request.setHeader(c.correlationContextHeader,U)}catch(M){S.warn("Correlation headers could not be set. Correlation of requests may be lost.",M)}}_.request.on&&(_.request.on("response",function(M){E.onResponse(M);var x=E.getDependencyTelemetry(_,A);x.contextObjects=x.contextObjects||{},x.contextObjects["http.RequestOptions"]=_.options,x.contextObjects["http.ClientRequest"]=_.request,x.contextObjects["http.ClientResponse"]=M,y.trackDependency(x)}),_.request.on("error",function(M){E.onError(M);var x=E.getDependencyTelemetry(_,A);x.contextObjects=x.contextObjects||{},x.contextObjects["http.RequestOptions"]=_.options,x.contextObjects["http.ClientRequest"]=_.request,x.contextObjects.Error=M,y.trackDependency(x)}))},w.prototype.dispose=function(){w.INSTANCE=null,this.enable(!1),this._isInitialized=!1},w.disableCollectionRequestOption="disableAppInsightsAutoCollection",w.requestNumber=1,w.alreadyAutoCollectedFlag="_appInsightsAutoCollected",w}();o.exports=p},8339:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var w in p)p.hasOwnProperty(w)&&(d[w]=p[w])};return function(d,p){f(d,p);function w(){this.constructor=d}d.prototype=p===null?Object.create(p):(w.prototype=p.prototype,new w)}}(),R=v(8835),S=v(5290),g=v(5740),c=v(9036),u=v(3054),a=v(9962),m=function(f){k(d,f);function d(p,w){var y=f.call(this)||this;return w&&w.method&&p&&(y.method=w.method,y.url=d._getUrlFromRequestOptions(p,w),y.startTime=+new Date),y}return d.prototype.onError=function(p){this._setStatus(void 0,p)},d.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=g.getCorrelationContextTarget(p,c.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(p,w){var y=R.parse(this.url);y.search=void 0,y.hash=void 0;var _=this.method.toUpperCase()+" "+y.pathname,E=S.RemoteDependencyDataConstants.TYPE_HTTP,P=y.hostname;this.correlationId?(E=S.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==a.correlationIdPrefix&&(P=y.hostname+" | "+this.correlationId)):E=S.RemoteDependencyDataConstants.TYPE_HTTP,y.port&&(P+=":"+y.port);var A={id:w,name:_,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:E,target:P};if(p){for(var O in p)A[O]||(A[O]=p[O]);if(p.properties)for(var O in p.properties)A.properties[O]=p.properties[O]}return A},d._getUrlFromRequestOptions=function(p,w){if(typeof p=="string")p=R.parse(p);else{var y=p;p={},y&&Object.keys(y).forEach(function(P){p[P]=y[P]})}if(p.path){var _=R.parse(p.path);p.pathname=_.pathname,p.search=_.search}if(p.host&&p.port){var E=R.parse("http://"+p.host);!E.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||w.agent&&w.agent.protocol||void 0,p.hostname=p.hostname||"localhost",R.format(p)},d}(u);o.exports=m},6694:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,y){w.__proto__=y}||function(w,y){for(var _ in y)y.hasOwnProperty(_)&&(w[_]=y[_])};return function(w,y){p(w,y);function _(){this.constructor=w}w.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}(),R=v(8835),S=v(5290),g=v(5740),c=v(9036),u=v(3054),a=v(9962),m=v(6333),f=v(8090),d=function(p){k(w,p);function w(y,_){var E=p.call(this)||this;return y&&(E.method=y.method,E.url=E._getAbsoluteUrl(y),E.startTime=+new Date,E.socketRemoteAddress=y.socket&&y.socket.remoteAddress,E.parseHeaders(y,_),y.connection&&(E.connectionRemoteAddress=y.connection.remoteAddress,E.legacySocketRemoteAddress=y.connection.socket&&y.connection.socket.remoteAddress)),E}return w.prototype.onError=function(y,_){this._setStatus(void 0,y),_&&(this.duration=_)},w.prototype.onResponse=function(y,_){this._setStatus(y.statusCode,void 0),_&&(this.duration=_)},w.prototype.getRequestTelemetry=function(y){var _={id:this.requestId,name:this.method+" "+R.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(y){for(var E in y)_[E]||(_[E]=y[E]);if(y.properties)for(var E in y.properties)_.properties[E]=y.properties[E]}return _},w.prototype.getRequestTags=function(y){var _={};for(var E in y)_[E]=y[E];return _[w.keys.locationIp]=y[w.keys.locationIp]||this._getIp(),_[w.keys.sessionId]=y[w.keys.sessionId]||this._getId("ai_session"),_[w.keys.userId]=y[w.keys.userId]||this._getId("ai_user"),_[w.keys.userAuthUserId]=y[w.keys.userAuthUserId]||this._getId("ai_authUser"),_[w.keys.operationName]=this.getOperationName(y),_[w.keys.operationParentId]=this.getOperationParentId(y),_[w.keys.operationId]=this.getOperationId(y),_},w.prototype.getOperationId=function(y){return y[w.keys.operationId]||this.operationId},w.prototype.getOperationParentId=function(y){return y[w.keys.operationParentId]||this.parentId||this.getOperationId(y)},w.prototype.getOperationName=function(y){return y[w.keys.operationName]||this.method+" "+R.parse(this.url).pathname},w.prototype.getRequestId=function(){return this.requestId},w.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},w.prototype.getTraceparent=function(){return this.traceparent},w.prototype.getTracestate=function(){return this.tracestate},w.prototype.getLegacyRootId=function(){return this.legacyRootId},w.prototype._getAbsoluteUrl=function(y){if(!y.headers)return y.url;var _=y.connection?y.connection.encrypted:null,E=R.parse(y.url),P=E.pathname,A=E.search,O=R.format({protocol:_?"https":"http",host:y.headers.host,pathname:P,search:A});return O},w.prototype._getIp=function(){var y=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,_=function(P){var A=y.exec(P);if(A)return A[0]},E=_(this.rawHeaders["x-forwarded-for"])||_(this.rawHeaders["x-client-ip"])||_(this.rawHeaders["x-real-ip"])||_(this.connectionRemoteAddress)||_(this.socketRemoteAddress)||_(this.legacySocketRemoteAddress);return!E&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(E="127.0.0.1"),E},w.prototype._getId=function(y){var _=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",E=w.parseId(g.getCookie(y,_));return E},w.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},w.prototype.parseHeaders=function(y,_){if(this.rawHeaders=y.headers||y.rawHeaders,this.userAgent=y.headers&&y.headers["user-agent"],this.sourceCorrelationId=g.getCorrelationContextTarget(y,c.requestContextSourceKey),y.headers){var E=y.headers[c.traceStateHeader],P=y.headers[c.traceparentHeader],A=y.headers[c.requestIdHeader],O=y.headers[c.parentIdHeader],I=y.headers[c.rootIdHeader];this.correlationContextHeader=y.headers[c.correlationContextHeader],a.w3cEnabled&&(P||E)?(this.traceparent=new f(P),this.tracestate=P&&E&&new m(E),this.setBackCompatFromThisTraceContext()):A?a.w3cEnabled?(this.traceparent=new f(null,A),this.setBackCompatFromThisTraceContext()):(this.parentId=A,this.requestId=a.generateRequestId(this.parentId),this.operationId=a.getRootId(this.requestId)):a.w3cEnabled?(this.traceparent=new f,this.traceparent.parentId=O,this.traceparent.legacyRootId=I||O,this.setBackCompatFromThisTraceContext()):(this.parentId=O,this.requestId=a.generateRequestId(I||this.parentId),this.correlationContextHeader=null,this.operationId=a.getRootId(this.requestId)),_&&(this.requestId=_,this.operationId=a.getRootId(this.requestId))}},w.parseId=function(y){var _=y.split("|");return _.length>0?_[0]:""},w.keys=new S.ContextTagKeys,w}(u);o.exports=d},731:(o,C,v)=>{"use strict";var k=v(8605),R=v(7211),S=v(5282),g=v(5740),c=v(9036),u=v(6694),a=v(894),m=v(4350),f=function(){function d(p){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=p}return d.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||m.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(p,w){p&&!this._isAutoCorrelating?a.CorrelationContextManager.enable(w):!p&&this._isAutoCorrelating&&a.CorrelationContextManager.disable(),this._isAutoCorrelating=p},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(p){if(!!this._isAutoCorrelating)return a.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},d.prototype._initialize=function(){var p=this;this._isInitialized=!0;var w=function(P){if(!!P){if(typeof P!="function")throw new Error("onRequest handler must be a function");return function(A,O){a.CorrelationContextManager.wrapEmitter(A),a.CorrelationContextManager.wrapEmitter(O);var I=A&&!A[d.alreadyAutoCollectedFlag];if(A&&I){var L=new u(A),D=p._generateCorrelationContext(L);a.CorrelationContextManager.runWithContext(D,function(){p._isEnabled&&(A[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(p._client,{request:A,response:O},L)),typeof P=="function"&&P(A,O)})}else typeof P=="function"&&P(A,O)}}},y=function(P){var A=P.addListener.bind(P);P.addListener=function(O,I){switch(O){case"request":case"checkContinue":return A(O,w(I));default:return A(O,I)}},P.on=P.addListener},_=k.createServer;k.createServer=function(P){var A=_(w(P));return y(A),A};var E=R.createServer;R.createServer=function(P,A){var O=E(P,w(A));return y(O),O}},d.trackRequestSync=function(p,w){if(!w.request||!w.response||!p){S.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!w.request,!w.response,!p);return}d.addResponseCorrelationIdHeader(p,w.response);var y=a.CorrelationContextManager.getCurrentContext(),_=new u(w.request,y&&y.operation.parentId);y&&(y.operation.id=_.getOperationId(p.context.tags)||y.operation.id,y.operation.name=_.getOperationName(p.context.tags)||y.operation.name,y.operation.parentId=_.getRequestId()||y.operation.parentId,y.customProperties.addHeaderData(_.getCorrelationContextHeader())),d.endRequest(p,_,w,w.duration,w.error)},d.trackRequest=function(p,w,y){if(!w.request||!w.response||!p){S.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!w.request,!w.response,!p);return}var _=a.CorrelationContextManager.getCurrentContext(),E=y||new u(w.request,_&&_.operation.parentId);g.canIncludeCorrelationHeader(p,E.getUrl())&&d.addResponseCorrelationIdHeader(p,w.response),_&&!y&&(_.operation.id=E.getOperationId(p.context.tags)||_.operation.id,_.operation.name=E.getOperationName(p.context.tags)||_.operation.name,_.operation.parentId=E.getOperationParentId(p.context.tags)||_.operation.parentId,_.customProperties.addHeaderData(E.getCorrelationContextHeader())),w.response.once&&w.response.once("finish",function(){d.endRequest(p,E,w,null,null)}),w.request.on&&w.request.on("error",function(P){d.endRequest(p,E,w,null,P)})},d.addResponseCorrelationIdHeader=function(p,w){if(p.config&&p.config.correlationId&&w.getHeader&&w.setHeader&&!w.headersSent){var y=w.getHeader(c.requestContextHeader);g.safeIncludeCorrelationHeader(p,w,y)}},d.endRequest=function(p,w,y,_,E){E?w.onError(E,_):w.onResponse(y.response,_);var P=w.getRequestTelemetry(y);if(P.tagOverrides=w.getRequestTags(p.context.tags),y.tagOverrides)for(var A in y.tagOverrides)P.tagOverrides[A]=y.tagOverrides[A];var O=w.getLegacyRootId();O&&(P.properties.ai_legacyRootId=O),P.contextObjects=P.contextObjects||{},P.contextObjects["http.ServerRequest"]=y.request,P.contextObjects["http.ServerResponse"]=y.response,p.trackRequest(P)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,a.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();o.exports=f},1629:function(o,C,v){"use strict";var k=this&&this.__assign||Object.assign||function(u){for(var a,m=1,f=arguments.length;m<f;m++){a=arguments[m];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(u[d]=a[d])}return u};Object.defineProperty(C,"__esModule",{value:!0});var R=v(9253),S=v(4470),g=v(5282),c=function(){function u(a){this._disabledMetrics={},u.INSTANCE&&u.INSTANCE.dispose(),u.INSTANCE=this,this._client=a}return u.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},u.prototype.enable=function(a,m,f){var d=this;if(m===void 0&&(m={}),f===void 0&&(f=6e4),!!u.isNodeVersionCompatible()){if(u._metricsAvailable==null&&a&&!this._isInitialized)try{var p=v(6591);u._emitter=new p,u._metricsAvailable=!0,g.info("Native metrics module successfully loaded!")}catch(w){u._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=m,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&u._emitter?(u._emitter.enable(!0,f),this._handle=setInterval(function(){return d._trackNativeMetrics()},f),this._handle.unref()):u._emitter&&(u._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},u.prototype.dispose=function(){this.enable(!1)},u.parseEnabled=function(a){var m=process.env[R.ENV_nativeMetricsDisableAll],f=process.env[R.ENV_nativeMetricsDisablers];if(m)return{isEnabled:!1,disabledMetrics:{}};if(f){var d=f.split(","),p={};if(d.length>0)for(var w=0,y=d;w<y.length;w++){var _=y[w];p[_]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:k({},a,p)}:{isEnabled:a,disabledMetrics:p}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},u.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},u.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var a=u._emitter.getGCData();for(var m in a){var f=a[m].metrics,d=m+" Garbage Collection Duration",p=Math.sqrt(f.sumSquares/f.count-Math.pow(f.total/f.count,2))||0;this._client.trackMetric({name:d,value:f.total,count:f.count,max:f.max,min:f.min,stdDev:p,tagOverrides:(w={},w[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+S.sdkVersion,w)})}var w}},u.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var a=u._emitter.getLoopData(),m=a.loopUsage;if(m.count!=0){var f="Event Loop CPU Time",d=Math.sqrt(m.sumSquares/m.count-Math.pow(m.total/m.count,2))||0;this._client.trackMetric({name:f,value:m.total,count:m.count,min:m.min,max:m.max,stdDev:d,tagOverrides:(p={},p[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+S.sdkVersion,p)});var p}}},u.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var a=process.memoryUsage(),m=a.heapUsed,f=a.heapTotal,d=a.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:m,count:1,tagOverrides:(p={},p[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+S.sdkVersion,p)}),this._client.trackMetric({name:"Memory Total (Heap)",value:f,count:1,tagOverrides:(w={},w[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+S.sdkVersion,w)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:d-f,count:1,tagOverrides:(y={},y[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+S.sdkVersion,y)});var p,w,y}},u}();C.AutoCollectNativePerformance=c},4350:(o,C,v)=>{"use strict";var k=v(2087),R=v(3580),S=function(){function g(c,u,a){u===void 0&&(u=6e4),a===void 0&&(a=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,g.INSTANCE||(g.INSTANCE=this),this._isInitialized=!1,this._client=c,this._collectionInterval=u,this._enableLiveMetricsCounters=a}return g.prototype.enable=function(c,u){var a=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._lastCpus=k.cpus(),this._lastRequests={totalRequestCount:g._totalRequestCount,totalFailedRequestCount:g._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:g._totalDependencyCount,totalFailedDependencyCount:g._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:g._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=u||this._collectionInterval,this._handle=setInterval(function(){return a.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},g.countRequest=function(c,u){var a;if(!!g.isEnabled()){if(typeof c=="string")a=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")a=c;else return;g._intervalRequestExecutionTime+=a,u===!1&&g._totalFailedRequestCount++,g._totalRequestCount++}},g.countException=function(){g._totalExceptionCount++},g.countDependency=function(c,u){var a;if(!!g.isEnabled()){if(typeof c=="string")a=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")a=c;else return;g._intervalDependencyExecutionTime+=a,u===!1&&g._totalFailedDependencyCount++,g._totalDependencyCount++}},g.prototype.isInitialized=function(){return this._isInitialized},g.isEnabled=function(){return g.INSTANCE&&g.INSTANCE._isEnabled},g.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},g.prototype._trackCpu=function(){var c=k.cpus();if(c&&c.length&&this._lastCpus&&c.length===this._lastCpus.length){for(var u=0,a=0,m=0,f=0,d=0,p=0;!!c&&p<c.length;p++){var w=c[p],y=this._lastCpus[p],_="% cpu("+p+") ",E=w.model,P=w.speed,A=w.times,O=y.times,I=A.user-O.user||0;u+=I;var L=A.sys-O.sys||0;a+=L;var D=A.nice-O.nice||0;m+=D;var U=A.idle-O.idle||0;f+=U;var M=A.irq-O.irq||0;d+=M}var x=void 0;if(typeof process.cpuUsage=="function"){var F=process.cpuUsage(),H=process.hrtime(),B=F.user-this._lastAppCpuUsage.user+(F.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var j=(H[0]-this._lastHrtime[0])*1e6+(H[1]-this._lastHrtime[1])/1e3||0;x=100*B/(j*c.length)}this._lastAppCpuUsage=F,this._lastHrtime=H}var W=u+a+m+f+d||1;this._client.trackMetric({name:R.PerformanceCounter.PROCESSOR_TIME,value:(W-f)/W*100}),this._client.trackMetric({name:R.PerformanceCounter.PROCESS_TIME,value:x||u/W*100})}this._lastCpus=c},g.prototype._trackMemory=function(){var c=k.freemem(),u=process.memoryUsage().rss,a=k.totalmem()-c;this._client.trackMetric({name:R.PerformanceCounter.PRIVATE_BYTES,value:u}),this._client.trackMetric({name:R.PerformanceCounter.AVAILABLE_BYTES,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:R.QuickPulseCounter.COMMITTED_BYTES,value:a})},g.prototype._trackNetwork=function(){var c=this._lastRequests,u={totalRequestCount:g._totalRequestCount,totalFailedRequestCount:g._totalFailedRequestCount,time:+new Date},a=u.totalRequestCount-c.totalRequestCount||0,m=u.totalFailedRequestCount-c.totalFailedRequestCount||0,f=u.time-c.time,d=f/1e3,p=(g._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/a||0;if(this._lastIntervalRequestExecutionTime=g._intervalRequestExecutionTime,f>0){var w=a/d,y=m/d;this._client.trackMetric({name:R.PerformanceCounter.REQUEST_RATE,value:w}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:R.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:R.QuickPulseCounter.REQUEST_FAILURE_RATE,value:y})}this._lastRequests=u},g.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var c=this._lastDependencies,u={totalDependencyCount:g._totalDependencyCount,totalFailedDependencyCount:g._totalFailedDependencyCount,time:+new Date},a=u.totalDependencyCount-c.totalDependencyCount||0,m=u.totalFailedDependencyCount-c.totalFailedDependencyCount||0,f=u.time-c.time,d=f/1e3,p=(g._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/a||0;if(this._lastIntervalDependencyExecutionTime=g._intervalDependencyExecutionTime,f>0){var w=a/d,y=m/d;this._client.trackMetric({name:R.QuickPulseCounter.DEPENDENCY_RATE,value:w}),this._client.trackMetric({name:R.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:y}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:R.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=u}},g.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var c=this._lastExceptions,u={totalExceptionCount:g._totalExceptionCount,time:+new Date},a=u.totalExceptionCount-c.totalExceptionCount||0,m=u.time-c.time,f=m/1e3;if(m>0){var d=a/f;this._client.trackMetric({name:R.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=u}},g.prototype.dispose=function(){g.INSTANCE=null,this.enable(!1),this._isInitialized=!1},g._totalRequestCount=0,g._totalFailedRequestCount=0,g._lastRequestExecutionTime=0,g._totalDependencyCount=0,g._totalFailedDependencyCount=0,g._lastDependencyExecutionTime=0,g._totalExceptionCount=0,g._intervalDependencyExecutionTime=0,g._intervalRequestExecutionTime=0,g}();o.exports=S},3054:o=>{"use strict";var C=function(){function v(){}return v.prototype.getUrl=function(){return this.url},v.prototype.RequestParser=function(){this.startTime=+new Date},v.prototype._setStatus=function(k,R){var S=+new Date;this.duration=S-this.startTime,this.statusCode=k;var g=this.properties||{};if(R){if(typeof R=="string")g.error=R;else if(R instanceof Error)g.error=R.message;else if(typeof R=="object")for(var c in R)g[c]=R[c]&&R[c].toString&&R[c].toString()}this.properties=g},v.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},v}();o.exports=C},5823:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(5290),S=v(4953),g=[],c={10:R.SeverityLevel.Verbose,20:R.SeverityLevel.Verbose,30:R.SeverityLevel.Information,40:R.SeverityLevel.Warning,50:R.SeverityLevel.Error,60:R.SeverityLevel.Critical},u=function(f){var d=f.data.result;g.forEach(function(p){var w=c[f.data.level];d instanceof Error?p.trackException({exception:d}):p.trackTrace({message:d,severity:w})})};function a(f,d){f?(g.length===0&&S.channel.subscribe("bunyan",u),g.push(d)):(g=g.filter(function(p){return p!=d}),g.length===0&&S.channel.unsubscribe("bunyan",u))}C.wp=a;function m(){S.channel.unsubscribe("bunyan",u),g=[]}k=m},4309:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(5290),S=v(4953),g=[],c=function(m){var f=m.data.message;g.forEach(function(d){f instanceof Error?d.trackException({exception:f}):(f.lastIndexOf(`
`)==f.length-1&&(f=f.substring(0,f.length-1)),d.trackTrace({message:f,severity:m.data.stderr?R.SeverityLevel.Warning:R.SeverityLevel.Information}))})};function u(m,f){m?(g.length===0&&S.channel.subscribe("console",c),g.push(f)):(g=g.filter(function(d){return d!=f}),g.length===0&&S.channel.unsubscribe("console",c))}C.wp=u;function a(){S.channel.unsubscribe("console",c),g=[]}k=a},7396:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(5282);C.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var R="DiagnosticChannel";if(C.IsInitialized){var S=v(4106),g=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",c=g.split(","),u={bunyan:S.bunyan,console:S.console,mongodb:S.mongodb,mongodbCore:S.mongodbCore,mysql:S.mysql,redis:S.redis,pg:S.pg,pgPool:S.pgPool,winston:S.winston};for(var a in u)c.indexOf(a)===-1&&(u[a].enable(),k.info(R,"Subscribed to "+a+" events"));c.length>0&&k.info(R,"Some modules will not be patched",c)}else k.info(R,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");function m(f){!C.IsInitialized||v(4953).channel.addContextPreservation(f)}C.registerContextPreservation=m},7886:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(4953),S=[];C.qP=function(c){c.data.event.commandName==="ismaster",S.forEach(function(u){var a=c.data.startedData&&c.data.startedData.databaseName||"Unknown database";u.trackDependency({target:a,data:c.data.event.commandName,name:c.data.event.commandName,duration:c.data.event.duration,success:c.data.succeeded,resultCode:c.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})};function g(c,u){c?(S.length===0&&R.channel.subscribe("mongodb",C.qP),S.push(u)):(S=S.filter(function(a){return a!=u}),S.length===0&&R.channel.unsubscribe("mongodb",C.qP))}C.wp=g},4777:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(4953),S=[];C.qP=function(c){S.forEach(function(u){var a=c.data.query||{},m=a.sql||"Unknown query",f=!c.data.err,d=a._connection||{},p=d.config||{},w=p.socketPath?p.socketPath:(p.host||"localhost")+":"+p.port;u.trackDependency({target:w,data:m,name:m,duration:c.data.duration,success:f,resultCode:f?"0":"1",dependencyTypeName:"mysql"})})};function g(c,u){c?(S.length===0&&R.channel.subscribe("mysql",C.qP),S.push(u)):(S=S.filter(function(a){return a!=u}),S.length===0&&R.channel.unsubscribe("mysql",C.qP))}C.wp=g},1227:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(4953),S=[];C.qP=function(c){S.forEach(function(u){var a=c.data.query,m=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",f=!c.data.error,d=c.data.database.host+":"+c.data.database.port;u.trackDependency({target:d,data:m,name:m,duration:c.data.duration,success:f,resultCode:f?"0":"1",dependencyTypeName:"postgres"})})};function g(c,u){c?(S.length===0&&R.channel.subscribe("postgres",C.qP),S.push(u)):(S=S.filter(function(a){return a!=u}),S.length===0&&R.channel.unsubscribe("postgres",C.qP))}C.wp=g},5071:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(4953),S=[];C.qP=function(c){S.forEach(function(u){c.data.commandObj.command!=="info"&&u.trackDependency({target:c.data.address,name:c.data.commandObj.command,data:c.data.commandObj.command,duration:c.data.duration,success:!c.data.err,resultCode:c.data.err?"1":"0",dependencyTypeName:"redis"})})};function g(c,u){c?(S.length===0&&R.channel.subscribe("redis",C.qP),S.push(u)):(S=S.filter(function(a){return a!=u}),S.length===0&&R.channel.unsubscribe("redis",C.qP))}C.wp=g},454:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(5290),S=v(4953),g=[],c={syslog:function(f){var d={emerg:R.SeverityLevel.Critical,alert:R.SeverityLevel.Critical,crit:R.SeverityLevel.Critical,error:R.SeverityLevel.Error,warning:R.SeverityLevel.Warning,notice:R.SeverityLevel.Information,info:R.SeverityLevel.Information,debug:R.SeverityLevel.Verbose};return d[f]===void 0?R.SeverityLevel.Information:d[f]},npm:function(f){var d={error:R.SeverityLevel.Error,warn:R.SeverityLevel.Warning,info:R.SeverityLevel.Information,verbose:R.SeverityLevel.Verbose,debug:R.SeverityLevel.Verbose,silly:R.SeverityLevel.Verbose};return d[f]===void 0?R.SeverityLevel.Information:d[f]},unknown:function(f){return R.SeverityLevel.Information}},u=function(f){var d=f.data.message;g.forEach(function(p){if(d instanceof Error)p.trackException({exception:d,properties:f.data.meta});else{var w=c[f.data.levelKind](f.data.level);p.trackTrace({message:d,severity:w,properties:f.data.meta})}})};function a(f,d){f?(g.length===0&&S.channel.subscribe("winston",u),g.push(d)):(g=g.filter(function(p){return p!=d}),g.length===0&&S.channel.unsubscribe("winston",u))}C.wp=a;function m(){S.channel.unsubscribe("winston",u),g=[]}k=m},3580:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",C.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",C.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var v;(function(S){S.COMMITTED_BYTES="\\Memory\\Committed Bytes",S.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",S.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",S.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",S.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",S.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",S.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",S.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",S.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(v=C.QuickPulseCounter||(C.QuickPulseCounter={}));var k;(function(S){S.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",S.AVAILABLE_BYTES="\\Memory\\Available Bytes",S.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",S.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",S.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",S.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(k=C.PerformanceCounter||(C.PerformanceCounter={})),C.PerformanceToQuickPulseCounter=(R={},R[k.PROCESSOR_TIME]=v.PROCESSOR_TIME,R[k.REQUEST_RATE]=v.REQUEST_RATE,R[k.REQUEST_DURATION]=v.REQUEST_DURATION,R[v.COMMITTED_BYTES]=v.COMMITTED_BYTES,R[v.REQUEST_FAILURE_RATE]=v.REQUEST_FAILURE_RATE,R[v.DEPENDENCY_RATE]=v.DEPENDENCY_RATE,R[v.DEPENDENCY_FAILURE_RATE]=v.DEPENDENCY_FAILURE_RATE,R[v.DEPENDENCY_DURATION]=v.DEPENDENCY_DURATION,R[v.EXCEPTION_RATE]=v.EXCEPTION_RATE,R),C.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability"},C.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument"},C.TelemetryTypeStringToQuickPulseType={EventData:C.QuickPulseType.Event,ExceptionData:C.QuickPulseType.Exception,MessageData:C.QuickPulseType.Trace,MetricData:C.QuickPulseType.Metric,RequestData:C.QuickPulseType.Request,RemoteDependencyData:C.QuickPulseType.Dependency,AvailabilityData:C.QuickPulseType.Availability},C.TelemetryTypeStringToQuickPulseDocumentType={EventData:C.QuickPulseDocumentType.Event,ExceptionData:C.QuickPulseDocumentType.Exception,MessageData:C.QuickPulseDocumentType.Trace,MetricData:C.QuickPulseDocumentType.Metric,RequestData:C.QuickPulseDocumentType.Request,RemoteDependencyData:C.QuickPulseDocumentType.Dependency,AvailabilityData:C.QuickPulseDocumentType.Availability};var R},9382:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(9958),R=function(){function g(){}return g.TYPE_HTTP="Http",g.TYPE_AI="Http (tracked component)",g}();C.RemoteDependencyDataConstants=R;function S(g){return"properties"in g||g instanceof k.EventData||g instanceof k.ExceptionData||g instanceof k.MessageData||g instanceof k.MetricData||g instanceof k.PageViewData||g instanceof k.RemoteDependencyData||g instanceof k.RequestData}C.domainSupportsProperties=S},7220:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(8934),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(R);o.exports=S},4101:o=>{"use strict";var C=function(){function v(){}return v}();o.exports=C},9871:o=>{"use strict";var C=function(){function v(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return v}();o.exports=C},320:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(4101),S=function(g){k(c,g);function c(){return g.call(this)||this}return c}(R);o.exports=S},8602:(o,C,v)=>{"use strict";var k=v(495),R=function(){function S(){this.kind=k.Measurement}return S}();o.exports=R},495:o=>{"use strict";var C;(function(v){v[v.Measurement=0]="Measurement",v[v.Aggregation=1]="Aggregation"})(C||(C={})),o.exports=C},8934:o=>{"use strict";var C=function(){function v(){}return v}();o.exports=C},7300:o=>{"use strict";var C=function(){function v(){this.ver=1,this.sampleRate=100,this.tags={}}return v}();o.exports=C},4526:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(8934),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(R);o.exports=S},935:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(8934),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.exceptions=[],u.properties={},u.measurements={},u}return c}(R);o.exports=S},8082:o=>{"use strict";var C=function(){function v(){this.hasFullStack=!0,this.parsedStack=[]}return v}();o.exports=C},901:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(8934),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.properties={},u}return c}(R);o.exports=S},3092:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(8934),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.metrics=[],u.properties={},u}return c}(R);o.exports=S},6279:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(4526),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(R);o.exports=S},6290:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(8934),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.success=!0,u.properties={},u.measurements={},u}return c}(R);o.exports=S},7339:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var a in u)u.hasOwnProperty(a)&&(c[a]=u[a])};return function(c,u){g(c,u);function a(){this.constructor=c}c.prototype=u===null?Object.create(u):(a.prototype=u.prototype,new a)}}(),R=v(8934),S=function(g){k(c,g);function c(){var u=g.call(this)||this;return u.ver=2,u.properties={},u.measurements={},u}return c}(R);o.exports=S},9697:o=>{"use strict";var C;(function(v){v[v.Verbose=0]="Verbose",v[v.Information=1]="Information",v[v.Warning=2]="Warning",v[v.Error=3]="Error",v[v.Critical=4]="Critical"})(C||(C={})),o.exports=C},6376:o=>{"use strict";var C=function(){function v(){}return v}();o.exports=C},9958:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.AvailabilityData=v(7220),C.Base=v(4101),C.ContextTagKeys=v(9871),C.Data=v(320),C.DataPoint=v(8602),C.DataPointType=v(495),C.Domain=v(8934),C.Envelope=v(7300),C.EventData=v(4526),C.ExceptionData=v(935),C.ExceptionDetails=v(8082),C.MessageData=v(901),C.MetricData=v(3092),C.PageViewData=v(6279),C.RemoteDependencyData=v(6290),C.RequestData=v(7339),C.SeverityLevel=v(9697),C.StackFrame=v(6376)},5481:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});function v(S){switch(S){case R.Event:return"EventData";case R.Exception:return"ExceptionData";case R.Trace:return"MessageData";case R.Metric:return"MetricData";case R.Request:return"RequestData";case R.Dependency:return"RemoteDependencyData";case R.Availability:return"AvailabilityData"}}C.telemetryTypeToBaseType=v;function k(S){switch(S){case"EventData":return R.Event;case"ExceptionData":return R.Exception;case"MessageData":return R.Trace;case"MetricData":return R.Metric;case"RequestData":return R.Request;case"RemoteDependencyData":return R.Dependency;case"AvailabilityData":return R.Availability}}C.baseTypeToTelemetryType=k,C.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData"};var R;(function(S){S[S.Event=0]="Event",S[S.Exception=1]="Exception",S[S.Trace=2]="Trace",S[S.Metric=3]="Metric",S[S.Request=4]="Request",S[S.Dependency=5]="Dependency",S[S.Availability=6]="Availability"})(R=C.TelemetryType||(C.TelemetryType={}))},2626:(o,C,v)=>{"use strict";function k(R){for(var S in R)C.hasOwnProperty(S)||(C[S]=R[S])}Object.defineProperty(C,"__esModule",{value:!0}),k(v(5481))},5290:(o,C,v)=>{"use strict";function k(R){for(var S in R)C.hasOwnProperty(S)||(C[S]=R[S])}Object.defineProperty(C,"__esModule",{value:!0}),k(v(9382)),k(v(9958)),k(v(2626))},3504:(o,C,v)=>{"use strict";var k=v(5282),R=function(){function S(g,c,u,a){this._buffer=[],this._lastSend=0,this._isDisabled=g,this._getBatchSize=c,this._getBatchIntervalMs=u,this._sender=a}return S.prototype.setUseDiskRetryCaching=function(g,c,u){this._sender.setDiskRetryMode(g,c,u)},S.prototype.send=function(g){var c=this;if(!this._isDisabled()){if(!g){k.warn("Cannot send null/undefined telemetry");return}var u=this._stringify(g);if(typeof u=="string"){if(this._buffer.push(u),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){c._timeoutHandle=null,c.triggerSend(!1)},this._getBatchIntervalMs()))}}},S.prototype.triggerSend=function(g,c){var u=this._buffer.length<1;if(!u){var a=this._buffer.join(`
`);g?(this._sender.saveOnCrash(a),typeof c=="function"&&c("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(a):new Buffer(a),c)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,u&&typeof c=="function"&&c("no data to send")},S.prototype._stringify=function(g){try{return JSON.stringify(g)}catch(c){k.warn("Failed to serialize payload",c,g)}},S}();o.exports=R},9253:(o,C,v)=>{"use strict";var k=v(9962),R=v(5158),S=v(3580),g=v(8835),c=function(){function u(a){var m=this;this.endpointBase=S.DEFAULT_BREEZE_ENDPOINT;var f=process.env[u.ENV_connectionString],d=R.parse(a),p=R.parse(f),w=!d.instrumentationkey&&Object.keys(d).length>0?null:a;this.instrumentationKey=d.instrumentationkey||w||p.instrumentationkey||u._getInstrumentationKey(),this.endpointUrl=(d.ingestionendpoint||p.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(y){return m.correlationId=y},this.proxyHttpUrl=process.env[u.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[u.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=d.ingestionendpoint||p.ingestionendpoint||process.env[u.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=d.liveendpoint||p.liveendpoint||process.env[u.ENV_quickPulseHost]||S.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=g.parse(this._quickPulseHost).host)}return Object.defineProperty(u.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(a){k.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=a,this.correlationId=k.correlationIdPrefix,k.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(a){this._quickPulseHost=a},enumerable:!0,configurable:!0}),u._getInstrumentationKey=function(){var a=process.env[u.ENV_iKey]||process.env[u.ENV_azurePrefix+u.ENV_iKey]||process.env[u.legacy_ENV_iKey]||process.env[u.ENV_azurePrefix+u.legacy_ENV_iKey];if(!a||a=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return a},u.ENV_azurePrefix="APPSETTING_",u.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",u.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",u.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",u.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",u.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",u.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",u.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",u.ENV_http_proxy="http_proxy",u.ENV_https_proxy="https_proxy",u}();o.exports=c},5158:(o,C,v)=>{"use strict";var k=v(3580),R=function(){function S(){}return S.parse=function(g){if(!g)return{};var c=g.split(S._FIELDS_SEPARATOR),u=c.reduce(function(m,f){var d=f.split(S._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var p=d[0].toLowerCase(),w=d[1];m[p]=w}return m},{});if(Object.keys(u).length>0){if(u.endpointsuffix){var a=u.location?u.location+".":"";u.ingestionendpoint=u.ingestionendpoint||"https://"+a+"dc."+u.endpointsuffix,u.liveendpoint=u.liveendpoint||"https://"+a+"live."+u.endpointsuffix}u.ingestionendpoint=u.ingestionendpoint||k.DEFAULT_BREEZE_ENDPOINT,u.liveendpoint=u.liveendpoint||k.DEFAULT_LIVEMETRICS_ENDPOINT}return u},S._FIELDS_SEPARATOR=";",S._FIELD_KEY_VALUE_SEPARATOR="=",S}();o.exports=R},4470:(o,C,v)=>{"use strict";var k=v(2087),R=v(5747),S=v(5622),g=v(5290),c=v(5282),u=function(){function a(m){this.keys=new g.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return a.prototype._loadApplicationContext=function(m){if(m=m||S.resolve(__dirname,"../../../../package.json"),!a.appVersion[m]){a.appVersion[m]="unknown";try{var f=JSON.parse(R.readFileSync(m,"utf8"));f&&typeof f.version=="string"&&(a.appVersion[m]=f.version)}catch(d){c.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=a.appVersion[m]},a.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=k&&k.hostname(),this.tags[this.keys.deviceOSVersion]=k&&k.type()+" "+k.release(),this.tags[this.keys.cloudRole]=a.DefaultRoleName,this.tags["ai.device.osArchitecture"]=k&&k.arch(),this.tags["ai.device.osPlatform"]=k&&k.platform()},a.prototype._loadInternalContext=function(){var m=S.resolve(__dirname,"../../package.json");if(!a.sdkVersion){a.sdkVersion="unknown";try{var f=JSON.parse(R.readFileSync(m,"utf8"));f&&typeof f.version=="string"&&(a.sdkVersion=f.version)}catch(d){c.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+a.sdkVersion},a.DefaultRoleName="Web",a.appVersion={},a.sdkVersion=null,a}();o.exports=u},9962:(o,C,v)=>{"use strict";var k=v(5740),R=v(5282),S=function(){function g(){}return g.queryCorrelationId=function(c,u){var a=c.profileQueryEndpoint+"/api/profiles/"+c.instrumentationKey+"/appId";if(g.completedLookups.hasOwnProperty(a)){u(g.completedLookups[a]);return}else if(g.pendingLookups[a]){g.pendingLookups[a].push(u);return}g.pendingLookups[a]=[u];var m=function(){if(!!g.pendingLookups[a]){var f={method:"GET",disableAppInsightsAutoCollection:!0};R.info(g.TAG,f);var d=k.makeRequest(c,a,f,function(p){if(p.statusCode===200){var w="";p.setEncoding("utf-8"),p.on("data",function(y){w+=y}),p.on("end",function(){R.info(g.TAG,w);var y=g.correlationIdPrefix+w;g.completedLookups[a]=y,g.pendingLookups[a]&&g.pendingLookups[a].forEach(function(_){return _(y)}),delete g.pendingLookups[a]})}else p.statusCode>=400&&p.statusCode<500?(g.completedLookups[a]=void 0,delete g.pendingLookups[a]):setTimeout(m,c.correlationIdRetryIntervalMs)});d&&(d.on("error",function(p){R.warn(g.TAG,p)}),d.end())}};setTimeout(m,0)},g.cancelCorrelationIdQuery=function(c,u){var a=c.profileQueryEndpoint+"/api/profiles/"+c.instrumentationKey+"/appId",m=g.pendingLookups[a];m&&(g.pendingLookups[a]=m.filter(function(f){return f!=u}),g.pendingLookups[a].length==0&&delete g.pendingLookups[a])},g.generateRequestId=function(c){if(c){c=c[0]=="|"?c:"|"+c,c[c.length-1]!=="."&&(c+=".");var u=(g.currentRootId++).toString(16);return g.appendSuffix(c,u,"_")}else return g.generateRootId()},g.getRootId=function(c){var u=c.indexOf(".");u<0&&(u=c.length);var a=c[0]==="|"?1:0;return c.substring(a,u)},g.generateRootId=function(){return"|"+k.w3cTraceId()+"."},g.appendSuffix=function(c,u,a){if(c.length+u.length<g.requestIdMaxLength)return c+u+a;var m=g.requestIdMaxLength-9;if(c.length>m)for(;m>1;--m){var f=c[m-1];if(f==="."||f==="_")break}if(m<=1)return g.generateRootId();for(u=k.randomu32().toString(16);u.length<8;)u="0"+u;return c.substring(0,m)+u+"#"},g.TAG="CorrelationIdManager",g.correlationIdPrefix="cid-v1:",g.w3cEnabled=!1,g.pendingLookups={},g.completedLookups={},g.requestIdMaxLength=1024,g.currentRootId=k.randomu32(),g}();o.exports=S},9813:(o,C,v)=>{"use strict";var k=v(5290),R=v(5740),S=v(894),g=function(){function u(){}return u.createEnvelope=function(a,m,f,d,p){var w=null;switch(m){case k.TelemetryType.Trace:w=u.createTraceData(a);break;case k.TelemetryType.Dependency:w=u.createDependencyData(a);break;case k.TelemetryType.Event:w=u.createEventData(a);break;case k.TelemetryType.Exception:w=u.createExceptionData(a);break;case k.TelemetryType.Request:w=u.createRequestData(a);break;case k.TelemetryType.Metric:w=u.createMetricData(a);break;case k.TelemetryType.Availability:w=u.createAvailabilityData(a);break}if(f&&k.domainSupportsProperties(w.baseData)){if(w&&w.baseData)if(!w.baseData.properties)w.baseData.properties=f;else for(var y in f)w.baseData.properties[y]||(w.baseData.properties[y]=f[y]);w.baseData.properties=R.validateStringMap(w.baseData.properties)}var _=p&&p.instrumentationKey||"",E=new k.Envelope;return E.data=w,E.iKey=_,E.name="Microsoft.ApplicationInsights."+_.replace(/-/g,"")+"."+w.baseType.substr(0,w.baseType.length-4),E.tags=this.getTags(d,a.tagOverrides),E.time=new Date().toISOString(),E.ver=1,E.sampleRate=p?p.samplingPercentage:100,m===k.TelemetryType.Metric&&(E.sampleRate=100),E},u.createTraceData=function(a){var m=new k.MessageData;m.message=a.message,m.properties=a.properties,isNaN(a.severity)?m.severityLevel=k.SeverityLevel.Information:m.severityLevel=a.severity;var f=new k.Data;return f.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Trace),f.baseData=m,f},u.createDependencyData=function(a){var m=new k.RemoteDependencyData;typeof a.name=="string"&&(m.name=a.name.length>1024?a.name.slice(0,1021)+"...":a.name),m.data=a.data,m.target=a.target,m.duration=R.msToTimeSpan(a.duration),m.success=a.success,m.type=a.dependencyTypeName,m.properties=a.properties,m.resultCode=a.resultCode?a.resultCode+"":"",a.id?m.id=a.id:m.id=R.w3cTraceId();var f=new k.Data;return f.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Dependency),f.baseData=m,f},u.createEventData=function(a){var m=new k.EventData;m.name=a.name,m.properties=a.properties,m.measurements=a.measurements;var f=new k.Data;return f.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Event),f.baseData=m,f},u.createExceptionData=function(a){var m=new k.ExceptionData;m.properties=a.properties,isNaN(a.severity)?m.severityLevel=k.SeverityLevel.Error:m.severityLevel=a.severity,m.measurements=a.measurements,m.exceptions=[];var f=a.exception.stack,d=new k.ExceptionDetails;d.message=a.exception.message,d.typeName=a.exception.name,d.parsedStack=this.parseStack(f),d.hasFullStack=R.isArray(d.parsedStack)&&d.parsedStack.length>0,m.exceptions.push(d);var p=new k.Data;return p.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Exception),p.baseData=m,p},u.createRequestData=function(a){var m=new k.RequestData;a.id?m.id=a.id:m.id=R.w3cTraceId(),m.name=a.name,m.url=a.url,m.source=a.source,m.duration=R.msToTimeSpan(a.duration),m.responseCode=a.resultCode?a.resultCode+"":"",m.success=a.success,m.properties=a.properties;var f=new k.Data;return f.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Request),f.baseData=m,f},u.createMetricData=function(a){var m=new k.MetricData;m.metrics=[];var f=new k.DataPoint;f.count=isNaN(a.count)?1:a.count,f.kind=k.DataPointType.Aggregation,f.max=isNaN(a.max)?a.value:a.max,f.min=isNaN(a.min)?a.value:a.min,f.name=a.name,f.stdDev=isNaN(a.stdDev)?0:a.stdDev,f.value=a.value,m.metrics.push(f),m.properties=a.properties;var d=new k.Data;return d.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Metric),d.baseData=m,d},u.createAvailabilityData=function(a){var m=new k.AvailabilityData;a.id?m.id=a.id:m.id=R.w3cTraceId(),m.name=a.name,m.duration=R.msToTimeSpan(a.duration),m.success=a.success,m.runLocation=a.runLocation,m.message=a.message,m.measurements=a.measurements,m.properties=a.properties;var f=new k.Data;return f.baseType=k.telemetryTypeToBaseType(k.TelemetryType.Availability),f.baseData=m,f},u.getTags=function(a,m){var f=S.CorrelationContextManager.getCurrentContext(),d={};if(a&&a.tags)for(var p in a.tags)d[p]=a.tags[p];if(m)for(var p in m)d[p]=m[p];return f&&(d[a.keys.operationId]=d[a.keys.operationId]||f.operation.id,d[a.keys.operationName]=d[a.keys.operationName]||f.operation.name,d[a.keys.operationParentId]=d[a.keys.operationParentId]||f.operation.parentId),d},u.parseStack=function(a){var m=void 0;if(typeof a=="string"){var f=a.split(`
`);m=[];for(var d=0,p=0,w=0;w<=f.length;w++){var y=f[w];if(c.regex.test(y)){var _=new c(f[w],d++);p+=_.sizeInBytes,m.push(_)}}var E=32*1024;if(p>E)for(var P=0,A=m.length-1,O=0,I=P,L=A;P<A;){var D=m[P].sizeInBytes,U=m[A].sizeInBytes;if(O+=D+U,O>E){var M=L-I+1;m.splice(I,M);break}I=P,L=A,P++,A--}}return m},u}(),c=function(){function u(a,m){this.sizeInBytes=0,this.level=m,this.method="<no_method>",this.assembly=R.trim(a);var f=a.match(u.regex);f&&f.length>=5&&(this.method=R.trim(f[2])||this.method,this.fileName=R.trim(f[4])||"<no_filename>",this.line=parseInt(f[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=u.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return u.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,u.baseSize=58,u}();o.exports=g},5282:o=>{"use strict";var C=function(){function v(){}return v.info=function(k){for(var R=[],S=1;S<arguments.length;S++)R[S-1]=arguments[S];v.enableDebug&&console.info(v.TAG+k,R)},v.warn=function(k){for(var R=[],S=1;S<arguments.length;S++)R[S-1]=arguments[S];v.disableWarnings||console.warn(v.TAG+k,R)},v.enableDebug=!1,v.disableWarnings=!1,v.disableErrors=!1,v.TAG="ApplicationInsights:",v}();o.exports=C},1259:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var d in f)f.hasOwnProperty(d)&&(m[d]=f[d])};return function(m,f){a(m,f);function d(){this.constructor=m}m.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),R=v(7625),S=v(731),g=v(8723),c=v(5282),u=function(a){k(m,a);function m(){return a!==null&&a.apply(this,arguments)||this}return m.prototype.trackNodeHttpRequestSync=function(f){f&&f.request&&f.response&&f.duration?S.trackRequestSync(this,f):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},m.prototype.trackNodeHttpRequest=function(f){(f.duration||f.error)&&c.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),f&&f.request&&f.response?S.trackRequest(this,f):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},m.prototype.trackNodeHttpDependency=function(f){f&&f.request?g.trackRequest(this,f):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},m}(R);o.exports=u},7148:function(o,C,v){"use strict";var k=this&&this.__assign||Object.assign||function(f){for(var d,p=1,w=arguments.length;p<w;p++){d=arguments[p];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(f[y]=d[y])}return f},R=v(2087),S=v(5290),g=v(3580),c=v(5740),u=v(5282),a=c.w3cTraceId(),m=function(){function f(){}return f.createQuickPulseEnvelope=function(d,p,w,y){var _=R&&typeof R.hostname=="function"&&R.hostname()||"Unknown",E=y.tags&&y.keys&&y.keys.cloudRoleInstance&&y.tags[y.keys.cloudRoleInstance]||_,P={Documents:p.length>0?p:null,InstrumentationKey:w.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:y.tags[y.keys.internalSdkVersion],StreamId:a,MachineName:_,Instance:E};return P},f.createQuickPulseMetric=function(d){var p;return p={Name:d.name,Value:d.value,Weight:d.count||1},p},f.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case S.TelemetryTypeString.Event:return f.createQuickPulseEventDocument(d);case S.TelemetryTypeString.Exception:return f.createQuickPulseExceptionDocument(d);case S.TelemetryTypeString.Trace:return f.createQuickPulseTraceDocument(d);case S.TelemetryTypeString.Dependency:return f.createQuickPulseDependencyDocument(d);case S.TelemetryTypeString.Request:return f.createQuickPulseRequestDocument(d)}return null},f.createQuickPulseEventDocument=function(d){var p=f.createQuickPulseDocument(d),w=d.data.baseData.name,y=k({},p,{Name:w});return y},f.createQuickPulseTraceDocument=function(d){var p=f.createQuickPulseDocument(d),w=d.data.baseData.severityLevel||0,y=k({},p,{Message:d.data.baseData.message,SeverityLevel:S.SeverityLevel[w]});return y},f.createQuickPulseExceptionDocument=function(d){var p=f.createQuickPulseDocument(d),w=d.data.baseData.exceptions,y="",_="",E="";w&&w.length>0&&(w[0].parsedStack&&w[0].parsedStack.length>0?w[0].parsedStack.forEach(function(A){y+=A.assembly+`
`}):w[0].stack&&w[0].stack.length>0&&(y=w[0].stack),_=w[0].message,E=w[0].typeName);var P=k({},p,{Exception:y,ExceptionMessage:_,ExceptionType:E});return P},f.createQuickPulseRequestDocument=function(d){var p=f.createQuickPulseDocument(d),w=d.data.baseData,y=k({},p,{Name:w.name,Success:w.success,Duration:w.duration,ResponseCode:w.responseCode,OperationName:w.name});return y},f.createQuickPulseDependencyDocument=function(d){var p=f.createQuickPulseDocument(d),w=d.data.baseData,y=k({},p,{Name:w.name,Target:w.target,Success:w.success,Duration:w.duration,ResultCode:w.resultCode,CommandName:w.data,OperationName:p.OperationId,DependencyTypeName:w.type});return y},f.createQuickPulseDocument=function(d){var p,w,y,_;d.data.baseType?(w=g.TelemetryTypeStringToQuickPulseType[d.data.baseType],p=g.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):u.warn("Document type invalid; not sending live metric document",d.data.baseType),y=d.tags[f.keys.operationId],_=f.aggregateProperties(d);var E={DocumentType:p,__type:w,OperationId:y,Version:"1.0",Properties:_};return E},f.aggregateProperties=function(d){var p=[],w=d.data.baseData.measurements||{};for(var y in w)if(w.hasOwnProperty(y)){var _=w[y],E={key:y,value:_};p.push(E)}var P=d.data.baseData.properties||{};for(var y in P)if(P.hasOwnProperty(y)){var _=P[y],E={key:y,value:_};p.push(E)}return p},f.keys=new S.ContextTagKeys,f}();o.exports=m},9184:(o,C,v)=>{"use strict";var k=v(7211),R=v(8723),S=v(5282),g={method:"POST",time:"x-ms-qps-transmission-time",subscribed:"x-ms-qps-subscribed"},c=function(){function u(a){this._config=a,this._consecutiveErrors=0}return u.prototype.ping=function(a,m){this._submitData(a,m,"ping")},u.prototype.post=function(a,m){this._submitData([a],m,"post")},u.prototype._submitData=function(a,m,f){var d=this,p=JSON.stringify(a),w=(_={},_[R.disableCollectionRequestOption]=!0,_.host=this._config.quickPulseHost,_.method=g.method,_.path="/QuickPulseService.svc/"+f+"?ikey="+this._config.instrumentationKey,_.headers=(E={Expect:"100-continue"},E[g.time]=1e4*Date.now(),E["Content-Type"]="application/json",E["Content-Length"]=Buffer.byteLength(p),E),_),y=k.request(w,function(P){var A=P.headers[g.subscribed]==="true";d._consecutiveErrors=0,m(A,P)});y.on("error",function(P){d._consecutiveErrors++;var A="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";d._consecutiveErrors%u.MAX_QPS_FAILURES_BEFORE_WARN==0?(A="Live Metrics endpoint could not be reached "+d._consecutiveErrors+" consecutive times. Most recent error:",S.warn(u.TAG,A,P)):S.info(u.TAG,A,P),m()}),y.write(p),y.end();var _,E},u.TAG="QuickPulseSender",u.MAX_QPS_FAILURES_BEFORE_WARN=25,u}();o.exports=c},3668:(o,C,v)=>{"use strict";var k=v(5282),R=v(9253),S=v(7148),g=v(9184),c=v(3580),u=v(4470),a=function(){function m(f,d){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new R(f),this.context=d||new u,this._sender=new g(this.config),this._isEnabled=!1}return m.prototype.addCollector=function(f){this._collectors.push(f)},m.prototype.trackMetric=function(f){this._addMetric(f)},m.prototype.addDocument=function(f){var d=S.telemetryEnvelopeToQuickPulseDocument(f);d&&this._documents.push(d)},m.prototype.enable=function(f){f&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!f&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},m.prototype.enableCollectors=function(f){this._collectors.forEach(function(d){d.enable(f)})},m.prototype._addMetric=function(f){var d=f.value,p=f.count||1,w=c.PerformanceToQuickPulseCounter[f.name];w&&(this._metrics[w]?(this._metrics[w].Value=(this._metrics[w].Value*this._metrics[w].Weight+d*p)/(this._metrics[w].Weight+p),this._metrics[w].Weight+=p):(this._metrics[w]=S.createQuickPulseMetric(f),this._metrics[w].Name=w,this._metrics[w].Weight=1))},m.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},m.prototype._goQuickPulse=function(){var f=this,d=Object.keys(this._metrics).map(function(y){return f._metrics[y]}),p=S.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(p):this._ping(p);var w=this._isCollectingData?m.POST_INTERVAL:m.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=m.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,w=m.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=m.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(w=m.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),w),this._handle.unref()},m.prototype._ping=function(f){this._sender.ping(f,this._quickPulseDone.bind(this))},m.prototype._post=function(f){this._sender.post(f,this._quickPulseDone.bind(this))},m.prototype._quickPulseDone=function(f,d){f!=null?(this._isCollectingData!==f&&(k.info("Live Metrics sending data",f),this.enableCollectors(f)),this._isCollectingData=f,d&&d.statusCode<300&&d.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},m.MAX_POST_WAIT_TIME=2e4,m.MAX_PING_WAIT_TIME=6e4,m.FALLBACK_INTERVAL=6e4,m.PING_INTERVAL=5e3,m.POST_INTERVAL=1e3,m}();o.exports=a},9036:o=>{"use strict";o.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},2588:(o,C,v)=>{"use strict";var k=v(5747),R=v(2087),S=v(5622),g=v(8761),c=v(3129),u=v(5282),a=v(8723),m=v(5740),f=function(){function d(p,w,y){if(this._config=p,this._onSuccess=w,this._onError=y,this._enableDiskRetryMode=!1,this._resendInterval=d.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=d.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!d.OS_PROVIDES_FILE_PROTECTION)if(d.USE_ICACLS){try{d.OS_PROVIDES_FILE_PROTECTION=k.existsSync(d.ICACLS_PATH)}catch(_){}d.OS_PROVIDES_FILE_PROTECTION||u.warn(d.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else d.OS_PROVIDES_FILE_PROTECTION=!0}return d.prototype.setDiskRetryMode=function(p,w,y){this._enableDiskRetryMode=d.OS_PROVIDES_FILE_PROTECTION&&p,typeof w=="number"&&w>=0&&(this._resendInterval=Math.floor(w)),typeof y=="number"&&y>=0&&(this._maxBytesOnDisk=Math.floor(y)),p&&!d.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,u.warn(d.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},d.prototype.send=function(p,w){var y=this,_=this._config.endpointUrl,E={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};g.gzip(p,function(P,A){var O=A;P?(u.warn(P),O=p,E.headers["Content-Length"]=p.length.toString()):(E.headers["Content-Encoding"]="gzip",E.headers["Content-Length"]=A.length),u.info(d.TAG,E),E[a.disableCollectionRequestOption]=!0;var I=function(D){D.setEncoding("utf-8");var U="";D.on("data",function(M){U+=M}),D.on("end",function(){y._numConsecutiveFailures=0,u.info(d.TAG,U),typeof y._onSuccess=="function"&&y._onSuccess(U),typeof w=="function"&&w(U),y._enableDiskRetryMode&&(D.statusCode===200?setTimeout(function(){return y._sendFirstFileOnDisk()},y._resendInterval).unref():(D.statusCode===408||D.statusCode===429||D.statusCode===439||D.statusCode===500||D.statusCode===503)&&y._storeToDisk(p))})},L=m.makeRequest(y._config,_,E,I);L.on("error",function(D){if(y._numConsecutiveFailures++,!y._enableDiskRetryMode||y._numConsecutiveFailures>0&&y._numConsecutiveFailures%d.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var U="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";y._enableDiskRetryMode&&(U="Ingestion endpoint could not be reached "+y._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),u.warn(d.TAG,U,D)}else{var U="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";u.info(d.TAG,U,D)}if(y._onErrorHelper(D),typeof w=="function"){var M="error sending telemetry";D&&typeof D.toString=="function"&&(M=D.toString()),w(M)}y._enableDiskRetryMode&&y._storeToDisk(p)}),L.write(O),L.end()})},d.prototype.saveOnCrash=function(p){this._enableDiskRetryMode&&this._storeToDiskSync(p)},d.prototype._runICACLS=function(p,w){var y=c.spawn(d.ICACLS_PATH,p,{windowsHide:!0});y.on("error",function(_){return w(_)}),y.on("close",function(_,E){return w(_===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+_+")"))})},d.prototype._runICACLSSync=function(p){if(c.spawnSync){var w=c.spawnSync(d.ICACLS_PATH,p,{windowsHide:!0});if(w.error)throw w.error;if(w.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+w.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},d.prototype._getACLIdentity=function(p){if(d.ACL_IDENTITY)return p(null,d.ACL_IDENTITY);var w=c.spawn(d.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),y="";w.stdout.on("data",function(_){return y+=_}),w.on("error",function(_){return p(_,null)}),w.on("close",function(_,E){return d.ACL_IDENTITY=y&&y.trim(),p(_===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+_+")"),d.ACL_IDENTITY)})},d.prototype._getACLIdentitySync=function(){if(d.ACL_IDENTITY)return d.ACL_IDENTITY;if(c.spawnSync){var p=c.spawnSync(d.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(p.error)throw p.error;if(p.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+p.status+")");return d.ACL_IDENTITY=p.stdout&&p.stdout.toString().trim(),d.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},d.prototype._getACLArguments=function(p,w){return[p,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",w+":(OI)(CI)F","/inheritance:r"]},d.prototype._applyACLRules=function(p,w){var y=this;if(!d.USE_ICACLS)return w(null);if(d.ACLED_DIRECTORIES[p]===void 0)d.ACLED_DIRECTORIES[p]=!1,this._getACLIdentity(function(_,E){if(_)return d.ACLED_DIRECTORIES[p]=!1,w(_);y._runICACLS(y._getACLArguments(p,E),function(P){return d.ACLED_DIRECTORIES[p]=!P,w(P)})});else return w(d.ACLED_DIRECTORIES[p]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},d.prototype._applyACLRulesSync=function(p){if(d.USE_ICACLS){if(d.ACLED_DIRECTORIES[p]===void 0){this._runICACLSSync(this._getACLArguments(p,this._getACLIdentitySync())),d.ACLED_DIRECTORIES[p]=!0;return}else if(!d.ACLED_DIRECTORIES[p])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},d.prototype._confirmDirExists=function(p,w){var y=this;k.lstat(p,function(_,E){_&&_.code==="ENOENT"?k.mkdir(p,function(P){P&&P.code!=="EEXIST"?w(P):y._applyACLRules(p,w)}):!_&&E.isDirectory()?y._applyACLRules(p,w):w(_||new Error("Path existed but was not a directory"))})},d.prototype._getShallowDirectorySize=function(p,w){k.readdir(p,function(y,_){if(y)return w(y,-1);var E=null,P=0,A=0;if(_.length===0){w(null,0);return}for(var O=0;O<_.length;O++)k.stat(S.join(p,_[O]),function(I,L){A++,I?E=I:L.isFile()&&(P+=L.size),A===_.length&&(E?w(E,-1):w(E,P))})})},d.prototype._getShallowDirectorySizeSync=function(p){for(var w=k.readdirSync(p),y=0,_=0;_<w.length;_++)y+=k.statSync(S.join(p,w[_])).size;return y},d.prototype._storeToDisk=function(p){var w=this,y=S.join(R.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);u.info(d.TAG,"Checking existance of data storage directory: "+y),this._confirmDirExists(y,function(_){if(_){u.warn(d.TAG,"Error while checking/creating directory: "+(_&&_.message)),w._onErrorHelper(_);return}w._getShallowDirectorySize(y,function(E,P){if(E||P<0){u.warn(d.TAG,"Error while checking directory size: "+(E&&E.message)),w._onErrorHelper(E);return}else if(P>w._maxBytesOnDisk){u.warn(d.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+P);return}var A=new Date().getTime()+".ai.json",O=S.join(y,A);u.info(d.TAG,"saving data to disk at: "+O),k.writeFile(O,p,{mode:384},function(I){return w._onErrorHelper(I)})})})},d.prototype._storeToDiskSync=function(p){var w=S.join(R.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);try{u.info(d.TAG,"Checking existance of data storage directory: "+w),k.existsSync(w)||k.mkdirSync(w),this._applyACLRulesSync(w);var y=this._getShallowDirectorySizeSync(w);if(y>this._maxBytesOnDisk){u.info(d.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+y);return}var _=new Date().getTime()+".ai.json",E=S.join(w,_);u.info(d.TAG,"saving data before crash to disk at: "+E),k.writeFileSync(E,p,{mode:384})}catch(P){u.warn(d.TAG,"Error while saving data to disk: "+(P&&P.message)),this._onErrorHelper(P)}},d.prototype._sendFirstFileOnDisk=function(){var p=this,w=S.join(R.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);k.exists(w,function(y){y&&k.readdir(w,function(_,E){if(_)p._onErrorHelper(_);else if(E=E.filter(function(O){return S.basename(O).indexOf(".ai.json")>-1}),E.length>0){var P=E[0],A=S.join(w,P);k.readFile(A,function(O,I){O?p._onErrorHelper(O):k.unlink(A,function(L){L?p._onErrorHelper(L):p.send(I)})})}})})},d.prototype._onErrorHelper=function(p){typeof this._onError=="function"&&this._onError(p)},d.TAG="Sender",d.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",d.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",d.ACLED_DIRECTORIES={},d.ACL_IDENTITY=null,d.WAIT_BETWEEN_RESEND=60*1e3,d.MAX_BYTES_ON_DISK=50*1e3*1e3,d.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,d.TEMPDIR_PREFIX="appInsights-node",d.OS_PROVIDES_FILE_PROTECTION=!1,d.USE_ICACLS=R.type()==="Windows_NT",d}();o.exports=f},7625:(o,C,v)=>{"use strict";var k=v(8835),R=v(9253),S=v(4470),g=v(5290),c=v(3504),u=v(9428),a=v(894),m=v(2588),f=v(5740),d=v(5282),p=v(9813),w=function(){function y(_){this._telemetryProcessors=[];var E=new R(_);this.config=E,this.context=new S,this.commonProperties={};var P=new m(this.config);this.channel=new c(function(){return E.disableAppInsights},function(){return E.maxBatchSize},function(){return E.maxBatchIntervalMs},P)}return y.prototype.trackAvailability=function(_){this.track(_,g.TelemetryType.Availability)},y.prototype.trackTrace=function(_){this.track(_,g.TelemetryType.Trace)},y.prototype.trackMetric=function(_){this.track(_,g.TelemetryType.Metric)},y.prototype.trackException=function(_){_&&_.exception&&!f.isError(_.exception)&&(_.exception=new Error(_.exception.toString())),this.track(_,g.TelemetryType.Exception)},y.prototype.trackEvent=function(_){this.track(_,g.TelemetryType.Event)},y.prototype.trackRequest=function(_){this.track(_,g.TelemetryType.Request)},y.prototype.trackDependency=function(_){_&&!_.target&&_.data&&(_.target=k.parse(_.data).host),this.track(_,g.TelemetryType.Dependency)},y.prototype.flush=function(_){this.channel.triggerSend(_?!!_.isAppCrashing:!1,_?_.callback:void 0)},y.prototype.track=function(_,E){if(_&&g.telemetryTypeToBaseType(E)){var P=p.createEnvelope(_,E,this.commonProperties,this.context,this.config);_.time&&(P.time=_.time.toISOString());var A=this.runTelemetryProcessors(P,_.contextObjects);A=A&&u.samplingTelemetryProcessor(P,{correlationContext:a.CorrelationContextManager.getCurrentContext()}),u.performanceMetricsTelemetryProcessor(P,this.quickPulseClient),A&&this.channel.send(P)}else d.warn("track() requires telemetry object and telemetryType to be specified.")},y.prototype.addTelemetryProcessor=function(_){this._telemetryProcessors.push(_)},y.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},y.prototype.runTelemetryProcessors=function(_,E){var P=!0,A=this._telemetryProcessors.length;if(A===0)return P;E=E||{},E.correlationContext=a.CorrelationContextManager.getCurrentContext();for(var O=0;O<A;++O)try{var I=this._telemetryProcessors[O];if(I&&I.apply(null,[_,E])===!1){P=!1;break}}catch(L){P=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",L,_)}return P},y}();o.exports=w},8090:(o,C,v)=>{"use strict";var k=v(5740),R=v(9962),S=function(){function g(c,u){if(this.traceFlag=g.DEFAULT_TRACE_FLAG,this.version=g.DEFAULT_VERSION,c&&typeof c=="string")if(c.split(",").length>1)this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16);else{var a=c.trim().split("-"),m=a.length;m>=4?(this.version=a[0],this.traceId=a[1],this.spanId=a[2],this.traceFlag=a[3]):(this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=g.DEFAULT_VERSION,this.traceId=k.w3cTraceId()),this.version==="00"&&m!==4&&(this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=g.DEFAULT_VERSION,this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=g.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=g.DEFAULT_TRACE_FLAG,this.traceId=k.w3cTraceId()),g.isValidTraceId(this.traceId)||(this.traceId=k.w3cTraceId()),g.isValidSpanId(this.spanId)||(this.spanId=k.w3cTraceId().substr(0,16),this.traceId=k.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(u){this.parentId=u.slice();var f=R.getRootId(u);g.isValidTraceId(f)||(this.legacyRootId=f,f=k.w3cTraceId()),u.indexOf("|")!==-1&&(u=u.substring(1+u.substring(0,u.length-1).lastIndexOf("."),u.length-1)),this.traceId=f,this.spanId=u}else this.traceId=k.w3cTraceId(),this.spanId=k.w3cTraceId().substr(0,16)}return g.isValidTraceId=function(c){return c.match(/^[0-9a-f]{32}$/)&&c!=="00000000000000000000000000000000"},g.isValidSpanId=function(c){return c.match(/^[0-9a-f]{16}$/)&&c!=="0000000000000000"},g.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},g.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},g.prototype.updateSpanId=function(){this.spanId=k.w3cTraceId().substr(0,16)},g.DEFAULT_TRACE_FLAG="01",g.DEFAULT_VERSION="00",g}();o.exports=S},6333:o=>{"use strict";var C=function(){function v(k){this.fieldmap=[],!!k&&(this.fieldmap=this.parseHeader(k))}return v.prototype.toString=function(){var k=this.fieldmap;return!k||k.length==0?null:k.join(", ")},v.validateKeyChars=function(k){var R=k.split("@");if(R.length==2){var S=R[0].trim(),g=R[1].trim(),c=Boolean(S.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),u=Boolean(g.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&u}else if(R.length==1)return Boolean(k.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},v.prototype.parseHeader=function(k){var R=[],S={},g=k.split(",");if(g.length>32)return null;for(var c=0,u=g;c<u.length;c++){var a=u[c],m=a.trim();if(m.length!==0){var f=m.split("=");if(f.length!==2||!v.validateKeyChars(f[0])||S[f[0]])return null;S[f[0]]=!0,R.push(m)}}return R},v.strict=!0,v}();o.exports=C},5740:function(o,C,v){"use strict";var k=this&&this.__assign||Object.assign||function(f){for(var d,p=1,w=arguments.length;p<w;p++){d=arguments[p];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(f[y]=d[y])}return f},R=v(8605),S=v(7211),g=v(8835),c=v(7619),u=v(5282),a=v(9036),m=function(){function f(){}return f.getCookie=function(d,p){var w="";if(d&&d.length&&typeof p=="string")for(var y=d+"=",_=p.split(";"),E=0;E<_.length;E++){var p=_[E];if(p=f.trim(p),p&&p.indexOf(y)===0){w=p.substring(y.length,_[E].length);break}}return w},f.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},f.int32ArrayToBase64=function(d){var p=function(P,A){return String.fromCharCode(P>>A&255)},w=function(P){return p(P,24)+p(P,16)+p(P,8)+p(P,0)},y=d.map(w).join(""),_=Buffer.from?Buffer.from(y,"binary"):new Buffer(y,"binary"),E=_.toString("base64");return E.substr(0,E.indexOf("="))},f.random32=function(){return 4294967296*Math.random()|0},f.randomu32=function(){return f.random32()+2147483648},f.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",w,y=0;y<4;y++)w=f.random32(),p+=d[w&15]+d[w>>4&15]+d[w>>8&15]+d[w>>12&15]+d[w>>16&15]+d[w>>20&15]+d[w>>24&15]+d[w>>28&15];var _=d[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+_+p.substr(16,3)+p.substr(19,12)},f.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},f.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},f.isError=function(d){return d instanceof Error},f.isPrimitive=function(d){var p=typeof d;return p==="string"||p==="number"||p==="boolean"},f.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},f.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var p=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),w=""+Math.floor(d/(1e3*60))%60,y=""+Math.floor(d/(1e3*60*60))%24,_=Math.floor(d/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,w=w.length<2?"0"+w:w,y=y.length<2?"0"+y:y;var E=_>0?_+".":"";return E+y+":"+w+":"+p},f.extractError=function(d){var p=d;return{message:d.message,code:p.code||p.id||""}},f.extractObject=function(d){return d instanceof Error?f.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},f.validateStringMap=function(d){if(typeof d!="object"){u.info("Invalid properties dropped from payload");return}var p={};for(var w in d){var y="",_=d[w],E=typeof _;if(f.isPrimitive(_))y=_.toString();else if(_===null||E==="undefined")y="";else if(E==="function"){u.info("key: "+w+" was function; will not serialize");continue}else{var P=f.isArray(_)?_:f.extractObject(_);try{f.isPrimitive(P)?y=P:y=JSON.stringify(P)}catch(A){y=_.constructor.name.toString()+" (Error: "+A.message+")",u.info("key: "+w+", could not be serialized")}}p[w]=y.substring(0,f.MAX_PROPERTY_LENGTH)}return p},f.canIncludeCorrelationHeader=function(d,p){var w=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!w||w.length==0||!p)return!0;for(var y=0;y<w.length;y++){var _=new RegExp(w[y].replace(/\./g,".").replace(/\*/g,".*"));if(_.test(g.parse(p).hostname))return!1}return!0},f.getCorrelationContextTarget=function(d,p){var w=d.headers&&d.headers[a.requestContextHeader];if(w)for(var y=w.split(","),_=0;_<y.length;++_){var E=y[_].split("=");if(E.length==2&&E[0]==p)return E[1]}},f.makeRequest=function(d,p,w,y){p&&p.indexOf("//")===0&&(p="https:"+p);var _=g.parse(p),E=k({},w,{host:_.hostname,port:_.port,path:_.pathname}),P=void 0;if(_.protocol==="https:"&&(P=d.proxyHttpsUrl||void 0),_.protocol==="http:"&&(P=d.proxyHttpUrl||void 0),P){P.indexOf("//")===0&&(P="http:"+P);var A=g.parse(P);A.protocol==="https:"?(u.info("Proxies that use HTTPS are not supported"),P=void 0):E=k({},E,{host:A.hostname,port:A.port||"80",path:p,headers:k({},E.headers,{Host:_.hostname})})}var O=_.protocol==="https:"&&!P;return O&&d.httpsAgent!==void 0?E.agent=d.httpsAgent:!O&&d.httpAgent!==void 0?E.agent=d.httpAgent:O&&(E.agent=f.tlsRestrictedAgent),O?S.request(E,y):R.request(E,y)},f.safeIncludeCorrelationHeader=function(d,p,w){var y;if(typeof w=="string")y=w;else if(w instanceof Array)y=w.join(",");else if(w&&typeof w.toString=="function")try{y=w.toString()}catch(_){u.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",_,w)}y?f.addCorrelationIdHeaderFromString(d,p,y):p.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+d.config.correlationId)},f.addCorrelationIdHeaderFromString=function(d,p,w){var y=w.split(","),_=a.requestContextSourceKey+"=",E=y.some(function(P){return P.substring(0,_.length)===_});E||p.setHeader(a.requestContextHeader,w+","+a.requestContextSourceKey+"="+d.config.correlationId)},f.MAX_PROPERTY_LENGTH=8192,f.tlsRestrictedAgent=new S.Agent({secureOptions:c.SSL_OP_NO_SSLv2|c.SSL_OP_NO_SSLv3|c.SSL_OP_NO_TLSv1|c.SSL_OP_NO_TLSv1_1}),f}();o.exports=m},4127:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4350),R=v(5290);function S(g,c){switch(c&&c.addDocument(g),g.data.baseType){case R.TelemetryTypeString.Exception:k.countException();break;case R.TelemetryTypeString.Request:var u=g.data.baseData;k.countRequest(u.duration,u.success);break;case R.TelemetryTypeString.Dependency:var a=g.data.baseData;k.countDependency(a.duration,a.success);break}return!0}C.performanceMetricsTelemetryProcessor=S},2037:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(5290);function R(g,c){var u=g.sampleRate,a=!1;return u==null||u>=100||g.data&&k.TelemetryType.Metric===k.baseTypeToTelemetryType(g.data.baseType)?!0:(c.correlationContext&&c.correlationContext.operation?a=S(c.correlationContext.operation.id)<u:a=Math.random()*100<u,a)}C.samplingTelemetryProcessor=R;function S(g){var c=-2147483648,u=2147483647,a=5381;if(!g)return 0;for(;g.length<8;)g=g+g;for(var m=0;m<g.length;m++)a=((a<<5)+a|0)+g.charCodeAt(m)|0;return a=a<=c?u:Math.abs(a),a/u*100}C.getSamplingHashCode=S},9428:(o,C,v)=>{"use strict";function k(R){for(var S in R)C.hasOwnProperty(S)||(C[S]=R[S])}Object.defineProperty(C,"__esModule",{value:!0}),k(v(2037)),k(v(4127))},9574:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(894),R=v(6281),S=v(6639),g=v(4350),c=v(8723),u=v(731),a=v(9962),m=v(5282),f=v(3668),d=v(1629);C.TelemetryClient=v(1259),C.Contracts=v(5290);var p;(function(de){de[de.AI=0]="AI",de[de.AI_AND_W3C=1]="AI_AND_W3C"})(p=C.DistributedTracingModes||(C.DistributedTracingModes={}));var w=!0,y=!1,_=!0,E=!0,P=!0,A=!0,O=!0,I=!0,L,D=!1,U=!0,M,x=void 0,F=void 0,H,B,j,W,J,ce,oe=!1,we;function Z(de){return C.defaultClient?m.info("The default client is already setup"):(C.defaultClient=new C.TelemetryClient(de),H=new R(C.defaultClient),B=new S(C.defaultClient),j=new g(C.defaultClient),J=new u(C.defaultClient),ce=new c(C.defaultClient),W||(W=new d.AutoCollectNativePerformance(C.defaultClient))),C.defaultClient&&C.defaultClient.channel&&C.defaultClient.channel.setUseDiskRetryCaching(O,x,F),fe}C.setup=Z;function ne(){return C.defaultClient?(oe=!0,H.enable(w,y),B.enable(_),j.enable(E),W.enable(U,M),J.useAutoCorrelation(I,L),J.enable(P),ce.enable(A),C.liveMetricsClient&&D&&C.liveMetricsClient.enable(D)):m.warn("Start cannot be called before setup"),fe}C.start=ne;function re(){return I?k.CorrelationContextManager.getCurrentContext():null}C.getCorrelationContext=re;function me(de){return k.CorrelationContextManager.wrapCallback(de)}C.wrapWithCorrelationContext=me;var fe=function(){function de(){}return de.setDistributedTracingMode=function(ge){return a.w3cEnabled=ge===p.AI_AND_W3C,de},de.setAutoCollectConsole=function(ge,_e){return _e===void 0&&(_e=!1),w=ge,y=_e,oe&&H.enable(ge,_e),de},de.setAutoCollectExceptions=function(ge){return _=ge,oe&&B.enable(ge),de},de.setAutoCollectPerformance=function(ge,_e){_e===void 0&&(_e=!0),E=ge;var xe=d.AutoCollectNativePerformance.parseEnabled(_e);return U=xe.isEnabled,M=xe.disabledMetrics,oe&&(j.enable(ge),W.enable(xe.isEnabled,xe.disabledMetrics)),de},de.setAutoCollectRequests=function(ge){return P=ge,oe&&J.enable(ge),de},de.setAutoCollectDependencies=function(ge){return A=ge,oe&&ce.enable(ge),de},de.setAutoDependencyCorrelation=function(ge,_e){return I=ge,L=_e,oe&&J.useAutoCorrelation(ge,_e),de},de.setUseDiskRetryCaching=function(ge,_e,xe){return O=ge,x=_e,F=xe,C.defaultClient&&C.defaultClient.channel&&C.defaultClient.channel.setUseDiskRetryCaching(ge,_e,xe),de},de.setInternalLogging=function(ge,_e){return ge===void 0&&(ge=!1),_e===void 0&&(_e=!0),m.enableDebug=ge,m.disableWarnings=!_e,de},de.setSendLiveMetrics=function(ge){return ge===void 0&&(ge=!1),C.defaultClient?(!C.liveMetricsClient&&ge?(C.liveMetricsClient=new f(C.defaultClient.config.instrumentationKey),we=new g(C.liveMetricsClient,1e3,!0),C.liveMetricsClient.addCollector(we),C.defaultClient.quickPulseClient=C.liveMetricsClient):C.liveMetricsClient&&C.liveMetricsClient.enable(ge),D=ge,de):(m.warn("Live metrics client cannot be setup without the default client"),de)},de.start=ne,de}();C.Configuration=fe;function Se(){C.defaultClient=null,oe=!1,H&&H.dispose(),B&&B.dispose(),j&&j.dispose(),W&&W.dispose(),J&&J.dispose(),ce&&ce.dispose(),C.liveMetricsClient&&(C.liveMetricsClient.enable(!1),D=!1,C.liveMetricsClient=void 0)}C.dispose=Se},9822:(o,C,v)=>{"use strict";const k=process.binding("async_wrap"),R=k.Providers.TIMERWRAP,S={nextTick:v(3269),promise:v(9565),timers:v(7190)},g=new Set;function c(){this.enabled=!1,this.counter=0}function u(){const f=this.initFns=[],d=this.preFns=[],p=this.postFns=[],w=this.destroyFns=[];this.init=function(y,_,E,P){if(_===R){g.add(y);return}for(const A of f)A(y,this,_,E,P)},this.pre=function(y){if(!g.has(y))for(const _ of d)_(y,this)},this.post=function(y,_){if(!g.has(y))for(const E of p)E(y,this,_)},this.destroy=function(y){if(g.has(y)){g.delete(y);return}for(const _ of w)_(y)}}u.prototype.add=function(f){f.init&&this.initFns.push(f.init),f.pre&&this.preFns.push(f.pre),f.post&&this.postFns.push(f.post),f.destroy&&this.destroyFns.push(f.destroy)};function a(f,d){const p=f.indexOf(d);p!==-1&&f.splice(p,1)}u.prototype.remove=function(f){f.init&&a(this.initFns,f.init),f.pre&&a(this.preFns,f.pre),f.post&&a(this.postFns,f.post),f.destroy&&a(this.destroyFns,f.destroy)};function m(){this._state=new c,this._hooks=new u,this.version=v(1910).i8,this.providers=k.Providers;for(const f of Object.keys(S))S[f].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),k.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}o.exports=m,m.prototype.addHooks=function(f){this._hooks.add(f)},m.prototype.removeHooks=function(f){this._hooks.remove(f)},m.prototype.enable=function(){this._state.enabled=!0,k.enable()},m.prototype.disable=function(){this._state.enabled=!1,k.disable()}},3223:(o,C,v)=>{"use strict";const k=v(9822);if(global._asyncHook)if(global._asyncHook.version===v(1910).i8)o.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else v(2512).filter.attach(function(S,g){return g.filter(function(c){const u=c.getFileName();return!(u&&u.slice(0,__dirname.length)===__dirname)})}),o.exports=global._asyncHook=new k},1910:o=>{"use strict";o.exports={i8:"1.7.6"}},3269:o=>{"use strict";function C(){}o.exports=function(){const k=this._hooks,R=this._state,S=process.nextTick;process.nextTick=function(){if(!R.enabled)return S.apply(process,arguments);const g=new Array(arguments.length);for(let m=0;m<arguments.length;m++)g[m]=arguments[m];const c=g[0];if(typeof c!="function")throw new TypeError("callback is not a function");const u=new C,a=--R.counter;return k.init.call(u,a,0,null,null),g[0]=function(){k.pre.call(u,a);let m=!0;try{c.apply(this,arguments),m=!1}finally{m&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){k.post.call(u,a,!0),k.destroy.call(null,a)})}k.post.call(u,a,!1),k.destroy.call(null,a)},S.apply(process,g)}}},9565:o=>{"use strict";function C(){}o.exports=function(){const k=this._hooks,R=this._state,S=global.Promise,g=S.prototype.then;S.prototype.then=m;function c(f,d,p,w){return typeof f!="function"?w?u(p):a(p):function(){k.pre.call(d,p);try{return f.apply(this,arguments)}finally{k.post.call(d,p,!1),k.destroy.call(null,p)}}}function u(f){return function(p){return k.destroy.call(null,f),p}}function a(f){return function(p){throw k.destroy.call(null,f),p}}function m(f,d){if(!R.enabled)return g.call(this,f,d);const p=new C,w=--R.counter;return k.init.call(p,w,0,null,null),g.call(this,c(f,p,w,!0),c(d,p,w,!1))}}},7190:(o,C,v)=>{"use strict";const k=v(8213);function R(){}function S(){}function g(){}const c=new Map,u=new Map,a=new Map;let m=null,f=!1;o.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",R,c,!0),d(this._hooks,this._state,"setInterval","clearInterval",S,u,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",g,a,!0),global.setTimeout=k.setTimeout,global.setInterval=k.setInterval,global.setImmediate=k.setImmediate,global.clearTimeout=k.clearTimeout,global.clearInterval=k.clearInterval,global.clearImmediate=k.clearImmediate};function d(p,w,y,_,E,P,A){const O=k[y],I=k[_];k[y]=function(){if(!w.enabled)return O.apply(k,arguments);const L=new Array(arguments.length);for(let F=0;F<arguments.length;F++)L[F]=arguments[F];const D=L[0];if(typeof D!="function")throw new TypeError('"callback" argument must be a function');const U=new E,M=--w.counter;let x;return p.init.call(U,M,0,null,null),L[0]=function(){m=x,p.pre.call(U,M);let F=!0;try{D.apply(this,arguments),F=!1}finally{F&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(U,M,!0),P.delete(x),p.destroy.call(null,M)})}p.post.call(U,M,!1),m=null,(A||f)&&(f=!1,P.delete(x),p.destroy.call(null,M))},x=O.apply(k,L),P.set(x,M),x},k[_]=function(L){if(m===L&&L!==null)f=!0;else if(P.has(L)){const D=P.get(L);P.delete(L),p.destroy.call(null,D)}I.apply(k,arguments)}}},8286:o=>{"use strict";o.exports=(C,v)=>class extends C{constructor(R){var S,g;super(u);var c=this;try{R.apply(S,g)}catch(a){g[1](a)}return c;function u(a,m){S=this,g=[f,d];function f(p){return v(c,!1),a(p)}function d(p){return v(c,!1),m(p)}}}}},9090:(o,C,v)=>{var k=v(6372).wrap,R=1<<0,S=1<<1,g=1<<2,c=1<<3,u=[],a=0,m=!1,f=[],d,p;function w(U,M){var x=U.length,F=M.length,H=[];if(x===0&&F===0)return H;for(var B=0;B<x;B++)H[B]=U[B];if(F===0)return H;for(var j=0;j<F;j++){var W=!0;for(B=0;B<x;B++)if(U[B].uid===M[j].uid){W=!1;break}W&&H.push(M[j])}return H}if(process._fatalException){var y=!1,_;d=function(M){var x=u.length;if(y||x===0)return!1;var F=!1;y=!0;for(var H=0;H<x;++H){var B=u[H];if((B.flags&c)!=0){var j=_&&_[B.uid];F=B.error(j,M)||F}}return y=!1,f.length>0&&(u=f.pop()),_=void 0,F&&!m},p=function(M,x,F){var H=[];m=!0;for(var B=0;B<F;++B){var j=x[B];if(H[j.uid]=j.data,(j.flags&R)!=0){var W=j.create(j.data);W!==void 0&&(H[j.uid]=W)}}return m=!1,function(){_=H,f.push(u),u=w(x,u),m=!0;for(var J=0;J<F;++J)(x[J].flags&S)>0&&x[J].before(this,H[x[J].uid]);m=!1;var ce=M.apply(this,arguments);for(m=!0,J=0;J<F;++J)(x[J].flags&g)>0&&x[J].after(this,H[x[J].uid]);return m=!1,u=f.pop(),_=void 0,ce}},k(process,"_fatalException",function(U){return function(x){return d(x)||U(x)}})}else{var E=!1;d=function(M){if(E)throw M;for(var x=!1,F=u.length,H=0;H<F;++H){var B=u[H];(B.flags&c)!=0&&(x=B.error(null,M)||x)}if(!x&&m)throw M},p=function(M,x,F){var H=[];m=!0;for(var B=0;B<F;++B){var j=x[B];if(H[j.uid]=j.data,(j.flags&R)!=0){var W=j.create(j.data);W!==void 0&&(H[j.uid]=W)}}return m=!1,function(){var J=!1,ce=!1;f.push(u),u=w(x,u),m=!0;for(var oe=0;oe<F;++oe)(x[oe].flags&S)>0&&x[oe].before(this,H[x[oe].uid]);m=!1;var we;try{we=M.apply(this,arguments)}catch(Z){J=!0;for(var oe=0;oe<F;++oe)if((u[oe].flags&c)!=0)try{ce=u[oe].error(H[x[oe].uid],Z)||ce}catch(re){throw E=!0,re}if(!ce)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),Z}finally{if(!J||ce){for(m=!0,oe=0;oe<F;++oe)(x[oe].flags&g)>0&&x[oe].after(this,H[x[oe].uid]);m=!1}u=f.pop()}return we}},process.addListener("uncaughtException",d)}function P(U,M,x){m=!0;for(var F=0;F<x;++F){var H=M[F];H.create&&H.create(H.data)}return m=!1,function(){f.push(u),u=w(M,u);var B=U.apply(this,arguments);return u=f.pop(),B}}function A(U){var M=u.length;if(M===0)return U;for(var x=u.slice(),F=0;F<M;++F)if(x[F].flags>0)return p(U,x,M);return P(U,x,M)}function O(U,M){typeof U.create=="function"&&(this.create=U.create,this.flags|=R),typeof U.before=="function"&&(this.before=U.before,this.flags|=S),typeof U.after=="function"&&(this.after=U.after,this.flags|=g),typeof U.error=="function"&&(this.error=U.error,this.flags|=c),this.uid=++a,this.data=M===void 0?null:M}O.prototype.create=void 0,O.prototype.before=void 0,O.prototype.after=void 0,O.prototype.error=void 0,O.prototype.data=void 0,O.prototype.uid=0,O.prototype.flags=0;function I(U,M){if(typeof U!="object"||!U)throw new TypeError("callbacks argument must be an object");return U instanceof O?U:new O(U,M)}function L(U,M){var x;U instanceof O?x=U:x=I(U,M);for(var F=!1,H=0;H<u.length;H++)if(x===u[H]){F=!0;break}return F||u.push(x),x}function D(U){for(var M=0;M<u.length;M++)if(U===u[M]){u.splice(M,1);break}}process.createAsyncListener=I,process.addAsyncListener=L,process.removeAsyncListener=D,o.exports=A},7645:(o,C,v)=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var k=v(6372),R=v(6625),S=k.wrap,g=k.massWrap,c=v(9090),u=v(1669),a=R.gte(process.version,"6.0.0"),m=R.gte(process.version,"7.0.0"),f=R.gte(process.version,"8.0.0"),d=R.gte(process.version,"11.0.0"),p=v(1631);m&&!p._normalizeArgs?p._normalizeArgs=function(Z){if(Z.length===0)return[{},null];var ne=Z[0],re={};typeof ne=="object"&&ne!==null?re=ne:we(ne)?re.path=ne:(re.port=ne,Z.length>1&&typeof Z[1]=="string"&&(re.host=Z[1]));var me=Z[Z.length-1];return typeof me!="function"?[re,null]:[re,me]}:!m&&!p._normalizeConnectArgs&&(p._normalizeConnectArgs=function(Z){var ne={};function re(fe){return(fe=Number(fe))>=0?fe:!1}typeof Z[0]=="object"&&Z[0]!==null?ne=Z[0]:typeof Z[0]=="string"&&re(Z[0])===!1?ne.path=Z[0]:(ne.port=Z[0],typeof Z[1]=="string"&&(ne.host=Z[1]));var me=Z[Z.length-1];return typeof me=="function"?[ne,me]:[ne]}),"_setUpListenHandle"in p.Server.prototype?S(p.Server.prototype,"_setUpListenHandle",w):S(p.Server.prototype,"_listen2",w);function w(Z){return function(){this.on("connection",function(ne){ne._handle&&(ne._handle.onread=c(ne._handle.onread))});try{return Z.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=c(this._handle.onconnection))}}}function y(Z){if(Z&&Z._handle){var ne=Z._handle;ne._originalOnread||(ne._originalOnread=ne.onread),ne.onread=c(ne._originalOnread)}}S(p.Socket.prototype,"connect",function(Z){return function(){var ne;f&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ne=arguments[0]:ne=m?p._normalizeArgs(arguments):p._normalizeConnectArgs(arguments),ne[1]&&(ne[1]=c(ne[1]));var re=Z.apply(this,ne);return y(this),re}});var _=v(8605);S(_.Agent.prototype,"addRequest",function(Z){return function(ne){var re=ne.onSocket;return ne.onSocket=c(function(me){return y(me),re.apply(this,arguments)}),Z.apply(this,arguments)}});var E=v(3129);function P(Z){Array.isArray(Z.stdio)&&Z.stdio.forEach(function(ne){ne&&ne._handle&&(ne._handle.onread=c(ne._handle.onread),S(ne._handle,"close",ce))}),Z._handle&&(Z._handle.onexit=c(Z._handle.onexit))}E.ChildProcess?S(E.ChildProcess.prototype,"spawn",function(Z){return function(){var ne=Z.apply(this,arguments);return P(this),ne}}):g(E,["execFile","fork","spawn"],function(Z){return function(){var ne=Z.apply(this,arguments);return P(ne),ne}}),process._fatalException||(process._originalNextTick=process.nextTick);var A=[];process._nextDomainTick&&A.push("_nextDomainTick"),process._tickDomainCallback&&A.push("_tickDomainCallback"),g(process,A,J),S(process,"nextTick",ce);var O=["setTimeout","setInterval"];global.setImmediate&&O.push("setImmediate");var I=v(8213),L=global.setTimeout===I.setTimeout;g(I,O,ce),L&&g(global,O,ce);var D=v(881);g(D,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],J),D.resolveNaptr&&S(D,"resolveNaptr",J);var U=v(5747);g(U,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],J),U.lchown&&S(U,"lchown",J),U.lchmod&&S(U,"lchmod",J),U.ftruncate&&S(U,"ftruncate",J);var M;try{M=v(8761)}catch(Z){}if(M&&M.Deflate&&M.Deflate.prototype){var x=Object.getPrototypeOf(M.Deflate.prototype);x._transform?S(x,"_transform",J):x.write&&x.flush&&x.end&&g(x,["write","flush","end"],J)}var F;try{F=v(6417)}catch(Z){}if(F){var H=["pbkdf2","randomBytes"];d||H.push("pseudoRandomBytes"),g(F,H,J)}var B=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";if(B){var j=process.addAsyncListener({create:function(){B=!1}});global.Promise.resolve(!0).then(function(){B=!1}),process.removeAsyncListener(j)}B&&W();function W(){var Z=global.Promise;function ne(de){if(!(this instanceof ne))return Z(de);if(typeof de!="function")return new Z(de);var ge,_e,xe=new Z(it);xe.__proto__=ne.prototype;try{de.apply(ge,_e)}catch(je){_e[1](je)}return xe;function it(je,Xe){ge=this,_e=[Ne,He];function Ne(Re){return me(xe,!1),je(Re)}function He(Re){return me(xe,!1),Xe(Re)}}}if(u.inherits(ne,Z),S(Z.prototype,"then",Se),Z.prototype.chain&&S(Z.prototype,"chain",Se),a)global.Promise=v(8286)(Z,me);else{var re=["all","race","reject","resolve","accept","defer"];re.forEach(function(de){typeof Z[de]=="function"&&(ne[de]=Z[de])}),global.Promise=ne}function me(de,ge){(!de.__asl_wrapper||ge)&&(de.__asl_wrapper=c(fe))}function fe(de,ge,_e,xe){var it;try{return it=ge.call(de,_e),{returnVal:it,error:!1}}catch(je){return{errorVal:je,error:!0}}finally{it instanceof Z?xe.__asl_wrapper=function(){var Xe=it.__asl_wrapper||fe;return Xe.apply(this,arguments)}:me(xe,!0)}}function Se(de){return function(){var _e=this,xe=de.apply(_e,Array.prototype.map.call(arguments,it));return xe.__asl_wrapper=function(Xe,Ne,He,Re){return _e.__asl_wrapper?(_e.__asl_wrapper(Xe,function(){},null,xe),xe.__asl_wrapper(Xe,Ne,He,Re)):fe(Xe,Ne,He,Re)},xe;function it(je){return typeof je!="function"?je:c(function(Xe){var Ne=(_e.__asl_wrapper||fe)(this,je,Xe,xe);if(Ne.error)throw Ne.errorVal;return Ne.returnVal})}}}}function J(Z){var ne=function(){var re,me=arguments.length-1;if(typeof arguments[me]=="function"){re=Array(arguments.length);for(var fe=0;fe<arguments.length-1;fe++)re[fe]=arguments[fe];re[me]=c(arguments[me])}return Z.apply(this,re||arguments)};switch(Z.length){case 1:return function(re){return arguments.length!==1?ne.apply(this,arguments):(typeof re=="function"&&(re=c(re)),Z.call(this,re))};case 2:return function(re,me){return arguments.length!==2?ne.apply(this,arguments):(typeof me=="function"&&(me=c(me)),Z.call(this,re,me))};case 3:return function(re,me,fe){return arguments.length!==3?ne.apply(this,arguments):(typeof fe=="function"&&(fe=c(fe)),Z.call(this,re,me,fe))};case 4:return function(re,me,fe,Se){return arguments.length!==4?ne.apply(this,arguments):(typeof Se=="function"&&(Se=c(Se)),Z.call(this,re,me,fe,Se))};case 5:return function(re,me,fe,Se,de){return arguments.length!==5?ne.apply(this,arguments):(typeof de=="function"&&(de=c(de)),Z.call(this,re,me,fe,Se,de))};case 6:return function(re,me,fe,Se,de,ge){return arguments.length!==6?ne.apply(this,arguments):(typeof ge=="function"&&(ge=c(ge)),Z.call(this,re,me,fe,Se,de,ge))};default:return ne}}function ce(Z){var ne=function(){var re;if(typeof arguments[0]=="function"){re=Array(arguments.length),re[0]=c(arguments[0]);for(var me=1;me<arguments.length;me++)re[me]=arguments[me]}return Z.apply(this,re||arguments)};switch(Z.length){case 1:return function(re){return arguments.length!==1?ne.apply(this,arguments):(typeof re=="function"&&(re=c(re)),Z.call(this,re))};case 2:return function(re,me){return arguments.length!==2?ne.apply(this,arguments):(typeof re=="function"&&(re=c(re)),Z.call(this,re,me))};case 3:return function(re,me,fe){return arguments.length!==3?ne.apply(this,arguments):(typeof re=="function"&&(re=c(re)),Z.call(this,re,me,fe))};case 4:return function(re,me,fe,Se){return arguments.length!==4?ne.apply(this,arguments):(typeof re=="function"&&(re=c(re)),Z.call(this,re,me,fe,Se))};case 5:return function(re,me,fe,Se,de){return arguments.length!==5?ne.apply(this,arguments):(typeof re=="function"&&(re=c(re)),Z.call(this,re,me,fe,Se,de))};case 6:return function(re,me,fe,Se,de,ge){return arguments.length!==6?ne.apply(this,arguments):(typeof re=="function"&&(re=c(re)),Z.call(this,re,me,fe,Se,de,ge))};default:return ne}}function oe(Z){return(Z=Number(Z))>=0?Z:!1}function we(Z){return typeof Z=="string"&&oe(Z)===!1}},9669:(o,C,v)=>{o.exports=v(1609)},7970:(o,C,v)=>{"use strict";var k=v(4867),R=v(6026),S=v(4097),g=v(5327),c=v(8605),u=v(7211),a=v(938).http,m=v(938).https,f=v(8835),d=v(8761),p=v(696),w=v(5061),y=v(481),_=/https:?/;function E(P,A,O){if(P.hostname=A.host,P.host=A.host,P.port=A.port,P.path=O,A.auth){var I=Buffer.from(A.auth.username+":"+A.auth.password,"utf8").toString("base64");P.headers["Proxy-Authorization"]="Basic "+I}P.beforeRedirect=function(D){D.headers.host=D.host,E(D,A,D.href)}}o.exports=function(A){return new Promise(function(I,L){var D=function(Re){I(Re)},U=function(Re){L(Re)},M=A.data,x=A.headers;if(!x["User-Agent"]&&!x["user-agent"]&&(x["User-Agent"]="axios/"+p.version),M&&!k.isStream(M)){if(!Buffer.isBuffer(M))if(k.isArrayBuffer(M))M=Buffer.from(new Uint8Array(M));else if(k.isString(M))M=Buffer.from(M,"utf-8");else return U(w("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",A));x["Content-Length"]=M.length}var F=void 0;if(A.auth){var H=A.auth.username||"",B=A.auth.password||"";F=H+":"+B}var j=S(A.baseURL,A.url),W=f.parse(j),J=W.protocol||"http:";if(!F&&W.auth){var ce=W.auth.split(":"),oe=ce[0]||"",we=ce[1]||"";F=oe+":"+we}F&&delete x.Authorization;var Z=_.test(J),ne=Z?A.httpsAgent:A.httpAgent,re={path:g(W.path,A.params,A.paramsSerializer).replace(/^\?/,""),method:A.method.toUpperCase(),headers:x,agent:ne,agents:{http:A.httpAgent,https:A.httpsAgent},auth:F};A.socketPath?re.socketPath=A.socketPath:(re.hostname=W.hostname,re.port=W.port);var me=A.proxy;if(!me&&me!==!1){var fe=J.slice(0,-1)+"_proxy",Se=process.env[fe]||process.env[fe.toUpperCase()];if(Se){var de=f.parse(Se),ge=process.env.no_proxy||process.env.NO_PROXY,_e=!0;if(ge){var xe=ge.split(",").map(function(Re){return Re.trim()});_e=!xe.some(function(Re){return Re?Re==="*"||Re[0]==="."&&W.hostname.substr(W.hostname.length-Re.length)===Re?!0:W.hostname===Re:!1})}if(_e&&(me={host:de.hostname,port:de.port,protocol:de.protocol},de.auth)){var it=de.auth.split(":");me.auth={username:it[0],password:it[1]}}}}me&&(re.headers.host=W.hostname+(W.port?":"+W.port:""),E(re,me,J+"//"+W.hostname+(W.port?":"+W.port:"")+re.path));var je,Xe=Z&&(me?_.test(me.protocol):!0);A.transport?je=A.transport:A.maxRedirects===0?je=Xe?u:c:(A.maxRedirects&&(re.maxRedirects=A.maxRedirects),je=Xe?m:a),A.maxBodyLength>-1&&(re.maxBodyLength=A.maxBodyLength);var Ne=je.request(re,function(Re){if(!Ne.aborted){var Dt=Re,Ee=Re.req||Ne;if(Re.statusCode!==204&&Ee.method!=="HEAD"&&A.decompress!==!1)switch(Re.headers["content-encoding"]){case"gzip":case"compress":case"deflate":Dt=Dt.pipe(d.createUnzip()),delete Re.headers["content-encoding"];break}var K={status:Re.statusCode,statusText:Re.statusMessage,headers:Re.headers,config:A,request:Ee};if(A.responseType==="stream")K.data=Dt,R(D,U,K);else{var tr=[];Dt.on("data",function(Je){tr.push(Je),A.maxContentLength>-1&&Buffer.concat(tr).length>A.maxContentLength&&(Dt.destroy(),U(w("maxContentLength size of "+A.maxContentLength+" exceeded",A,null,Ee)))}),Dt.on("error",function(Je){Ne.aborted||U(y(Je,A,null,Ee))}),Dt.on("end",function(){var Je=Buffer.concat(tr);A.responseType!=="arraybuffer"&&(Je=Je.toString(A.responseEncoding),(!A.responseEncoding||A.responseEncoding==="utf8")&&(Je=k.stripBOM(Je))),K.data=Je,R(D,U,K)})}}});Ne.on("error",function(Re){Ne.aborted&&Re.code!=="ERR_FR_TOO_MANY_REDIRECTS"||U(y(Re,A,null,Ne))}),A.timeout&&Ne.setTimeout(A.timeout,function(){Ne.abort(),U(w("timeout of "+A.timeout+"ms exceeded",A,"ECONNABORTED",Ne))}),A.cancelToken&&A.cancelToken.promise.then(function(Re){Ne.aborted||(Ne.abort(),U(Re))}),k.isStream(M)?M.on("error",function(Re){U(y(Re,A,null,Ne))}).pipe(Ne):Ne.end(M)})}},5448:(o,C,v)=>{"use strict";var k=v(4867),R=v(6026),S=v(4372),g=v(5327),c=v(4097),u=v(4109),a=v(7985),m=v(5061);o.exports=function(d){return new Promise(function(w,y){var _=d.data,E=d.headers;k.isFormData(_)&&delete E["Content-Type"];var P=new XMLHttpRequest;if(d.auth){var A=d.auth.username||"",O=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";E.Authorization="Basic "+btoa(A+":"+O)}var I=c(d.baseURL,d.url);if(P.open(d.method.toUpperCase(),g(I,d.params,d.paramsSerializer),!0),P.timeout=d.timeout,P.onreadystatechange=function(){if(!(!P||P.readyState!==4)&&!(P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0))){var U="getAllResponseHeaders"in P?u(P.getAllResponseHeaders()):null,M=!d.responseType||d.responseType==="text"?P.responseText:P.response,x={data:M,status:P.status,statusText:P.statusText,headers:U,config:d,request:P};R(w,y,x),P=null}},P.onabort=function(){!P||(y(m("Request aborted",d,"ECONNABORTED",P)),P=null)},P.onerror=function(){y(m("Network Error",d,null,P)),P=null},P.ontimeout=function(){var U="timeout of "+d.timeout+"ms exceeded";d.timeoutErrorMessage&&(U=d.timeoutErrorMessage),y(m(U,d,"ECONNABORTED",P)),P=null},k.isStandardBrowserEnv()){var L=(d.withCredentials||a(I))&&d.xsrfCookieName?S.read(d.xsrfCookieName):void 0;L&&(E[d.xsrfHeaderName]=L)}if("setRequestHeader"in P&&k.forEach(E,function(U,M){typeof _=="undefined"&&M.toLowerCase()==="content-type"?delete E[M]:P.setRequestHeader(M,U)}),k.isUndefined(d.withCredentials)||(P.withCredentials=!!d.withCredentials),d.responseType)try{P.responseType=d.responseType}catch(D){if(d.responseType!=="json")throw D}typeof d.onDownloadProgress=="function"&&P.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",d.onUploadProgress),d.cancelToken&&d.cancelToken.promise.then(function(U){!P||(P.abort(),y(U),P=null)}),_||(_=null),P.send(_)})}},1609:(o,C,v)=>{"use strict";var k=v(4867),R=v(1849),S=v(321),g=v(7185),c=v(5655);function u(m){var f=new S(m),d=R(S.prototype.request,f);return k.extend(d,S.prototype,f),k.extend(d,f),d}var a=u(c);a.Axios=S,a.create=function(f){return u(g(a.defaults,f))},a.Cancel=v(5263),a.CancelToken=v(4972),a.isCancel=v(6502),a.all=function(f){return Promise.all(f)},a.spread=v(8713),a.isAxiosError=v(6268),o.exports=a,o.exports.default=a},5263:o=>{"use strict";function C(v){this.message=v}C.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},C.prototype.__CANCEL__=!0,o.exports=C},4972:(o,C,v)=>{"use strict";var k=v(5263);function R(S){if(typeof S!="function")throw new TypeError("executor must be a function.");var g;this.promise=new Promise(function(a){g=a});var c=this;S(function(a){c.reason||(c.reason=new k(a),g(c.reason))})}R.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},R.source=function(){var g,c=new R(function(a){g=a});return{token:c,cancel:g}},o.exports=R},6502:o=>{"use strict";o.exports=function(v){return!!(v&&v.__CANCEL__)}},321:(o,C,v)=>{"use strict";var k=v(4867),R=v(5327),S=v(782),g=v(3572),c=v(7185);function u(a){this.defaults=a,this.interceptors={request:new S,response:new S}}u.prototype.request=function(m){typeof m=="string"?(m=arguments[1]||{},m.url=arguments[0]):m=m||{},m=c(this.defaults,m),m.method?m.method=m.method.toLowerCase():this.defaults.method?m.method=this.defaults.method.toLowerCase():m.method="get";var f=[g,void 0],d=Promise.resolve(m);for(this.interceptors.request.forEach(function(w){f.unshift(w.fulfilled,w.rejected)}),this.interceptors.response.forEach(function(w){f.push(w.fulfilled,w.rejected)});f.length;)d=d.then(f.shift(),f.shift());return d},u.prototype.getUri=function(m){return m=c(this.defaults,m),R(m.url,m.params,m.paramsSerializer).replace(/^\?/,"")},k.forEach(["delete","get","head","options"],function(m){u.prototype[m]=function(f,d){return this.request(c(d||{},{method:m,url:f,data:(d||{}).data}))}}),k.forEach(["post","put","patch"],function(m){u.prototype[m]=function(f,d,p){return this.request(c(p||{},{method:m,url:f,data:d}))}}),o.exports=u},782:(o,C,v)=>{"use strict";var k=v(4867);function R(){this.handlers=[]}R.prototype.use=function(g,c){return this.handlers.push({fulfilled:g,rejected:c}),this.handlers.length-1},R.prototype.eject=function(g){this.handlers[g]&&(this.handlers[g]=null)},R.prototype.forEach=function(g){k.forEach(this.handlers,function(u){u!==null&&g(u)})},o.exports=R},4097:(o,C,v)=>{"use strict";var k=v(1793),R=v(9002);o.exports=function(g,c){return g&&!k(c)?R(g,c):c}},5061:(o,C,v)=>{"use strict";var k=v(481);o.exports=function(S,g,c,u,a){var m=new Error(S);return k(m,g,c,u,a)}},3572:(o,C,v)=>{"use strict";var k=v(4867),R=v(8527),S=v(6502),g=v(5655);function c(u){u.cancelToken&&u.cancelToken.throwIfRequested()}o.exports=function(a){c(a),a.headers=a.headers||{},a.data=R(a.data,a.headers,a.transformRequest),a.headers=k.merge(a.headers.common||{},a.headers[a.method]||{},a.headers),k.forEach(["delete","get","head","post","put","patch","common"],function(d){delete a.headers[d]});var m=a.adapter||g.adapter;return m(a).then(function(d){return c(a),d.data=R(d.data,d.headers,a.transformResponse),d},function(d){return S(d)||(c(a),d&&d.response&&(d.response.data=R(d.response.data,d.response.headers,a.transformResponse))),Promise.reject(d)})}},481:o=>{"use strict";o.exports=function(v,k,R,S,g){return v.config=k,R&&(v.code=R),v.request=S,v.response=g,v.isAxiosError=!0,v.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},v}},7185:(o,C,v)=>{"use strict";var k=v(4867);o.exports=function(S,g){g=g||{};var c={},u=["url","method","data"],a=["headers","auth","proxy","params"],m=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],f=["validateStatus"];function d(_,E){return k.isPlainObject(_)&&k.isPlainObject(E)?k.merge(_,E):k.isPlainObject(E)?k.merge({},E):k.isArray(E)?E.slice():E}function p(_){k.isUndefined(g[_])?k.isUndefined(S[_])||(c[_]=d(void 0,S[_])):c[_]=d(S[_],g[_])}k.forEach(u,function(E){k.isUndefined(g[E])||(c[E]=d(void 0,g[E]))}),k.forEach(a,p),k.forEach(m,function(E){k.isUndefined(g[E])?k.isUndefined(S[E])||(c[E]=d(void 0,S[E])):c[E]=d(void 0,g[E])}),k.forEach(f,function(E){E in g?c[E]=d(S[E],g[E]):E in S&&(c[E]=d(void 0,S[E]))});var w=u.concat(a).concat(m).concat(f),y=Object.keys(S).concat(Object.keys(g)).filter(function(E){return w.indexOf(E)===-1});return k.forEach(y,p),c}},6026:(o,C,v)=>{"use strict";var k=v(5061);o.exports=function(S,g,c){var u=c.config.validateStatus;!c.status||!u||u(c.status)?S(c):g(k("Request failed with status code "+c.status,c.config,null,c.request,c))}},8527:(o,C,v)=>{"use strict";var k=v(4867);o.exports=function(S,g,c){return k.forEach(c,function(a){S=a(S,g)}),S}},5655:(o,C,v)=>{"use strict";var k=v(4867),R=v(6016),S={"Content-Type":"application/x-www-form-urlencoded"};function g(a,m){!k.isUndefined(a)&&k.isUndefined(a["Content-Type"])&&(a["Content-Type"]=m)}function c(){var a;return typeof XMLHttpRequest!="undefined"?a=v(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(a=v(7970)),a}var u={adapter:c(),transformRequest:[function(m,f){return R(f,"Accept"),R(f,"Content-Type"),k.isFormData(m)||k.isArrayBuffer(m)||k.isBuffer(m)||k.isStream(m)||k.isFile(m)||k.isBlob(m)?m:k.isArrayBufferView(m)?m.buffer:k.isURLSearchParams(m)?(g(f,"application/x-www-form-urlencoded;charset=utf-8"),m.toString()):k.isObject(m)?(g(f,"application/json;charset=utf-8"),JSON.stringify(m)):m}],transformResponse:[function(m){if(typeof m=="string")try{m=JSON.parse(m)}catch(f){}return m}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(m){return m>=200&&m<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},k.forEach(["delete","get","head"],function(m){u.headers[m]={}}),k.forEach(["post","put","patch"],function(m){u.headers[m]=k.merge(S)}),o.exports=u},1849:o=>{"use strict";o.exports=function(v,k){return function(){for(var S=new Array(arguments.length),g=0;g<S.length;g++)S[g]=arguments[g];return v.apply(k,S)}}},5327:(o,C,v)=>{"use strict";var k=v(4867);function R(S){return encodeURIComponent(S).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}o.exports=function(g,c,u){if(!c)return g;var a;if(u)a=u(c);else if(k.isURLSearchParams(c))a=c.toString();else{var m=[];k.forEach(c,function(p,w){p===null||typeof p=="undefined"||(k.isArray(p)?w=w+"[]":p=[p],k.forEach(p,function(_){k.isDate(_)?_=_.toISOString():k.isObject(_)&&(_=JSON.stringify(_)),m.push(R(w)+"="+R(_))}))}),a=m.join("&")}if(a){var f=g.indexOf("#");f!==-1&&(g=g.slice(0,f)),g+=(g.indexOf("?")===-1?"?":"&")+a}return g}},9002:o=>{"use strict";o.exports=function(v,k){return k?v.replace(/\/+$/,"")+"/"+k.replace(/^\/+/,""):v}},4372:(o,C,v)=>{"use strict";var k=v(4867);o.exports=k.isStandardBrowserEnv()?function(){return{write:function(g,c,u,a,m,f){var d=[];d.push(g+"="+encodeURIComponent(c)),k.isNumber(u)&&d.push("expires="+new Date(u).toGMTString()),k.isString(a)&&d.push("path="+a),k.isString(m)&&d.push("domain="+m),f===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(g){var c=document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(g){this.write(g,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:o=>{"use strict";o.exports=function(v){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(v)}},6268:o=>{"use strict";o.exports=function(v){return typeof v=="object"&&v.isAxiosError===!0}},7985:(o,C,v)=>{"use strict";var k=v(4867);o.exports=k.isStandardBrowserEnv()?function(){var S=/(msie|trident)/i.test(navigator.userAgent),g=document.createElement("a"),c;function u(a){var m=a;return S&&(g.setAttribute("href",m),m=g.href),g.setAttribute("href",m),{href:g.href,protocol:g.protocol?g.protocol.replace(/:$/,""):"",host:g.host,search:g.search?g.search.replace(/^\?/,""):"",hash:g.hash?g.hash.replace(/^#/,""):"",hostname:g.hostname,port:g.port,pathname:g.pathname.charAt(0)==="/"?g.pathname:"/"+g.pathname}}return c=u(window.location.href),function(m){var f=k.isString(m)?u(m):m;return f.protocol===c.protocol&&f.host===c.host}}():function(){return function(){return!0}}()},6016:(o,C,v)=>{"use strict";var k=v(4867);o.exports=function(S,g){k.forEach(S,function(u,a){a!==g&&a.toUpperCase()===g.toUpperCase()&&(S[g]=u,delete S[a])})}},4109:(o,C,v)=>{"use strict";var k=v(4867),R=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];o.exports=function(g){var c={},u,a,m;return g&&k.forEach(g.split(`
`),function(d){if(m=d.indexOf(":"),u=k.trim(d.substr(0,m)).toLowerCase(),a=k.trim(d.substr(m+1)),u){if(c[u]&&R.indexOf(u)>=0)return;u==="set-cookie"?c[u]=(c[u]?c[u]:[]).concat([a]):c[u]=c[u]?c[u]+", "+a:a}}),c}},8713:o=>{"use strict";o.exports=function(v){return function(R){return v.apply(null,R)}}},4867:(o,C,v)=>{"use strict";var k=v(1849),R=Object.prototype.toString;function S(F){return R.call(F)==="[object Array]"}function g(F){return typeof F=="undefined"}function c(F){return F!==null&&!g(F)&&F.constructor!==null&&!g(F.constructor)&&typeof F.constructor.isBuffer=="function"&&F.constructor.isBuffer(F)}function u(F){return R.call(F)==="[object ArrayBuffer]"}function a(F){return typeof FormData!="undefined"&&F instanceof FormData}function m(F){var H;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?H=ArrayBuffer.isView(F):H=F&&F.buffer&&F.buffer instanceof ArrayBuffer,H}function f(F){return typeof F=="string"}function d(F){return typeof F=="number"}function p(F){return F!==null&&typeof F=="object"}function w(F){if(R.call(F)!=="[object Object]")return!1;var H=Object.getPrototypeOf(F);return H===null||H===Object.prototype}function y(F){return R.call(F)==="[object Date]"}function _(F){return R.call(F)==="[object File]"}function E(F){return R.call(F)==="[object Blob]"}function P(F){return R.call(F)==="[object Function]"}function A(F){return p(F)&&P(F.pipe)}function O(F){return typeof URLSearchParams!="undefined"&&F instanceof URLSearchParams}function I(F){return F.replace(/^\s*/,"").replace(/\s*$/,"")}function L(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function D(F,H){if(!(F===null||typeof F=="undefined"))if(typeof F!="object"&&(F=[F]),S(F))for(var B=0,j=F.length;B<j;B++)H.call(null,F[B],B,F);else for(var W in F)Object.prototype.hasOwnProperty.call(F,W)&&H.call(null,F[W],W,F)}function U(){var F={};function H(W,J){w(F[J])&&w(W)?F[J]=U(F[J],W):w(W)?F[J]=U({},W):S(W)?F[J]=W.slice():F[J]=W}for(var B=0,j=arguments.length;B<j;B++)D(arguments[B],H);return F}function M(F,H,B){return D(H,function(W,J){B&&typeof W=="function"?F[J]=k(W,B):F[J]=W}),F}function x(F){return F.charCodeAt(0)===65279&&(F=F.slice(1)),F}o.exports={isArray:S,isArrayBuffer:u,isBuffer:c,isFormData:a,isArrayBufferView:m,isString:f,isNumber:d,isObject:p,isPlainObject:w,isUndefined:g,isDate:y,isFile:_,isBlob:E,isFunction:P,isStream:A,isURLSearchParams:O,isStandardBrowserEnv:L,forEach:D,merge:U,extend:M,trim:I,stripBOM:x}},696:o=>{"use strict";o.exports=JSON.parse('{"name":"axios","version":"0.21.1","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.10.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5186:(o,C,v)=>{var k=v(3698),R=v(2505),S=v(5382),g=Function.bind,c=g.bind(g);function u(p,w,y){var _=c(S,null).apply(null,y?[w,y]:[w]);p.api={remove:_},p.remove=_,["before","error","after","wrap"].forEach(function(E){var P=y?[w,E,y]:[w,E];p[E]=p.api[E]=c(R,null).apply(null,P)})}function a(){var p="h",w={registry:{}},y=k.bind(null,w,p);return u(y,w,p),y}function m(){var p={registry:{}},w=k.bind(null,p);return u(w,p),w}var f=!1;function d(){return f||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),f=!0),m()}d.Singular=a.bind(),d.Collection=m.bind(),o.exports=d,o.exports.Hook=d,o.exports.Singular=d.Singular,o.exports.Collection=d.Collection},2505:o=>{o.exports=C;function C(v,k,R,S){var g=S;v.registry[R]||(v.registry[R]=[]),k==="before"&&(S=function(c,u){return Promise.resolve().then(g.bind(null,u)).then(c.bind(null,u))}),k==="after"&&(S=function(c,u){var a;return Promise.resolve().then(c.bind(null,u)).then(function(m){return a=m,g(a,u)}).then(function(){return a})}),k==="error"&&(S=function(c,u){return Promise.resolve().then(c.bind(null,u)).catch(function(a){return g(a,u)})}),v.registry[R].push({hook:S,orig:g})}},3698:o=>{o.exports=C;function C(v,k,R,S){if(typeof R!="function")throw new Error("method for before hook must be a function");return S||(S={}),Array.isArray(k)?k.reverse().reduce(function(g,c){return C.bind(null,v,c,g,S)},R)():Promise.resolve().then(function(){return v.registry[k]?v.registry[k].reduce(function(g,c){return c.hook.bind(null,g,S)},R)():R(S)})}},5382:o=>{o.exports=C;function C(v,k,R){if(!!v.registry[k]){var S=v.registry[k].map(function(g){return g.orig}).indexOf(R);S!==-1&&v.registry[k].splice(S,1)}}},4046:(o,C,v)=>{"use strict";const k=v(1669),R=v(2357),S=v(9867),g=v(3223),c="cls@contexts",u="error@context",a=[];for(let I in g.providers)a[g.providers[I]]=I;const m=process.env.DEBUG_CLS_HOOKED;let f=-1;o.exports={getNamespace:p,createNamespace:w,destroyNamespace:y,reset:_,ERROR_SYMBOL:u};function d(I){this.name=I,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function(L,D){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return m&&E("    SETTING KEY:"+L+"="+D+" in ns:"+this.name+" uid:"+f+" active:"+k.inspect(this.active,!0)),this.active[L]=D,D},d.prototype.get=function(L){if(!this.active){m&&E("    GETTING KEY:"+L+"=undefined "+this.name+" uid:"+f+" active:"+k.inspect(this.active,!0));return}return m&&E("    GETTING KEY:"+L+"="+this.active[L]+" "+this.name+" uid:"+f+" active:"+k.inspect(this.active,!0)),this.active[L]},d.prototype.createContext=function(){m&&E("   CREATING Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  active:"+k.inspect(this.active,!0,2,!0));let L=Object.create(this.active?this.active:Object.prototype);return L._ns_name=this.name,L.id=f,m&&E("   CREATED Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  context:"+k.inspect(L,!0,2,!0)),L},d.prototype.run=function(L){let D=this.createContext();this.enter(D);try{return m&&E(" BEFORE RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+k.inspect(D)),L(D),D}catch(U){throw U&&(U[u]=D),U}finally{m&&E(" AFTER RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+k.inspect(D)),this.exit(D)}},d.prototype.runAndReturn=function(L){var D;return this.run(function(U){D=L(U)}),D},d.prototype.runPromise=function(L){let D=this.createContext();this.enter(D);let U=L(D);if(!U||!U.then||!U.catch)throw new Error("fn must return a promise.");return m&&E(" BEFORE runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+k.inspect(D)),U.then(M=>(m&&E(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+k.inspect(D)),this.exit(D),M)).catch(M=>{throw M[u]=D,m&&E(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+k.inspect(D)),this.exit(D),M})},d.prototype.bind=function(L,D){D||(this.active?D=this.active:D=this.createContext());let U=this;return function(){U.enter(D);try{return L.apply(this,arguments)}catch(x){throw x&&(x[u]=D),x}finally{U.exit(D)}}},d.prototype.enter=function(L){R.ok(L,"context must be provided for entering"),m&&E("  ENTER "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+k.inspect(L)),this._set.push(this.active),this.active=L},d.prototype.exit=function(L){if(R.ok(L,"context must be provided for exiting"),m&&E("  EXIT "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+k.inspect(L)),this.active===L){R.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let D=this._set.lastIndexOf(L);D<0?(m&&E("??ERROR?? context exiting but not entered - ignoring: "+k.inspect(L)),R.ok(D>=0,`context not currently entered; can't exit. 
`+k.inspect(this)+`
`+k.inspect(L))):(R.ok(D,"can't remove top context"),this._set.splice(D,1))},d.prototype.bindEmitter=function(L){R.ok(L.on&&L.addListener&&L.emit,"can only bind real EEs");let D=this,U="context@"+this.name;function M(F){!F||(F[c]||(F[c]=Object.create(null)),F[c][U]={namespace:D,context:D.active})}function x(F){if(!(F&&F[c]))return F;let H=F,B=F[c];return Object.keys(B).forEach(function(j){let W=B[j];H=W.namespace.bind(H,W.context)}),H}S(L,M,x)},d.prototype.fromException=function(L){return L[u]};function p(I){return process.namespaces[I]}function w(I){R.ok(I,"namespace must be given a name."),m&&E("CREATING NAMESPACE "+I);let L=new d(I);return L.id=f,g.addHooks({init(D,U,M,x,F){f=D,x?(L._contexts.set(D,L._contexts.get(x)),m&&E("PARENTID: "+I+" uid:"+D+" parent:"+x+" provider:"+M)):L._contexts.set(f,L.active),m&&E("INIT "+I+" uid:"+D+" parent:"+x+" provider:"+a[M]+" active:"+k.inspect(L.active,!0))},pre(D,U){f=D;let M=L._contexts.get(D);M?(m&&E(" PRE "+I+" uid:"+D+" handle:"+P(U)+" context:"+k.inspect(M)),L.enter(M)):m&&E(" PRE MISSING CONTEXT "+I+" uid:"+D+" handle:"+P(U))},post(D,U){f=D;let M=L._contexts.get(D);M?(m&&E(" POST "+I+" uid:"+D+" handle:"+P(U)+" context:"+k.inspect(M)),L.exit(M)):m&&E(" POST MISSING CONTEXT "+I+" uid:"+D+" handle:"+P(U))},destroy(D){f=D,m&&E("DESTROY "+I+" uid:"+D+" context:"+k.inspect(L._contexts.get(f))+" active:"+k.inspect(L.active,!0)),L._contexts.delete(D)}}),process.namespaces[I]=L,L}function y(I){let L=p(I);R.ok(L,`can't delete nonexistent namespace! "`+I+'"'),R.ok(L.id,"don't assign to process.namespaces directly! "+k.inspect(L)),process.namespaces[I]=null}function _(){process.namespaces&&Object.keys(process.namespaces).forEach(function(I){y(I)}),process.namespaces=Object.create(null)}process.namespaces={},g._state&&!g._state.enabled&&g.enable();function E(I){process.env.DEBUG&&process._rawDebug(I)}function P(I){if(!I)return I;if(typeof I=="function")return I.name?I.name:(I.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(I.constructor&&I.constructor.name)return I.constructor.name}if(m){var A=v(2512);for(var O in A.filter._modifiers)A.filter.deattach(O)}},3964:(o,C,v)=>{"use strict";const k=v(1669),R=v(2357),S=v(9867),g=v(7303),c="cls@contexts",u="error@context",a=process.env.DEBUG_CLS_HOOKED;let m=-1;o.exports={getNamespace:d,createNamespace:p,destroyNamespace:w,reset:y,ERROR_SYMBOL:u};function f(E){this.name=E,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}f.prototype.set=function(P,A){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[P]=A,a){const O=" ".repeat(this._indent<0?0:this._indent);_(O+"CONTEXT-SET KEY:"+P+"="+A+" in ns:"+this.name+" currentUid:"+m+" active:"+k.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return A},f.prototype.get=function(P){if(!this.active){if(a){const A=g.currentId(),O=g.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(`${I}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${P}=undefined currentUid:${m} asyncHooksCurrentId:${A} triggerId:${O} len:${this._set.length}`)}return}if(a){const A=g.executionAsyncId(),O=g.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(I+"CONTEXT-GETTING KEY:"+P+"="+this.active[P]+" ("+this.name+") currentUid:"+m+" active:"+k.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),_(`${I}CONTEXT-GETTING KEY: (${this.name}) ${P}=${this.active[P]} currentUid:${m} asyncHooksCurrentId:${A} triggerId:${O} len:${this._set.length} active:${k.inspect(this.active)}`)}return this.active[P]},f.prototype.createContext=function(){let P=Object.create(this.active?this.active:Object.prototype);if(P._ns_name=this.name,P.id=m,a){const A=g.executionAsyncId(),O=g.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(`${I}CONTEXT-CREATED Context: (${this.name}) currentUid:${m} asyncHooksCurrentId:${A} triggerId:${O} len:${this._set.length} context:${k.inspect(P,{showHidden:!0,depth:2,colors:!0})}`)}return P},f.prototype.run=function(P){let A=this.createContext();this.enter(A);try{if(a){const O=g.triggerAsyncId(),I=g.executionAsyncId(),L=" ".repeat(this._indent<0?0:this._indent);_(`${L}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${m} triggerId:${O} asyncHooksCurrentId:${I} len:${this._set.length} context:${k.inspect(A)}`)}return P(A),A}catch(O){throw O&&(O[u]=A),O}finally{if(a){const O=g.triggerAsyncId(),I=g.executionAsyncId(),L=" ".repeat(this._indent<0?0:this._indent);_(`${L}CONTEXT-RUN END: (${this.name}) currentUid:${m} triggerId:${O} asyncHooksCurrentId:${I} len:${this._set.length} ${k.inspect(A)}`)}this.exit(A)}},f.prototype.runAndReturn=function(P){let A;return this.run(function(O){A=P(O)}),A},f.prototype.runPromise=function(P){let A=this.createContext();this.enter(A);let O=P(A);if(!O||!O.then||!O.catch)throw new Error("fn must return a promise.");return a&&_("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+m+" len:"+this._set.length+" "+k.inspect(A)),O.then(I=>(a&&_("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+m+" len:"+this._set.length+" "+k.inspect(A)),this.exit(A),I)).catch(I=>{throw I[u]=A,a&&_("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+m+" len:"+this._set.length+" "+k.inspect(A)),this.exit(A),I})},f.prototype.bind=function(P,A){A||(this.active?A=this.active:A=this.createContext());let O=this;return function(){O.enter(A);try{return P.apply(this,arguments)}catch(L){throw L&&(L[u]=A),L}finally{O.exit(A)}}},f.prototype.enter=function(P){if(R.ok(P,"context must be provided for entering"),a){const A=g.executionAsyncId(),O=g.triggerAsyncId(),I=" ".repeat(this._indent<0?0:this._indent);_(`${I}CONTEXT-ENTER: (${this.name}) currentUid:${m} triggerId:${O} asyncHooksCurrentId:${A} len:${this._set.length} ${k.inspect(P)}`)}this._set.push(this.active),this.active=P},f.prototype.exit=function(P){if(R.ok(P,"context must be provided for exiting"),a){const O=g.executionAsyncId(),I=g.triggerAsyncId(),L=" ".repeat(this._indent<0?0:this._indent);_(`${L}CONTEXT-EXIT: (${this.name}) currentUid:${m} triggerId:${I} asyncHooksCurrentId:${O} len:${this._set.length} ${k.inspect(P)}`)}if(this.active===P){R.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let A=this._set.lastIndexOf(P);A<0?(a&&_("??ERROR?? context exiting but not entered - ignoring: "+k.inspect(P)),R.ok(A>=0,`context not currently entered; can't exit. 
`+k.inspect(this)+`
`+k.inspect(P))):(R.ok(A,"can't remove top context"),this._set.splice(A,1))},f.prototype.bindEmitter=function(P){R.ok(P.on&&P.addListener&&P.emit,"can only bind real EEs");let A=this,O="context@"+this.name;function I(D){!D||(D[c]||(D[c]=Object.create(null)),D[c][O]={namespace:A,context:A.active})}function L(D){if(!(D&&D[c]))return D;let U=D,M=D[c];return Object.keys(M).forEach(function(x){let F=M[x];U=F.namespace.bind(U,F.context)}),U}S(P,I,L)},f.prototype.fromException=function(P){return P[u]};function d(E){return process.namespaces[E]}function p(E){R.ok(E,"namespace must be given a name."),a&&_(`NS-CREATING NAMESPACE (${E})`);let P=new f(E);return P.id=m,g.createHook({init(O,I,L,D){if(m=g.executionAsyncId(),P.active){if(P._contexts.set(O,P.active),a){const U=" ".repeat(P._indent<0?0:P._indent);_(`${U}INIT [${I}] (${E}) asyncId:${O} currentUid:${m} triggerId:${L} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${D}`)}}else if(m===0){const U=g.triggerAsyncId(),M=P._contexts.get(U);if(M){if(P._contexts.set(O,M),a){const x=" ".repeat(P._indent<0?0:P._indent);_(`${x}INIT USING CONTEXT FROM TRIGGERID [${I}] (${E}) asyncId:${O} currentUid:${m} triggerId:${U} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${D}`)}}else if(a){const x=" ".repeat(P._indent<0?0:P._indent);_(`${x}INIT MISSING CONTEXT [${I}] (${E}) asyncId:${O} currentUid:${m} triggerId:${U} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${D}`)}}if(a&&I==="PROMISE"){_(k.inspect(D,{showHidden:!0}));const U=D.parentId,M=" ".repeat(P._indent<0?0:P._indent);_(`${M}INIT RESOURCE-PROMISE [${I}] (${E}) parentId:${U} asyncId:${O} currentUid:${m} triggerId:${L} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${D}`)}},before(O){m=g.executionAsyncId();let I;if(I=P._contexts.get(O)||P._contexts.get(m),I){if(a){const L=g.triggerAsyncId(),D=" ".repeat(P._indent<0?0:P._indent);_(`${D}BEFORE (${E}) asyncId:${O} currentUid:${m} triggerId:${L} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(I)}`),P._indent+=2}P.enter(I)}else if(a){const L=g.triggerAsyncId(),D=" ".repeat(P._indent<0?0:P._indent);_(`${D}BEFORE MISSING CONTEXT (${E}) asyncId:${O} currentUid:${m} triggerId:${L} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${k.inspect(P._contexts,{showHidden:!0,depth:2,colors:!0})}`),P._indent+=2}},after(O){m=g.executionAsyncId();let I;if(I=P._contexts.get(O)||P._contexts.get(m),I){if(a){const L=g.triggerAsyncId();P._indent-=2;const D=" ".repeat(P._indent<0?0:P._indent);_(`${D}AFTER (${E}) asyncId:${O} currentUid:${m} triggerId:${L} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(I)}`)}P.exit(I)}else if(a){const L=g.triggerAsyncId();P._indent-=2;const D=" ".repeat(P._indent<0?0:P._indent);_(`${D}AFTER MISSING CONTEXT (${E}) asyncId:${O} currentUid:${m} triggerId:${L} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(I)}`)}},destroy(O){if(m=g.executionAsyncId(),a){const I=g.triggerAsyncId(),L=" ".repeat(P._indent<0?0:P._indent);_(`${L}DESTROY (${E}) currentUid:${m} asyncId:${O} triggerId:${I} active:${k.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${k.inspect(P._contexts.get(m))}`)}P._contexts.delete(O)}}).enable(),process.namespaces[E]=P,P}function w(E){let P=d(E);R.ok(P,`can't delete nonexistent namespace! "`+E+'"'),R.ok(P.id,"don't assign to process.namespaces directly! "+k.inspect(P)),process.namespaces[E]=null}function y(){process.namespaces&&Object.keys(process.namespaces).forEach(function(E){w(E)}),process.namespaces=Object.create(null)}process.namespaces={};function _(...E){a&&process._rawDebug(`${k.format(...E)}`)}},9562:(o,C,v)=>{"use strict";const k=v(6625);process&&k.gte(process.versions.node,"8.0.0")?o.exports=v(3964):o.exports=v(4046)},3057:(o,C,v)=>{"use strict";var k=v(2357),R=v(9867),S="cls@contexts",g="error@context";process.addAsyncListener||v(7645);function c(d){this.name=d,this.active=null,this._set=[],this.id=null}c.prototype.set=function(d,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=p,p},c.prototype.get=function(d){if(!!this.active)return this.active[d]},c.prototype.createContext=function(){return Object.create(this.active)},c.prototype.run=function(d){var p=this.createContext();this.enter(p);try{return d(p),p}catch(w){throw w&&(w[g]=p),w}finally{this.exit(p)}},c.prototype.runAndReturn=function(d){var p;return this.run(function(w){p=d(w)}),p},c.prototype.bind=function(d,p){p||(this.active?p=this.active:p=this.createContext());var w=this;return function(){w.enter(p);try{return d.apply(this,arguments)}catch(y){throw y&&(y[g]=p),y}finally{w.exit(p)}}},c.prototype.enter=function(d){k.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},c.prototype.exit=function(d){if(k.ok(d,"context must be provided for exiting"),this.active===d){k.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(d);k.ok(p>=0,"context not currently entered; can't exit"),k.ok(p,"can't remove top context"),this._set.splice(p,1)},c.prototype.bindEmitter=function(d){k.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var p=this,w="context@"+this.name;function y(E){!E||(E[S]||(E[S]=Object.create(null)),E[S][w]={namespace:p,context:p.active})}function _(E){if(!(E&&E[S]))return E;var P=E,A=E[S];return Object.keys(A).forEach(function(O){var I=A[O];P=I.namespace.bind(P,I.context)}),P}R(d,y,_)},c.prototype.fromException=function(d){return d[g]};function u(d){return process.namespaces[d]}function a(d){k.ok(d,"namespace must be given a name!");var p=new c(d);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(w,y){y&&p.enter(y)},after:function(w,y){y&&p.exit(y)},error:function(w){w&&p.exit(w)}}),process.namespaces[d]=p,p}function m(d){var p=u(d);k.ok(p,"can't delete nonexistent namespace!"),k.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[d]=null}function f(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){m(d)}),process.namespaces=Object.create(null)}process.namespaces||f(),o.exports={getNamespace:u,createNamespace:a,destroyNamespace:m,reset:f}},5175:o=>{"use strict";function C(v){if(!/^data:/i.test(v))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');v=v.replace(/\r?\n/g,"");const k=v.indexOf(",");if(k===-1||k<=4)throw new TypeError("malformed data: URI");const R=v.substring(5,k).split(";");let S="",g=!1;const c=R[0]||"text/plain";let u=c;for(let d=1;d<R.length;d++)R[d]==="base64"?g=!0:(u+=`;${R[d]}`,R[d].indexOf("charset=")===0&&(S=R[d].substring(8)));!R[0]&&!S.length&&(u+=";charset=US-ASCII",S="US-ASCII");const a=g?"base64":"ascii",m=unescape(v.substring(k+1)),f=Buffer.from(m,a);return f.type=c,f.typeFull=u,f.charset=S,f}o.exports=C},7484:function(o){(function(C,v){o.exports=v()})(this,function(){"use strict";var C="millisecond",v="second",k="minute",R="hour",S="day",g="week",c="month",u="quarter",a="year",m="date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},w=function(U,M,x){var F=String(U);return!F||F.length>=M?U:""+Array(M+1-F.length).join(x)+U},y={s:w,z:function(U){var M=-U.utcOffset(),x=Math.abs(M),F=Math.floor(x/60),H=x%60;return(M<=0?"+":"-")+w(F,2,"0")+":"+w(H,2,"0")},m:function U(M,x){if(M.date()<x.date())return-U(x,M);var F=12*(x.year()-M.year())+(x.month()-M.month()),H=M.clone().add(F,c),B=x-H<0,j=M.clone().add(F+(B?-1:1),c);return+(-(F+(x-H)/(B?H-j:j-H))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:c,y:a,w:g,d:S,D:m,h:R,m:k,s:v,ms:C,Q:u}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},_="en",E={};E[_]=p;var P=function(U){return U instanceof L},A=function(U,M,x){var F;if(!U)return _;if(typeof U=="string")E[U]&&(F=U),M&&(E[U]=M,F=U);else{var H=U.name;E[H]=U,F=H}return!x&&F&&(_=F),F||!x&&_},O=function(U,M){if(P(U))return U.clone();var x=typeof M=="object"?M:{};return x.date=U,x.args=arguments,new L(x)},I=y;I.l=A,I.i=P,I.w=function(U,M){return O(U,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var L=function(){function U(x){this.$L=A(x.locale,null,!0),this.parse(x)}var M=U.prototype;return M.parse=function(x){this.$d=function(F){var H=F.date,B=F.utc;if(H===null)return new Date(NaN);if(I.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var j=H.match(f);if(j){var W=j[2]-1||0,J=(j[7]||"0").substring(0,3);return B?new Date(Date.UTC(j[1],W,j[3]||1,j[4]||0,j[5]||0,j[6]||0,J)):new Date(j[1],W,j[3]||1,j[4]||0,j[5]||0,j[6]||0,J)}}return new Date(H)}(x),this.$x=x.x||{},this.init()},M.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},M.$utils=function(){return I},M.isValid=function(){return this.$d.toString()!=="Invalid Date"},M.isSame=function(x,F){var H=O(x);return this.startOf(F)<=H&&H<=this.endOf(F)},M.isAfter=function(x,F){return O(x)<this.startOf(F)},M.isBefore=function(x,F){return this.endOf(F)<O(x)},M.$g=function(x,F,H){return I.u(x)?this[F]:this.set(H,x)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(x,F){var H=this,B=!!I.u(F)||F,j=I.p(x),W=function(me,fe){var Se=I.w(H.$u?Date.UTC(H.$y,fe,me):new Date(H.$y,fe,me),H);return B?Se:Se.endOf(S)},J=function(me,fe){return I.w(H.toDate()[me].apply(H.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(fe)),H)},ce=this.$W,oe=this.$M,we=this.$D,Z="set"+(this.$u?"UTC":"");switch(j){case a:return B?W(1,0):W(31,11);case c:return B?W(1,oe):W(0,oe+1);case g:var ne=this.$locale().weekStart||0,re=(ce<ne?ce+7:ce)-ne;return W(B?we-re:we+(6-re),oe);case S:case m:return J(Z+"Hours",0);case R:return J(Z+"Minutes",1);case k:return J(Z+"Seconds",2);case v:return J(Z+"Milliseconds",3);default:return this.clone()}},M.endOf=function(x){return this.startOf(x,!1)},M.$set=function(x,F){var H,B=I.p(x),j="set"+(this.$u?"UTC":""),W=(H={},H[S]=j+"Date",H[m]=j+"Date",H[c]=j+"Month",H[a]=j+"FullYear",H[R]=j+"Hours",H[k]=j+"Minutes",H[v]=j+"Seconds",H[C]=j+"Milliseconds",H)[B],J=B===S?this.$D+(F-this.$W):F;if(B===c||B===a){var ce=this.clone().set(m,1);ce.$d[W](J),ce.init(),this.$d=ce.set(m,Math.min(this.$D,ce.daysInMonth())).$d}else W&&this.$d[W](J);return this.init(),this},M.set=function(x,F){return this.clone().$set(x,F)},M.get=function(x){return this[I.p(x)]()},M.add=function(x,F){var H,B=this;x=Number(x);var j=I.p(F),W=function(oe){var we=O(B);return I.w(we.date(we.date()+Math.round(oe*x)),B)};if(j===c)return this.set(c,this.$M+x);if(j===a)return this.set(a,this.$y+x);if(j===S)return W(1);if(j===g)return W(7);var J=(H={},H[k]=6e4,H[R]=36e5,H[v]=1e3,H)[j]||1,ce=this.$d.getTime()+x*J;return I.w(ce,this)},M.subtract=function(x,F){return this.add(-1*x,F)},M.format=function(x){var F=this;if(!this.isValid())return"Invalid Date";var H=x||"YYYY-MM-DDTHH:mm:ssZ",B=I.z(this),j=this.$locale(),W=this.$H,J=this.$m,ce=this.$M,oe=j.weekdays,we=j.months,Z=function(fe,Se,de,ge){return fe&&(fe[Se]||fe(F,H))||de[Se].substr(0,ge)},ne=function(fe){return I.s(W%12||12,fe,"0")},re=j.meridiem||function(fe,Se,de){var ge=fe<12?"AM":"PM";return de?ge.toLowerCase():ge},me={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ce+1,MM:I.s(ce+1,2,"0"),MMM:Z(j.monthsShort,ce,we,3),MMMM:Z(we,ce),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:Z(j.weekdaysMin,this.$W,oe,2),ddd:Z(j.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(W),HH:I.s(W,2,"0"),h:ne(1),hh:ne(2),a:re(W,J,!0),A:re(W,J,!1),m:String(J),mm:I.s(J,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:B};return H.replace(d,function(fe,Se){return Se||me[fe]||B.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(x,F,H){var B,j=I.p(F),W=O(x),J=6e4*(W.utcOffset()-this.utcOffset()),ce=this-W,oe=I.m(this,W);return oe=(B={},B[a]=oe/12,B[c]=oe,B[u]=oe/3,B[g]=(ce-J)/6048e5,B[S]=(ce-J)/864e5,B[R]=ce/36e5,B[k]=ce/6e4,B[v]=ce/1e3,B)[j]||ce,H?oe:I.a(oe)},M.daysInMonth=function(){return this.endOf(c).$D},M.$locale=function(){return E[this.$L]},M.locale=function(x,F){if(!x)return this.$L;var H=this.clone(),B=A(x,F,!0);return B&&(H.$L=B),H},M.clone=function(){return I.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},U}(),D=L.prototype;return O.prototype=D,[["$ms",C],["$s",v],["$m",k],["$H",R],["$W",S],["$M",c],["$y",a],["$D",m]].forEach(function(U){D[U[1]]=function(M){return this.$g(M,U[0],U[1])}}),O.extend=function(U,M){return U.$i||(U(M,L,O),U.$i=!0),O},O.locale=A,O.isDayjs=P,O.unix=function(U){return O(1e3*U)},O.en=E[_],O.Ls=E,O.p={},O})},4110:function(o){(function(C,v){o.exports=v()})(this,function(){"use strict";return function(C,v,k){C=C||{};var R=v.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(u,a,m,f){return R.fromToBase(u,a,m,f)}k.en.relativeTime=S,R.fromToBase=function(u,a,m,f,d){for(var p,w,y,_=m.$locale().relativeTime||S,E=C.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],P=E.length,A=0;A<P;A+=1){var O=E[A];O.d&&(p=f?k(u).diff(m,O.d,!0):m.diff(u,O.d,!0));var I=(C.rounding||Math.round)(Math.abs(p));if(y=p>0,I<=O.r||!O.r){I<=1&&A>0&&(O=E[A-1]);var L=_[O.l];d&&(I=d(""+I)),w=typeof L=="string"?L.replace("%d",I):L(I,a,O.l,y);break}}if(a)return w;var D=y?_.future:_.past;return typeof D=="function"?D(w):D.replace("%s",w)},R.to=function(u,a){return g(u,a,this,!0)},R.from=function(u,a){return g(u,a,this)};var c=function(u){return u.$u?k.utc():k()};R.toNow=function(u){return this.to(c(this),u)},R.fromNow=function(u){return this.from(c(this),u)}}})},660:function(o){(function(C,v){o.exports=v()})(this,function(){"use strict";return function(C,v,k){k.updateLocale=function(R,S){var g=k.Ls[R];if(g)return(S?Object.keys(S):[]).forEach(function(c){g[c]=S[c]}),g}}})},9435:o=>{var C=1e3,v=C*60,k=v*60,R=k*24,S=R*7,g=R*365.25;o.exports=function(f,d){d=d||{};var p=typeof f;if(p==="string"&&f.length>0)return c(f);if(p==="number"&&isFinite(f))return d.long?a(f):u(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function c(f){if(f=String(f),!(f.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(!!d){var p=parseFloat(d[1]),w=(d[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return p*g;case"weeks":case"week":case"w":return p*S;case"days":case"day":case"d":return p*R;case"hours":case"hour":case"hrs":case"hr":case"h":return p*k;case"minutes":case"minute":case"mins":case"min":case"m":return p*v;case"seconds":case"second":case"secs":case"sec":case"s":return p*C;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function u(f){var d=Math.abs(f);return d>=R?Math.round(f/R)+"d":d>=k?Math.round(f/k)+"h":d>=v?Math.round(f/v)+"m":d>=C?Math.round(f/C)+"s":f+"ms"}function a(f){var d=Math.abs(f);return d>=R?m(f,d,R,"day"):d>=k?m(f,d,k,"hour"):d>=v?m(f,d,v,"minute"):d>=C?m(f,d,C,"second"):f+" ms"}function m(f,d,p,w){var y=d>=p*1.5;return Math.round(f/p)+" "+w+(y?"s":"")}},1758:(o,C,v)=>{C.formatArgs=R,C.save=S,C.load=g,C.useColors=k,C.storage=c(),C.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),C.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function k(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function R(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;a.splice(1,0,m,"color: inherit");let f=0,d=0;a[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(f++,p==="%c"&&(d=f))}),a.splice(d,0,m)}C.log=console.debug||console.log||(()=>{});function S(a){try{a?C.storage.setItem("debug",a):C.storage.removeItem("debug")}catch(m){}}function g(){let a;try{a=C.storage.getItem("debug")}catch(m){}return!a&&typeof process!="undefined"&&"env"in process&&(a=process.env.DEBUG),a}function c(){try{return localStorage}catch(a){}}o.exports=v(2447)(C);const{formatters:u}=o.exports;u.j=function(a){try{return JSON.stringify(a)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}},2447:(o,C,v)=>{function k(R){g.debug=g,g.default=g,g.coerce=d,g.disable=a,g.enable=u,g.enabled=m,g.humanize=v(9435),g.destroy=p,Object.keys(R).forEach(w=>{g[w]=R[w]}),g.names=[],g.skips=[],g.formatters={};function S(w){let y=0;for(let _=0;_<w.length;_++)y=(y<<5)-y+w.charCodeAt(_),y|=0;return g.colors[Math.abs(y)%g.colors.length]}g.selectColor=S;function g(w){let y,_=null;function E(...P){if(!E.enabled)return;const A=E,O=Number(new Date),I=O-(y||O);A.diff=I,A.prev=y,A.curr=O,y=O,P[0]=g.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let L=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(U,M)=>{if(U==="%%")return"%";L++;const x=g.formatters[M];if(typeof x=="function"){const F=P[L];U=x.call(A,F),P.splice(L,1),L--}return U}),g.formatArgs.call(A,P),(A.log||g.log).apply(A,P)}return E.namespace=w,E.useColors=g.useColors(),E.color=g.selectColor(w),E.extend=c,E.destroy=g.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>_===null?g.enabled(w):_,set:P=>{_=P}}),typeof g.init=="function"&&g.init(E),E}function c(w,y){const _=g(this.namespace+(typeof y=="undefined"?":":y)+w);return _.log=this.log,_}function u(w){g.save(w),g.names=[],g.skips=[];let y;const _=(typeof w=="string"?w:"").split(/[\s,]+/),E=_.length;for(y=0;y<E;y++)!_[y]||(w=_[y].replace(/\*/g,".*?"),w[0]==="-"?g.skips.push(new RegExp("^"+w.substr(1)+"$")):g.names.push(new RegExp("^"+w+"$")))}function a(){const w=[...g.names.map(f),...g.skips.map(f).map(y=>"-"+y)].join(",");return g.enable(""),w}function m(w){if(w[w.length-1]==="*")return!0;let y,_;for(y=0,_=g.skips.length;y<_;y++)if(g.skips[y].test(w))return!1;for(y=0,_=g.names.length;y<_;y++)if(g.names[y].test(w))return!0;return!1}function f(w){return w.toString().substring(2,w.toString().length-2).replace(/\.\*\?$/,"*")}function d(w){return w instanceof Error?w.stack||w.message:w}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return g.enable(g.load()),g}o.exports=k},8104:(o,C,v)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?o.exports=v(1758):o.exports=v(39)},39:(o,C,v)=>{const k=v(3867),R=v(1669);C.init=f,C.log=u,C.formatArgs=g,C.save=a,C.load=m,C.useColors=S,C.destroy=R.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),C.colors=[6,2,3,4,5,1];try{const p=v(2130);p&&(p.stderr||p).level>=2&&(C.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(p){}C.inspectOpts=Object.keys(process.env).filter(p=>/^debug_/i.test(p)).reduce((p,w)=>{const y=w.substring(6).toLowerCase().replace(/_([a-z])/g,(E,P)=>P.toUpperCase());let _=process.env[w];return/^(yes|on|true|enabled)$/i.test(_)?_=!0:/^(no|off|false|disabled)$/i.test(_)?_=!1:_==="null"?_=null:_=Number(_),p[y]=_,p},{});function S(){return"colors"in C.inspectOpts?Boolean(C.inspectOpts.colors):k.isatty(process.stderr.fd)}function g(p){const{namespace:w,useColors:y}=this;if(y){const _=this.color,E="[3"+(_<8?_:"8;5;"+_),P=`  ${E};1m${w} [0m`;p[0]=P+p[0].split(`
`).join(`
`+P),p.push(E+"m+"+o.exports.humanize(this.diff)+"[0m")}else p[0]=c()+w+" "+p[0]}function c(){return C.inspectOpts.hideDate?"":new Date().toISOString()+" "}function u(...p){return process.stderr.write(R.format(...p)+`
`)}function a(p){p?process.env.DEBUG=p:delete process.env.DEBUG}function m(){return process.env.DEBUG}function f(p){p.inspectOpts={};const w=Object.keys(C.inspectOpts);for(let y=0;y<w.length;y++)p.inspectOpts[w[y]]=C.inspectOpts[w[y]]}o.exports=v(2447)(C);const{formatters:d}=o.exports;d.o=function(p){return this.inspectOpts.colors=this.useColors,R.inspect(p,this.inspectOpts).split(`
`).map(w=>w.trim()).join(" ")},d.O=function(p){return this.inspectOpts.colors=this.useColors,R.inspect(p,this.inspectOpts)}},8604:function(o,C,v){"use strict";var k=this&&this.__assign||Object.assign||function(u){for(var a,m=1,f=arguments.length;m<f;m++){a=arguments[m];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(u[d]=a[d])}return u};Object.defineProperty(C,"__esModule",{value:!0});var R=v(4953);C.AzureMonitorSymbol="Azure_Monitor_Tracer";var S=function(u){try{var a=v(8921).BasicTracer,m=R.channel.spanContextPropagator?{scopeManager:R.channel.spanContextPropagator}:void 0,f=new a(m),d=f.startSpan;f.startSpan=function(p,w){if(!w||!w.parent){var y=f.getCurrentSpan();y&&y.operation&&y.operation.traceparent&&(w=k({},w,{parent:{traceId:y.operation.traceparent.traceId,spanId:y.operation.traceparent.spanId}}))}var _=d.call(this,p,w);return _.addEvent("Application Insights Integration enabled"),_},f.addSpanProcessor(new g),f[C.AzureMonitorSymbol]=!0,u.setTracer(f)}catch(p){}return u},g=function(){function u(){}return u.prototype.onStart=function(a){},u.prototype.onEnd=function(a){R.channel.publish("azure-coretracing",a)},u.prototype.shutdown=function(){},u}();C.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:S};function c(){R.channel.registerMonkeyPatch("@azure/core-tracing",C.azureCoreTracing)}C.enable=c},8859:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4953),R=function(g){var c=g.prototype._emit;return g.prototype._emit=function(u,a){var m=c.apply(this,arguments);if(!a){var f=m;f||(f=c.call(this,u,!0)),k.channel.publish("bunyan",{level:u.level,result:f})}return m},g};C.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:R};function S(){k.channel.registerMonkeyPatch("bunyan",C.bunyan)}C.enable=S},2495:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4953),R=v(2413),S=function(c){var u=new R.Writable,a=new R.Writable;u.write=function(_){if(!_)return!0;var E=_.toString();return k.channel.publish("console",{message:E}),!0},a.write=function(_){if(!_)return!0;var E=_.toString();return k.channel.publish("console",{message:E,stderr:!0}),!0};for(var m=new c.Console(u,a),f=["log","info","warn","error","dir","time","timeEnd","trace","assert"],d=function(_){var E=c[_];E&&(c[_]=function(){if(m[_])try{m[_].apply(m,arguments)}catch(P){}return E.apply(c,arguments)})},p=0,w=f;p<w.length;p++){var y=w[p];d(y)}return c};C.console={versionSpecifier:">= 4.0.0",patch:S};function g(){k.channel.registerMonkeyPatch("console",C.console),v(7082)}C.enable=g},4106:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(8604);C.azuresdk=k;var R=v(8859);C.bunyan=R;var S=v(2495);C.console=S;var g=v(2028);C.mongodbCore=g;var c=v(8436);C.mongodb=c;var u=v(8002);C.mysql=u;var a=v(9024);C.pgPool=a;var m=v(8060);C.pg=m;var f=v(4487);C.redis=f;var d=v(6661);C.tedious=d;var p=v(4650);C.winston=p;function w(){R.enable(),S.enable(),g.enable(),c.enable(),u.enable(),m.enable(),a.enable(),f.enable(),p.enable(),k.enable(),d.enable()}C.enable=w},2028:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4953),R=function(g){var c=g.Server.prototype.connect;return g.Server.prototype.connect=function(){var a=c.apply(this,arguments),m=this.s.pool.write;this.s.pool.write=function(){var p=typeof arguments[1]=="function"?1:2;return typeof arguments[p]=="function"&&(arguments[p]=k.channel.bindToContext(arguments[p])),m.apply(this,arguments)};var f=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=k.channel.bindToContext(arguments[1])),f.apply(this,arguments)},a},g};C.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:R};function S(){k.channel.registerMonkeyPatch("mongodb-core",C.mongoCore)}C.enable=S},8436:function(o,C,v){"use strict";var k=this&&this.__assign||Object.assign||function(m){for(var f,d=1,p=arguments.length;d<p;d++){f=arguments[d];for(var w in f)Object.prototype.hasOwnProperty.call(f,w)&&(m[w]=f[w])}return m};Object.defineProperty(C,"__esModule",{value:!0});var R=v(4953),S=function(m){var f=m.instrument({operationIdGenerator:{next:function(){return R.channel.bindToContext(function(p){return p()})}}}),d={};return f.on("started",function(p){d[p.requestId]||(d[p.requestId]=k({},p,{time:new Date}))}),f.on("succeeded",function(p){var w=d[p.requestId];w&&delete d[p.requestId],typeof p.operationId=="function"?p.operationId(function(){return R.channel.publish("mongodb",{startedData:w,event:p,succeeded:!0})}):R.channel.publish("mongodb",{startedData:w,event:p,succeeded:!0})}),f.on("failed",function(p){var w=d[p.requestId];w&&delete d[p.requestId],typeof p.operationId=="function"?p.operationId(function(){return R.channel.publish("mongodb",{startedData:w,event:p,succeeded:!1})}):R.channel.publish("mongodb",{startedData:w,event:p,succeeded:!1})}),m},g=function(m){var f=m.instrument(),d={},p={};return f.on("started",function(w){d[w.requestId]||(p[w.requestId]=R.channel.bindToContext(function(y){return y()}),d[w.requestId]=k({},w,{time:new Date}))}),f.on("succeeded",function(w){var y=d[w.requestId];y&&delete d[w.requestId],typeof w=="object"&&typeof p[w.requestId]=="function"&&(p[w.requestId](function(){return R.channel.publish("mongodb",{startedData:y,event:w,succeeded:!0})}),delete p[w.requestId])}),f.on("failed",function(w){var y=d[w.requestId];y&&delete d[w.requestId],typeof w=="object"&&typeof p[w.requestId]=="function"&&(p[w.requestId](function(){return R.channel.publish("mongodb",{startedData:y,event:w,succeeded:!1})}),delete p[w.requestId])}),m},c=function(m){var f=m.Server.prototype.connect;return m.Server.prototype.connect=function(){var p=f.apply(this,arguments),w=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var E=typeof arguments[1]=="function"?1:2;return typeof arguments[E]=="function"&&(arguments[E]=R.channel.bindToContext(arguments[E])),w.apply(this,arguments)};var y=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=R.channel.bindToContext(arguments[1])),y.apply(this,arguments)},p},m},u=function(m){c(m);var f=m.instrument(),d={},p={};return f.on("started",function(w){d[w.requestId]||(p[w.requestId]=R.channel.bindToContext(function(y){return y()}),d[w.requestId]=w)}),f.on("succeeded",function(w){var y=d[w.requestId];y&&delete d[w.requestId],typeof w=="object"&&typeof p[w.requestId]=="function"&&(p[w.requestId](function(){return R.channel.publish("mongodb",{startedData:y,event:w,succeeded:!0})}),delete p[w.requestId])}),f.on("failed",function(w){var y=d[w.requestId];y&&delete d[w.requestId],typeof w=="object"&&typeof p[w.requestId]=="function"&&(p[w.requestId](function(){return R.channel.publish("mongodb",{startedData:y,event:w,succeeded:!1})}),delete p[w.requestId])}),m};C.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:S},C.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:g},C.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:u};function a(){R.channel.registerMonkeyPatch("mongodb",C.mongo2),R.channel.registerMonkeyPatch("mongodb",C.mongo3),R.channel.registerMonkeyPatch("mongodb",C.mongo330)}C.enable=a},8002:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4953),R=v(5622),S=function(c,u){var a=function(y,_){return function(E,P){var A=y[E];A&&(y[E]=function(){for(var I=arguments.length-1,L=arguments.length-1;L>=0;--L)if(typeof arguments[L]=="function"){I=L;break}else if(typeof arguments[L]!="undefined")break;var D=arguments[I],U={result:null,startTime:null,startDate:null};typeof D=="function"&&(P?(U.startTime=process.hrtime(),U.startDate=new Date,arguments[I]=k.channel.bindToContext(P(U,D))):arguments[I]=k.channel.bindToContext(D));var M=A.apply(this,arguments);return U.result=M,M})}},m=function(y,_){return a(y.prototype,_+".prototype")},f=["connect","changeUser","ping","statistics","end"],d=v(4694)(R.dirname(u)+"/lib/Connection");f.forEach(function(y){return m(d,"Connection")(y)}),a(d,"Connection")("createQuery",function(y,_){return function(E){var P=process.hrtime(y.startTime),A=P[0]*1e3+P[1]/1e6|0;k.channel.publish("mysql",{query:y.result,callbackArgs:arguments,err:E,duration:A,time:y.startDate}),_.apply(this,arguments)}});var p=["_enqueueCallback"],w=v(420)(R.dirname(u)+"/lib/Pool");return p.forEach(function(y){return m(w,"Pool")(y)}),c};C.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:S};function g(){k.channel.registerMonkeyPatch("mysql",C.mysql)}C.enable=g},9024:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4953);function R(g){var c=g.prototype.connect;return g.prototype.connect=function(a){return a&&(arguments[0]=k.channel.bindToContext(a)),c.apply(this,arguments)},g}C.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:R};function S(){k.channel.registerMonkeyPatch("pg-pool",C.postgresPool1)}C.enable=S},8060:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4953),R=v(8614);function S(u,a){var m=u.Client.prototype.query,f="__diagnosticOriginalFunc";return u.Client.prototype.query=function(p,w,y){var _={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},E=process.hrtime(),P;function A(O){O&&O[f]&&(O=O[f]);var I=k.channel.bindToContext(function(L,D){var U=process.hrtime(E);if(_.result=D&&{rowCount:D.rowCount,command:D.command},_.error=L,_.duration=Math.ceil(U[0]*1e3+U[1]/1e6),k.channel.publish("postgres",_),L){if(O)return O.apply(this,arguments);P&&P instanceof R.EventEmitter&&P.emit("error",L)}else O&&O.apply(this,arguments)});try{return Object.defineProperty(I,f,{value:O}),I}catch(L){return O}}try{typeof p=="string"?w instanceof Array?(_.query.preparable={text:p,args:w},y=A(y)):(_.query.text=p,y?y=A(y):w=A(w)):(typeof p.name=="string"?_.query.plan=p.name:p.values instanceof Array?_.query.preparable={text:p.text,args:p.values}:_.query.text=p.text,y?y=A(y):w?w=A(w):p.callback=A(p.callback))}catch(O){return m.apply(this,arguments)}return arguments[0]=p,arguments[1]=w,arguments[2]=y,arguments.length=arguments.length>3?arguments.length:3,P=m.apply(this,arguments),P},u}function g(u,a){var m=u.Client.prototype.query,f="__diagnosticOriginalFunc";return u.Client.prototype.query=function(p,w,y){var _=this,E=!!y,P={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},A=process.hrtime(),O;function I(L){L&&L[f]&&(L=L[f]);var D=k.channel.bindToContext(function(U,M){var x=process.hrtime(A);if(P.result=M&&{rowCount:M.rowCount,command:M.command},P.error=U,P.duration=Math.ceil(x[0]*1e3+x[1]/1e6),k.channel.publish("postgres",P),U){if(L)return L.apply(this,arguments);O&&O instanceof R.EventEmitter&&O.emit("error",U)}else L&&L.apply(this,arguments)});try{return Object.defineProperty(D,f,{value:L}),D}catch(U){return L}}try{typeof p=="string"?w instanceof Array?(P.query.preparable={text:p,args:w},E=typeof y=="function",y=E?I(y):y):(P.query.text=p,y?(E=typeof y=="function",y=E?I(y):y):(E=typeof w=="function",w=E?I(w):w)):(typeof p.name=="string"?P.query.plan=p.name:p.values instanceof Array?P.query.preparable={text:p.text,args:p.values}:P.query.text=p.text,y?(E=typeof y=="function",y=I(y)):w?(E=typeof w=="function",w=E?I(w):w):(E=typeof p.callback=="function",p.callback=E?I(p.callback):p.callback))}catch(L){return m.apply(this,arguments)}return arguments[0]=p,arguments[1]=w,arguments[2]=y,arguments.length=arguments.length>3?arguments.length:3,O=m.apply(this,arguments),E?O:O.then(function(L){return I()(void 0,L),new _._Promise(function(D,U){D(L)})}).catch(function(L){return I()(L,void 0),new _._Promise(function(D,U){U(L)})})},u}C.postgres6={versionSpecifier:"6.*",patch:S},C.postgres7={versionSpecifier:">=7.* <=8.*",patch:g};function c(){k.channel.registerMonkeyPatch("pg",C.postgres6),k.channel.registerMonkeyPatch("pg",C.postgres7)}C.enable=c},4487:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(4953),R=function(g){var c=g.RedisClient.prototype.internal_send_command;return g.RedisClient.prototype.internal_send_command=function(u){if(u){var a=u.callback;if(!a||!a.pubsubBound){var m=this.address,f=process.hrtime(),d=new Date;u.callback=k.channel.bindToContext(function(p,w){var y=process.hrtime(f),_=y[0]*1e3+y[1]/1e6|0;k.channel.publish("redis",{duration:_,address:m,commandObj:u,err:p,result:w,time:d}),typeof a=="function"&&a.apply(this,arguments)}),u.callback.pubsubBound=!0}}return c.call(this,u)},g};C.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:R};function S(){k.channel.registerMonkeyPatch("redis",C.redis)}C.enable=S},6661:function(o,C,v){"use strict";var k=this&&this.__assign||Object.assign||function(c){for(var u,a=1,m=arguments.length;a<m;a++){u=arguments[a];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(c[f]=u[f])}return c};Object.defineProperty(C,"__esModule",{value:!0});var R=v(4953),S=function(c){var u=c.Connection.prototype.makeRequest;return c.Connection.prototype.makeRequest=function(){function m(d){var p=process.hrtime(),w={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return R.channel.bindToContext(function(y,_,E){var P=process.hrtime(p);w=k({},w,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!y&&{rowCount:_,rows:E},query:{text:this.parametersByName.statement.value},error:y,duration:Math.ceil(P[0]*1e3+P[1]/1e6)}),R.channel.publish("tedious",w),d.call(this,y,_,E)})}var f=arguments[0];arguments[0].callback=m(f.callback),u.apply(this,arguments)},c};C.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:S};function g(){R.channel.registerMonkeyPatch("tedious",C.tedious)}C.enable=g},4650:function(o,C,v){"use strict";var k=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,f){m.__proto__=f}||function(m,f){for(var d in f)f.hasOwnProperty(d)&&(m[d]=f[d])};return function(m,f){a(m,f);function d(){this.constructor=m}m.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),R=this&&this.__rest||function(a,m){var f={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&m.indexOf(d)<0&&(f[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,d=Object.getOwnPropertySymbols(a);p<d.length;p++)m.indexOf(d[p])<0&&(f[d[p]]=a[d[p]]);return f};Object.defineProperty(C,"__esModule",{value:!0});var S=v(4953),g=function(a){var m=a.Logger.prototype.log,f,d=function(p,w,y){var _;return f===a.config.npm.levels?_="npm":f===a.config.syslog.levels?_="syslog":_="unknown",S.channel.publish("winston",{level:p,message:w,meta:y,levelKind:_}),w};return a.Logger.prototype.log=function(){return f=this.levels,!this.filters||this.filters.length===0?this.filters=[d]:this.filters[this.filters.length-1]!==d&&(this.filters=this.filters.filter(function(w){return w!==d}),this.filters.push(d)),m.apply(this,arguments)},a},c=function(a){var m=function(y,_){var E;return y.config.npm.levels[_]!=null?E="npm":y.config.syslog.levels[_]!=null?E="syslog":E="unknown",E},f=function(y){k(_,y);function _(E,P){var A=y.call(this,P)||this;return A.winston=E,A}return _.prototype.log=function(E,P){var A=E.message,O=E.level,I=E.meta,L=R(E,["message","level","meta"]);O=typeof Symbol.for=="function"?E[Symbol.for("level")]:O,A=E instanceof Error?E:A;var D=m(this.winston,O);I=I||{};for(var U in L)L.hasOwnProperty(U)&&(I[U]=L[U]);S.channel.publish("winston",{message:A,level:O,levelKind:D,meta:I}),P()},_}(a.Transport);function d(){var y=arguments[0].levels||a.config.npm.levels,_;for(var E in y)y.hasOwnProperty(E)&&(_=_===void 0||y[E]>y[_]?E:_);this.add(new f(a,{level:_}))}var p=a.createLogger;a.createLogger=function(){var _=arguments[0].levels||a.config.npm.levels,E;for(var P in _)_.hasOwnProperty(P)&&(E=E===void 0||_[P]>_[E]?P:E);var A=p.apply(this,arguments);A.add(new f(a,{level:E}));var O=A.configure;return A.configure=function(){O.apply(this,arguments),d.apply(this,arguments)},A};var w=a.createLogger;return a.configure=function(){w.apply(this,arguments),d.apply(this,arguments)},a.add(new f(a)),a};C.winston3={versionSpecifier:"3.x",patch:c},C.winston2={versionSpecifier:"2.x",patch:g};function u(){S.channel.registerMonkeyPatch("winston",C.winston2),S.channel.registerMonkeyPatch("winston",C.winston3)}C.enable=u},4694:o=>{function C(v){var k=new Error("Cannot find module '"+v+"'");throw k.code="MODULE_NOT_FOUND",k}C.keys=()=>[],C.resolve=C,C.id=4694,o.exports=C},420:o=>{function C(v){var k=new Error("Cannot find module '"+v+"'");throw k.code="MODULE_NOT_FOUND",k}C.keys=()=>[],C.resolve=C,C.id=420,o.exports=C},4953:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(7424),R=v(7424);C.makePatchingRequire=R.makePatchingRequire;var S=function(u){return!0},g=function(){function u(){this.version=v(5236).i8,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return u.prototype.shouldPublish=function(a){var m=this.subscribers[a];return m?m.some(function(f){var d=f.filter;return!d||d(!1)}):!1},u.prototype.publish=function(a,m){if(!this.currentlyPublishing){var f=this.subscribers[a];if(f){var d={timestamp:Date.now(),data:m};this.currentlyPublishing=!0,f.forEach(function(p){var w=p.listener,y=p.filter;try{y&&y(!0)&&w(d)}catch(_){}}),this.currentlyPublishing=!1}}},u.prototype.subscribe=function(a,m,f){f===void 0&&(f=S),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:m,filter:f})},u.prototype.unsubscribe=function(a,m,f){f===void 0&&(f=S);var d=this.subscribers[a];if(d){for(var p=0;p<d.length;++p)if(d[p].listener===m&&d[p].filter===f)return d.splice(p,1),!0}return!1},u.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(m){return m},Object.getOwnPropertyNames(this.knownPatches).forEach(function(m){return delete a.knownPatches[m]})},u.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},u.prototype.addContextPreservation=function(a){var m=this.contextPreservationFunction;this.contextPreservationFunction=function(f){return a(m(f))}},u.prototype.registerMonkeyPatch=function(a,m){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(m)},u.prototype.getPatchesObject=function(){return this.knownPatches},u}();if(!global.diagnosticsSource){global.diagnosticsSource=new g;var c=v(2282);c.prototype.require=k.makePatchingRequire(global.diagnosticsSource.getPatchesObject())}C.channel=global.diagnosticsSource},7424:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(5622),R=v(6625),S=v(2282),g=Object.keys(process.binding("natives")),c=S.prototype.require;function u(a){var m={};return function(d){var p=c.apply(this,arguments);if(a[d]){var w=S._resolveFilename(d,this);if(m.hasOwnProperty(w))return m[w];var y=void 0;if(g.indexOf(d)<0)try{y=c.call(this,k.join(d,"package.json")).version}catch(I){return p}else y=process.version.substring(1);var _=y.indexOf("-");_>=0&&(y=y.substring(0,_));for(var E=p,P=0,A=a[d];P<A.length;P++){var O=A[P];R.satisfies(y,O.versionSpecifier)&&(E=O.patch(E,w))}return m[w]=E}return p}}C.makePatchingRequire=u},5236:o=>{"use strict";o.exports={i8:"0.2.0"}},9867:(o,C,v)=>{"use strict";var k=v(6372),R=k.wrap,S=k.unwrap,g="wrap@before";function c(d,p,w){var y=!!d[p]&&d.propertyIsEnumerable(p);Object.defineProperty(d,p,{configurable:!0,enumerable:y,writable:!0,value:w})}function u(d,p){for(var w=p.length,y=0;y<w;y++){var _=p[y],E=d[g];if(typeof E=="function")E(_);else if(Array.isArray(E))for(var P=E.length,A=0;A<P;A++)E[A](_)}}function a(d,p){var w;return w=d._events&&d._events[p],Array.isArray(w)||(w?w=[w]:w=[]),w}function m(d,p,w){var y=a(d,p),_=y.filter(function(E){return w.indexOf(E)===-1});_.length>0&&u(d,_)}function f(d,p){if(!!d){var w=d;if(typeof d=="function")w=p(d);else if(Array.isArray(d)){w=[];for(var y=0;y<d.length;y++)w[y]=p(d[y])}return w}}o.exports=function(p,w,y){if(!p||!p.on||!p.addListener||!p.removeListener||!p.emit)throw new Error("can only wrap real EEs");if(!w)throw new Error("must have function to run on listener addition");if(!y)throw new Error("must have function to wrap listeners when emitting");function _(P){return function(O,I){var L=a(this,O).slice();try{var D=P.call(this,O,I);return m(this,O,L),D}finally{this.on.__wrapped||R(this,"on",_),this.addListener.__wrapped||R(this,"addListener",_)}}}function E(P){return function(O){if(!this._events||!this._events[O])return P.apply(this,arguments);var I=this._events[O];function L(D){return function(){this._events[O]=I;try{return D.apply(this,arguments)}finally{I=this._events[O],this._events[O]=f(I,y)}}}R(this,"removeListener",L);try{return this._events[O]=f(I,y),P.apply(this,arguments)}finally{S(this,"removeListener"),this._events[O]=I}}}p[g]?typeof p[g]=="function"?c(p,g,[p[g],w]):Array.isArray(p[g])&&p[g].push(w):c(p,g,w),p.__wrapped||(R(p,"addListener",_),R(p,"on",_),R(p,"emit",E),c(p,"__unwrap",function(){S(p,"addListener"),S(p,"on"),S(p,"emit"),delete p[g],delete p.__wrapped}),c(p,"__wrapped",!0))}},5035:o=>{"use strict";o.exports=function(C,v){v||(v={}),typeof v=="function"&&(v={cmp:v});var k=typeof v.cycles=="boolean"?v.cycles:!1,R=v.cmp&&function(g){return function(c){return function(u,a){var m={key:u,value:c[u]},f={key:a,value:c[a]};return g(m,f)}}}(v.cmp),S=[];return function g(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var u,a;if(Array.isArray(c)){for(a="[",u=0;u<c.length;u++)u&&(a+=","),a+=g(c[u])||"null";return a+"]"}if(c===null)return"null";if(S.indexOf(c)!==-1){if(k)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var m=S.push(c)-1,f=Object.keys(c).sort(R&&R(c));for(a="",u=0;u<f.length;u++){var d=f[u],p=g(c[d]);!p||(a&&(a+=","),a+=JSON.stringify(d)+":"+p)}return S.splice(m,1),"{"+a+"}"}}(C)}},6030:(o,C,v)=>{const{Readable:k}=v(2413),R=new WeakMap;async function*S(c){for(const u of c)"stream"in u?yield*u.stream():yield u}class g{constructor(u=[],a={type:""}){let m=0;const f=u.map(p=>{let w;return p instanceof Buffer?w=p:ArrayBuffer.isView(p)?w=Buffer.from(p.buffer,p.byteOffset,p.byteLength):p instanceof ArrayBuffer?w=Buffer.from(p):p instanceof g?w=p:w=Buffer.from(typeof p=="string"?p:String(p)),m+=w.length||w.size||0,w}),d=a.type===void 0?"":String(a.type).toLowerCase();R.set(this,{type:/[^\u0020-\u007E]/.test(d)?"":d,size:m,parts:f})}get size(){return R.get(this).size}get type(){return R.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const u=new Uint8Array(this.size);let a=0;for await(const m of this.stream())u.set(m,a),a+=m.length;return u.buffer}stream(){return k.from(S(R.get(this).parts))}slice(u=0,a=this.size,m=""){const{size:f}=this;let d=u<0?Math.max(f+u,0):Math.min(u,f),p=a<0?Math.max(f+a,0):Math.min(a,f);const w=Math.max(p-d,0),y=R.get(this).parts.values(),_=[];let E=0;for(const A of y){const O=ArrayBuffer.isView(A)?A.byteLength:A.size;if(d&&O<=d)d-=O,p-=O;else{const I=A.slice(d,Math.min(O,p));if(_.push(I),E+=ArrayBuffer.isView(I)?I.byteLength:I.size,d=0,E>=w)break}}const P=new g([],{type:m});return Object.assign(R.get(P),{size:w,parts:_}),P}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](u){return typeof u=="object"&&typeof u.stream=="function"&&u.stream.length===0&&typeof u.constructor=="function"&&/^(Blob|File)$/.test(u[Symbol.toStringTag])}}Object.defineProperties(g.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),o.exports=g},2261:(o,C,v)=>{var k;o.exports=function(){if(!k)try{k=v(8104)("follow-redirects")}catch(R){k=function(){}}k.apply(null,arguments)}},938:(o,C,v)=>{var k=v(8835),R=k.URL,S=v(8605),g=v(7211),c=v(2413).Writable,u=v(2357),a=v(2261),m=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach(function(I){m[I]=function(L,D,U){this._redirectable.emit(I,L,D,U)}});var f=O("ERR_FR_REDIRECTION_FAILURE",""),d=O("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),p=O("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),w=O("ERR_STREAM_WRITE_AFTER_END","write after end");function y(I,L){c.call(this),this._sanitizeOptions(I),this._options=I,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],L&&this.on("response",L);var D=this;this._onNativeResponse=function(U){D._processResponse(U)},this._performRequest()}y.prototype=Object.create(c.prototype),y.prototype.abort=function(){this._currentRequest.removeAllListeners(),this._currentRequest.on("error",E),this._currentRequest.abort(),this.emit("abort"),this.removeAllListeners()},y.prototype.write=function(I,L,D){if(this._ending)throw new w;if(!(typeof I=="string"||typeof I=="object"&&"length"in I))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof L=="function"&&(D=L,L=null),I.length===0){D&&D();return}this._requestBodyLength+I.length<=this._options.maxBodyLength?(this._requestBodyLength+=I.length,this._requestBodyBuffers.push({data:I,encoding:L}),this._currentRequest.write(I,L,D)):(this.emit("error",new p),this.abort())},y.prototype.end=function(I,L,D){if(typeof I=="function"?(D=I,I=L=null):typeof L=="function"&&(D=L,L=null),!I)this._ended=this._ending=!0,this._currentRequest.end(null,null,D);else{var U=this,M=this._currentRequest;this.write(I,L,function(){U._ended=!0,M.end(null,null,D)}),this._ending=!0}},y.prototype.setHeader=function(I,L){this._options.headers[I]=L,this._currentRequest.setHeader(I,L)},y.prototype.removeHeader=function(I){delete this._options.headers[I],this._currentRequest.removeHeader(I)},y.prototype.setTimeout=function(I,L){var D=this;L&&this.on("timeout",L);function U(){D._timeout&&clearTimeout(D._timeout),D._timeout=setTimeout(function(){D.emit("timeout"),M()},I)}function M(){clearTimeout(this._timeout),L&&D.removeListener("timeout",L),this.socket||D._currentRequest.removeListener("socket",U)}return this.socket?U():this._currentRequest.once("socket",U),this.once("response",M),this.once("error",M),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(I){y.prototype[I]=function(L,D){return this._currentRequest[I](L,D)}}),["aborted","connection","socket"].forEach(function(I){Object.defineProperty(y.prototype,I,{get:function(){return this._currentRequest[I]}})}),y.prototype._sanitizeOptions=function(I){if(I.headers||(I.headers={}),I.host&&(I.hostname||(I.hostname=I.host),delete I.host),!I.pathname&&I.path){var L=I.path.indexOf("?");L<0?I.pathname=I.path:(I.pathname=I.path.substring(0,L),I.search=I.path.substring(L))}},y.prototype._performRequest=function(){var I=this._options.protocol,L=this._options.nativeProtocols[I];if(!L){this.emit("error",new TypeError("Unsupported protocol "+I));return}if(this._options.agents){var D=I.substr(0,I.length-1);this._options.agent=this._options.agents[D]}var U=this._currentRequest=L.request(this._options,this._onNativeResponse);this._currentUrl=k.format(this._options),U._redirectable=this;for(var M in m)M&&U.on(M,m[M]);if(this._isRedirect){var x=0,F=this,H=this._requestBodyBuffers;(function B(j){if(U===F._currentRequest)if(j)F.emit("error",j);else if(x<H.length){var W=H[x++];U.finished||U.write(W.data,W.encoding,B)}else F._ended&&U.end()})()}},y.prototype._processResponse=function(I){var L=I.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:I.headers,statusCode:L});var D=I.headers.location;if(D&&this._options.followRedirects!==!1&&L>=300&&L<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",E),this._currentRequest.abort(),I.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new d);return}((L===301||L===302)&&this._options.method==="POST"||L===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],A(/^content-/i,this._options.headers));var U=A(/^host$/i,this._options.headers)||k.parse(this._currentUrl).hostname,M=k.resolve(this._currentUrl,D);a("redirecting to",M),this._isRedirect=!0;var x=k.parse(M);if(Object.assign(this._options,x),x.hostname!==U&&A(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var F={headers:I.headers};try{this._options.beforeRedirect.call(null,this._options,F)}catch(B){this.emit("error",B);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(B){var H=new f("Redirected request failed: "+B.message);H.cause=B,this.emit("error",H)}}else I.responseUrl=this._currentUrl,I.redirects=this._redirects,this.emit("response",I),this._requestBodyBuffers=[]};function _(I){var L={maxRedirects:21,maxBodyLength:10*1024*1024},D={};return Object.keys(I).forEach(function(U){var M=U+":",x=D[M]=I[U],F=L[U]=Object.create(x);function H(j,W,J){if(typeof j=="string"){var ce=j;try{j=P(new R(ce))}catch(oe){j=k.parse(ce)}}else R&&j instanceof R?j=P(j):(J=W,W=j,j={protocol:M});return typeof W=="function"&&(J=W,W=null),W=Object.assign({maxRedirects:L.maxRedirects,maxBodyLength:L.maxBodyLength},j,W),W.nativeProtocols=D,u.equal(W.protocol,M,"protocol mismatch"),a("options",W),new y(W,J)}function B(j,W,J){var ce=F.request(j,W,J);return ce.end(),ce}Object.defineProperties(F,{request:{value:H,configurable:!0,enumerable:!0,writable:!0},get:{value:B,configurable:!0,enumerable:!0,writable:!0}})}),L}function E(){}function P(I){var L={protocol:I.protocol,hostname:I.hostname.startsWith("[")?I.hostname.slice(1,-1):I.hostname,hash:I.hash,search:I.search,pathname:I.pathname,path:I.pathname+I.search,href:I.href};return I.port!==""&&(L.port=Number(I.port)),L}function A(I,L){var D;for(var U in L)I.test(U)&&(D=L[U],delete L[U]);return D}function O(I,L){function D(U){Error.captureStackTrace(this,this.constructor),this.message=U||L}return D.prototype=new Error,D.prototype.constructor=D,D.prototype.name="Error ["+I+"]",D.prototype.code=I,D}o.exports=_({http:S,https:g}),o.exports.wrap=_},9967:o=>{var C={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:12228}};C.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					isResolved
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			baseRef {
				...Ref
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
			comments(first: 1) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var v={};function k(u){return u.filter(function(a){if(a.kind!=="FragmentDefinition")return!0;var m=a.name.value;return v[m]?!1:(v[m]=!0,!0)})}function R(u,a){if(u.kind==="FragmentSpread")a.add(u.name.value);else if(u.kind==="VariableDefinition"){var m=u.type;m.kind==="NamedType"&&a.add(m.name.value)}u.selectionSet&&u.selectionSet.selections.forEach(function(f){R(f,a)}),u.variableDefinitions&&u.variableDefinitions.forEach(function(f){R(f,a)}),u.definitions&&u.definitions.forEach(function(f){R(f,a)})}var S={};(function(){C.definitions.forEach(function(a){if(a.name){var m=new Set;R(a,m),S[a.name.value]=m}})})();function g(u,a){for(var m=0;m<u.definitions.length;m++){var f=u.definitions[m];if(f.name&&f.name.value==a)return f}}function c(u,a){var m={kind:u.kind,definitions:[g(u,a)]};u.hasOwnProperty("loc")&&(m.loc=u.loc);var f=S[a]||new Set,d=new Set,p=new Set;for(f.forEach(function(y){p.add(y)});p.size>0;){var w=p;p=new Set,w.forEach(function(y){if(!d.has(y)){d.add(y);var _=S[y]||new Set;_.forEach(function(E){p.add(E)})}})}return d.forEach(function(y){var _=g(u,y);_&&m.definitions.push(_)}),m}o.exports=C,o.exports.TimelineEvents=c(C,"TimelineEvents"),o.exports.IssueTimelineEvents=c(C,"IssueTimelineEvents"),o.exports.GetPendingReviewId=c(C,"GetPendingReviewId"),o.exports.PullRequestComments=c(C,"PullRequestComments"),o.exports.PullRequest=c(C,"PullRequest"),o.exports.Issue=c(C,"Issue"),o.exports.IssueWithComments=c(C,"IssueWithComments"),o.exports.GetUser=c(C,"GetUser"),o.exports.PullRequestMergeability=c(C,"PullRequestMergeability"),o.exports.PullRequestState=c(C,"PullRequestState"),o.exports.AddComment=c(C,"AddComment"),o.exports.EditComment=c(C,"EditComment"),o.exports.ReadyForReview=c(C,"ReadyForReview"),o.exports.StartReview=c(C,"StartReview"),o.exports.SubmitReview=c(C,"SubmitReview"),o.exports.DeleteReview=c(C,"DeleteReview"),o.exports.AddReaction=c(C,"AddReaction"),o.exports.DeleteReaction=c(C,"DeleteReaction"),o.exports.UpdatePullRequest=c(C,"UpdatePullRequest"),o.exports.AddIssueComment=c(C,"AddIssueComment"),o.exports.EditIssueComment=c(C,"EditIssueComment"),o.exports.GetMentionableUsers=c(C,"GetMentionableUsers"),o.exports.GetAssignableUsers=c(C,"GetAssignableUsers"),o.exports.IssuesWithoutMilestone=c(C,"IssuesWithoutMilestone"),o.exports.MaxIssue=c(C,"MaxIssue"),o.exports.GetMilestones=c(C,"GetMilestones"),o.exports.Issues=c(C,"Issues"),o.exports.GetViewerPermission=c(C,"GetViewerPermission"),o.exports.GetRepositoryForkDetails=c(C,"GetRepositoryForkDetails"),o.exports.GetChecks=c(C,"GetChecks")},972:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.default=g;var k=S(v(7706)),R=S(v(8554));function S(c){return c&&c.__esModule?c:{default:c}}function g(c){var u=c.prototype.toJSON;typeof u=="function"||(0,k.default)(0),c.prototype.inspect=u,R.default&&(c.prototype[R.default]=u)}},1868:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.default=u;var k=R(v(8554));function R(y){return y&&y.__esModule?y:{default:y}}function S(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?S=function(E){return typeof E}:S=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},S(y)}var g=10,c=2;function u(y){return a(y,[])}function a(y,_){switch(S(y)){case"string":return JSON.stringify(y);case"function":return y.name?"[function ".concat(y.name,"]"):"[function]";case"object":return y===null?"null":m(y,_);default:return String(y)}}function m(y,_){if(_.indexOf(y)!==-1)return"[Circular]";var E=[].concat(_,[y]),P=p(y);if(P!==void 0){var A=P.call(y);if(A!==y)return typeof A=="string"?A:a(A,E)}else if(Array.isArray(y))return d(y,E);return f(y,E)}function f(y,_){var E=Object.keys(y);if(E.length===0)return"{}";if(_.length>c)return"["+w(y)+"]";var P=E.map(function(A){var O=a(y[A],_);return A+": "+O});return"{ "+P.join(", ")+" }"}function d(y,_){if(y.length===0)return"[]";if(_.length>c)return"[Array]";for(var E=Math.min(g,y.length),P=y.length-E,A=[],O=0;O<E;++O)A.push(a(y[O],_));return P===1?A.push("... 1 more item"):P>1&&A.push("... ".concat(P," more items")),"["+A.join(", ")+"]"}function p(y){var _=y[String(k.default)];if(typeof _=="function")return _;if(typeof y.inspect=="function")return y.inspect}function w(y){var _=Object.prototype.toString.call(y).replace(/^\[object /,"").replace(/]$/,"");if(_==="Object"&&typeof y.constructor=="function"){var E=y.constructor.name;if(typeof E=="string"&&E!=="")return E}return _}},7706:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.default=v;function v(k,R){var S=Boolean(k);if(!S)throw new Error(R!=null?R:"Unexpected invariant triggered.")}},8554:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var v=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,k=v;C.default=k},1807:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.isNode=c,C.Token=C.Location=void 0;var k=R(v(972));function R(u){return u&&u.__esModule?u:{default:u}}var S=function(){function u(m,f,d){this.start=m.start,this.end=f.end,this.startToken=m,this.endToken=f,this.source=d}var a=u.prototype;return a.toJSON=function(){return{start:this.start,end:this.end}},u}();C.Location=S,(0,k.default)(S);var g=function(){function u(m,f,d,p,w,y,_){this.kind=m,this.start=f,this.end=d,this.line=p,this.column=w,this.value=_,this.prev=y,this.next=null}var a=u.prototype;return a.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},u}();C.Token=g,(0,k.default)(g);function c(u){return u!=null&&typeof u.kind=="string"}},849:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.dedentBlockStringValue=v,C.getBlockStringIndentation=R,C.printBlockString=S;function v(g){var c=g.split(/\r\n|[\n\r]/g),u=R(g);if(u!==0)for(var a=1;a<c.length;a++)c[a]=c[a].slice(u);for(var m=0;m<c.length&&k(c[m]);)++m;for(var f=c.length;f>m&&k(c[f-1]);)--f;return c.slice(m,f).join(`
`)}function k(g){for(var c=0;c<g.length;++c)if(g[c]!==" "&&g[c]!=="	")return!1;return!0}function R(g){for(var c,u=!0,a=!0,m=0,f=null,d=0;d<g.length;++d)switch(g.charCodeAt(d)){case 13:g.charCodeAt(d+1)===10&&++d;case 10:u=!1,a=!0,m=0;break;case 9:case 32:++m;break;default:a&&!u&&(f===null||m<f)&&(f=m),a=!1}return(c=f)!==null&&c!==void 0?c:0}function S(g){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=g.indexOf(`
`)===-1,m=g[0]===" "||g[0]==="	",f=g[g.length-1]==='"',d=g[g.length-1]==="\\",p=!a||f||d||u,w="";return p&&!(a&&m)&&(w+=`
`+c),w+=c?g.replace(/\n/g,`
`+c):g,p&&(w+=`
`),'"""'+w.replace(/"""/g,'\\"""')+'"""'}},3033:(o,C,v)=>{"use strict";var k;k={value:!0},C.S=g;var R=v(285),S=v(849);function g(_){return(0,R.visit)(_,{leave:u})}var c=80,u={Name:function(E){return E.value},Variable:function(E){return"$"+E.name},Document:function(E){return m(E.definitions,`

`)+`
`},OperationDefinition:function(E){var P=E.operation,A=E.name,O=d("(",m(E.variableDefinitions,", "),")"),I=m(E.directives," "),L=E.selectionSet;return!A&&!I&&!O&&P==="query"?L:m([P,m([A,O]),I,L]," ")},VariableDefinition:function(E){var P=E.variable,A=E.type,O=E.defaultValue,I=E.directives;return P+": "+A+d(" = ",O)+d(" ",m(I," "))},SelectionSet:function(E){var P=E.selections;return f(P)},Field:function(E){var P=E.alias,A=E.name,O=E.arguments,I=E.directives,L=E.selectionSet,D=d("",P,": ")+A,U=D+d("(",m(O,", "),")");return U.length>c&&(U=D+d(`(
`,p(m(O,`
`)),`
)`)),m([U,m(I," "),L]," ")},Argument:function(E){var P=E.name,A=E.value;return P+": "+A},FragmentSpread:function(E){var P=E.name,A=E.directives;return"..."+P+d(" ",m(A," "))},InlineFragment:function(E){var P=E.typeCondition,A=E.directives,O=E.selectionSet;return m(["...",d("on ",P),m(A," "),O]," ")},FragmentDefinition:function(E){var P=E.name,A=E.typeCondition,O=E.variableDefinitions,I=E.directives,L=E.selectionSet;return"fragment ".concat(P).concat(d("(",m(O,", "),")")," ")+"on ".concat(A," ").concat(d("",m(I," ")," "))+L},IntValue:function(E){var P=E.value;return P},FloatValue:function(E){var P=E.value;return P},StringValue:function(E,P){var A=E.value,O=E.block;return O?(0,S.printBlockString)(A,P==="description"?"":"  "):JSON.stringify(A)},BooleanValue:function(E){var P=E.value;return P?"true":"false"},NullValue:function(){return"null"},EnumValue:function(E){var P=E.value;return P},ListValue:function(E){var P=E.values;return"["+m(P,", ")+"]"},ObjectValue:function(E){var P=E.fields;return"{"+m(P,", ")+"}"},ObjectField:function(E){var P=E.name,A=E.value;return P+": "+A},Directive:function(E){var P=E.name,A=E.arguments;return"@"+P+d("(",m(A,", "),")")},NamedType:function(E){var P=E.name;return P},ListType:function(E){var P=E.type;return"["+P+"]"},NonNullType:function(E){var P=E.type;return P+"!"},SchemaDefinition:a(function(_){var E=_.directives,P=_.operationTypes;return m(["schema",m(E," "),f(P)]," ")}),OperationTypeDefinition:function(E){var P=E.operation,A=E.type;return P+": "+A},ScalarTypeDefinition:a(function(_){var E=_.name,P=_.directives;return m(["scalar",E,m(P," ")]," ")}),ObjectTypeDefinition:a(function(_){var E=_.name,P=_.interfaces,A=_.directives,O=_.fields;return m(["type",E,d("implements ",m(P," & ")),m(A," "),f(O)]," ")}),FieldDefinition:a(function(_){var E=_.name,P=_.arguments,A=_.type,O=_.directives;return E+(y(P)?d(`(
`,p(m(P,`
`)),`
)`):d("(",m(P,", "),")"))+": "+A+d(" ",m(O," "))}),InputValueDefinition:a(function(_){var E=_.name,P=_.type,A=_.defaultValue,O=_.directives;return m([E+": "+P,d("= ",A),m(O," ")]," ")}),InterfaceTypeDefinition:a(function(_){var E=_.name,P=_.interfaces,A=_.directives,O=_.fields;return m(["interface",E,d("implements ",m(P," & ")),m(A," "),f(O)]," ")}),UnionTypeDefinition:a(function(_){var E=_.name,P=_.directives,A=_.types;return m(["union",E,m(P," "),A&&A.length!==0?"= "+m(A," | "):""]," ")}),EnumTypeDefinition:a(function(_){var E=_.name,P=_.directives,A=_.values;return m(["enum",E,m(P," "),f(A)]," ")}),EnumValueDefinition:a(function(_){var E=_.name,P=_.directives;return m([E,m(P," ")]," ")}),InputObjectTypeDefinition:a(function(_){var E=_.name,P=_.directives,A=_.fields;return m(["input",E,m(P," "),f(A)]," ")}),DirectiveDefinition:a(function(_){var E=_.name,P=_.arguments,A=_.repeatable,O=_.locations;return"directive @"+E+(y(P)?d(`(
`,p(m(P,`
`)),`
)`):d("(",m(P,", "),")"))+(A?" repeatable":"")+" on "+m(O," | ")}),SchemaExtension:function(E){var P=E.directives,A=E.operationTypes;return m(["extend schema",m(P," "),f(A)]," ")},ScalarTypeExtension:function(E){var P=E.name,A=E.directives;return m(["extend scalar",P,m(A," ")]," ")},ObjectTypeExtension:function(E){var P=E.name,A=E.interfaces,O=E.directives,I=E.fields;return m(["extend type",P,d("implements ",m(A," & ")),m(O," "),f(I)]," ")},InterfaceTypeExtension:function(E){var P=E.name,A=E.interfaces,O=E.directives,I=E.fields;return m(["extend interface",P,d("implements ",m(A," & ")),m(O," "),f(I)]," ")},UnionTypeExtension:function(E){var P=E.name,A=E.directives,O=E.types;return m(["extend union",P,m(A," "),O&&O.length!==0?"= "+m(O," | "):""]," ")},EnumTypeExtension:function(E){var P=E.name,A=E.directives,O=E.values;return m(["extend enum",P,m(A," "),f(O)]," ")},InputObjectTypeExtension:function(E){var P=E.name,A=E.directives,O=E.fields;return m(["extend input",P,m(A," "),f(O)]," ")}};function a(_){return function(E){return m([E.description,_(E)],`
`)}}function m(_){var E,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(E=_==null?void 0:_.filter(function(A){return A}).join(P))!==null&&E!==void 0?E:""}function f(_){return d(`{
`,p(m(_,`
`)),`
}`)}function d(_,E){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return E!=null&&E!==""?_+E+P:""}function p(_){return d("  ",_.replace(/\n/g,`
  `))}function w(_){return _.indexOf(`
`)!==-1}function y(_){return _!=null&&_.some(w)}},285:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0}),C.visit=u,C.visitInParallel=a,C.getVisitFn=m,C.BREAK=C.QueryDocumentKeys=void 0;var k=S(v(1868)),R=v(1807);function S(f){return f&&f.__esModule?f:{default:f}}var g={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};C.QueryDocumentKeys=g;var c=Object.freeze({});C.BREAK=c;function u(f,d){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g,w=void 0,y=Array.isArray(f),_=[f],E=-1,P=[],A=void 0,O=void 0,I=void 0,L=[],D=[],U=f;do{E++;var M=E===_.length,x=M&&P.length!==0;if(M){if(O=D.length===0?void 0:L[L.length-1],A=I,I=D.pop(),x){if(y)A=A.slice();else{for(var F={},H=0,B=Object.keys(A);H<B.length;H++){var j=B[H];F[j]=A[j]}A=F}for(var W=0,J=0;J<P.length;J++){var ce=P[J][0],oe=P[J][1];y&&(ce-=W),y&&oe===null?(A.splice(ce,1),W++):A[ce]=oe}}E=w.index,_=w.keys,P=w.edits,y=w.inArray,w=w.prev}else{if(O=I?y?E:_[E]:void 0,A=I?I[O]:U,A==null)continue;I&&L.push(O)}var we=void 0;if(!Array.isArray(A)){if(!(0,R.isNode)(A))throw new Error("Invalid AST Node: ".concat((0,k.default)(A),"."));var Z=m(d,A.kind,M);if(Z){if(we=Z.call(d,A,O,I,L,D),we===c)break;if(we===!1){if(!M){L.pop();continue}}else if(we!==void 0&&(P.push([O,we]),!M))if((0,R.isNode)(we))A=we;else{L.pop();continue}}}if(we===void 0&&x&&P.push([O,A]),M)L.pop();else{var ne;w={inArray:y,index:E,keys:_,edits:P,prev:w},y=Array.isArray(A),_=y?A:(ne=p[A.kind])!==null&&ne!==void 0?ne:[],E=-1,P=[],I&&D.push(I),I=A}}while(w!==void 0);return P.length!==0&&(U=P[P.length-1][1]),U}function a(f){var d=new Array(f.length);return{enter:function(w){for(var y=0;y<f.length;y++)if(d[y]==null){var _=m(f[y],w.kind,!1);if(_){var E=_.apply(f[y],arguments);if(E===!1)d[y]=w;else if(E===c)d[y]=c;else if(E!==void 0)return E}}},leave:function(w){for(var y=0;y<f.length;y++)if(d[y]==null){var _=m(f[y],w.kind,!0);if(_){var E=_.apply(f[y],arguments);if(E===c)d[y]=c;else if(E!==void 0&&E!==!1)return E}}else d[y]===w&&(d[y]=null)}}}function m(f,d,p){var w=f[d];if(w){if(!p&&typeof w=="function")return w;var y=p?w.leave:w.enter;if(typeof y=="function")return y}else{var _=p?f.leave:f.enter;if(_){if(typeof _=="function")return _;var E=_[d];if(typeof E=="function")return E}}}},9593:(o,C,v)=>{"use strict";const k=v(4411),R=Symbol("max"),S=Symbol("length"),g=Symbol("lengthCalculator"),c=Symbol("allowStale"),u=Symbol("maxAge"),a=Symbol("dispose"),m=Symbol("noDisposeOnSet"),f=Symbol("lruList"),d=Symbol("cache"),p=Symbol("updateAgeOnGet"),w=()=>1;class y{constructor(D){if(typeof D=="number"&&(D={max:D}),D||(D={}),D.max&&(typeof D.max!="number"||D.max<0))throw new TypeError("max must be a non-negative number");const U=this[R]=D.max||Infinity,M=D.length||w;if(this[g]=typeof M!="function"?w:M,this[c]=D.stale||!1,D.maxAge&&typeof D.maxAge!="number")throw new TypeError("maxAge must be a number");this[u]=D.maxAge||0,this[a]=D.dispose,this[m]=D.noDisposeOnSet||!1,this[p]=D.updateAgeOnGet||!1,this.reset()}set max(D){if(typeof D!="number"||D<0)throw new TypeError("max must be a non-negative number");this[R]=D||Infinity,P(this)}get max(){return this[R]}set allowStale(D){this[c]=!!D}get allowStale(){return this[c]}set maxAge(D){if(typeof D!="number")throw new TypeError("maxAge must be a non-negative number");this[u]=D,P(this)}get maxAge(){return this[u]}set lengthCalculator(D){typeof D!="function"&&(D=w),D!==this[g]&&(this[g]=D,this[S]=0,this[f].forEach(U=>{U.length=this[g](U.value,U.key),this[S]+=U.length})),P(this)}get lengthCalculator(){return this[g]}get length(){return this[S]}get itemCount(){return this[f].length}rforEach(D,U){U=U||this;for(let M=this[f].tail;M!==null;){const x=M.prev;I(this,D,M,U),M=x}}forEach(D,U){U=U||this;for(let M=this[f].head;M!==null;){const x=M.next;I(this,D,M,U),M=x}}keys(){return this[f].toArray().map(D=>D.key)}values(){return this[f].toArray().map(D=>D.value)}reset(){this[a]&&this[f]&&this[f].length&&this[f].forEach(D=>this[a](D.key,D.value)),this[d]=new Map,this[f]=new k,this[S]=0}dump(){return this[f].map(D=>E(this,D)?!1:{k:D.key,v:D.value,e:D.now+(D.maxAge||0)}).toArray().filter(D=>D)}dumpLru(){return this[f]}set(D,U,M){if(M=M||this[u],M&&typeof M!="number")throw new TypeError("maxAge must be a number");const x=M?Date.now():0,F=this[g](U,D);if(this[d].has(D)){if(F>this[R])return A(this,this[d].get(D)),!1;const j=this[d].get(D).value;return this[a]&&(this[m]||this[a](D,j.value)),j.now=x,j.maxAge=M,j.value=U,this[S]+=F-j.length,j.length=F,this.get(D),P(this),!0}const H=new O(D,U,F,x,M);return H.length>this[R]?(this[a]&&this[a](D,U),!1):(this[S]+=H.length,this[f].unshift(H),this[d].set(D,this[f].head),P(this),!0)}has(D){if(!this[d].has(D))return!1;const U=this[d].get(D).value;return!E(this,U)}get(D){return _(this,D,!0)}peek(D){return _(this,D,!1)}pop(){const D=this[f].tail;return D?(A(this,D),D.value):null}del(D){A(this,this[d].get(D))}load(D){this.reset();const U=Date.now();for(let M=D.length-1;M>=0;M--){const x=D[M],F=x.e||0;if(F===0)this.set(x.k,x.v);else{const H=F-U;H>0&&this.set(x.k,x.v,H)}}}prune(){this[d].forEach((D,U)=>_(this,U,!1))}}const _=(L,D,U)=>{const M=L[d].get(D);if(M){const x=M.value;if(E(L,x)){if(A(L,M),!L[c])return}else U&&(L[p]&&(M.value.now=Date.now()),L[f].unshiftNode(M));return x.value}},E=(L,D)=>{if(!D||!D.maxAge&&!L[u])return!1;const U=Date.now()-D.now;return D.maxAge?U>D.maxAge:L[u]&&U>L[u]},P=L=>{if(L[S]>L[R])for(let D=L[f].tail;L[S]>L[R]&&D!==null;){const U=D.prev;A(L,D),D=U}},A=(L,D)=>{if(D){const U=D.value;L[a]&&L[a](U.key,U.value),L[S]-=U.length,L[d].delete(U.key),L[f].removeNode(D)}};class O{constructor(D,U,M,x,F){this.key=D,this.value=U,this.length=M,this.now=x,this.maxAge=F||0}}const I=(L,D,U,M)=>{let x=U.value;E(L,x)&&(A(L,U),L[c]||(x=void 0)),x&&D.call(M,x.value,x.key,L)};o.exports=y},7468:(o,C,v)=>{const k=v(9930),{defaults:R}=v(8644),{inline:S}=v(9709),{findClosingBracket:g,escape:c}=v(621);o.exports=class ii{constructor(a,m){if(this.options=m||R,this.links=a,this.rules=S.normal,this.options.renderer=this.options.renderer||new k,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=S.pedantic:this.options.gfm&&(this.options.breaks?this.rules=S.breaks:this.rules=S.gfm)}static get rules(){return S}static output(a,m,f){return new ii(m,f).output(a)}output(a){let m="",f,d,p,w,y,_;for(;a;){if(y=this.rules.escape.exec(a)){a=a.substring(y[0].length),m+=c(y[1]);continue}if(y=this.rules.tag.exec(a)){!this.inLink&&/^<a /i.test(y[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(y[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(y[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(y[0])&&(this.inRawBlock=!1),a=a.substring(y[0].length),m+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(y[0]):c(y[0]):y[0]);continue}if(y=this.rules.link.exec(a)){const E=g(y[2],"()");if(E>-1){const A=(y[0].indexOf("!")===0?5:4)+y[1].length+E;y[2]=y[2].substring(0,E),y[0]=y[0].substring(0,A).trim(),y[3]=""}a=a.substring(y[0].length),this.inLink=!0,p=y[2],this.options.pedantic?(f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(p),f?(p=f[1],w=f[3]):w=""):w=y[3]?y[3].slice(1,-1):"",p=p.trim().replace(/^<([\s\S]*)>$/,"$1"),m+=this.outputLink(y,{href:ii.escapes(p),title:ii.escapes(w)}),this.inLink=!1;continue}if((y=this.rules.reflink.exec(a))||(y=this.rules.nolink.exec(a))){if(a=a.substring(y[0].length),f=(y[2]||y[1]).replace(/\s+/g," "),f=this.links[f.toLowerCase()],!f||!f.href){m+=y[0].charAt(0),a=y[0].substring(1)+a;continue}this.inLink=!0,m+=this.outputLink(y,f),this.inLink=!1;continue}if(y=this.rules.strong.exec(a)){a=a.substring(y[0].length),m+=this.renderer.strong(this.output(y[4]||y[3]||y[2]||y[1]));continue}if(y=this.rules.em.exec(a)){a=a.substring(y[0].length),m+=this.renderer.em(this.output(y[6]||y[5]||y[4]||y[3]||y[2]||y[1]));continue}if(y=this.rules.code.exec(a)){a=a.substring(y[0].length),m+=this.renderer.codespan(c(y[2].trim(),!0));continue}if(y=this.rules.br.exec(a)){a=a.substring(y[0].length),m+=this.renderer.br();continue}if(y=this.rules.del.exec(a)){a=a.substring(y[0].length),m+=this.renderer.del(this.output(y[1]));continue}if(y=this.rules.autolink.exec(a)){a=a.substring(y[0].length),y[2]==="@"?(d=c(this.mangle(y[1])),p="mailto:"+d):(d=c(y[1]),p=d),m+=this.renderer.link(p,null,d);continue}if(!this.inLink&&(y=this.rules.url.exec(a))){if(y[2]==="@")d=c(y[0]),p="mailto:"+d;else{do _=y[0],y[0]=this.rules._backpedal.exec(y[0])[0];while(_!==y[0]);d=c(y[0]),y[1]==="www."?p="http://"+d:p=d}a=a.substring(y[0].length),m+=this.renderer.link(p,null,d);continue}if(y=this.rules.text.exec(a)){a=a.substring(y[0].length),this.inRawBlock?m+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(y[0]):c(y[0]):y[0]):m+=this.renderer.text(c(this.smartypants(y[0])));continue}if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}return m}static escapes(a){return a&&a.replace(ii.rules._escapes,"$1")}outputLink(a,m){const f=m.href,d=m.title?c(m.title):null;return a[0].charAt(0)!=="!"?this.renderer.link(f,d,this.output(a[1])):this.renderer.image(f,d,c(a[1]))}smartypants(a){return this.options.smartypants?a.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):a}mangle(a){if(!this.options.mangle)return a;const m=a.length;let f="",d=0,p;for(;d<m;d++)p=a.charCodeAt(d),Math.random()>.5&&(p="x"+p.toString(16)),f+="&#"+p+";";return f}}},1092:(o,C,v)=>{const{defaults:k}=v(8644),{block:R}=v(9709),{rtrim:S,splitCells:g,escape:c}=v(621);o.exports=class ec{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||k,this.rules=R.normal,this.options.pedantic?this.rules=R.pedantic:this.options.gfm&&(this.rules=R.gfm)}static get rules(){return R}static lex(a,m){return new ec(m).lex(a)}lex(a){return a=a.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(a,!0)}token(a,m){a=a.replace(/^ +$/gm,"");let f,d,p,w,y,_,E,P,A,O,I,L,D,U,M,x;for(;a;){if((p=this.rules.newline.exec(a))&&(a=a.substring(p[0].length),p[0].length>1&&this.tokens.push({type:"space"})),p=this.rules.code.exec(a)){const F=this.tokens[this.tokens.length-1];a=a.substring(p[0].length),F&&F.type==="paragraph"?F.text+=`
`+p[0].trimRight():(p=p[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?p:S(p,`
`)}));continue}if(p=this.rules.fences.exec(a)){a=a.substring(p[0].length),this.tokens.push({type:"code",lang:p[2]?p[2].trim():p[2],text:p[3]||""});continue}if(p=this.rules.heading.exec(a)){a=a.substring(p[0].length),this.tokens.push({type:"heading",depth:p[1].length,text:p[2]});continue}if((p=this.rules.nptable.exec(a))&&(_={type:"table",header:g(p[1].replace(/^ *| *\| *$/g,"")),align:p[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:p[3]?p[3].replace(/\n$/,"").split(`
`):[]},_.header.length===_.align.length)){for(a=a.substring(p[0].length),I=0;I<_.align.length;I++)/^ *-+: *$/.test(_.align[I])?_.align[I]="right":/^ *:-+: *$/.test(_.align[I])?_.align[I]="center":/^ *:-+ *$/.test(_.align[I])?_.align[I]="left":_.align[I]=null;for(I=0;I<_.cells.length;I++)_.cells[I]=g(_.cells[I],_.header.length);this.tokens.push(_);continue}if(p=this.rules.hr.exec(a)){a=a.substring(p[0].length),this.tokens.push({type:"hr"});continue}if(p=this.rules.blockquote.exec(a)){a=a.substring(p[0].length),this.tokens.push({type:"blockquote_start"}),p=p[0].replace(/^ *> ?/gm,""),this.token(p,m),this.tokens.push({type:"blockquote_end"});continue}if(p=this.rules.list.exec(a)){for(a=a.substring(p[0].length),w=p[2],U=w.length>1,E={type:"list_start",ordered:U,start:U?+w:"",loose:!1},this.tokens.push(E),p=p[0].match(this.rules.item),P=[],f=!1,D=p.length,I=0;I<D;I++)_=p[I],O=_.length,_=_.replace(/^ *([*+-]|\d+\.) */,""),~_.indexOf(`
 `)&&(O-=_.length,_=this.options.pedantic?_.replace(/^ {1,4}/gm,""):_.replace(new RegExp("^ {1,"+O+"}","gm"),"")),I!==D-1&&(y=R.bullet.exec(p[I+1])[0],(w.length>1?y.length===1:y.length>1||this.options.smartLists&&y!==w)&&(a=p.slice(I+1).join(`
`)+a,I=D-1)),d=f||/\n\n(?!\s*$)/.test(_),I!==D-1&&(f=_.charAt(_.length-1)===`
`,d||(d=f)),d&&(E.loose=!0),M=/^\[[ xX]\] /.test(_),x=void 0,M&&(x=_[1]!==" ",_=_.replace(/^\[[ xX]\] +/,"")),A={type:"list_item_start",task:M,checked:x,loose:d},P.push(A),this.tokens.push(A),this.token(_,!1),this.tokens.push({type:"list_item_end"});if(E.loose)for(D=P.length,I=0;I<D;I++)P[I].loose=!0;this.tokens.push({type:"list_end"});continue}if(p=this.rules.html.exec(a)){a=a.substring(p[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(p[1]==="pre"||p[1]==="script"||p[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(p[0]):c(p[0]):p[0]});continue}if(m&&(p=this.rules.def.exec(a))){a=a.substring(p[0].length),p[3]&&(p[3]=p[3].substring(1,p[3].length-1)),L=p[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[L]||(this.tokens.links[L]={href:p[2],title:p[3]});continue}if((p=this.rules.table.exec(a))&&(_={type:"table",header:g(p[1].replace(/^ *| *\| *$/g,"")),align:p[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:p[3]?p[3].replace(/\n$/,"").split(`
`):[]},_.header.length===_.align.length)){for(a=a.substring(p[0].length),I=0;I<_.align.length;I++)/^ *-+: *$/.test(_.align[I])?_.align[I]="right":/^ *:-+: *$/.test(_.align[I])?_.align[I]="center":/^ *:-+ *$/.test(_.align[I])?_.align[I]="left":_.align[I]=null;for(I=0;I<_.cells.length;I++)_.cells[I]=g(_.cells[I].replace(/^ *\| *| *\| *$/g,""),_.header.length);this.tokens.push(_);continue}if(p=this.rules.lheading.exec(a)){a=a.substring(p[0].length),this.tokens.push({type:"heading",depth:p[2].charAt(0)==="="?1:2,text:p[1]});continue}if(m&&(p=this.rules.paragraph.exec(a))){a=a.substring(p[0].length),this.tokens.push({type:"paragraph",text:p[1].charAt(p[1].length-1)===`
`?p[1].slice(0,-1):p[1]});continue}if(p=this.rules.text.exec(a)){a=a.substring(p[0].length),this.tokens.push({type:"text",text:p[0]});continue}if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}return this.tokens}}},9170:(o,C,v)=>{const k=v(9930),R=v(1846),S=v(7468),g=v(1477),{defaults:c}=v(8644),{merge:u,unescape:a}=v(621);o.exports=class tc{constructor(f){this.tokens=[],this.token=null,this.options=f||c,this.options.renderer=this.options.renderer||new k,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new R}static parse(f,d){return new tc(d).parse(f)}parse(f){this.inline=new S(f.links,this.options),this.inlineText=new S(f.links,u({},this.options,{renderer:new g})),this.tokens=f.reverse();let d="";for(;this.next();)d+=this.tok();return d}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let f=this.token.text;for(;this.peek().type==="text";)f+=`
`+this.next().text;return this.inline.output(f)}tok(){let f="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,a(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let d="",p,w,y,_;for(y="",p=0;p<this.token.header.length;p++)y+=this.renderer.tablecell(this.inline.output(this.token.header[p]),{header:!0,align:this.token.align[p]});for(d+=this.renderer.tablerow(y),p=0;p<this.token.cells.length;p++){for(w=this.token.cells[p],y="",_=0;_<w.length;_++)y+=this.renderer.tablecell(this.inline.output(w[_]),{header:!1,align:this.token.align[_]});f+=this.renderer.tablerow(y)}return this.renderer.table(d,f)}case"blockquote_start":{for(f="";this.next().type!=="blockquote_end";)f+=this.tok();return this.renderer.blockquote(f)}case"list_start":{f="";const d=this.token.ordered,p=this.token.start;for(;this.next().type!=="list_end";)f+=this.tok();return this.renderer.list(f,d,p)}case"list_item_start":{f="";const d=this.token.loose,p=this.token.checked,w=this.token.task;if(this.token.task)if(d)if(this.peek().type==="text"){const y=this.peek();y.text=this.renderer.checkbox(p)+" "+y.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(p)});else f+=this.renderer.checkbox(p);for(;this.next().type!=="list_item_end";)f+=!d&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(f,w,p)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const d='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(d);else throw new Error(d)}}}}},9930:(o,C,v)=>{const{defaults:k}=v(8644),{cleanUrl:R,escape:S}=v(621);o.exports=class{constructor(c){this.options=c||k}code(c,u,a){const m=(u||"").match(/\S*/)[0];if(this.options.highlight){const f=this.options.highlight(c,m);f!=null&&f!==c&&(a=!0,c=f)}return m?'<pre><code class="'+this.options.langPrefix+S(m,!0)+'">'+(a?c:S(c,!0))+`</code></pre>
`:"<pre><code>"+(a?c:S(c,!0))+"</code></pre>"}blockquote(c){return`<blockquote>
`+c+`</blockquote>
`}html(c){return c}heading(c,u,a,m){return this.options.headerIds?"<h"+u+' id="'+this.options.headerPrefix+m.slug(a)+'">'+c+"</h"+u+`>
`:"<h"+u+">"+c+"</h"+u+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(c,u,a){const m=u?"ol":"ul",f=u&&a!==1?' start="'+a+'"':"";return"<"+m+f+`>
`+c+"</"+m+`>
`}listitem(c){return"<li>"+c+`</li>
`}checkbox(c){return"<input "+(c?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(c){return"<p>"+c+`</p>
`}table(c,u){return u&&(u="<tbody>"+u+"</tbody>"),`<table>
<thead>
`+c+`</thead>
`+u+`</table>
`}tablerow(c){return`<tr>
`+c+`</tr>
`}tablecell(c,u){const a=u.header?"th":"td";return(u.align?"<"+a+' align="'+u.align+'">':"<"+a+">")+c+"</"+a+`>
`}strong(c){return"<strong>"+c+"</strong>"}em(c){return"<em>"+c+"</em>"}codespan(c){return"<code>"+c+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(c){return"<del>"+c+"</del>"}link(c,u,a){if(c=R(this.options.sanitize,this.options.baseUrl,c),c===null)return a;let m='<a href="'+S(c)+'"';return u&&(m+=' title="'+u+'"'),m+=">"+a+"</a>",m}image(c,u,a){if(c=R(this.options.sanitize,this.options.baseUrl,c),c===null)return a;let m='<img src="'+c+'" alt="'+a+'"';return u&&(m+=' title="'+u+'"'),m+=this.options.xhtml?"/>":">",m}text(c){return c}}},1846:o=>{o.exports=class{constructor(){this.seen={}}slug(v){let k=v.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(k)){const R=k;do this.seen[R]++,k=R+"-"+this.seen[R];while(this.seen.hasOwnProperty(k))}return this.seen[k]=0,k}}},1477:o=>{o.exports=class{strong(v){return v}em(v){return v}codespan(v){return v}del(v){return v}html(v){return v}text(v){return v}link(v,k,R){return""+R}image(v,k,R){return""+R}br(){return""}}},8644:o=>{function C(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function v(k){o.exports.defaults=k}o.exports={defaults:C(),getDefaults:C,changeDefaults:v}},621:o=>{const C=/[&<>"']/,v=/[&<>"']/g,k=/[<>"']|&(?!#?\w+;)/,R=/[<>"']|&(?!#?\w+;)/g,S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=x=>S[x];function c(x,F){if(F){if(C.test(x))return x.replace(v,g)}else if(k.test(x))return x.replace(R,g);return x}const u=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function a(x){return x.replace(u,(F,H)=>(H=H.toLowerCase(),H==="colon"?":":H.charAt(0)==="#"?H.charAt(1)==="x"?String.fromCharCode(parseInt(H.substring(2),16)):String.fromCharCode(+H.substring(1)):""))}const m=/(^|[^\[])\^/g;function f(x,F){x=x.source||x,F=F||"";const H={replace:(B,j)=>(j=j.source||j,j=j.replace(m,"$1"),x=x.replace(B,j),H),getRegex:()=>new RegExp(x,F)};return H}const d=/[^\w:]/g,p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function w(x,F,H){if(x){let B;try{B=decodeURIComponent(a(H)).replace(d,"").toLowerCase()}catch(j){return null}if(B.indexOf("javascript:")===0||B.indexOf("vbscript:")===0||B.indexOf("data:")===0)return null}F&&!p.test(H)&&(H=A(F,H));try{H=encodeURI(H).replace(/%25/g,"%")}catch(B){return null}return H}const y={},_=/^[^:]+:\/*[^/]*$/,E=/^([^:]+:)[\s\S]*$/,P=/^([^:]+:\/*[^/]*)[\s\S]*$/;function A(x,F){y[" "+x]||(_.test(x)?y[" "+x]=x+"/":y[" "+x]=D(x,"/",!0)),x=y[" "+x];const H=x.indexOf(":")===-1;return F.substring(0,2)==="//"?H?F:x.replace(E,"$1")+F:F.charAt(0)==="/"?H?F:x.replace(P,"$1")+F:x+F}const O={exec:function(){}};function I(x){let F=1,H,B;for(;F<arguments.length;F++){H=arguments[F];for(B in H)Object.prototype.hasOwnProperty.call(H,B)&&(x[B]=H[B])}return x}function L(x,F){const H=x.replace(/\|/g,(W,J,ce)=>{let oe=!1,we=J;for(;--we>=0&&ce[we]==="\\";)oe=!oe;return oe?"|":" |"}),B=H.split(/ \|/);let j=0;if(B.length>F)B.splice(F);else for(;B.length<F;)B.push("");for(;j<B.length;j++)B[j]=B[j].trim().replace(/\\\|/g,"|");return B}function D(x,F,H){const B=x.length;if(B===0)return"";let j=0;for(;j<B;){const W=x.charAt(B-j-1);if(W===F&&!H)j++;else if(W!==F&&H)j++;else break}return x.substr(0,B-j)}function U(x,F){if(x.indexOf(F[1])===-1)return-1;const H=x.length;let B=0,j=0;for(;j<H;j++)if(x[j]==="\\")j++;else if(x[j]===F[0])B++;else if(x[j]===F[1]&&(B--,B<0))return j;return-1}function M(x){x&&x.sanitize&&!x.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}o.exports={escape:c,unescape:a,edit:f,cleanUrl:w,resolveUrl:A,noopTest:O,merge:I,splitCells:L,rtrim:D,findClosingBracket:U,checkSanitizeDeprecation:M}},7228:(o,C,v)=>{const k=v(1092),R=v(9170),S=v(9930),g=v(1477),c=v(7468),u=v(1846),{merge:a,checkSanitizeDeprecation:m,escape:f}=v(621),{getDefaults:d,changeDefaults:p,defaults:w}=v(8644);function y(_,E,P){if(typeof _=="undefined"||_===null)throw new Error("marked(): input parameter is undefined or null");if(typeof _!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(_)+", string expected");if(P||typeof E=="function"){P||(P=E,E=null),E=a({},y.defaults,E||{}),m(E);const A=E.highlight;let O,I,L=0;try{O=k.lex(_,E)}catch(U){return P(U)}I=O.length;const D=function(U){if(U)return E.highlight=A,P(U);let M;try{M=R.parse(O,E)}catch(x){U=x}return E.highlight=A,U?P(U):P(null,M)};if(!A||A.length<3||(delete E.highlight,!I))return D();for(;L<O.length;L++)(function(U){return U.type!=="code"?--I||D():A(U.text,U.lang,function(M,x){if(M)return D(M);if(x==null||x===U.text)return--I||D();U.text=x,U.escaped=!0,--I||D()})})(O[L]);return}try{return E=a({},y.defaults,E||{}),m(E),R.parse(k.lex(_,E),E)}catch(A){if(A.message+=`
Please report this to https://github.com/markedjs/marked.`,(E||y.defaults).silent)return"<p>An error occurred:</p><pre>"+f(A.message+"",!0)+"</pre>";throw A}}y.options=y.setOptions=function(_){return a(y.defaults,_),p(y.defaults),y},y.getDefaults=d,y.defaults=w,y.Parser=R,y.parser=R.parse,y.Renderer=S,y.TextRenderer=g,y.Lexer=k,y.lexer=k.lex,y.InlineLexer=c,y.inlineLexer=c.output,y.Slugger=u,y.parse=y,o.exports=y},9709:(o,C,v)=>{const{noopTest:k,edit:R,merge:S}=v(621),g={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:k,table:k,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};g._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,g._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,g.def=R(g.def).replace("label",g._label).replace("title",g._title).getRegex(),g.bullet=/(?:[*+-]|\d{1,9}\.)/,g.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,g.item=R(g.item,"gm").replace(/bull/g,g.bullet).getRegex(),g.list=R(g.list).replace(/bull/g,g.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+g.def.source+")").getRegex(),g._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",g._comment=/<!--(?!-?>)[\s\S]*?-->/,g.html=R(g.html,"i").replace("comment",g._comment).replace("tag",g._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),g.paragraph=R(g._paragraph).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.blockquote=R(g.blockquote).replace("paragraph",g.paragraph).getRegex(),g.normal=S({},g),g.gfm=S({},g.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),g.gfm.nptable=R(g.gfm.nptable).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.gfm.table=R(g.gfm.table).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.pedantic=S({},g.normal,{html:R(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",g._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:k,paragraph:R(g.normal._paragraph).replace("hr",g.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",g.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const c={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:k,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:k,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};c._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,c.em=R(c.em).replace(/punctuation/g,c._punctuation).getRegex(),c._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,c._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,c._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,c.autolink=R(c.autolink).replace("scheme",c._scheme).replace("email",c._email).getRegex(),c._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,c.tag=R(c.tag).replace("comment",g._comment).replace("attribute",c._attribute).getRegex(),c._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,c._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,c._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,c.link=R(c.link).replace("label",c._label).replace("href",c._href).replace("title",c._title).getRegex(),c.reflink=R(c.reflink).replace("label",c._label).getRegex(),c.normal=S({},c),c.pedantic=S({},c.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:R(/^!?\[(label)\]\((.*?)\)/).replace("label",c._label).getRegex(),reflink:R(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",c._label).getRegex()}),c.gfm=S({},c.normal,{escape:R(c.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),c.gfm.url=R(c.gfm.url,"i").replace("email",c.gfm._extended_email).getRegex(),c.breaks=S({},c.gfm,{br:R(c.br).replace("{2,}","*").getRegex(),text:R(c.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),o.exports={block:g,inline:c}},778:(o,C,v)=>{var k=v(2479);o.exports=k(R),o.exports.strict=k(S),R.proto=R(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return R(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return S(this)},configurable:!0})});function R(g){var c=function(){return c.called?c.value:(c.called=!0,c.value=g.apply(this,arguments))};return c.called=!1,c}function S(g){var c=function(){if(c.called)throw new Error(c.onceError);return c.called=!0,c.value=g.apply(this,arguments)},u=g.name||"Function wrapped with `once`";return c.onceError=u+" shouldn't be called more than once",c.called=!1,c}},6625:(o,C)=>{C=o.exports=Ee;var v;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?v=function(){var G=Array.prototype.slice.call(arguments,0);G.unshift("SEMVER"),console.log.apply(console,G)}:v=function(){},C.SEMVER_SPEC_VERSION="2.0.0";var k=256,R=Number.MAX_SAFE_INTEGER||9007199254740991,S=16,g=C.re=[],c=C.src=[],u=0,a=u++;c[a]="0|[1-9]\\d*";var m=u++;c[m]="[0-9]+";var f=u++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=u++;c[d]="("+c[a]+")\\.("+c[a]+")\\.("+c[a]+")";var p=u++;c[p]="("+c[m]+")\\.("+c[m]+")\\.("+c[m]+")";var w=u++;c[w]="(?:"+c[a]+"|"+c[f]+")";var y=u++;c[y]="(?:"+c[m]+"|"+c[f]+")";var _=u++;c[_]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var E=u++;c[E]="(?:-?("+c[y]+"(?:\\."+c[y]+")*))";var P=u++;c[P]="[0-9A-Za-z-]+";var A=u++;c[A]="(?:\\+("+c[P]+"(?:\\."+c[P]+")*))";var O=u++,I="v?"+c[d]+c[_]+"?"+c[A]+"?";c[O]="^"+I+"$";var L="[v=\\s]*"+c[p]+c[E]+"?"+c[A]+"?",D=u++;c[D]="^"+L+"$";var U=u++;c[U]="((?:<|>)?=?)";var M=u++;c[M]=c[m]+"|x|X|\\*";var x=u++;c[x]=c[a]+"|x|X|\\*";var F=u++;c[F]="[v=\\s]*("+c[x]+")(?:\\.("+c[x]+")(?:\\.("+c[x]+")(?:"+c[_]+")?"+c[A]+"?)?)?";var H=u++;c[H]="[v=\\s]*("+c[M]+")(?:\\.("+c[M]+")(?:\\.("+c[M]+")(?:"+c[E]+")?"+c[A]+"?)?)?";var B=u++;c[B]="^"+c[U]+"\\s*"+c[F]+"$";var j=u++;c[j]="^"+c[U]+"\\s*"+c[H]+"$";var W=u++;c[W]="(?:^|[^\\d])(\\d{1,"+S+"})(?:\\.(\\d{1,"+S+"}))?(?:\\.(\\d{1,"+S+"}))?(?:$|[^\\d])";var J=u++;c[J]="(?:~>?)";var ce=u++;c[ce]="(\\s*)"+c[J]+"\\s+",g[ce]=new RegExp(c[ce],"g");var oe="$1~",we=u++;c[we]="^"+c[J]+c[F]+"$";var Z=u++;c[Z]="^"+c[J]+c[H]+"$";var ne=u++;c[ne]="(?:\\^)";var re=u++;c[re]="(\\s*)"+c[ne]+"\\s+",g[re]=new RegExp(c[re],"g");var me="$1^",fe=u++;c[fe]="^"+c[ne]+c[F]+"$";var Se=u++;c[Se]="^"+c[ne]+c[H]+"$";var de=u++;c[de]="^"+c[U]+"\\s*("+L+")$|^$";var ge=u++;c[ge]="^"+c[U]+"\\s*("+I+")$|^$";var _e=u++;c[_e]="(\\s*)"+c[U]+"\\s*("+L+"|"+c[F]+")",g[_e]=new RegExp(c[_e],"g");var xe="$1$2$3",it=u++;c[it]="^\\s*("+c[F]+")\\s+-\\s+("+c[F]+")\\s*$";var je=u++;c[je]="^\\s*("+c[H]+")\\s+-\\s+("+c[H]+")\\s*$";var Xe=u++;c[Xe]="(<|>)?=?\\s*\\*";for(var Ne=0;Ne<u;Ne++)v(Ne,c[Ne]),g[Ne]||(g[Ne]=new RegExp(c[Ne]));C.parse=He;function He(G,z){if((!z||typeof z!="object")&&(z={loose:!!z,includePrerelease:!1}),G instanceof Ee)return G;if(typeof G!="string"||G.length>k)return null;var X=z.loose?g[D]:g[O];if(!X.test(G))return null;try{return new Ee(G,z)}catch(se){return null}}C.valid=Re;function Re(G,z){var X=He(G,z);return X?X.version:null}C.clean=Dt;function Dt(G,z){var X=He(G.trim().replace(/^[=v]+/,""),z);return X?X.version:null}C.SemVer=Ee;function Ee(G,z){if((!z||typeof z!="object")&&(z={loose:!!z,includePrerelease:!1}),G instanceof Ee){if(G.loose===z.loose)return G;G=G.version}else if(typeof G!="string")throw new TypeError("Invalid Version: "+G);if(G.length>k)throw new TypeError("version is longer than "+k+" characters");if(!(this instanceof Ee))return new Ee(G,z);v("SemVer",G,z),this.options=z,this.loose=!!z.loose;var X=G.trim().match(z.loose?g[D]:g[O]);if(!X)throw new TypeError("Invalid Version: "+G);if(this.raw=G,this.major=+X[1],this.minor=+X[2],this.patch=+X[3],this.major>R||this.major<0)throw new TypeError("Invalid major version");if(this.minor>R||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>R||this.patch<0)throw new TypeError("Invalid patch version");X[4]?this.prerelease=X[4].split(".").map(function(se){if(/^[0-9]+$/.test(se)){var he=+se;if(he>=0&&he<R)return he}return se}):this.prerelease=[],this.build=X[5]?X[5].split("."):[],this.format()}Ee.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ee.prototype.toString=function(){return this.version},Ee.prototype.compare=function(G){return v("SemVer.compare",this.version,this.options,G),G instanceof Ee||(G=new Ee(G,this.options)),this.compareMain(G)||this.comparePre(G)},Ee.prototype.compareMain=function(G){return G instanceof Ee||(G=new Ee(G,this.options)),Je(this.major,G.major)||Je(this.minor,G.minor)||Je(this.patch,G.patch)},Ee.prototype.comparePre=function(G){if(G instanceof Ee||(G=new Ee(G,this.options)),this.prerelease.length&&!G.prerelease.length)return-1;if(!this.prerelease.length&&G.prerelease.length)return 1;if(!this.prerelease.length&&!G.prerelease.length)return 0;var z=0;do{var X=this.prerelease[z],se=G.prerelease[z];if(v("prerelease compare",z,X,se),X===void 0&&se===void 0)return 0;if(se===void 0)return 1;if(X===void 0)return-1;if(X===se)continue;return Je(X,se)}while(++z)},Ee.prototype.inc=function(G,z){switch(G){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",z);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",z);break;case"prepatch":this.prerelease.length=0,this.inc("patch",z),this.inc("pre",z);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",z),this.inc("pre",z);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var X=this.prerelease.length;--X>=0;)typeof this.prerelease[X]=="number"&&(this.prerelease[X]++,X=-2);X===-1&&this.prerelease.push(0)}z&&(this.prerelease[0]===z?isNaN(this.prerelease[1])&&(this.prerelease=[z,0]):this.prerelease=[z,0]);break;default:throw new Error("invalid increment argument: "+G)}return this.format(),this.raw=this.version,this},C.inc=K;function K(G,z,X,se){typeof X=="string"&&(se=X,X=void 0);try{return new Ee(G,X).inc(z,se).version}catch(he){return null}}C.diff=tr;function tr(G,z){if(Sn(G,z))return null;var X=He(G),se=He(z),he="";if(X.prerelease.length||se.prerelease.length){he="pre";var pe="prerelease"}for(var ve in X)if((ve==="major"||ve==="minor"||ve==="patch")&&X[ve]!==se[ve])return he+ve;return pe}C.compareIdentifiers=Je;var br=/^[0-9]+$/;function Je(G,z){var X=br.test(G),se=br.test(z);return X&&se&&(G=+G,z=+z),G===z?0:X&&!se?-1:se&&!X?1:G<z?-1:1}C.rcompareIdentifiers=wr;function wr(G,z){return Je(z,G)}C.major=kt;function kt(G,z){return new Ee(G,z).major}C.minor=qe;function qe(G,z){return new Ee(G,z).minor}C.patch=ts;function ts(G,z){return new Ee(G,z).patch}C.compare=At;function At(G,z,X){return new Ee(G,X).compare(new Ee(z,X))}C.compareLoose=si;function si(G,z){return At(G,z,!0)}C.rcompare=Tn;function Tn(G,z,X){return At(z,G,X)}C.sort=Vt;function Vt(G,z){return G.sort(function(X,se){return C.compare(X,se,z)})}C.rsort=ai;function ai(G,z){return G.sort(function(X,se){return C.rcompare(X,se,z)})}C.gt=_r;function _r(G,z,X){return At(G,z,X)>0}C.lt=Ft;function Ft(G,z,X){return At(G,z,X)<0}C.eq=Sn;function Sn(G,z,X){return At(G,z,X)===0}C.neq=oi;function oi(G,z,X){return At(G,z,X)!==0}C.gte=xt;function xt(G,z,X){return At(G,z,X)>=0}C.lte=Lr;function Lr(G,z,X){return At(G,z,X)<=0}C.cmp=qr;function qr(G,z,X,se){switch(z){case"===":return typeof G=="object"&&(G=G.version),typeof X=="object"&&(X=X.version),G===X;case"!==":return typeof G=="object"&&(G=G.version),typeof X=="object"&&(X=X.version),G!==X;case"":case"=":case"==":return Sn(G,X,se);case"!=":return oi(G,X,se);case">":return _r(G,X,se);case">=":return xt(G,X,se);case"<":return Ft(G,X,se);case"<=":return Lr(G,X,se);default:throw new TypeError("Invalid operator: "+z)}}C.Comparator=gt;function gt(G,z){if((!z||typeof z!="object")&&(z={loose:!!z,includePrerelease:!1}),G instanceof gt){if(G.loose===!!z.loose)return G;G=G.value}if(!(this instanceof gt))return new gt(G,z);v("comparator",G,z),this.options=z,this.loose=!!z.loose,this.parse(G),this.semver===kr?this.value="":this.value=this.operator+this.semver.version,v("comp",this)}var kr={};gt.prototype.parse=function(G){var z=this.options.loose?g[de]:g[ge],X=G.match(z);if(!X)throw new TypeError("Invalid comparator: "+G);this.operator=X[1],this.operator==="="&&(this.operator=""),X[2]?this.semver=new Ee(X[2],this.options.loose):this.semver=kr},gt.prototype.toString=function(){return this.value},gt.prototype.test=function(G){return v("Comparator.test",G,this.options.loose),this.semver===kr?!0:(typeof G=="string"&&(G=new Ee(G,this.options)),qr(G,this.operator,this.semver,this.options))},gt.prototype.intersects=function(G,z){if(!(G instanceof gt))throw new TypeError("a Comparator is required");(!z||typeof z!="object")&&(z={loose:!!z,includePrerelease:!1});var X;if(this.operator==="")return X=new De(G.value,z),Ot(this.value,X,z);if(G.operator==="")return X=new De(this.value,z),Ot(G.semver,X,z);var se=(this.operator===">="||this.operator===">")&&(G.operator===">="||G.operator===">"),he=(this.operator==="<="||this.operator==="<")&&(G.operator==="<="||G.operator==="<"),pe=this.semver.version===G.semver.version,ve=(this.operator===">="||this.operator==="<=")&&(G.operator===">="||G.operator==="<="),Pe=qr(this.semver,"<",G.semver,z)&&(this.operator===">="||this.operator===">")&&(G.operator==="<="||G.operator==="<"),Te=qr(this.semver,">",G.semver,z)&&(this.operator==="<="||this.operator==="<")&&(G.operator===">="||G.operator===">");return se||he||pe&&ve||Pe||Te},C.Range=De;function De(G,z){if((!z||typeof z!="object")&&(z={loose:!!z,includePrerelease:!1}),G instanceof De)return G.loose===!!z.loose&&G.includePrerelease===!!z.includePrerelease?G:new De(G.raw,z);if(G instanceof gt)return new De(G.value,z);if(!(this instanceof De))return new De(G,z);if(this.options=z,this.loose=!!z.loose,this.includePrerelease=!!z.includePrerelease,this.raw=G,this.set=G.split(/\s*\|\|\s*/).map(function(X){return this.parseRange(X.trim())},this).filter(function(X){return X.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+G);this.format()}De.prototype.format=function(){return this.range=this.set.map(function(G){return G.join(" ").trim()}).join("||").trim(),this.range},De.prototype.toString=function(){return this.range},De.prototype.parseRange=function(G){var z=this.options.loose;G=G.trim();var X=z?g[je]:g[it];G=G.replace(X,as),v("hyphen replace",G),G=G.replace(g[_e],xe),v("comparator trim",G,g[_e]),G=G.replace(g[ce],oe),G=G.replace(g[re],me),G=G.split(/\s+/).join(" ");var se=z?g[de]:g[ge],he=G.split(" ").map(function(pe){return ui(pe,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(he=he.filter(function(pe){return!!pe.match(se)})),he=he.map(function(pe){return new gt(pe,this.options)},this),he},De.prototype.intersects=function(G,z){if(!(G instanceof De))throw new TypeError("a Range is required");return this.set.some(function(X){return X.every(function(se){return G.set.some(function(he){return he.every(function(pe){return se.intersects(pe,z)})})})})},C.toComparators=ke;function ke(G,z){return new De(G,z).set.map(function(X){return X.map(function(se){return se.value}).join(" ").trim().split(" ")})}function ui(G,z){return v("comp",G,z),G=Ge(G,z),v("caret",G),G=rs(G,z),v("tildes",G),G=is(G,z),v("xrange",G),G=ci(G,z),v("stars",G),G}function tt(G){return!G||G.toLowerCase()==="x"||G==="*"}function rs(G,z){return G.trim().split(/\s+/).map(function(X){return ns(X,z)}).join(" ")}function ns(G,z){var X=z.loose?g[Z]:g[we];return G.replace(X,function(se,he,pe,ve,Pe){v("tilde",G,se,he,pe,ve,Pe);var Te;return tt(he)?Te="":tt(pe)?Te=">="+he+".0.0 <"+(+he+1)+".0.0":tt(ve)?Te=">="+he+"."+pe+".0 <"+he+"."+(+pe+1)+".0":Pe?(v("replaceTilde pr",Pe),Te=">="+he+"."+pe+"."+ve+"-"+Pe+" <"+he+"."+(+pe+1)+".0"):Te=">="+he+"."+pe+"."+ve+" <"+he+"."+(+pe+1)+".0",v("tilde return",Te),Te})}function Ge(G,z){return G.trim().split(/\s+/).map(function(X){return li(X,z)}).join(" ")}function li(G,z){v("caret",G,z);var X=z.loose?g[Se]:g[fe];return G.replace(X,function(se,he,pe,ve,Pe){v("caret",G,se,he,pe,ve,Pe);var Te;return tt(he)?Te="":tt(pe)?Te=">="+he+".0.0 <"+(+he+1)+".0.0":tt(ve)?he==="0"?Te=">="+he+"."+pe+".0 <"+he+"."+(+pe+1)+".0":Te=">="+he+"."+pe+".0 <"+(+he+1)+".0.0":Pe?(v("replaceCaret pr",Pe),he==="0"?pe==="0"?Te=">="+he+"."+pe+"."+ve+"-"+Pe+" <"+he+"."+pe+"."+(+ve+1):Te=">="+he+"."+pe+"."+ve+"-"+Pe+" <"+he+"."+(+pe+1)+".0":Te=">="+he+"."+pe+"."+ve+"-"+Pe+" <"+(+he+1)+".0.0"):(v("no pr"),he==="0"?pe==="0"?Te=">="+he+"."+pe+"."+ve+" <"+he+"."+pe+"."+(+ve+1):Te=">="+he+"."+pe+"."+ve+" <"+he+"."+(+pe+1)+".0":Te=">="+he+"."+pe+"."+ve+" <"+(+he+1)+".0.0"),v("caret return",Te),Te})}function is(G,z){return v("replaceXRanges",G,z),G.split(/\s+/).map(function(X){return ss(X,z)}).join(" ")}function ss(G,z){G=G.trim();var X=z.loose?g[j]:g[B];return G.replace(X,function(se,he,pe,ve,Pe,Te){v("xRange",G,se,he,pe,ve,Pe,Te);var Pt=tt(pe),dt=Pt||tt(ve),vt=dt||tt(Pe),Be=vt;return he==="="&&Be&&(he=""),Pt?he===">"||he==="<"?se="<0.0.0":se="*":he&&Be?(dt&&(ve=0),Pe=0,he===">"?(he=">=",dt?(pe=+pe+1,ve=0,Pe=0):(ve=+ve+1,Pe=0)):he==="<="&&(he="<",dt?pe=+pe+1:ve=+ve+1),se=he+pe+"."+ve+"."+Pe):dt?se=">="+pe+".0.0 <"+(+pe+1)+".0.0":vt&&(se=">="+pe+"."+ve+".0 <"+pe+"."+(+ve+1)+".0"),v("xRange return",se),se})}function ci(G,z){return v("replaceStars",G,z),G.trim().replace(g[Xe],"")}function as(G,z,X,se,he,pe,ve,Pe,Te,Pt,dt,vt,Be){return tt(X)?z="":tt(se)?z=">="+X+".0.0":tt(he)?z=">="+X+"."+se+".0":z=">="+z,tt(Te)?Pe="":tt(Pt)?Pe="<"+(+Te+1)+".0.0":tt(dt)?Pe="<"+Te+"."+(+Pt+1)+".0":vt?Pe="<="+Te+"."+Pt+"."+dt+"-"+vt:Pe="<="+Pe,(z+" "+Pe).trim()}De.prototype.test=function(G){if(!G)return!1;typeof G=="string"&&(G=new Ee(G,this.options));for(var z=0;z<this.set.length;z++)if(os(this.set[z],G,this.options))return!0;return!1};function os(G,z,X){for(var se=0;se<G.length;se++)if(!G[se].test(z))return!1;if(z.prerelease.length&&!X.includePrerelease){for(se=0;se<G.length;se++)if(v(G[se].semver),G[se].semver!==kr&&G[se].semver.prerelease.length>0){var he=G[se].semver;if(he.major===z.major&&he.minor===z.minor&&he.patch===z.patch)return!0}return!1}return!0}C.satisfies=Ot;function Ot(G,z,X){try{z=new De(z,X)}catch(se){return!1}return z.test(G)}C.maxSatisfying=Pn;function Pn(G,z,X){var se=null,he=null;try{var pe=new De(z,X)}catch(ve){return null}return G.forEach(function(ve){pe.test(ve)&&(!se||he.compare(ve)===-1)&&(se=ve,he=new Ee(se,X))}),se}C.minSatisfying=us;function us(G,z,X){var se=null,he=null;try{var pe=new De(z,X)}catch(ve){return null}return G.forEach(function(ve){pe.test(ve)&&(!se||he.compare(ve)===1)&&(se=ve,he=new Ee(se,X))}),se}C.minVersion=Nn;function Nn(G,z){G=new De(G,z);var X=new Ee("0.0.0");if(G.test(X)||(X=new Ee("0.0.0-0"),G.test(X)))return X;X=null;for(var se=0;se<G.set.length;++se){var he=G.set[se];he.forEach(function(pe){var ve=new Ee(pe.semver.version);switch(pe.operator){case">":ve.prerelease.length===0?ve.patch++:ve.prerelease.push(0),ve.raw=ve.format();case"":case">=":(!X||_r(X,ve))&&(X=ve);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+pe.operator)}})}return X&&G.test(X)?X:null}C.validRange=In;function In(G,z){try{return new De(G,z).range||"*"}catch(X){return null}}C.ltr=ls;function ls(G,z,X){return Dn(G,z,"<",X)}C.gtr=cs;function cs(G,z,X){return Dn(G,z,">",X)}C.outside=Dn;function Dn(G,z,X,se){G=new Ee(G,se),z=new De(z,se);var he,pe,ve,Pe,Te;switch(X){case">":he=_r,pe=Lr,ve=Ft,Pe=">",Te=">=";break;case"<":he=Ft,pe=xt,ve=_r,Pe="<",Te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ot(G,z,se))return!1;for(var Pt=0;Pt<z.set.length;++Pt){var dt=z.set[Pt],vt=null,Be=null;if(dt.forEach(function(jt){jt.semver===kr&&(jt=new gt(">=0.0.0")),vt=vt||jt,Be=Be||jt,he(jt.semver,vt.semver,se)?vt=jt:ve(jt.semver,Be.semver,se)&&(Be=jt)}),vt.operator===Pe||vt.operator===Te||(!Be.operator||Be.operator===Pe)&&pe(G,Be.semver))return!1;if(Be.operator===Te&&ve(G,Be.semver))return!1}return!0}C.prerelease=ds;function ds(G,z){var X=He(G,z);return X&&X.prerelease.length?X.prerelease:null}C.intersects=di;function di(G,z,X){return G=new De(G,X),z=new De(z,X),G.intersects(z)}C.coerce=hs;function hs(G){if(G instanceof Ee)return G;if(typeof G!="string")return null;var z=G.match(g[W]);return z==null?null:He(z[1]+"."+(z[2]||"0")+"."+(z[3]||"0"))}},6372:o=>{"use strict";function C(a){return typeof a=="function"}var v=console.error.bind(console);function k(a,m,f){var d=!!a[m]&&a.propertyIsEnumerable(m);Object.defineProperty(a,m,{configurable:!0,enumerable:d,writable:!0,value:f})}function R(a){a&&a.logger&&(C(a.logger)?v=a.logger:v("new logger isn't a function, not replacing"))}function S(a,m,f){if(!a||!a[m]){v("no original function "+m+" to wrap");return}if(!f){v("no wrapper function"),v(new Error().stack);return}if(!C(a[m])||!C(f)){v("original object and wrapper must be functions");return}var d=a[m],p=f(d,m);return k(p,"__original",d),k(p,"__unwrap",function(){a[m]===p&&k(a,m,d)}),k(p,"__wrapped",!0),k(a,m,p),p}function g(a,m,f){if(a)Array.isArray(a)||(a=[a]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(m&&Array.isArray(m))){v("must provide one or more functions to wrap on modules");return}a.forEach(function(d){m.forEach(function(p){S(d,p,f)})})}function c(a,m){if(!a||!a[m]){v("no function to unwrap."),v(new Error().stack);return}if(!a[m].__unwrap)v("no original to unwrap to -- has "+m+" already been unwrapped?");else return a[m].__unwrap()}function u(a,m){if(a)Array.isArray(a)||(a=[a]);else{v("must provide one or more modules to patch"),v(new Error().stack);return}if(!(m&&Array.isArray(m))){v("must provide one or more functions to unwrap on modules");return}a.forEach(function(f){m.forEach(function(d){c(f,d)})})}R.wrap=S,R.massWrap=g,R.unwrap=c,R.massUnwrap=u,o.exports=R},6200:(o,C,v)=>{"use strict";const k=v(1669),R=v(1003),S=/\s/,g=/\r|\n/,c=/^(Host|Match)$/i,u=1,a=2;function m(d,p){return p.hasOwnProperty(d.param)&&p[d.param]===d.value}class f extends Array{compute(p){const w={},y=(_,E)=>{_==="IdentityFile"?(w[_]||(w[_]=[])).push(E):w[_]==null&&(w[_]=E)};for(const _ of this)_.type===u&&(_.param==="Host"?R(_.value,p)&&(y(_.param,_.value),_.config.filter(E=>E.type===u).forEach(E=>y(E.param,E.value))):_.param==="Match"||y(_.param,_.value));return w}find(p={}){if(typeof p=="function")return super.find(p);if(!(p&&("Host"in p||"Match"in p)))throw new Error("Can only find by Host or Match");return super.find(w=>m(w,p))}remove(p={}){if(!(p&&("Host"in p||"Match"in p)))throw new Error("Can only remove by Host or Match");const w=typeof p=="function"?super.findIndex(p):super.findIndex(y=>m(y,p));if(w>=0)return this.splice(w,1)}toString(){return this.constructor.stringify(this)}append(p){let w="  ";e:for(const E of this)if(c.test(E.param)){for(const P of E.config)if(P.before){w=P.before;break e}}if(this.length>0){let E=this[this.length-1];E.config&&(E=E.config[E.config.length-1]),E.after=`
`}let y=this,_=this;for(const E in p){const P={type:u,param:E,separator:" ",value:p[E],before:"",after:`
`};c.test(E)?(y=_,y.push(P),y=P.config=new f):(P.before=y===_?"":w,y.push(P))}return _}static stringify(p){let w="";const y=(E,P)=>Array.isArray(E)?E.map(A=>y(A,S.test(A))).join(" "):P?`"${E}"`:E,_=E=>{if(w+=E.before,E.type===a)w+=E.content;else if(E.type===u){const P=E.quoted||/IdentityFile/i.test(E.param)&&S.test(E.value),A=y(E.value,P);w+=`${E.param}${E.separator}${A}`}w+=E.after,E.config&&E.config.forEach(_)};return p.forEach(_),w}static get DIRECTIVE(){return u}static get COMMENT(){return a}static parse(p){let w=0,y=P(),_=new f,E=_;function P(){return p[w++]}function A(){let H="";for(;S.test(y);)H+=y,y=P();return H}function O(){let H="";for(;g.test(y);)H+=y,y=P();return H}function I(){let H="";for(;y&&/[^ \t=]/.test(y);)H+=y,y=P();return H}function L(){let H=A();return y==="="&&(H+=y,y=P()),H+A()}function D(){let H="",B=!1,j=!1;for(;y&&!g.test(y);)j?(H+=y==='"'?y:`\\${y}`,j=!1):y==='"'&&(!H||B)?B=!B:y==="\\"?j=!0:H+=y,y=P();if(B||j)throw new Error(`Unexpected line break at ${H}`);return H.trim()}function U(){const H=a;let B="";for(;y&&!g.test(y);)B+=y,y=P();return{type:H,content:B}}function M(){const H=[];let B="",j=!1,W=!1;for(;y&&!g.test(y);)W?(B+=y==='"'?y:`\\${y}`,W=!1):y==='"'?j=!j:y==="\\"?W=!0:j?B+=y:/[ \t]/.test(y)?B&&(H.push(B),B=""):B+=y,y=P();if(j||W)throw new Error(`Unexpected line break at ${H.concat(B).join(" ")}`);return H.push(B),H.length>1?H:H[0]}function x(){const H=u,B=I(),j=B.toLowerCase()=="host",W={type:H,param:B,separator:L(),quoted:!j&&y==='"',value:j?M():D()};return W.quoted||delete W.quoted,W}function F(){const H=A(),B=y==="#"?U():x(),j=O();return B.before=H,B.after=j,B}for(;y;){let H=F();H.type===u&&c.test(H.param)?(_=E,_.push(H),_=H.config=new f):_.push(H)}return E}}f.find=k.deprecate((d,p)=>{const w=d.find(p);return w?[w,d.indexOf(w)]:null},"SSHConfig.find() is deprected. Use SSHConfig.prototype.find() instead."),o.exports=f},1003:o=>{"use strict";function C(k,R){return k=k.replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+k+")$").test(R)}function v(k,R){const S=Array.isArray(k)?k:k.split(/,/);let g=!1;for(const c of S){if(c[0]=="!"&&C(c.slice(1),R))return!1;C(c,R)&&(g=!0)}return g}o.exports=v},465:o=>{function C(v){try{return Error.prototype.toString.call(v)}catch(k){try{return"<error: "+k+">"}catch(R){return"<error>"}}}o.exports=function(k,R){var S=[];S.push(C(k));for(var g=0;g<R.length;g++){var c=R[g],u;try{u=c.toString()}catch(a){try{u="<error: "+a+">"}catch(m){u="<error>"}}S.push("    at "+u)}return S.join(`
`)}},2512:(o,C,v)=>{if(global._stackChain)if(global._stackChain.version===v(9414).i8)o.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else o.exports=global._stackChain=v(7898)},9414:o=>{"use strict";o.exports={i8:"1.3.7"}},7898:(o,C,v)=>{var k=v(465);function R(){this.extend=new c,this.filter=new c,this.format=new u,this.version=v(9414).i8}var S=!1;R.prototype.callSite=function d(p){p||(p={}),S=!0;var w={};Error.captureStackTrace(w,d);var y=w.stack;return S=!1,y=y.slice(p.slice||0),p.extend&&(y=this.extend._modify(w,y)),p.filter&&(y=this.filter._modify(w,y)),y};var g=new R;function c(){this._modifiers=[]}c.prototype._modify=function(d,p){for(var w=0,y=this._modifiers.length;w<y;w++)p=this._modifiers[w](d,p);return p},c.prototype.attach=function(d){this._modifiers.push(d)},c.prototype.deattach=function(d){var p=this._modifiers.indexOf(d);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function u(){this._formater=k,this._previous=void 0}u.prototype.replace=function(d){d?this._formater=d:this.restore()},u.prototype.restore=function(){this._formater=k,this._previous=void 0},u.prototype._backup=function(){this._previous=this._formater},u.prototype._roolback=function(){this._previous===k?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&g.format.replace(Error.prepareStackTrace);var a=!1;function m(d,p){if(S)return p;if(a)return k(d,p);var w=p.concat();w=g.extend._modify(d,w),w=g.filter._modify(d,w),w=w.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:p,mutated:w}),a=!0;var y=g.format._formater(d,w);return a=!1,y}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return m},set:function(d){d===m?g.format._roolback():(g.format._backup(),g.format.replace(d))}});function f(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:f,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),o.exports=g},2130:(o,C,v)=>{"use strict";const k=v(2087),R=v(3867),S=v(2146),{env:g}=process;let c;S("no-color")||S("no-colors")||S("color=false")||S("color=never")?c=0:(S("color")||S("colors")||S("color=true")||S("color=always"))&&(c=1),"FORCE_COLOR"in g&&(g.FORCE_COLOR==="true"?c=1:g.FORCE_COLOR==="false"?c=0:c=g.FORCE_COLOR.length===0?1:Math.min(parseInt(g.FORCE_COLOR,10),3));function u(f){return f===0?!1:{level:f,hasBasic:!0,has256:f>=2,has16m:f>=3}}function a(f,d){if(c===0)return 0;if(S("color=16m")||S("color=full")||S("color=truecolor"))return 3;if(S("color=256"))return 2;if(f&&!d&&c===void 0)return 0;const p=c||0;if(g.TERM==="dumb")return p;if(process.platform==="win32"){const w=k.release().split(".");return Number(w[0])>=10&&Number(w[2])>=10586?Number(w[2])>=14931?3:2:1}if("CI"in g)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(w=>w in g)||g.CI_NAME==="codeship"?1:p;if("TEAMCITY_VERSION"in g)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(g.TEAMCITY_VERSION)?1:0;if(g.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in g){const w=parseInt((g.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(g.TERM_PROGRAM){case"iTerm.app":return w>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(g.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(g.TERM)||"COLORTERM"in g?1:p}function m(f){const d=a(f,f&&f.isTTY);return u(d)}o.exports={supportsColor:m,stdout:u(a(!0,R.isatty(1))),stderr:u(a(!0,R.isatty(2)))}},2146:o=>{"use strict";o.exports=(C,v=process.argv)=>{const k=C.startsWith("-")?"":C.length===1?"-":"--",R=v.indexOf(k+C),S=v.indexOf("--");return R!==-1&&(S===-1||R<S)}},7121:(o,C,v)=>{"use strict";v.d(C,{Z:()=>g});function k(c){var u,a=c.Symbol;return typeof a=="function"?a.observable?u=a.observable:(u=a("observable"),a.observable=u):u="@@observable",u}o=v.hmd(o);var R;typeof self!="undefined"?R=self:typeof window!="undefined"?R=window:typeof global!="undefined"?R=global:R=o;var S=k(R);const g=S},4802:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=v(6363);C.ExperimentationService=k.ExperimentationService},6363:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(4067),R=v(4234),S=v(5975);class g extends S.ExperimentationServiceAutoPolling{constructor(u){super(u.telemetry,u.filterProviders||[],u.refetchInterval!=null?u.refetchInterval:0,u.featuresTelemetryPropertyName,u.assignmentContextTelemetryPropertyName,u.telemetryEventName,u.storageKey,u.keyValueStorage);this.options=u,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new k.TasApiFeatureProvider(new R.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}C.ExperimentationService=g,g.REFRESH_RATE_IN_MINUTES=30},5975:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(3663),R=v(3334);class S extends k.ExperimentationServiceBase{constructor(c,u,a,m,f,d,p,w){super(c,m,f,d,p,w);if(this.telemetry=c,this.filterProviders=u,this.refreshRateMs=a,this.featuresTelemetryPropertyName=m,this.assignmentContextTelemetryPropertyName=f,this.telemetryEventName=d,this.storageKey=p,this.storage=w,a<1e3&&a!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");a>0&&(this.pollingService=new R.PollingService(a),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(c=!1){if(this.pollingService){this.pollingService.StopPolling();let u=await super.getFeaturesAsync(c);return this.pollingService.StartPolling(),u}else return await super.getFeaturesAsync(c)}}C.ExperimentationServiceAutoPolling=S},3663:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(7002);class R{constructor(g,c,u,a,m,f){this.telemetry=g,this.featuresTelemetryPropertyName=c,this.assignmentContextTelemetryPropertyName=u,this.telemetryEventName=a,this.storageKey=m,this.storage=f,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(f=new k.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(g){this._features=g,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(g=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async u=>await u.getFeatures()));let c=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(c,g),this.features}updateFeatures(g,c=!1){let u={features:[],assignmentContext:"",configs:[]};for(let a of g){for(let m of a.features)u.features.includes(m)||u.features.push(m);for(let m of a.configs){const f=u.configs.find(d=>d.Id===m.Id);f?f.Parameters=Object.assign(Object.assign({},f.Parameters),m.Parameters):u.configs.push(m)}u.assignmentContext+=a.assignmentContext}(c||!this.featuresConsumed)&&(this.features=u),this.storage&&this.storage.setValue(this.storageKey,u)}async loadCachedFeatureData(){let g;this.storage&&(g=await this.storage.getValue(this.storageKey),g!==void 0&&g.configs===void 0&&(g.configs=[])),this.features.features.length===0&&(this.features=g||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(g){return this.featuresConsumed=!0,this.PostEventToTelemetry(g),this.features.features.includes(g)}async isCachedFlightEnabled(g){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(g),this.features.features.includes(g)}async isFlightEnabledAsync(g){const c=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(g),c.features.includes(g)}getTreatmentVariable(g,c){var u;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${g}.${c}`),(u=this.features.configs.find(m=>m.Id===g))===null||u===void 0?void 0:u.Parameters[c]}async getTreatmentVariableAsync(g,c){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(g,c)}PostEventToTelemetry(g){this.cachedTelemetryEvents.includes(g)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",g]])),this.cachedTelemetryEvents.push(g))}invokeInit(){this.init()}addFeatureProvider(...g){if(!(g==null||this.featureProviders==null))for(let c of g)this.featureProviders.push(c)}}C.ExperimentationServiceBase=R},69:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});class v{constructor(R){this.telemetry=R,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let R=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,R}}C.BaseFeatureProvider=v},4e3:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(69);class R extends k.BaseFeatureProvider{constructor(g,c){super(g);this.telemetry=g,this.filterProviders=c,this.cachedTelemetryEvents=[]}getFilters(){let g=new Map;for(let c of this.filterProviders){let u=c.getFilters();for(let a of u.keys()){let m=u.get(a);g.set(a,m)}}return g}PostEventToTelemetry(g){if(this.cachedTelemetryEvents.includes(g))return;const c=JSON.stringify(g);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",c]])),this.cachedTelemetryEvents.push(g)}}C.FilteredFeatureProvider=R},4067:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(4e3);class R extends k.FilteredFeatureProvider{constructor(g,c,u){super(c,u);this.httpClient=g,this.telemetry=c,this.filterProviders=u}async fetch(){let g=this.getFilters(),c={};for(let d of g.keys()){const p=g.get(d);c[d]=p}let u=await this.httpClient.get({headers:c});g.keys.length>0&&this.PostEventToTelemetry(c);let a=u.data,m=a.Configs,f=[];for(let d of m)if(!!d.Parameters)for(let p of Object.keys(d.Parameters)){const w=p+(d.Parameters[p]?"":"cf");f.includes(w)||f.push(w)}return{features:f,assignmentContext:a.AssignmentContext,configs:m}}}C.TasApiFeatureProvider=R},4234:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(9669);class R{constructor(g){this.endpoint=g}get(g){return k.default.get(this.endpoint,Object.assign(Object.assign({},g),{proxy:!1}))}}C.AxiosHttpClient=R},7002:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});class v{constructor(){this.storage=new Map}async getValue(R,S){return this.storage.has(R)?await Promise.resolve(this.storage.get(R)):await Promise.resolve(S||void 0)}setValue(R,S){this.storage.set(R,S)}}C.MemoryKeyValueStorage=v},3334:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});class v{constructor(R){this.fetchInterval=R}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(R){this.onTick=R}StartPolling(R=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(R&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}C.PollingService=v},6149:(o,C,v)=>{o.exports=v(5468)},5468:(o,C,v)=>{"use strict";var k,R=v(1631),S=v(4016),g=v(8605),c=v(7211),u=v(8614),a=v(2357),m=v(1669);k=f,C.httpsOverHttp=d,k=p,k=w;function f(O){var I=new y(O);return I.request=g.request,I}function d(O){var I=new y(O);return I.request=g.request,I.createSocket=_,I.defaultPort=443,I}function p(O){var I=new y(O);return I.request=c.request,I}function w(O){var I=new y(O);return I.request=c.request,I.createSocket=_,I.defaultPort=443,I}function y(O){var I=this;I.options=O||{},I.proxyOptions=I.options.proxy||{},I.maxSockets=I.options.maxSockets||g.Agent.defaultMaxSockets,I.requests=[],I.sockets=[],I.on("free",function(D,U,M,x){for(var F=E(U,M,x),H=0,B=I.requests.length;H<B;++H){var j=I.requests[H];if(j.host===F.host&&j.port===F.port){I.requests.splice(H,1),j.request.onSocket(D);return}}D.destroy(),I.removeSocket(D)})}m.inherits(y,u.EventEmitter),y.prototype.addRequest=function(I,L,D,U){var M=this,x=P({request:I},M.options,E(L,D,U));if(M.sockets.length>=this.maxSockets){M.requests.push(x);return}M.createSocket(x,function(F){F.on("free",H),F.on("close",B),F.on("agentRemove",B),I.onSocket(F);function H(){M.emit("free",F,x)}function B(j){M.removeSocket(F),F.removeListener("free",H),F.removeListener("close",B),F.removeListener("agentRemove",B)}})},y.prototype.createSocket=function(I,L){var D=this,U={};D.sockets.push(U);var M=P({},D.proxyOptions,{method:"CONNECT",path:I.host+":"+I.port,agent:!1,headers:{host:I.host+":"+I.port}});I.localAddress&&(M.localAddress=I.localAddress),M.proxyAuth&&(M.headers=M.headers||{},M.headers["Proxy-Authorization"]="Basic "+new Buffer(M.proxyAuth).toString("base64")),A("making CONNECT request");var x=D.request(M);x.useChunkedEncodingByDefault=!1,x.once("response",F),x.once("upgrade",H),x.once("connect",B),x.once("error",j),x.end();function F(W){W.upgrade=!0}function H(W,J,ce){process.nextTick(function(){B(W,J,ce)})}function B(W,J,ce){if(x.removeAllListeners(),J.removeAllListeners(),W.statusCode!==200){A("tunneling socket could not be established, statusCode=%d",W.statusCode),J.destroy();var oe=new Error("tunneling socket could not be established, statusCode="+W.statusCode);oe.code="ECONNRESET",I.request.emit("error",oe),D.removeSocket(U);return}if(ce.length>0){A("got illegal response body from proxy"),J.destroy();var oe=new Error("got illegal response body from proxy");oe.code="ECONNRESET",I.request.emit("error",oe),D.removeSocket(U);return}return A("tunneling connection has established"),D.sockets[D.sockets.indexOf(U)]=J,L(J)}function j(W){x.removeAllListeners(),A(`tunneling socket could not be established, cause=%s
`,W.message,W.stack);var J=new Error("tunneling socket could not be established, cause="+W.message);J.code="ECONNRESET",I.request.emit("error",J),D.removeSocket(U)}},y.prototype.removeSocket=function(I){var L=this.sockets.indexOf(I);if(L!==-1){this.sockets.splice(L,1);var D=this.requests.shift();D&&this.createSocket(D,function(U){D.request.onSocket(U)})}};function _(O,I){var L=this;y.prototype.createSocket.call(L,O,function(D){var U=O.request.getHeader("host"),M=P({},L.options,{socket:D,servername:U?U.replace(/:.*$/,""):O.host}),x=S.connect(0,M);L.sockets[L.sockets.indexOf(D)]=x,I(x)})}function E(O,I,L){return typeof O=="string"?{host:O,port:I,localAddress:L}:O}function P(O){for(var I=1,L=arguments.length;I<L;++I){var D=arguments[I];if(typeof D=="object")for(var U=Object.keys(D),M=0,x=U.length;M<x;++M){var F=U[M];D[F]!==void 0&&(O[F]=D[F])}}return O}var A;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?A=function(){var O=Array.prototype.slice.call(arguments);typeof O[0]=="string"?O[0]="TUNNEL: "+O[0]:O.unshift("TUNNEL:"),console.error.apply(console,O)}:A=function(){},k=A},4398:(o,C,v)=>{"use strict";var k;k={value:!0},process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var R=v(5747),S=v(2087),g=v(5622),c=v(7549),u=v(9574),a=function(){function m(f,d,p,w){var y=this;this.extensionId=f,this.extensionVersion=d,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!w;var _=process.env.VSCODE_LOGS||"";_&&f&&process.env.VSCODE_LOG_LEVEL==="trace"&&(_=g.join(_,f+".txt"),this.logStream=R.createWriteStream(_,{flags:"a",encoding:"utf8",autoClose:!0})),this.updateUserOptIn(p),this.configListener=c.workspace.onDidChangeConfiguration(function(){return y.updateUserOptIn(p)})}return m.prototype.updateUserOptIn=function(f){var d=c.workspace.getConfiguration(m.TELEMETRY_CONFIG_ID);this.userOptIn!==d.get(m.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=d.get(m.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(f):this.dispose())},m.prototype.createAppInsightsClient=function(f){u.defaultClient?(this.appInsightsClient=new u.TelemetryClient(f),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(u.setup(f).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=u.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),c&&c.env&&(this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId]=c.env.machineId,this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId]=c.env.sessionId),f&&f.indexOf("AIF-")===0&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.firstParty=!0)},m.prototype.getCommonProperties=function(){var f=Object.create(null);if(f["common.os"]=S.platform(),f["common.platformversion"]=(S.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),f["common.extname"]=this.extensionId,f["common.extversion"]=this.extensionVersion,c&&c.env){switch(f["common.vscodemachineid"]=c.env.machineId,f["common.vscodesessionid"]=c.env.sessionId,f["common.vscodeversion"]=c.version,c.env.uiKind){case c.UIKind.Web:f["common.uikind"]="web";break;case c.UIKind.Desktop:f["common.uikind"]="desktop";break;default:f["common.uikind"]="unknown"}f["common.remotename"]=this.cleanRemoteName(c.env.remoteName)}return f},m.prototype.cleanRemoteName=function(f){if(!f)return"none";var d="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(function(p){f.indexOf(p+"+")===0&&(d=p)}),d},m.prototype.shouldSendErrorTelemetry=function(){return this.firstParty?this.cleanRemoteName(c.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===c.ExtensionKind.Workspace||c.env.uiKind===c.UIKind.Web):!0},Object.defineProperty(m.prototype,"extension",{get:function(){return this._extension===void 0&&(this._extension=c.extensions.getExtension(this.extensionId)),this._extension},enumerable:!0,configurable:!0}),m.prototype.cloneAndChange=function(f,d){if(f===null||typeof f!="object"||typeof d!="function")return f;var p={};for(var w in f)p[w]=d(w,f[w]);return p},m.prototype.anonymizeFilePaths=function(f,d){if(f==null)return"";var p=[new RegExp(c.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")];this.extension&&p.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));var w=f;if(d){for(var y=[],_=0,E=p;_<E.length;_++)for(var P=E[_];;){var A=P.exec(f);if(!A)break;y.push([A.index,P.lastIndex])}var O=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,I=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g,L=0;w="";for(var D=function(){var F=I.exec(f);if(!F)return"break";!O.test(F[0])&&y.every(function(H){var B=H[0],j=H[1];return F.index<B||F.index>=j})&&(w+=f.substring(L,F.index)+"<REDACTED: user-file-path>",L=I.lastIndex)};;){var U=D();if(U==="break")break}L<f.length&&(w+=f.substr(L))}for(var M=0,x=p;M<x.length;M++){var P=x[M];w=w.replace(P,"")}return w},m.prototype.sendTelemetryEvent=function(f,d,p){var w=this;if(this.userOptIn&&f&&this.appInsightsClient){var y=this.cloneAndChange(d,function(_,E){return w.anonymizeFilePaths(E,w.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+f,properties:y,measurements:p}),this.logStream&&this.logStream.write("telemetry/"+f+" "+JSON.stringify({properties:d,measurements:p})+`
`)}},m.prototype.sendTelemetryErrorEvent=function(f,d,p,w){var y=this;if(this.userOptIn&&f&&this.appInsightsClient){var _=this.cloneAndChange(d,function(E,P){return y.shouldSendErrorTelemetry()?y.anonymizeFilePaths(P,y.firstParty):w===void 0||w.indexOf(E)!==-1?"REDACTED":y.anonymizeFilePaths(P,y.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+f,properties:_,measurements:p}),this.logStream&&this.logStream.write("telemetry/"+f+" "+JSON.stringify({properties:d,measurements:p})+`
`)}},m.prototype.sendTelemetryException=function(f,d,p){var w=this;if(this.shouldSendErrorTelemetry()&&this.userOptIn&&f&&this.appInsightsClient){var y=this.cloneAndChange(d,function(_,E){return w.anonymizeFilePaths(E,w.firstParty)});this.appInsightsClient.trackException({exception:f,properties:y,measurements:p}),this.logStream&&this.logStream.write("telemetry/"+f.name+" "+f.message+" "+JSON.stringify({properties:d,measurements:p})+`
`)}},m.prototype.dispose=function(){var f=this;this.configListener.dispose();var d=new Promise(function(w){if(!f.logStream)return w(void 0);f.logStream.on("finish",w),f.logStream.end()}),p=new Promise(function(w){f.appInsightsClient?f.appInsightsClient.flush({callback:function(){f.appInsightsClient=void 0,w(void 0)}}):w(void 0)});return Promise.all([p,d])},m.TELEMETRY_CONFIG_ID="telemetry",m.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",m}();C.Z=a},9035:(o,C,v)=>{"use strict";var k;k={value:!0};var R=v(5654);C.X7=R.getExperimentationService,k=R.getExperimentationServiceAsync;var S=v(2560);C.aU=S.TargetPopulation},5708:(o,C)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});class v{constructor(R){this.mementoGlobalStorage=R}async getValue(R,S){return await this.mementoGlobalStorage.get(R)||S}setValue(R,S){this.mementoGlobalStorage.update(R,S)}}C.MementoKeyValueStorage=v},2560:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(7549);class R{constructor(u,a,m){this.extensionName=u,this.extensionVersion=a,this.targetPopulation=m}static trimVersionSuffix(u){const a=/\-[a-zA-Z0-9]+$/;return u.split(a)[0]}getFilterValue(u){switch(u){case S.ApplicationVersion:return R.trimVersionSuffix(k.version);case S.Build:return k.env.appName;case S.ClientId:return k.env.machineId;case S.ExtensionName:return this.extensionName;case S.ExtensionVersion:return R.trimVersionSuffix(this.extensionVersion);case S.Language:return k.env.language;case S.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let u=new Map,a=Object.values(S);for(let m of a)u.set(m,this.getFilterValue(m));return u}}C.VSCodeFilterProvider=R;var S;(function(c){c.Market="X-MSEdge-Market",c.CorpNet="X-FD-Corpnet",c.ApplicationVersion="X-VSCode-AppVersion",c.Build="X-VSCode-Build",c.ClientId="X-MSEdge-ClientId",c.ExtensionName="X-VSCode-ExtensionName",c.ExtensionVersion="X-VSCode-ExtensionVersion",c.Language="X-VSCode-Language",c.TargetPopulation="X-VSCode-TargetPopulation"})(S=C.Filters||(C.Filters={}));var g;(function(c){c.Team="team",c.Internal="internal",c.Insiders="insider",c.Public="public"})(g=C.TargetPopulation||(C.TargetPopulation={}))},5654:(o,C,v)=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});const k=v(2560),R=v(4802),S=v(5708),g="https://default.exp-tas.com/vscode/ab",c="query-expfeature",u="VSCode.ABExp.Features",a="abexp.assignmentcontext",m="VSCode.ABExp.FeatureData",f=1e3*60*30;function d(w,y,_,E,P,...A){if(!P)throw new Error("Memento storage was not provided.");const I=[new k.VSCodeFilterProvider(w,y,_),...A],L=new S.MementoKeyValueStorage(P);return new R.ExperimentationService({filterProviders:I,telemetry:E,storageKey:m,keyValueStorage:L,featuresTelemetryPropertyName:u,assignmentContextTelemetryPropertyName:a,telemetryEventName:c,endpoint:g,refetchInterval:f})}C.getExperimentationService=d;async function p(w,y,_,E,P,...A){const O=d(w,y,_,E,P,...A);return await O.initializePromise,O}C.getExperimentationServiceAsync=p},2479:o=>{o.exports=C;function C(v,k){if(v&&k)return C(v)(k);if(typeof v!="function")throw new TypeError("need wrapper function");return Object.keys(v).forEach(function(S){R[S]=v[S]}),R;function R(){for(var S=new Array(arguments.length),g=0;g<S.length;g++)S[g]=arguments[g];var c=v.apply(this,S),u=S[S.length-1];return typeof c=="function"&&c!==u&&Object.keys(u).forEach(function(a){c[a]=u[a]}),c}}},9602:o=>{"use strict";o.exports=function(C){C.prototype[Symbol.iterator]=function*(){for(let v=this.head;v;v=v.next)yield v.value}}},4411:(o,C,v)=>{"use strict";o.exports=k,k.Node=c,k.create=k;function k(u){var a=this;if(a instanceof k||(a=new k),a.tail=null,a.head=null,a.length=0,u&&typeof u.forEach=="function")u.forEach(function(d){a.push(d)});else if(arguments.length>0)for(var m=0,f=arguments.length;m<f;m++)a.push(arguments[m]);return a}k.prototype.removeNode=function(u){if(u.list!==this)throw new Error("removing node which does not belong to this list");var a=u.next,m=u.prev;return a&&(a.prev=m),m&&(m.next=a),u===this.head&&(this.head=a),u===this.tail&&(this.tail=m),u.list.length--,u.next=null,u.prev=null,u.list=null,a},k.prototype.unshiftNode=function(u){if(u!==this.head){u.list&&u.list.removeNode(u);var a=this.head;u.list=this,u.next=a,a&&(a.prev=u),this.head=u,this.tail||(this.tail=u),this.length++}},k.prototype.pushNode=function(u){if(u!==this.tail){u.list&&u.list.removeNode(u);var a=this.tail;u.list=this,u.prev=a,a&&(a.next=u),this.tail=u,this.head||(this.head=u),this.length++}},k.prototype.push=function(){for(var u=0,a=arguments.length;u<a;u++)S(this,arguments[u]);return this.length},k.prototype.unshift=function(){for(var u=0,a=arguments.length;u<a;u++)g(this,arguments[u]);return this.length},k.prototype.pop=function(){if(!!this.tail){var u=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,u}},k.prototype.shift=function(){if(!!this.head){var u=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,u}},k.prototype.forEach=function(u,a){a=a||this;for(var m=this.head,f=0;m!==null;f++)u.call(a,m.value,f,this),m=m.next},k.prototype.forEachReverse=function(u,a){a=a||this;for(var m=this.tail,f=this.length-1;m!==null;f--)u.call(a,m.value,f,this),m=m.prev},k.prototype.get=function(u){for(var a=0,m=this.head;m!==null&&a<u;a++)m=m.next;if(a===u&&m!==null)return m.value},k.prototype.getReverse=function(u){for(var a=0,m=this.tail;m!==null&&a<u;a++)m=m.prev;if(a===u&&m!==null)return m.value},k.prototype.map=function(u,a){a=a||this;for(var m=new k,f=this.head;f!==null;)m.push(u.call(a,f.value,this)),f=f.next;return m},k.prototype.mapReverse=function(u,a){a=a||this;for(var m=new k,f=this.tail;f!==null;)m.push(u.call(a,f.value,this)),f=f.prev;return m},k.prototype.reduce=function(u,a){var m,f=this.head;if(arguments.length>1)m=a;else if(this.head)f=this.head.next,m=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=0;f!==null;d++)m=u(m,f.value,d),f=f.next;return m},k.prototype.reduceReverse=function(u,a){var m,f=this.tail;if(arguments.length>1)m=a;else if(this.tail)f=this.tail.prev,m=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;f!==null;d--)m=u(m,f.value,d),f=f.prev;return m},k.prototype.toArray=function(){for(var u=new Array(this.length),a=0,m=this.head;m!==null;a++)u[a]=m.value,m=m.next;return u},k.prototype.toArrayReverse=function(){for(var u=new Array(this.length),a=0,m=this.tail;m!==null;a++)u[a]=m.value,m=m.prev;return u},k.prototype.slice=function(u,a){a=a||this.length,a<0&&(a+=this.length),u=u||0,u<0&&(u+=this.length);var m=new k;if(a<u||a<0)return m;u<0&&(u=0),a>this.length&&(a=this.length);for(var f=0,d=this.head;d!==null&&f<u;f++)d=d.next;for(;d!==null&&f<a;f++,d=d.next)m.push(d.value);return m},k.prototype.sliceReverse=function(u,a){a=a||this.length,a<0&&(a+=this.length),u=u||0,u<0&&(u+=this.length);var m=new k;if(a<u||a<0)return m;u<0&&(u=0),a>this.length&&(a=this.length);for(var f=this.length,d=this.tail;d!==null&&f>a;f--)d=d.prev;for(;d!==null&&f>u;f--,d=d.prev)m.push(d.value);return m},k.prototype.splice=function(u,a,...m){u>this.length&&(u=this.length-1),u<0&&(u=this.length+u);for(var f=0,d=this.head;d!==null&&f<u;f++)d=d.next;for(var p=[],f=0;d&&f<a;f++)p.push(d.value),d=this.removeNode(d);d===null&&(d=this.tail),d!==this.head&&d!==this.tail&&(d=d.prev);for(var f=0;f<m.length;f++)d=R(this,d,m[f]);return p},k.prototype.reverse=function(){for(var u=this.head,a=this.tail,m=u;m!==null;m=m.prev){var f=m.prev;m.prev=m.next,m.next=f}return this.head=a,this.tail=u,this};function R(u,a,m){var f=a===u.head?new c(m,null,a,u):new c(m,a,a.next,u);return f.next===null&&(u.tail=f),f.prev===null&&(u.head=f),u.length++,f}function S(u,a){u.tail=new c(a,u.tail,null,u),u.head||(u.head=u.tail),u.length++}function g(u,a){u.head=new c(a,null,u.head,u),u.tail||(u.tail=u.head),u.length++}function c(u,a,m,f){if(!(this instanceof c))return new c(u,a,m,f);this.list=f,this.value=u,a?(a.next=this,this.prev=a):this.prev=null,m?(m.prev=this,this.next=m):this.next=null}try{v(9602)(k)}catch(u){}},9329:(o,C,v)=>{o.exports=v(516).Observable},516:(o,C)=>{"use strict";var v;v={value:!0},C.Observable=void 0;function k(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function R(M,x){for(var F=0;F<x.length;F++){var H=x[F];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,H.key,H)}}function S(M,x,F){return x&&R(M.prototype,x),F&&R(M,F),M}var g=function(){return typeof Symbol=="function"},c=function(M){return g()&&Boolean(Symbol[M])},u=function(M){return c(M)?Symbol[M]:"@@"+M};g()&&!c("observable")&&(Symbol.observable=Symbol("observable"));var a=u("iterator"),m=u("observable"),f=u("species");function d(M,x){var F=M[x];if(F!=null){if(typeof F!="function")throw new TypeError(F+" is not a function");return F}}function p(M){var x=M.constructor;return x!==void 0&&(x=x[f],x===null&&(x=void 0)),x!==void 0?x:U}function w(M){return M instanceof U}function y(M){y.log?y.log(M):setTimeout(function(){throw M})}function _(M){Promise.resolve().then(function(){try{M()}catch(x){y(x)}})}function E(M){var x=M._cleanup;if(x!==void 0&&(M._cleanup=void 0,!!x))try{if(typeof x=="function")x();else{var F=d(x,"unsubscribe");F&&F.call(x)}}catch(H){y(H)}}function P(M){M._observer=void 0,M._queue=void 0,M._state="closed"}function A(M){var x=M._queue;if(!!x){M._queue=void 0,M._state="ready";for(var F=0;F<x.length&&(O(M,x[F].type,x[F].value),M._state!=="closed");++F);}}function O(M,x,F){M._state="running";var H=M._observer;try{var B=d(H,x);switch(x){case"next":B&&B.call(H,F);break;case"error":if(P(M),B)B.call(H,F);else throw F;break;case"complete":P(M),B&&B.call(H);break}}catch(j){y(j)}M._state==="closed"?E(M):M._state==="running"&&(M._state="ready")}function I(M,x,F){if(M._state!=="closed"){if(M._state==="buffering"){M._queue.push({type:x,value:F});return}if(M._state!=="ready"){M._state="buffering",M._queue=[{type:x,value:F}],_(function(){return A(M)});return}O(M,x,F)}}var L=function(){function M(x,F){k(this,M),this._cleanup=void 0,this._observer=x,this._queue=void 0,this._state="initializing";var H=new D(this);try{this._cleanup=F.call(void 0,H)}catch(B){H.error(B)}this._state==="initializing"&&(this._state="ready")}return S(M,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(P(this),E(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),M}(),D=function(){function M(x){k(this,M),this._subscription=x}return S(M,[{key:"next",value:function(F){I(this._subscription,"next",F)}},{key:"error",value:function(F){I(this._subscription,"error",F)}},{key:"complete",value:function(){I(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),M}(),U=function(){function M(x){if(k(this,M),!(this instanceof M))throw new TypeError("Observable cannot be called as a function");if(typeof x!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=x}return S(M,[{key:"subscribe",value:function(F){return(typeof F!="object"||F===null)&&(F={next:F,error:arguments[1],complete:arguments[2]}),new L(F,this._subscriber)}},{key:"forEach",value:function(F){var H=this;return new Promise(function(B,j){if(typeof F!="function"){j(new TypeError(F+" is not a function"));return}function W(){J.unsubscribe(),B()}var J=H.subscribe({next:function(ce){try{F(ce,W)}catch(oe){j(oe),J.unsubscribe()}},error:j,complete:B})})}},{key:"map",value:function(F){var H=this;if(typeof F!="function")throw new TypeError(F+" is not a function");var B=p(this);return new B(function(j){return H.subscribe({next:function(W){try{W=F(W)}catch(J){return j.error(J)}j.next(W)},error:function(W){j.error(W)},complete:function(){j.complete()}})})}},{key:"filter",value:function(F){var H=this;if(typeof F!="function")throw new TypeError(F+" is not a function");var B=p(this);return new B(function(j){return H.subscribe({next:function(W){try{if(!F(W))return}catch(J){return j.error(J)}j.next(W)},error:function(W){j.error(W)},complete:function(){j.complete()}})})}},{key:"reduce",value:function(F){var H=this;if(typeof F!="function")throw new TypeError(F+" is not a function");var B=p(this),j=arguments.length>1,W=!1,J=arguments[1],ce=J;return new B(function(oe){return H.subscribe({next:function(we){var Z=!W;if(W=!0,!Z||j)try{ce=F(ce,we)}catch(ne){return oe.error(ne)}else ce=we},error:function(we){oe.error(we)},complete:function(){if(!W&&!j)return oe.error(new TypeError("Cannot reduce an empty sequence"));oe.next(ce),oe.complete()}})})}},{key:"concat",value:function(){for(var F=this,H=arguments.length,B=new Array(H),j=0;j<H;j++)B[j]=arguments[j];var W=p(this);return new W(function(J){var ce,oe=0;function we(Z){ce=Z.subscribe({next:function(ne){J.next(ne)},error:function(ne){J.error(ne)},complete:function(){oe===B.length?(ce=void 0,J.complete()):we(W.from(B[oe++]))}})}return we(F),function(){ce&&(ce.unsubscribe(),ce=void 0)}})}},{key:"flatMap",value:function(F){var H=this;if(typeof F!="function")throw new TypeError(F+" is not a function");var B=p(this);return new B(function(j){var W=[],J=H.subscribe({next:function(oe){if(F)try{oe=F(oe)}catch(Z){return j.error(Z)}var we=B.from(oe).subscribe({next:function(Z){j.next(Z)},error:function(Z){j.error(Z)},complete:function(){var Z=W.indexOf(we);Z>=0&&W.splice(Z,1),ce()}});W.push(we)},error:function(oe){j.error(oe)},complete:function(){ce()}});function ce(){J.closed&&W.length===0&&j.complete()}return function(){W.forEach(function(oe){return oe.unsubscribe()}),J.unsubscribe()}})}},{key:m,value:function(){return this}}],[{key:"from",value:function(F){var H=typeof this=="function"?this:M;if(F==null)throw new TypeError(F+" is not an object");var B=d(F,m);if(B){var j=B.call(F);if(Object(j)!==j)throw new TypeError(j+" is not an object");return w(j)&&j.constructor===H?j:new H(function(W){return j.subscribe(W)})}if(c("iterator")&&(B=d(F,a),B))return new H(function(W){_(function(){if(!W.closed){var J=!0,ce=!1,oe=void 0;try{for(var we=B.call(F)[Symbol.iterator](),Z;!(J=(Z=we.next()).done);J=!0){var ne=Z.value;if(W.next(ne),W.closed)return}}catch(re){ce=!0,oe=re}finally{try{!J&&we.return!=null&&we.return()}finally{if(ce)throw oe}}W.complete()}})});if(Array.isArray(F))return new H(function(W){_(function(){if(!W.closed){for(var J=0;J<F.length;++J)if(W.next(F[J]),W.closed)return;W.complete()}})});throw new TypeError(F+" is not observable")}},{key:"of",value:function(){for(var F=arguments.length,H=new Array(F),B=0;B<F;B++)H[B]=arguments[B];var j=typeof this=="function"?this:M;return new j(function(W){_(function(){if(!W.closed){for(var J=0;J<H.length;++J)if(W.next(H[J]),W.closed)return;W.complete()}})})}},{key:f,get:function(){return this}}]),M}();C.Observable=U,g()&&Object.defineProperty(U,Symbol("extensions"),{value:{symbol:m,hostReportError:y},configurable:!0})},8921:o=>{"use strict";o.exports=require("@opentelemetry/tracing")},6591:o=>{"use strict";o.exports=require("applicationinsights-native-metrics")},2357:o=>{"use strict";o.exports=require("assert")},7303:o=>{"use strict";o.exports=require("async_hooks")},3129:o=>{"use strict";o.exports=require("child_process")},7082:o=>{"use strict";o.exports=require("console")},7619:o=>{"use strict";o.exports=require("constants")},6417:o=>{"use strict";o.exports=require("crypto")},881:o=>{"use strict";o.exports=require("dns")},8614:o=>{"use strict";o.exports=require("events")},5747:o=>{"use strict";o.exports=require("fs")},8605:o=>{"use strict";o.exports=require("http")},7211:o=>{"use strict";o.exports=require("https")},2282:o=>{"use strict";o.exports=require("module")},1631:o=>{"use strict";o.exports=require("net")},2087:o=>{"use strict";o.exports=require("os")},5622:o=>{"use strict";o.exports=require("path")},2413:o=>{"use strict";o.exports=require("stream")},8213:o=>{"use strict";o.exports=require("timers")},4016:o=>{"use strict";o.exports=require("tls")},3867:o=>{"use strict";o.exports=require("tty")},8835:o=>{"use strict";o.exports=require("url")},1669:o=>{"use strict";o.exports=require("util")},7549:o=>{"use strict";o.exports=require("vscode")},8761:o=>{"use strict";o.exports=require("zlib")}},$a={};function be(o){var C=$a[o];if(C!==void 0)return C.exports;var v=$a[o]={id:o,loaded:!1,exports:{}};return rc[o].call(v.exports,v,v.exports,be),v.loaded=!0,v.exports}(()=>{be.n=o=>{var C=o&&o.__esModule?()=>o.default:()=>o;return be.d(C,{a:C}),C}})(),(()=>{be.d=(o,C)=>{for(var v in C)be.o(C,v)&&!be.o(o,v)&&Object.defineProperty(o,v,{enumerable:!0,get:C[v]})}})(),(()=>{be.hmd=o=>(o=Object.create(o),o.children||(o.children=[]),Object.defineProperty(o,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+o.id)}}),o)})(),(()=>{be.o=(o,C)=>Object.prototype.hasOwnProperty.call(o,C)})(),(()=>{be.r=o=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}})();var es={};(()=>{"use strict";be.r(es),be.d(es,{activate:()=>Ig,deactivate:()=>Ag});var o=be(7549),C=be(4398),v=be(5622),k=be(7484),R=be.n(k),S=be(4110),g=be.n(S),c=be(660),u=be.n(c),a=Object.defineProperty,m=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);R().extend(g(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),R().extend(u()),R().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function f(t,e){const r=Object.create(null);return t.filter(n=>{const i=e(n);return r[i]?!1:(r[i]=!0,!0)})}function d(t){return t.forEach(e=>e.dispose()),[]}function p(t){return{dispose:t}}function w(t){return p(()=>d(t))}function y(...t){return(e,r=null,n)=>{const i=w(t.map(s=>s(l=>e.call(r,l))));return n&&n.push(i),i}}function _(t,e){return(r,n=null,i)=>t(s=>e(s)&&r.call(n,s),null,i)}function E(t){return(e,r=null,n)=>{const i=t(s=>(i.dispose(),e.call(r,s)),null,n);return i}}function P(t){return/^[a-zA-Z]:\\/.test(t)}function A(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),P(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function O(t,e){return t.reduce((r,n)=>{const i=e(n);return r[i]=[...r[i]||[],n],r},Object.create(null))}function I(t){return!!t.errors}function L(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const r of t.errors)if(!r.field||!r.value||!r.code){e=!1;break}}else e=!1;return e}function D(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:"Error";let e=t.message,r;if(t.message==="Validation Failed"&&L(t))r=t.errors.map(n=>`Value "${n.value}" cannot be set for field ${n.field} (code: ${n.code})`).join(", ");else if(I(t)&&t.errors)return t.errors.map(n=>typeof n=="string"?n:n.message).join(", ");return r&&(e=`${e}: ${r}`),e}const U=(t,e)=>e(t);async function M(t,e=U){let r;return new Promise((n,i)=>r=t(s=>{try{Promise.resolve(e(s,n,i)).catch(i)}catch(l){i(l)}})).then(n=>(r.dispose(),n),n=>{throw r.dispose(),n})}function x(t){const e=dayjs(t),r=Date.now();return e.diff(r,"month"),e.diff(r,"month")<1?e.fromNow():e.diff(r,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var F;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(F||(F={}));function H(t,e){return t<e?-1:t>e?1:0}function B(t,e,r=0,n=t.length,i=0,s=e.length){for(;r<n&&i<s;r++,i++){const b=t.charCodeAt(r),T=e.charCodeAt(i);if(b<T)return-1;if(b>T)return 1}const l=n-r,h=s-i;return l<h?-1:l>h?1:0}function j(t,e){return W(t,e,0,t.length,0,e.length)}function W(t,e,r=0,n=t.length,i=0,s=e.length){for(;r<n&&i<s;r++,i++){let b=t.charCodeAt(r),T=e.charCodeAt(i);if(b===T)continue;const N=b-T;if(!(N===32&&ce(T))&&!(N===-32&&ce(b)))return J(b)&&J(T)?N:B(t.toLowerCase(),e.toLowerCase(),r,n,i,s)}const l=n-r,h=s-i;return l<h?-1:l>h?1:0}function J(t){return t>=97&&t<=122}function ce(t){return t>=65&&t<=90}class oe{constructor(){m(this,"_value",""),m(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return r-n}value(){return this._value[this._pos]}}class we{constructor(e=!0){this._caseSensitive=e,m(this,"_value"),m(this,"_from"),m(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?B(e,this._value,0,e.length,this._from,this._to):W(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Z{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r,m(this,"_value"),m(this,"_from"),m(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?B(e,this._value,0,e.length,this._from,this._to):W(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var ne;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(ne||(ne={}));class re{constructor(e){this._ignorePathCasing=e,m(this,"_pathIterator"),m(this,"_value"),m(this,"_states",[]),m(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Z(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return j(e,this._value.scheme);if(this._states[this._stateIdx]===2)return j(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return H(e,this._value.query);if(this._states[this._stateIdx]===5)return H(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class me{constructor(){m(this,"segment"),m(this,"value"),m(this,"key"),m(this,"left"),m(this,"mid"),m(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class fe{constructor(e){m(this,"_iter"),m(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new fe(new re(e))}static forPaths(){return new fe(new Z)}static forStrings(){return new fe(new oe)}static forConfigKeys(){return new fe(new we)}clear(){this._root=void 0}set(e,r){const n=this._iter.reset(e);let i;for(this._root||(this._root=new me,this._root.segment=n.value()),i=this._root;;){const l=n.cmp(i.segment);if(l>0)i.left||(i.left=new me,i.left.segment=n.value()),i=i.left;else if(l<0)i.right||(i.right=new me,i.right.segment=n.value()),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new me,i.mid.segment=n.value()),i=i.mid;else break}const s=i.value;return i.value=r,i.key=e,s}get(e){var r;return(r=this._getNode(e))==null?void 0:r.value}_getNode(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else break}return n}has(e){const r=this._getNode(e);return!((r==null?void 0:r.value)===void 0&&(r==null?void 0:r.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const n=this._iter.reset(e),i=[];let s=this._root;for(;s;){const l=n.cmp(s.segment);if(l>0)i.push([1,s]),s=s.left;else if(l<0)i.push([-1,s]),s=s.right;else if(n.hasNext())n.next(),i.push([0,s]),s=s.mid;else{for(r?(s.left=void 0,s.mid=void 0,s.right=void 0):s.value=void 0;i.length>0&&s.isEmpty();){let[h,b]=i.pop();switch(h){case 1:b.left=void 0;break;case 0:b.mid=void 0;break;case-1:b.right=void 0;break}s=b}break}}}findSubstr(e){const r=this._iter.reset(e);let n=this._root,i;for(;n;){const s=r.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(r.hasNext())r.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[r,n]of this)e(n,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var Se=Object.defineProperty,de=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),ge;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(ge||(ge={}));var _e;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(_e||(_e={}));const xe=class{constructor(){de(this,"_providers",new Map),de(this,"_onDidOpenRepository",new o.EventEmitter),de(this,"onDidOpenRepository",this._onDidOpenRepository.event),de(this,"_onDidCloseRepository",new o.EventEmitter),de(this,"onDidCloseRepository",this._onDidCloseRepository.event),de(this,"_onDidChangeState",new o.EventEmitter),de(this,"onDidChangeState",this._onDidChangeState.event),de(this,"_onDidPublish",new o.EventEmitter),de(this,"onDidPublish",this._onDidPublish.event),de(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}registerGitProvider(t){const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(t.onDidOpenRepository(r=>this._onDidOpenRepository.fire(r))),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(r=>this._onDidChangeState.fire(r))),t.onDidPublish&&this._disposables.push(t.onDidPublish(r=>this._onDidPublish.fire(r))),t.repositories.forEach(r=>{this._onDidOpenRepository.fire(r)}),{dispose:()=>{const r=t==null?void 0:t.repositories;r&&r.length>0&&r.forEach(n=>this._onDidCloseRepository.fire(n)),this._providers.delete(e)}}}getGitProvider(t){const e=fe.forUris();return this._providers.forEach(r=>{const n=r.repositories;if(n&&n.length>0)for(const i of n)e.set(i.rootUri,r)}),e.findSubstr(t)}_nextHandle(){return xe._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let it=xe;de(it,"_handlePool",0);var je=Object.defineProperty,Xe=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Ne;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(Ne||(Ne={}));const He="githubPullRequests",Re="logLevel";class Dt{constructor(){Xe(this,"_outputChannel"),Xe(this,"_logLevel"),Xe(this,"_disposable"),this._outputChannel=o.window.createOutputChannel("GitHub Pull Request"),this._disposable=o.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,r){switch(this._logLevel){case 2:return;case 1:const i=`${new Date().getTime()/1e3}s`,s=r?`${r}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${i}] ${s}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(r?`${r}> ${e}`:`${e}`));return}}debug(e,r){this._logLevel===1&&this.appendLine(e,r)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(o.workspace.getConfiguration(He).get(Re)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const K=new Dt,tr=new Map;function br(t,e){tr.set(t,e)}function Je(t){tr.delete(t)}function wr(t){for(const e of tr.values())if(e.hasCommentThread(t))return e;K.appendLine(`Unable to find handler for comment thread ${t.threadId}`)}function kt(t){return JSON.parse(t.query)}function qe(t){try{return JSON.parse(t.query)}catch(e){}}function ts(t){try{return JSON.parse(t.query)}catch(e){}}const At=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],si=o.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function Tn(t,e){try{const{commit:r,baseCommit:n,headCommit:i,isBase:s}=JSON.parse(t.query),l=t.scheme==="review"?r:s?n:i,{size:h,object:b}=await e.getObjectDetails(l,t.fsPath),{mimetype:T}=await e.detectObjectType(b);if(T==="text/plain")return;if(At.indexOf(T)>-1){const N=await e.buffer(l,t.fsPath);return o.Uri.parse(`data:${T};label:${v.basename(t.fsPath)};description:${l};size:${h};base64,${N.toString("base64")}`)}}catch(r){return}}function Vt(t,e,r,n,i,s,l){const h={path:e||t.path,ref:r,commit:n,base:s.base,isOutdated:i,rootPath:l.path};let b=t.path;return s.replaceFileExtension&&(b=`${b}.git`),t.with({scheme:"review",path:b,query:JSON.stringify(h)})}function ai(t,e,r,n){const i={prNumber:e,fileName:r,status:n};return t.with({query:JSON.stringify(i)})}function _r(t){try{return JSON.parse(t.query)}catch(e){}}function Ft(t,e,r,n,i,s,l){const h={baseCommit:r,headCommit:n,isBase:s,fileName:i,prNumber:e.number,status:l,remoteName:e.githubRepository.remote.remoteName},b=t.path;return t.with({scheme:"pr",path:b,query:JSON.stringify(h)})}class Sn extends o.EventEmitter{handleUri(e){this.fire(e)}}const oi=new Sn,xt="GitHub.vscode-pull-request-github",Lr="git",qr="ghpr",gt="initialize",kr="statechange",De="github:focusedReview";var ke;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(ke||(ke={}));class ui{constructor(e,r,n,i,s,l,h,b){this.baseCommit=e,this.status=r,this.fileName=n,this.previousFileName=i,this.patch=s,this.diffHunks=l,this.isPartial=h,this.blobUrl=b}}class tt{constructor(e,r,n,i,s){this.baseCommit=e,this.blobUrl=r,this.status=n,this.fileName=i,this.previousFileName=s}}var rs=Object.defineProperty,ns=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?rs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Ge;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(Ge||(Ge={}));class li{constructor(e,r,n,i,s,l=!0){this.type=e,this.oldLineNumber=r,this.newLineNumber=n,this.positionInHunk=i,this._raw=s,this.endwithLineBreak=l}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function is(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class ss{constructor(e,r,n,i,s){this.oldLineNumber=e,this.oldLength=r,this.newLineNumber=n,this.newLength=i,this.positionInHunk=s,ns(this,"diffLines",[])}}const ci=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function as(t){let e=0,r=0;for(;(r=t.indexOf("\r",r))!==-1;)r++,e++;return e}function*os(t){let e=0;for(;e!==-1&&e<t.length;){const r=e;e=t.indexOf(`
`,e);let i=(e!==-1?e:t.length)-r;e!==-1&&(e>0&&t[e-1]==="\r"&&i--,e++),yield t.substr(r,i)}}function*Ot(t){const e=os(t);let r=e.next(),n,i=-1,s=-1,l=-1;for(;!r.done;){const h=r.value;if(ci.test(h)){n&&(yield n,n=void 0),i===-1&&(i=0);const b=ci.exec(h),T=s=Number(b[1]),N=Number(b[3])||1,q=l=Number(b[5]),$=Number(b[7])||1;n=new ss(T,N,q,$,i),n.diffLines.push(new li(3,-1,-1,i,h))}else if(n){const b=is(h);if(b===3)n.diffLines&&n.diffLines.length&&(n.diffLines[n.diffLines.length-1].endwithLineBreak=!1);else{n.diffLines.push(new li(b,b!==1?s:-1,b!==2?l:-1,i,h));const T=1+as(h);switch(b){case 0:s+=T,l+=T;break;case 2:s+=T;break;case 1:l+=T;break}}}i!==-1&&++i,r=e.next()}n&&(yield n)}function Pn(t){const e=Ot(t);let r=e.next();const n=[],i=[];for(;!r.done;){const s=r.value;n.push(s);for(let l=0;l<s.diffLines.length;l++){const h=s.diffLines[l];if(!(h.type===2||h.type===3))if(h.type===1)i.push(h.text);else{const b=h.text;i.push(b)}}r=e.next()}return n}function us(t,e){const r=t.split(/\r?\n/),n=Ot(e);let i=n.next();const s=[],l=[];let h=0;for(;!i.done;){const b=i.value;s.push(b);const T=b.oldLineNumber;for(let N=h+1;N<T;N++)l.push(r[N-1]);h=T+b.oldLength-1;for(let N=0;N<b.diffLines.length;N++){const q=b.diffLines[N];if(!(q.type===2||q.type===3))if(q.type===1)l.push(q.text);else{const $=q.text;l.push($)}}i=n.next()}if(h<r.length)for(let b=h+1;b<=r.length;b++)l.push(r[b-1]);return l.join(`
`)}function Nn(t){switch(t){case"removed":return ke.DELETE;case"added":return ke.ADD;case"renamed":return ke.RENAME;case"modified":return ke.MODIFY;default:return ke.UNKNOWN}}async function In(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=t[i],l=Nn(s.status);if(!s.patch){n.push(new tt(r,s.blob_url,l,s.filename,s.previous_filename));continue}let h=!1;switch(l){case ke.DELETE:case ke.MODIFY:try{await e.getObjectDetails(r,s.filename),h=!0}catch(N){}break;case ke.RENAME:try{await e.getObjectDetails(r,s.previous_filename),h=!0}catch(N){}break}const b=Pn(s.patch),T=!h&&l!==ke.ADD;n.push(new ui(r,l,s.filename,s.previous_filename,s.patch,b,T,s.blob_url))}return n}var ls=be(5747),cs=be(2087),Dn=be(6200),ds=Object.defineProperty,di=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ds(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const hs=/^(?:([^@:]+)@)?([^:/]+):?(.+)$/,G=/^([a-z-]+):\/\//,z=(t,e=se.current)=>{const r=he(t);return r&&e(r)},X=class{static fromConfig(t){return Te(pe,Pe(t))}};let se=X;di(se,"default",Te(pe,ve())),di(se,"current",X.default);const he=t=>{const e=G.exec(t);if(e){const[l,h]=e;if(h==="ssh")t=t.slice(l.length);else return}const r=hs.exec(t);if(!r)return;const[,n,i,s]=r;return{User:n,Host:i,path:s}};function pe(t){return{...t,Hostname:t.Host}}function ve(t=(0,v.join)((0,cs.homedir)(),".ssh","config")){try{const e=(0,ls.readFileSync)(t).toString();return Pe(e)}catch(e){K.appendLine(`${t}: ${e.message}`)}}function Pe(t){const e=(0,Dn.parse)(t);return r=>e.compute(r.Host)}function Te(...t){const e=t.filter(r=>!!r);return r=>e.reduce((n,i)=>({...n,...i(n)}),r)}var Pt=Object.defineProperty,dt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),vt;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(vt||(vt={}));class Be{constructor(e){if(dt(this,"type",4),dt(this,"host",""),dt(this,"owner",""),dt(this,"repositoryName",""),dt(this,"url"),!this.parseSshProtocol(e))try{this.url=o.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(r){K.appendLine(`Failed to parse '${e}'`),o.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const r=z(e);if(!r)return!1;const{Hostname:n,HostName:i,path:s}=r;return this.host=i||n,this.owner=this.getOwnerName(s)||"",this.repositoryName=this.getRepositoryName(s)||"",this.type=2,!0}getHostName(e){const r=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return r&&r.length>=2?r[1].toLocaleLowerCase()==="www.github.com"?"github.com":r[1]:""}getRepositoryName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.lastIndexOf("/"),i=r.substr(n+1);if(!(i===""||i==="/"))return i.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.split("/");if(n.length>1)return n[n.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return o.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(r){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const r=this.normalizeUri();if(!r)return!1;const n=e.normalizeUri();return n?r.toString().toLocaleLowerCase()===n.toString().toLocaleLowerCase():!1}}var jt=Object.defineProperty,nc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ha{constructor(e,r,n,i){this.ref=e,this.label=r,this.sha=n,nc(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new Be(i)}}var Ze;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(Ze||(Ze={}));function ms(t){return t.event===4}function ic(t){return t.event===0}function sc(t){return t.event===3}function Fg(t){return t.event===9}function xg(t){return t.event===7}function Og(t){return t.event===8}function ac(t){return!!t.conclusion}var st;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(st||(st={}));var rr;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(rr||(rr={}));var We;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(We||(We={}));var Er;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(Er||(Er={}));var oc=Object.defineProperty,uc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?oc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ga=class{static initialize(t){Ga.icons={reactions:{THUMBS_UP:t.asAbsolutePath(v.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath(v.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath(v.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath(v.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath(v.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath(v.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath(v.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath(v.join("resources","icons","reactions","rocket.png"))}}}};let zt=Ga;uc(zt,"icons");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ps=function(t,e){return ps=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ps(t,e)};function nr(t,e){ps(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ie=function(){return ie=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ie.apply(this,arguments)};function Ba(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Mg(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var h=t.length-1;h>=0;h--)(l=t[h])&&(s=(i<3?l(s):i>3?l(e,r,s):l(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function Lg(t,e){return function(r,n){e(r,n,t)}}function qg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Cr(t,e,r,n){function i(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function h(N){try{T(n.next(N))}catch(q){l(q)}}function b(N){try{T(n.throw(N))}catch(q){l(q)}}function T(N){N.done?s(N.value):i(N.value).then(h,b)}T((n=n.apply(t,e||[])).next())})}function Rr(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(T){return function(N){return b([T,N])}}function b(T){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=T[0]&2?i.return:T[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,T[1])).done)return s;switch(i=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,i=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){r.label=T[1];break}if(T[0]===6&&r.label<s[1]){r.label=s[1],s=T;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(T);break}s[2]&&r.ops.pop(),r.trys.pop();continue}T=e.call(t,r)}catch(N){T=[6,N],i=0}finally{n=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function Ug(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function $g(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Va(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(h){l={error:h}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return s}function Hg(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lc(arguments[e]));return t}function fs(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],l=0,h=s.length;l<h;l++,i++)n[i]=s[l];return n}function hi(t){return this instanceof hi?(this.v=t,this):new hi(t)}function Gg(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l($){n[$]&&(i[$]=function(V){return new Promise(function(Y,Q){s.push([$,V,Y,Q])>1||h($,V)})})}function h($,V){try{b(n[$](V))}catch(Y){q(s[0][3],Y)}}function b($){$.value instanceof hi?Promise.resolve($.value.v).then(T,N):q(s[0][2],$)}function T($){h("next",$)}function N($){h("throw",$)}function q($,V){$(V),s.shift(),s.length&&h(s[0][0],s[0][1])}}function Bg(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(l){return(r=!r)?{value:hi(t[i](l)),done:i==="return"}:s?s(l):l}:s}}function Vg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Va=="function"?Va(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(l){return new Promise(function(h,b){l=t[s](l),i(h,b,l.done,l.value)})}}function i(s,l,h,b){Promise.resolve(b).then(function(T){s({value:T,done:h})},l)}}function jg(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function zg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Qg(t){return t&&t.__esModule?t:{default:t}}function Wg(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Kg(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var ir=be(285),gs="Invariant Violation",ja=Object.setPrototypeOf,cc=ja===void 0?function(t,e){return t.__proto__=e,t}:ja,at=function(t){nr(e,t);function e(r){r===void 0&&(r=gs);var n=t.call(this,typeof r=="number"?gs+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=gs,cc(n,e.prototype),n}return e}(Error);function Ie(t,e){if(!t)throw new at(e)}function za(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=za("warn"),t.error=za("error")})(Ie||(Ie={}));var Qa={env:{}};if(typeof process=="object")Qa=process;else try{Function("stub","process = stub")(Qa)}catch(t){}var Yg=null;const Xg=null;var dc=be(5035),hc=be.n(dc),Wa=Object.prototype,Ka=Wa.toString,mc=Wa.hasOwnProperty,vs=new Map;function Mt(t,e){try{return ys(t,e)}finally{vs.clear()}}function ys(t,e){if(t===e)return!0;var r=Ka.call(t),n=Ka.call(e);if(r!==n)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(Ya(t,e))return!0;var i=Object.keys(t),s=Object.keys(e),l=i.length;if(l!==s.length)return!1;for(var h=0;h<l;++h)if(!mc.call(e,i[h]))return!1;for(var h=0;h<l;++h){var b=i[h];if(!ys(t[b],e[b]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(Ya(t,e))return!0;for(var T=t.entries(),N=r==="[object Map]";;){var q=T.next();if(q.done)break;var $=q.value,V=$[0],Y=$[1];if(!e.has(V)||N&&!ys(Y,e.get(V)))return!1}return!0}}return!1}function Ya(t,e){var r=vs.get(t);if(r){if(r.has(e))return!0}else vs.set(t,r=new Set);return r.add(e),!1}const Jg=null;function Zg(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function ev(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function pc(t){return t.kind==="StringValue"}function fc(t){return t.kind==="BooleanValue"}function gc(t){return t.kind==="IntValue"}function vc(t){return t.kind==="FloatValue"}function yc(t){return t.kind==="Variable"}function bc(t){return t.kind==="ObjectValue"}function wc(t){return t.kind==="ListValue"}function _c(t){return t.kind==="EnumValue"}function kc(t){return t.kind==="NullValue"}function Jr(t,e,r,n){if(gc(r)||vc(r))t[e.value]=Number(r.value);else if(fc(r)||pc(r))t[e.value]=r.value;else if(bc(r)){var i={};r.fields.map(function(l){return Jr(i,l.name,l.value,n)}),t[e.value]=i}else if(yc(r)){var s=(n||{})[r.name.value];t[e.value]=s}else if(wc(r))t[e.value]=r.values.map(function(l){var h={};return Jr(h,e,l,n),h[e.value]});else if(_c(r))t[e.value]=r.value;else if(kc(r))t[e.value]=null;else throw new at(17)}function Ec(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(i){r[i.name.value]={},i.arguments&&i.arguments.forEach(function(s){var l=s.name,h=s.value;return Jr(r[i.name.value],l,h,e)})}));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach(function(i){var s=i.name,l=i.value;return Jr(n,s,l,e)})),Xa(t.name.value,n,r)}var Cc=["connection","include","skip","client","rest","export"];function Xa(t,e,r){if(r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=e,s={};return n.forEach(function(b){s[b]=i[b]}),r.connection.key+"("+JSON.stringify(s)+")"}else return r.connection.key;var l=t;if(e){var h=hc()(e);l+="("+h+")"}return r&&Object.keys(r).forEach(function(b){Cc.indexOf(b)===-1&&(r[b]&&Object.keys(r[b]).length?l+="@"+b+"("+JSON.stringify(r[b])+")":l+="@"+b)}),l}function bs(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(n){var i=n.name,s=n.value;return Jr(r,i,s,e)}),r}return null}function An(t){return t.alias?t.alias.value:t.name.value}function Tr(t){return t.kind==="Field"}function mi(t){return t.kind==="InlineFragment"}function pi(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function fi(t,e){return e===void 0&&(e=!1),ie({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Rc(t){return t!=null&&typeof t=="object"&&t.type==="json"}function Tc(t){throw new InvariantError(18)}function Ja(t,e){switch(e===void 0&&(e=Tc),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(l){return Ja(l,e)});case"ObjectValue":{for(var r={},n=0,i=t.fields;n<i.length;n++){var s=i[n];r[s.name.value]=Ja(s.value,e)}return r}default:return t.value}}function Sc(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach(function(n){r[n.name.value]=bs(n,e)}),r}return null}function ws(t,e){return e===void 0&&(e={}),Dc(t.directives).every(function(r){var n=r.directive,i=r.ifArgument,s=!1;return i.value.kind==="Variable"?(s=e[i.value.name.value],Ie(s!==void 0,13)):s=i.value.value,n.name.value==="skip"?!s:s})}function Pc(t){var e=[];return(0,ir.visit)(t,{Directive:function(r){e.push(r.name.value)}}),e}function gi(t,e){return Pc(e).some(function(r){return t.indexOf(r)>-1})}function Nc(t){return t&&gi(["client"],t)&&gi(["export"],t)}function Ic(t){var e=t.name.value;return e==="skip"||e==="include"}function Dc(t){return t?t.filter(Ic).map(function(e){var r=e.arguments,n=e.name.value;Ie(r&&r.length===1,14);var i=r[0];Ie(i.name&&i.name.value==="if",15);var s=i.value;return Ie(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),16),{directive:e,ifArgument:i}}):[]}function Za(t,e){var r=e,n=[];t.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw new at(11);s.kind==="FragmentDefinition"&&n.push(s)}),typeof r=="undefined"&&(Ie(n.length===1,12),r=n[0].name.value);var i=ie(ie({},t),{definitions:fs([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return i}function _s(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach(function(n){typeof n=="undefined"||n===null||Object.keys(n).forEach(function(i){t[i]=n[i]})}),t}function tv(t){Ur(t);var e=t.definitions.filter(function(r){return r.kind==="OperationDefinition"&&r.operation==="mutation"})[0];return invariant(e,1),e}function Ur(t){Ie(t&&t.kind==="Document",2);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new at(3);return r});return Ie(e.length<=1,4),t}function Zr(t){return Ur(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function rv(t){var e=Zr(t);return invariant(e,5),e}function ks(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function vi(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function Ac(t){var e=Zr(t);return Ie(e&&e.operation==="query",6),e}function Fc(t){Ie(t.kind==="Document",7),Ie(t.definitions.length<=1,8);var e=t.definitions[0];return Ie(e.kind==="FragmentDefinition",9),e}function Es(t){Ur(t);for(var e,r=0,n=t.definitions;r<n.length;r++){var i=n[r];if(i.kind==="OperationDefinition"){var s=i.operation;if(s==="query"||s==="mutation"||s==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw new at(10)}function yi(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function Cs(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(r){var n=r.defaultValue;return n}).map(function(r){var n=r.variable,i=r.defaultValue,s={};return Jr(s,n.name,i),s});return _s.apply(void 0,fs([{}],e))}return{}}function nv(t){var e=new Set;if(t.variableDefinitions)for(var r=0,n=t.variableDefinitions;r<n.length;r++){var i=n[r];e.add(i.variable.name.value)}return e}function eo(t,e,r){var n=0;return t.forEach(function(i,s){e.call(this,i,s,t)&&(t[n++]=i)},r),t.length=n,t}var xc={kind:"Field",name:{kind:"Name",value:"__typename"}};function to(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&to(e[r.name.value],e)})}function bi(t){return to(Zr(t)||Fc(t),yi(vi(t)))?null:t}function Rs(t){return function(r){return t.some(function(n){return n.name&&n.name===r.name.value||n.test&&n.test(r)})}}function ro(t,e){var r=Object.create(null),n=[],i=Object.create(null),s=[],l=bi((0,ir.visit)(e,{Variable:{enter:function(h,b,T){T.kind!=="VariableDefinition"&&(r[h.name.value]=!0)}},Field:{enter:function(h){if(t&&h.directives){var b=t.some(function(T){return T.remove});if(b&&h.directives&&h.directives.some(Rs(t)))return h.arguments&&h.arguments.forEach(function(T){T.value.kind==="Variable"&&n.push({name:T.value.name.value})}),h.selectionSet&&so(h.selectionSet).forEach(function(T){s.push({name:T.name.value})}),null}}},FragmentSpread:{enter:function(h){i[h.name.value]=!0}},Directive:{enter:function(h){if(Rs(t)(h))return null}}}));return l&&eo(n,function(h){return!r[h.name]}).length&&(l=Uc(n,l)),l&&eo(s,function(h){return!i[h.name]}).length&&(l=$c(s,l)),l}function Oc(t){return(0,ir.visit)(Ur(t),{SelectionSet:{enter:function(e,r,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var s=i.some(function(h){return Tr(h)&&(h.name.value==="__typename"||h.name.value.lastIndexOf("__",0)===0)});if(!s){var l=n;if(!(Tr(l)&&l.directives&&l.directives.some(function(h){return h.name.value==="export"})))return ie(ie({},e),{selections:fs(i,[xc])})}}}}}})}var Mc={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function Lc(t){return ro([Mc],Ur(t))}function no(t,e,r){return r===void 0&&(r=!0),e&&e.selections&&e.selections.some(function(n){return io(t,n,r)})}function io(t,e,r){return r===void 0&&(r=!0),Tr(e)?e.directives?e.directives.some(Rs(t))||r&&no(t,e.selectionSet,r):!1:!0}function iv(t,e){Ur(e);var r;return bi(visit(e,{SelectionSet:{enter:function(n,i,s,l){var h=l.join("-");if(!r||h===r||!h.startsWith(r))if(n.selections){var b=n.selections.filter(function(T){return io(t,T)});return no(t,n,!1)&&(r=h),__assign(__assign({},n),{selections:b})}else return null}}}))}function qc(t){return function(r){return t.some(function(n){return r.value&&r.value.kind==="Variable"&&r.value.name&&(n.name===r.value.name.value||n.test&&n.test(r))})}}function Uc(t,e){var r=qc(t);return bi((0,ir.visit)(e,{OperationDefinition:{enter:function(n){return ie(ie({},n),{variableDefinitions:n.variableDefinitions.filter(function(i){return!t.some(function(s){return s.name===i.variable.name.value})})})}},Field:{enter:function(n){var i=t.some(function(l){return l.remove});if(i){var s=0;if(n.arguments.forEach(function(l){r(l)&&(s+=1)}),s===1)return null}}},Argument:{enter:function(n){if(r(n))return null}}}))}function $c(t,e){function r(n){if(t.some(function(i){return i.name===n.name.value}))return null}return bi((0,ir.visit)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function so(t){var e=[];return t.selections.forEach(function(r){(Tr(r)||mi(r))&&r.selectionSet?so(r.selectionSet).forEach(function(n){return e.push(n)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function Hc(t){var e=Es(t),r=e.operation;if(r==="query")return t;var n=(0,ir.visit)(t,{OperationDefinition:{enter:function(i){return ie(ie({},i),{operation:"query"})}}});return n}function Gc(t){Ur(t);var e=ro([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=(0,ir.visit)(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var n=r.selectionSet.selections.every(function(i){return Tr(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var Ts=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),Bc=Object.prototype.toString;function Vc(t){return Ss(t,new Map)}function Ss(t,e){switch(Bc.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(i,s){r[s]=Ss(i,e)}),r}case"[object Object]":{if(e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach(function(i){n[i]=Ss(t[i],e)}),n}default:return t}}function jc(){return typeof process!="undefined"?"production":"development"}function Ps(t){return jc()===t}function ao(){return Ps("production")===!0}function zc(){return Ps("development")===!0}function Ns(){return Ps("test")===!0}function Is(t){try{return t()}catch(e){console.error&&console.error(e)}}function $r(t){return t.errors&&t.errors.length}function oo(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&oo(t[e])}),t}function sv(t){if(zc()||Ns()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return oo(t)}return t}var Qc=Object.prototype.hasOwnProperty;function uo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ds(t)}function Ds(t){var e=t[0]||{},r=t.length;if(r>1){var n=[];e=As(e,n);for(var i=1;i<r;++i)e=co(e,t[i],n)}return e}function lo(t){return t!==null&&typeof t=="object"}function co(t,e,r){return lo(e)&&lo(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=As(t,r)),Object.keys(e).forEach(function(n){var i=e[n];if(Qc.call(t,n)){var s=t[n];i!==s&&(t[n]=co(As(s,r),i,r))}else t[n]=i}),t):e}function As(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=ie({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var ho=Object.create({});function av(t,e){e===void 0&&(e="warn"),!ao()&&!ho[t]&&(Ns()||(ho[t]=!0),e==="error"?console.error(t):console.warn(t))}function ov(t){return JSON.parse(JSON.stringify(t))}var Wc=be(9329),Kc=be.n(Wc),Yc=Kc();const yt=Yc;function Xc(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw new at(2)}return t}var uv=function(t){nr(e,t);function e(r,n){var i=t.call(this,r)||this;return i.link=n,i}return e}(Error);function wi(t){return t.request.length<=1}function lv(t){var e=!1;return new Promise(function(r,n){t.subscribe({next:function(i){e||(e=!0,r(i))},error:n})})}var cv=null;function dv(t){return new Observable(function(e){t.then(function(r){e.next(r),e.complete()}).catch(e.error.bind(e))})}function mo(t){return new yt(function(e){e.error(t)})}function Jc(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?ks(e.query):""),e}function Zc(t,e){var r=ie({},t),n=function(s){typeof s=="function"?r=ie({},r,s(r)):r=ie({},r,s)},i=function(){return ie({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return ed(e)}}),e}function ed(t){var e=t.query,r=t.variables,n=t.operationName;return JSON.stringify([n,e,r])}function po(t,e){return e?e(t):yt.of()}function Fn(t){return typeof t=="function"?new Lt(t):t}function fo(){return new Lt(function(){return yt.of()})}function td(t){return t.length===0?fo():t.map(Fn).reduce(function(e,r){return e.concat(r)})}function go(t,e,r){var n=Fn(e),i=Fn(r||new Lt(po));return wi(n)&&wi(i)?new Lt(function(s){return t(s)?n.request(s)||yt.of():i.request(s)||yt.of()}):new Lt(function(s,l){return t(s)?n.request(s,l)||yt.of():i.request(s,l)||yt.of()})}var rd=function(t,e){var r=Fn(t);if(wi(r))return r;var n=Fn(e);return wi(n)?new Lt(function(i){return r.request(i,function(s){return n.request(s)||yt.of()})||yt.of()}):new Lt(function(i,s){return r.request(i,function(l){return n.request(l,s)||yt.of()})||yt.of()})},Lt=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,r,n){return this.concat(go(e,r,n||new t(po)))},t.prototype.concat=function(e){return rd(this,e)},t.prototype.request=function(e,r){throw new at(1)},t.empty=fo,t.from=td,t.split=go,t.execute=_i,t}();function _i(t,e){return t.request(Zc(e.context,Jc(Xc(e))))||yt.of()}var nd=be(7121),Ve;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(Ve||(Ve={}));function vo(t){return t<7}var xn=function(t){nr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[nd.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(yt);function en(t){return Array.isArray(t)&&t.length>0}function id(t){return t.hasOwnProperty("graphQLErrors")}var sd=function(t){var e="";return en(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var n=r?r.message:"Error message not found.";e+="GraphQL error: "+n+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},Sr=function(t){nr(e,t);function e(r){var n=r.graphQLErrors,i=r.networkError,s=r.errorMessage,l=r.extraInfo,h=t.call(this,s)||this;return h.graphQLErrors=n||[],h.networkError=i||null,s?h.message=s:h.message=sd(h),h.extraInfo=l,h.__proto__=e.prototype,h}return e}(Error),Hr;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(Hr||(Hr={}));var ad=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&en(t.graphQLErrors))},od=function(t){nr(e,t);function e(r){var n=r.queryManager,i=r.options,s=r.shouldSubscribe,l=s===void 0?!0:s,h=t.call(this,function(T){return h.onSubscribe(T)})||this;h.observers=new Set,h.subscriptions=new Set,h.isTornDown=!1,h.options=i,h.variables=i.variables||{},h.queryId=n.generateQueryId(),h.shouldSubscribe=l;var b=Zr(i.query);return h.queryName=b&&b.name&&b.name.value,h.queryManager=n,h}return e.prototype.result=function(){var r=this;return new Promise(function(n,i){var s={next:function(h){n(h),r.observers.delete(s),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){l.unsubscribe()},0)},error:i},l=r.subscribe(s)})},e.prototype.currentResult=function(){var r=this.getCurrentResult();return r.data===void 0&&(r.data={}),r},e.prototype.getCurrentResult=function(){if(this.isTornDown){var r=this.lastResult;return{data:!this.lastError&&r&&r.data||void 0,error:this.lastError,loading:!1,networkStatus:Ve.error}}var n=this.queryManager.getCurrentQueryResult(this),i=n.data,s=n.partial,l=this.queryManager.queryStore.get(this.queryId),h,b=this.options.fetchPolicy,T=b==="network-only"||b==="no-cache";if(l){var N=l.networkStatus;if(ad(l,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:N,error:new Sr({graphQLErrors:l.graphQLErrors,networkError:l.networkError})};l.variables&&(this.options.variables=ie(ie({},this.options.variables),l.variables),this.variables=this.options.variables),h={data:i,loading:vo(N),networkStatus:N},l.graphQLErrors&&this.options.errorPolicy==="all"&&(h.errors=l.graphQLErrors)}else{var q=T||s&&b!=="cache-only";h={data:i,loading:q,networkStatus:q?Ve.loading:Ve.ready}}return s||this.updateLastResult(ie(ie({},h),{stale:!1})),ie(ie({},h),{partial:s})},e.prototype.isDifferentFromLastResult=function(r){var n=this.lastResultSnapshot;return!(n&&r&&n.networkStatus===r.networkStatus&&n.stale===r.stale&&Mt(n.data,r.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var r=this.queryManager.queryStore.get(this.queryId);r&&(r.networkError=null,r.graphQLErrors=[])},e.prototype.refetch=function(r){var n=this.options.fetchPolicy;return n==="cache-only"?Promise.reject(new at(1)):(n!=="no-cache"&&n!=="cache-and-network"&&(n="network-only"),Mt(this.variables,r)||(this.variables=ie(ie({},this.variables),r)),Mt(this.options.variables,this.variables)||(this.options.variables=ie(ie({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,ie(ie({},this.options),{fetchPolicy:n}),Hr.refetch))},e.prototype.fetchMore=function(r){var n=this;Ie(r.updateQuery,2);var i=ie(ie({},r.query?r:ie(ie(ie({},this.options),r),{variables:ie(ie({},this.variables),r.variables)})),{fetchPolicy:"network-only"}),s=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(s,i,Hr.normal,this.queryId).then(function(l){return n.updateQuery(function(h){return r.updateQuery(h,{fetchMoreResult:l.data,variables:i.variables})}),n.queryManager.stopQuery(s),l},function(l){throw n.queryManager.stopQuery(s),l})},e.prototype.subscribeToMore=function(r){var n=this,i=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables}).subscribe({next:function(s){var l=r.updateQuery;l&&n.updateQuery(function(h,b){var T=b.variables;return l(h,{subscriptionData:s,variables:T})})},error:function(s){if(r.onError){r.onError(s);return}}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(r){var n=this.options.fetchPolicy;this.options=ie(ie({},this.options),r),r.pollInterval?this.startPolling(r.pollInterval):r.pollInterval===0&&this.stopPolling();var i=r.fetchPolicy;return this.setVariables(this.options.variables,n!==i&&(n==="cache-only"||n==="standby"||i==="network-only"),r.fetchResults)},e.prototype.setVariables=function(r,n,i){return n===void 0&&(n=!1),i===void 0&&(i=!0),this.isTornDown=!1,r=r||this.variables,!n&&Mt(r,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=r,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(r){var n=this.queryManager,i=n.getQueryWithPreviousResult(this.queryId),s=i.previousResult,l=i.variables,h=i.document,b=Is(function(){return r(s,{variables:l})});b&&(n.dataStore.markUpdateQueryResult(h,l,b),n.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(r){yo(this),this.options.pollInterval=r,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(r){var n=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:Vc(r),n},e.prototype.onSubscribe=function(r){var n=this;try{var i=r._subscription._observer;i&&!i.error&&(i.error=ud)}catch(l){}var s=!this.observers.size;return this.observers.add(r),r.next&&this.lastResult&&r.next(this.lastResult),r.error&&this.lastError&&r.error(this.lastError),s&&this.setUpQuery(),function(){n.observers.delete(r)&&!n.observers.size&&n.tearDownQuery()}},e.prototype.setUpQuery=function(){var r=this,n=this,i=n.queryManager,s=n.queryId;this.shouldSubscribe&&i.addObservableQuery(s,this),this.options.pollInterval&&(yo(this),i.startPollingQuery(this.options,s));var l=function(h){r.updateLastResult(ie(ie({},r.lastResult),{errors:h.graphQLErrors,networkStatus:Ve.error,loading:!1})),Fs(r.observers,"error",r.lastError=h)};i.observeQuery(s,this.options,{next:function(h){if(r.lastError||r.isDifferentFromLastResult(h)){var b=r.updateLastResult(h),T=r.options,N=T.query,q=T.variables,$=T.fetchPolicy;i.transform(N).hasClientExports?i.getLocalState().addExportedVariables(N,q).then(function(V){var Y=r.variables;r.variables=r.options.variables=V,!h.loading&&b&&$!=="cache-only"&&i.transform(N).serverQuery&&!Mt(Y,V)?r.refetch():Fs(r.observers,"next",h)}):Fs(r.observers,"next",h)}},error:l}).catch(l)},e.prototype.tearDownQuery=function(){var r=this.queryManager;this.isTornDown=!0,r.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),r.removeObservableQuery(this.queryId),r.stopQuery(this.queryId),this.observers.clear()},e}(xn);function ud(t){}function Fs(t,e,r){var n=[];t.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](r)})}function yo(t){var e=t.options.fetchPolicy;Ie(e!=="cache-first"&&e!=="cache-only",3)}var ld=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,r,n){this.store[e]={mutation:r,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,r){var n=this.store[e];n&&(n.loading=!1,n.error=r)},t.prototype.markMutationResult=function(e){var r=this.store[e];r&&(r.loading=!1,r.error=null)},t.prototype.reset=function(){this.store={}},t}(),cd=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var r=this.store[e.queryId];Ie(!r||r.document===e.document||Mt(r.document,e.document),19);var n=!1,i=null;e.storePreviousVariables&&r&&r.networkStatus!==Ve.loading&&(Mt(r.variables,e.variables)||(n=!0,i=r.variables));var s;n?s=Ve.setVariables:e.isPoll?s=Ve.poll:e.isRefetch?s=Ve.refetch:s=Ve.loading;var l=[];r&&r.graphQLErrors&&(l=r.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:l,networkStatus:s,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=Ve.fetchMore)},t.prototype.markQueryResult=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=en(r.errors)?r.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=Ve.ready,typeof n=="string"&&this.store[n]&&(this.store[n].networkStatus=Ve.ready))},t.prototype.markQueryError=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=r,this.store[e].networkStatus=Ve.error,typeof n=="string"&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(e,r){var n=this.store&&this.store[e];n&&(n.networkError=null,n.previousVariables=null,r&&(n.networkStatus=Ve.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var r=this;Object.keys(this.store).forEach(function(n){e.indexOf(n)<0?r.stopQuery(n):r.store[n].networkStatus=Ve.loading})},t}();function dd(t){return t.charAt(0).toUpperCase()+t.slice(1)}var bo=function(){function t(e){var r=e.cache,n=e.client,i=e.resolvers,s=e.fragmentMatcher;this.cache=r,n&&(this.client=n),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){r.resolvers=uo(r.resolvers,n)}):this.resolvers=uo(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,n=e.remoteResult,i=e.context,s=e.variables,l=e.onlyRunForcedResolvers,h=l===void 0?!1:l;return Cr(this,void 0,void 0,function(){return Rr(this,function(b){return r?[2,this.resolveDocument(r,n.data,i,s,this.fragmentMatcher,h).then(function(T){return ie(ie({},n),{data:T.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return gi(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?Gc(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.cache,n=ie(ie({},e),{cache:r,getCacheKey:function(i){if(r.config)return r.config.dataIdFromObject(i);Ie(!1,6)}});return n},t.prototype.addExportedVariables=function(e,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),Cr(this,void 0,void 0,function(){return Rr(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(n),r).then(function(s){return ie(ie({},r),s.exportedVariables)})]:[2,ie({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return(0,ir.visit)(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(r=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),r))return ir.BREAK}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:Hc(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,n,i,s,l){return n===void 0&&(n={}),i===void 0&&(i={}),s===void 0&&(s=function(){return!0}),l===void 0&&(l=!1),Cr(this,void 0,void 0,function(){var h,b,T,N,q,$,V,Y,Q;return Rr(this,function(ee){return h=Es(e),b=vi(e),T=yi(b),N=h.operation,q=N?dd(N):"Query",$=this,V=$.cache,Y=$.client,Q={fragmentMap:T,context:ie(ie({},n),{cache:V,client:Y}),variables:i,fragmentMatcher:s,defaultOperationType:q,exportedVariables:{},onlyRunForcedResolvers:l},[2,this.resolveSelectionSet(h.selectionSet,r,Q).then(function(te){return{result:te,exportedVariables:Q.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,n){return Cr(this,void 0,void 0,function(){var i,s,l,h,b,T=this;return Rr(this,function(N){return i=n.fragmentMap,s=n.context,l=n.variables,h=[r],b=function(q){return Cr(T,void 0,void 0,function(){var $,V;return Rr(this,function(Y){return ws(q,l)?Tr(q)?[2,this.resolveField(q,r,n).then(function(Q){var ee;typeof Q!="undefined"&&h.push((ee={},ee[An(q)]=Q,ee))})]:(mi(q)?$=q:($=i[q.name.value],Ie($,7)),$&&$.typeCondition&&(V=$.typeCondition.name.value,n.fragmentMatcher(r,V,s))?[2,this.resolveSelectionSet($.selectionSet,r,n).then(function(Q){h.push(Q)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(b)).then(function(){return Ds(h)})]})})},t.prototype.resolveField=function(e,r,n){return Cr(this,void 0,void 0,function(){var i,s,l,h,b,T,N,q,$,V=this;return Rr(this,function(Y){return i=n.variables,s=e.name.value,l=An(e),h=s!==l,b=r[l]||r[s],T=Promise.resolve(b),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(N=r.__typename||n.defaultOperationType,q=this.resolvers&&this.resolvers[N],q&&($=q[h?s:l],$&&(T=Promise.resolve($(r,bs(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}))))),[2,T.then(function(Q){if(Q===void 0&&(Q=b),e.directives&&e.directives.forEach(function(ee){ee.name.value==="export"&&ee.arguments&&ee.arguments.forEach(function(te){te.name.value==="as"&&te.value.kind==="StringValue"&&(n.exportedVariables[te.value.value]=Q)})}),!e.selectionSet||Q==null)return Q;if(Array.isArray(Q))return V.resolveSubSelectedArray(e,Q,n);if(e.selectionSet)return V.resolveSelectionSet(e.selectionSet,Q,n)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,n){var i=this;return Promise.all(r.map(function(s){if(s===null)return null;if(Array.isArray(s))return i.resolveSubSelectedArray(e,s,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,s,n)}))},t}();function wo(t){var e=new Set,r=null;return new xn(function(n){return e.add(n),r=r||t.subscribe({next:function(i){e.forEach(function(s){return s.next&&s.next(i)})},error:function(i){e.forEach(function(s){return s.error&&s.error(i)})},complete:function(){e.forEach(function(i){return i.complete&&i.complete()})}}),function(){e.delete(n)&&!e.size&&r&&(r.unsubscribe(),r=null)}})}function hd(t,e){return new xn(function(r){var n=r.next,i=r.error,s=r.complete,l=0,h=!1,b={next:function(N){++l,new Promise(function(q){q(e(N))}).then(function(q){--l,n&&n.call(r,q),h&&b.complete()},function(q){--l,i&&i.call(r,q)})},error:function(N){i&&i.call(r,N)},complete:function(){h=!0,l||s&&s.call(r)}},T=t.subscribe(b);return function(){return T.unsubscribe()}})}var md=Object.prototype.hasOwnProperty,pd=function(){function t(e){var r=e.link,n=e.queryDeduplication,i=n===void 0?!1:n,s=e.store,l=e.onBroadcast,h=l===void 0?function(){}:l,b=e.ssrMode,T=b===void 0?!1:b,N=e.clientAwareness,q=N===void 0?{}:N,$=e.localState,V=e.assumeImmutableResults;this.mutationStore=new ld,this.queryStore=new cd,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(Ts?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=r,this.queryDeduplication=i,this.dataStore=s,this.onBroadcast=h,this.clientAwareness=q,this.localState=$||new bo({cache:s.getCache()}),this.ssrMode=T,this.assumeImmutableResults=!!V}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,n){e.stopQueryNoBroadcast(n)}),this.fetchQueryRejectFns.forEach(function(r){r(new at(8))})},t.prototype.mutate=function(e){var r=e.mutation,n=e.variables,i=e.optimisticResponse,s=e.updateQueries,l=e.refetchQueries,h=l===void 0?[]:l,b=e.awaitRefetchQueries,T=b===void 0?!1:b,N=e.update,q=e.errorPolicy,$=q===void 0?"none":q,V=e.fetchPolicy,Y=e.context,Q=Y===void 0?{}:Y;return Cr(this,void 0,void 0,function(){var ee,te,ue,le=this;return Rr(this,function(ae){switch(ae.label){case 0:return Ie(r,9),Ie(!V||V==="no-cache",10),ee=this.generateQueryId(),r=this.transform(r).document,this.setQuery(ee,function(){return{document:r}}),n=this.getVariables(r,n),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,n,Q)]:[3,2];case 1:n=ae.sent(),ae.label=2;case 2:return te=function(){var ye={};return s&&le.queries.forEach(function(Oe,Me){var Qe=Oe.observableQuery;if(Qe){var Ae=Qe.queryName;Ae&&md.call(s,Ae)&&(ye[Me]={updater:s[Ae],query:le.queryStore.get(Me)})}}),ye},this.mutationStore.initMutation(ee,r,n),this.dataStore.markMutationInit({mutationId:ee,document:r,variables:n,updateQueries:te(),update:N,optimisticResponse:i}),this.broadcastQueries(),ue=this,[2,new Promise(function(ye,Oe){var Me,Qe;ue.getObservableFromLink(r,ie(ie({},Q),{optimisticResponse:i}),n,!1).subscribe({next:function(Ae){if($r(Ae)&&$==="none"){Qe=new Sr({graphQLErrors:Ae.errors});return}ue.mutationStore.markMutationResult(ee),V!=="no-cache"&&ue.dataStore.markMutationResult({mutationId:ee,result:Ae,document:r,variables:n,updateQueries:te(),update:N}),Me=Ae},error:function(Ae){ue.mutationStore.markMutationError(ee,Ae),ue.dataStore.markMutationComplete({mutationId:ee,optimisticResponse:i}),ue.broadcastQueries(),ue.setQuery(ee,function(){return{document:null}}),Oe(new Sr({networkError:Ae}))},complete:function(){if(Qe&&ue.mutationStore.markMutationError(ee,Qe),ue.dataStore.markMutationComplete({mutationId:ee,optimisticResponse:i}),ue.broadcastQueries(),Qe){Oe(Qe);return}typeof h=="function"&&(h=h(Me));var Ae=[];en(h)&&h.forEach(function(Mr){if(typeof Mr=="string")ue.queries.forEach(function(Bt){var ft=Bt.observableQuery;ft&&ft.queryName===Mr&&Ae.push(ft.refetch())});else{var ni={query:Mr.query,variables:Mr.variables,fetchPolicy:"network-only"};Mr.context&&(ni.context=Mr.context),Ae.push(ue.query(ni))}}),Promise.all(T?Ae:[]).then(function(){ue.setQuery(ee,function(){return{document:null}}),$==="ignore"&&Me&&$r(Me)&&delete Me.errors,ye(Me)})}})})]}})})},t.prototype.fetchQuery=function(e,r,n,i){return Cr(this,void 0,void 0,function(){var s,l,h,b,T,N,q,$,V,Y,Q,ee,te,ue,le,ae,ye,Oe,Me=this;return Rr(this,function(Qe){switch(Qe.label){case 0:return s=r.metadata,l=s===void 0?null:s,h=r.fetchPolicy,b=h===void 0?"cache-first":h,T=r.context,N=T===void 0?{}:T,q=this.transform(r.query).document,$=this.getVariables(q,r.variables),this.transform(q).hasClientExports?[4,this.localState.addExportedVariables(q,$,N)]:[3,2];case 1:$=Qe.sent(),Qe.label=2;case 2:if(r=ie(ie({},r),{variables:$}),Y=b==="network-only"||b==="no-cache",Q=Y,Y||(ee=this.dataStore.getCache().diff({query:q,variables:$,returnPartialData:!0,optimistic:!1}),te=ee.complete,ue=ee.result,Q=!te||b==="cache-and-network",V=ue),le=Q&&b!=="cache-only"&&b!=="standby",gi(["live"],q)&&(le=!0),ae=this.idCounter++,ye=b!=="no-cache"?this.updateQueryWatch(e,q,r):void 0,this.setQuery(e,function(){return{document:q,lastRequestId:ae,invalidated:!0,cancel:ye}}),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:q,storePreviousVariables:le,variables:$,isPoll:n===Hr.poll,isRefetch:n===Hr.refetch,metadata:l,fetchMoreForQueryId:i}),this.broadcastQueries(),le){if(Oe=this.fetchRequest({requestId:ae,queryId:e,document:q,options:r,fetchMoreForQueryId:i}).catch(function(Ae){throw id(Ae)?Ae:(ae>=Me.getQuery(e).lastRequestId&&(Me.queryStore.markQueryError(e,Ae,i),Me.invalidate(e),Me.invalidate(i),Me.broadcastQueries()),new Sr({networkError:Ae}))}),b!=="cache-and-network")return[2,Oe];Oe.catch(function(){})}return this.queryStore.markQueryResultClient(e,!le),this.invalidate(e),this.invalidate(i),this.transform(q).hasForcedResolvers?[2,this.localState.runResolvers({document:q,remoteResult:{data:V},context:N,variables:$,onlyRunForcedResolvers:!0}).then(function(Ae){return Me.markQueryResult(e,Ae,r,i),Me.broadcastQueries(),Ae})]:(this.broadcastQueries(),[2,{data:V}])}})})},t.prototype.markQueryResult=function(e,r,n,i){var s=n.fetchPolicy,l=n.variables,h=n.errorPolicy;s==="no-cache"?this.setQuery(e,function(){return{newData:{result:r.data,complete:!0}}}):this.dataStore.markQueryResult(r,this.getQuery(e).document,l,i,h==="ignore"||h==="all")},t.prototype.queryListenerForObserver=function(e,r,n){var i=this;function s(l,h){if(n[l])try{n[l](h)}catch(b){}}return function(l,h){if(i.invalidate(e,!1),!!l){var b=i.getQuery(e),T=b.observableQuery,N=b.document,q=T?T.options.fetchPolicy:r.fetchPolicy;if(q!=="standby"){var $=vo(l.networkStatus),V=T&&T.getLastResult(),Y=!!(V&&V.networkStatus!==l.networkStatus),Q=r.returnPartialData||!h&&l.previousVariables||Y&&r.notifyOnNetworkStatusChange||q==="cache-only"||q==="cache-and-network";if(!($&&!Q)){var ee=en(l.graphQLErrors),te=T&&T.options.errorPolicy||r.errorPolicy||"none";if(te==="none"&&ee||l.networkError)return s("error",new Sr({graphQLErrors:l.graphQLErrors,networkError:l.networkError}));try{var ue=void 0,le=void 0;if(h)q!=="no-cache"&&q!=="network-only"&&i.setQuery(e,function(){return{newData:null}}),ue=h.result,le=!h.complete;else{var ae=T&&T.getLastError(),ye=te!=="none"&&(ae&&ae.graphQLErrors)!==l.graphQLErrors;if(V&&V.data&&!ye)ue=V.data,le=!1;else{var Oe=i.dataStore.getCache().diff({query:N,variables:l.previousVariables||l.variables,returnPartialData:!0,optimistic:!0});ue=Oe.result,le=!Oe.complete}}var Me=le&&!(r.returnPartialData||q==="cache-only"),Qe={data:Me?V&&V.data:ue,loading:$,networkStatus:l.networkStatus,stale:Me};te==="all"&&ee&&(Qe.errors=l.graphQLErrors),s("next",Qe)}catch(Ae){s("error",new Sr({networkError:Ae}))}}}}}},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var n=this.dataStore.getCache(),i=n.transformDocument(e),s=Lc(n.transformForLink(i)),l=this.localState.clientQuery(i),h=this.localState.serverQuery(s),b={document:i,hasClientExports:Nc(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:l,serverQuery:h,defaultVars:Cs(Zr(i))},T=function(N){N&&!r.has(N)&&r.set(N,b)};T(e),T(i),T(l),T(h)}return r.get(e)},t.prototype.getVariables=function(e,r){return ie(ie({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e,r){r===void 0&&(r=!0),Ie(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var n=ie({},e);return new od({queryManager:this,options:n,shouldSubscribe:r})},t.prototype.query=function(e){var r=this;return Ie(e.query,12),Ie(e.query.kind==="Document",13),Ie(!e.returnPartialData,14),Ie(!e.pollInterval,15),new Promise(function(n,i){var s=r.watchQuery(e,!1);r.fetchQueryRejectFns.set("query:"+s.queryId,i),s.result().then(n,i).then(function(){return r.fetchQueryRejectFns.delete("query:"+s.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,r){this.setQuery(e,function(n){var i=n.listeners;return i.add(r),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,r,n){var i=this,s=this.getQuery(e).cancel;s&&s();var l=function(){var h=null,b=i.getQuery(e).observableQuery;if(b){var T=b.getLastResult();T&&(h=T.data)}return h};return this.dataStore.getCache().watch({query:r,variables:n.variables,optimistic:!0,previousResult:l,callback:function(h){i.setQuery(e,function(){return{invalidated:!0,newData:h}})}})},t.prototype.addObservableQuery=function(e,r){this.setQuery(e,function(){return{observableQuery:r}})},t.prototype.removeObservableQuery=function(e){var r=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),r&&r()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(r){r(new at(16))});var e=[];return this.queries.forEach(function(r,n){var i=r.observableQuery;i&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var n=[];return this.queries.forEach(function(i,s){var l=i.observableQuery;if(l){var h=l.options.fetchPolicy;l.resetLastResults(),h!=="cache-only"&&(e||h!=="standby")&&n.push(l.refetch()),r.setQuery(s,function(){return{newData:null}}),r.invalidate(s)}}),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(e,r,n){return this.addQueryListener(e,this.queryListenerForObserver(e,r,n)),this.fetchQuery(e,r)},t.prototype.startQuery=function(e,r,n){return this.addQueryListener(e,n),this.fetchQuery(e,r).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var r=this,n=e.query,i=e.fetchPolicy,s=e.variables;n=this.transform(n).document,s=this.getVariables(n,s);var l=function(b){return r.getObservableFromLink(n,{},b,!1).map(function(T){if((!i||i!=="no-cache")&&(r.dataStore.markSubscriptionResult(T,n,b),r.broadcastQueries()),$r(T))throw new Sr({graphQLErrors:T.errors});return T})};if(this.transform(n).hasClientExports){var h=this.localState.addExportedVariables(n,s).then(l);return new xn(function(b){var T=null;return h.then(function(N){return T=N.subscribe(b)},b.error),function(){return T&&T.unsubscribe()}})}return l(s)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(r){return r.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,r){r===void 0&&(r=!0);var n=e.options,i=n.variables,s=n.query,l=n.fetchPolicy,h=n.returnPartialData,b=e.getLastResult(),T=this.getQuery(e.queryId).newData;if(T&&T.complete)return{data:T.result,partial:!1};if(l==="no-cache"||l==="network-only")return{data:void 0,partial:!1};var N=this.dataStore.getCache().diff({query:s,variables:i,previousResult:b?b.data:void 0,returnPartialData:!0,optimistic:r}),q=N.result,$=N.complete;return{data:$||h?q:void 0,partial:!$}},t.prototype.getQueryWithPreviousResult=function(e){var r;if(typeof e=="string"){var n=this.getQuery(e).observableQuery;Ie(n,17),r=n}else r=e;var i=r.options,s=i.variables,l=i.query;return{previousResult:this.getCurrentQueryResult(r,!1).data,variables:s,document:l}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(r,n){r.invalidated&&r.listeners.forEach(function(i){i&&i(e.queryStore.get(n),r.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,n,i){var s=this;i===void 0&&(i=this.queryDeduplication);var l,h=this.transform(e).serverQuery;if(h){var b=this,T=b.inFlightLinkObservables,N=b.link,q={query:h,variables:n,operationName:ks(h)||void 0,context:this.prepareContext(ie(ie({},r),{forceFetch:!i}))};if(r=q.context,i){var $=T.get(h)||new Map;T.set(h,$);var V=JSON.stringify(n);if(l=$.get(V),!l){$.set(V,l=wo(_i(N,q)));var Y=function(){$.delete(V),$.size||T.delete(h),Q.unsubscribe()},Q=l.subscribe({next:Y,error:Y,complete:Y})}}else l=wo(_i(N,q))}else l=xn.of({data:{}}),r=this.prepareContext(r);var ee=this.transform(e).clientQuery;return ee&&(l=hd(l,function(te){return s.localState.runResolvers({document:ee,remoteResult:te,context:r,variables:n})})),l},t.prototype.fetchRequest=function(e){var r=this,n=e.requestId,i=e.queryId,s=e.document,l=e.options,h=e.fetchMoreForQueryId,b=l.variables,T=l.errorPolicy,N=T===void 0?"none":T,q=l.fetchPolicy,$,V;return new Promise(function(Y,Q){var ee=r.getObservableFromLink(s,l.context,b),te="fetchRequest:"+i;r.fetchQueryRejectFns.set(te,Q);var ue=function(){r.fetchQueryRejectFns.delete(te),r.setQuery(i,function(ae){var ye=ae.subscriptions;ye.delete(le)})},le=ee.map(function(ae){if(n>=r.getQuery(i).lastRequestId&&(r.markQueryResult(i,ae,l,h),r.queryStore.markQueryResult(i,ae,h),r.invalidate(i),r.invalidate(h),r.broadcastQueries()),N==="none"&&en(ae.errors))return Q(new Sr({graphQLErrors:ae.errors}));if(N==="all"&&(V=ae.errors),h||q==="no-cache")$=ae.data;else{var ye=r.dataStore.getCache().diff({variables:b,query:s,optimistic:!1,returnPartialData:!0}),Oe=ye.result,Me=ye.complete;(Me||l.returnPartialData)&&($=Oe)}}).subscribe({error:function(ae){ue(),Q(ae)},complete:function(){ue(),Y({data:$,errors:V,loading:!1,networkStatus:Ve.ready,stale:!1})}});r.setQuery(i,function(ae){var ye=ae.subscriptions;ye.add(le)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,r){var n=this.getQuery(e),i=ie(ie({},n),r(n));this.queries.set(e,i)},t.prototype.invalidate=function(e,r){r===void 0&&(r=!0),e&&this.setQuery(e,function(){return{invalidated:r}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return ie(ie({},r),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var r=this.queryStore.get(e);return r&&r.networkStatus!==Ve.ready&&r.networkStatus!==Ve.error},t.prototype.startPollingQuery=function(e,r,n){var i=this,s=e.pollInterval;if(Ie(s,18),!this.ssrMode){var l=this.pollingInfoByQueryId.get(r);l||this.pollingInfoByQueryId.set(r,l={}),l.interval=s,l.options=ie(ie({},e),{fetchPolicy:"network-only"});var h=function(){var T=i.pollingInfoByQueryId.get(r);T&&(i.checkInFlight(r)?b():i.fetchQuery(r,T.options,Hr.poll).then(b,b))},b=function(){var T=i.pollingInfoByQueryId.get(r);T&&(clearTimeout(T.timeout),T.timeout=setTimeout(h,T.interval))};n&&this.addQueryListener(r,n),b()}return r},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),fd=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,r,n,i,s){s===void 0&&(s=!1);var l=!$r(e);s&&$r(e)&&e.data&&(l=!0),!i&&l&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:r,variables:n})},t.prototype.markSubscriptionResult=function(e,r,n){$r(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:r,variables:n})},t.prototype.markMutationInit=function(e){var r=this;if(e.optimisticResponse){var n;typeof e.optimisticResponse=="function"?n=e.optimisticResponse(e.variables):n=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(i){var s=r.cache;r.cache=i;try{r.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=s}},e.mutationId)}},t.prototype.markMutationResult=function(e){var r=this;if(!$r(e.result)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach(function(s){var l=i[s],h=l.query,b=l.updater,T=r.cache.diff({query:h.document,variables:h.variables,returnPartialData:!0,optimistic:!1}),N=T.result,q=T.complete;if(q){var $=Is(function(){return b(N,{mutationResult:e.result,queryName:ks(h.document)||void 0,queryVariables:h.variables})});$&&n.push({result:$,dataId:"ROOT_QUERY",query:h.document,variables:h.variables})}}),this.cache.performTransaction(function(s){n.forEach(function(h){return s.write(h)});var l=e.update;l&&Is(function(){return l(s,e.result)})})}},t.prototype.markMutationComplete=function(e){var r=e.mutationId,n=e.optimisticResponse;n&&this.cache.removeOptimistic(r)},t.prototype.markUpdateQueryResult=function(e,r,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:r,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),gd="2.6.10",vd=!1,yd=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.cache,i=e.ssrMode,s=i===void 0?!1:i,l=e.ssrForceFetchDelay,h=l===void 0?0:l,b=e.connectToDevTools,T=e.queryDeduplication,N=T===void 0?!0:T,q=e.defaultOptions,$=e.assumeImmutableResults,V=$===void 0?!1:$,Y=e.resolvers,Q=e.typeDefs,ee=e.fragmentMatcher,te=e.name,ue=e.version,le=e.link;if(!le&&Y&&(le=Lt.empty()),!le||!n)throw new at(4);this.link=le,this.cache=n,this.store=new fd(n),this.disableNetworkFetches=s||h>0,this.queryDeduplication=N,this.defaultOptions=q||{},this.typeDefs=Q,h&&setTimeout(function(){return r.disableNetworkFetches=!1},h),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var ae=!1;(typeof b=="undefined"?ae:b&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=gd,this.localState=new bo({cache:n,client:this,resolvers:Y,fragmentMatcher:ee}),this.queryManager=new pd({link:this.link,store:this.store,queryDeduplication:N,ssrMode:s,clientAwareness:{name:te,version:ue},localState:this.localState,assumeImmutableResults:V,onBroadcast:function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.queryStore.getStore(),mutations:r.queryManager.mutationStore.getStore()},dataWithOptimisticResults:r.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=ie(ie({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=ie(ie({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=ie(ie({},this.defaultOptions.query),e)),Ie(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=ie(ie({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=ie(ie({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){var r=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeFragment=function(e){var r=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeData=function(e){var r=this.cache.writeData(e);return this.queryManager.broadcastQueries(),r},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return _i(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const hv=null;var bd=Object.defineProperty,_o=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ki extends Error{constructor(e){super(e);this.message=e,_o(this,"name"),_o(this,"stack")}}class Ei{constructor(e,r,n){this.remoteName=e,this.url=r,this.gitProtocol=n}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function ko(t,e,r){if(!e)return null;const n=new Be(e);return r&&n.update({type:r.type}),n.host?new Ei(t,e,n):null}function On(t){return t.state.remotes.map(e=>ko(e.name,e.fetchUrl||e.pushUrl)).filter(e=>!!e)}var wd=Object.defineProperty,Eo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _d{constructor(e){this.commentsController=e,Eo(this,"_prCommentControllers",{}),Eo(this,"_prDocumentCommentThreadMap",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,r){const n=e.uri,i=qe(n);return!i||!this._prCommentControllers[i.prNumber]?void 0:this._prCommentControllers[i.prNumber].provideCommentingRanges.bind(this._prCommentControllers[i.prNumber])(e,r)}async toggleReaction(e,r){const n=e.parent.uri,i=qe(n);return!i||!this._prCommentControllers[i.prNumber]||!this._prCommentControllers[i.prNumber].toggleReaction?void 0:this._prCommentControllers[i.prNumber].toggleReaction.bind(this._prCommentControllers[i.prNumber])(e,r)}registerCommentController(e,r){return this._prCommentControllers[e]=r,this._prDocumentCommentThreadMap[e]||(this._prDocumentCommentThreadMap[e]={}),{commentThreadCache:this._prDocumentCommentThreadMap[e],dispose:()=>{delete this._prCommentControllers[e]}}}clearCommentThreadCache(e){if(this._prDocumentCommentThreadMap[e]){for(const r in this._prDocumentCommentThreadMap[e])this._prDocumentCommentThreadMap[e][r].forEach(n=>n.dispose());this._prDocumentCommentThreadMap[e]={}}}dispose(){this._prCommentControllers={},this._prDocumentCommentThreadMap={}}}var kd=be(9967),Ed=be.n(kd),Cd=Object.defineProperty,qt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Co=20,tn="GraphQL";var _t;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(_t||(_t={}));const Ce=class{constructor(t,e,r){this.remote=t,this._credentialStore=e,this._telemetry=r,qt(this,"_initialized",!1),qt(this,"_hub"),qt(this,"_metadata"),qt(this,"_toDispose",[]),qt(this,"commentsController"),qt(this,"commentsHandler"),qt(this,"_pullRequestModels",new Map),qt(this,"isGitHubDotCom"),qt(this,"query",async n=>{const i=this.hub&&this.hub.graphql;if(!i)return K.debug(`Not available for query: ${n}`,tn),{data:null,loading:!1,networkStatus:Ve.error,stale:!1};K.debug(`Request: ${JSON.stringify(n,null,2)}`,tn);const s=await i.query(n);return K.debug(`Response: ${JSON.stringify(s,null,2)}`,tn),s}),qt(this,"mutate",async n=>{const i=this.hub&&this.hub.graphql;if(!i)return K.debug(`Not available for query: ${n}`,tn),{data:null,loading:!1,networkStatus:Ve.error,stale:!1};K.debug(`Request: ${JSON.stringify(n,null,2)}`,tn);const s=await i.mutate(n);return K.debug(`Response: ${JSON.stringify(s,null,2)}`,tn),s}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new ki("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=o.comments.createCommentController(`browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new _d(this.commentsController),this._toDispose.push(this.commentsController),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return Ed()}async getMetadata(){if(K.debug("Fetch metadata - enter",Ce.ID),this._metadata)return K.debug(`Fetch metadata ${this._metadata.owner.login}/${this._metadata.name} - done`,Ce.ID),this._metadata;const{octokit:t,remote:e}=await this.ensure(),r=await t.repos.get({owner:e.owner,repo:e.repositoryName});return K.debug(`Fetch metadata ${e.owner}/${e.repositoryName} - done`,Ce.ID),this._metadata={...r.data,currentUser:t.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=ko(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){K.appendLine(`Unable to resolve remote: ${t}`)}}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated()?this._hub=this._credentialStore.getHub():this._hub=await this._credentialStore.showSignInNotification(),this}async getDefaultBranch(){try{K.debug("Fetch default branch - enter",Ce.ID);const{octokit:t,remote:e}=await this.ensure(),{data:r}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return K.debug("Fetch default branch - done",Ce.ID),r.default_branch}catch(t){K.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,r,n,i;try{K.debug("Fetch repo permissions and available merge methods - enter",Ce.ID);const{octokit:s,remote:l}=await this.ensure(),{data:h}=await s.repos.get({owner:l.owner,repo:l.repositoryName});return K.debug("Fetch repo permissions and available merge methods - done",Ce.ID),{hasWritePermission:(e=(t=h.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(r=h.allow_merge_commit)!=null?r:!1,squash:(n=h.allow_squash_merge)!=null?n:!1,rebase:(i=h.allow_rebase_merge)!=null?i:!1}}}catch(s){K.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${s}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{K.debug("Fetch all pull requests - enter",Ce.ID);const{octokit:e,remote:r}=await this.ensure(),n=await e.pulls.list({owner:r.owner,repo:r.repositoryName,per_page:Co,page:t||1}),i=!!n.headers.link&&n.headers.link.indexOf('rel="next"')>-1;if(!n.data)return K.appendLine(`Warning: no result data for ${r.owner}/${r.repositoryName} Status: ${n.status}`),{items:[],hasMorePages:!1};const s=n.data.map(l=>l.head.repo?this.createOrUpdatePullRequestModel(Gr(l,this)):(K.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(l=>l!==null);return K.debug("Fetch all pull requests - done",Ce.ID),{items:s,hasMorePages:i}}catch(e){if(K.appendLine(`Fetching all pull requests failed: ${e}`,Ce.ID),e.code===404)o.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{K.debug("Fetch pull requests for branch - enter",Ce.ID);const{octokit:e,remote:r}=await this.ensure(),i=(await e.pulls.list({owner:r.owner,repo:r.repositoryName,head:`${r.owner}:${t}`})).data.map(s=>this.createOrUpdatePullRequestModel(Gr(s,this))).filter(s=>s!==null);return K.debug("Fetch pull requests for branch - done",Ce.ID),i}catch(e){if(K.appendLine(`Fetching pull requests for branch failed: ${e}`,Ce.ID),e.code===404)o.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const r=new Ei(e.repositoryName,e.repositoryUrl,new Be(e.repositoryUrl));t=new Ce(r,this._credentialStore,this._telemetry)}return t}async getIssuesForUserByMilestone(t){try{K.debug("Fetch all issues - enter",Ce.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.GetMilestones,variables:{owner:r.owner,name:r.repositoryName,assignee:this._credentialStore.getCurrentUser().login}});K.debug("Fetch all issues - done",Ce.ID);const s=[];let l=this;return i&&i.repository.milestones&&i.repository.milestones.nodes&&i.repository.milestones.nodes.forEach(h=>{const b=Ms(h);if(b){const T=[];h.issues.edges.forEach(N=>{const q=qs(N.node,this);l=this.getRepoForIssue(l,q),T.push(new ot(l,l.remote,q))}),s.push({milestone:b,issues:T})}}),{items:s,hasMorePages:i.repository.milestones.pageInfo.hasNextPage}}catch(e){K.appendLine(`GithubRepository> Unable to fetch issues: ${e}`);return}}async getIssuesWithoutMilestone(t){try{K.debug("Fetch issues without milestone- enter",Ce.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.IssuesWithoutMilestone,variables:{owner:r.owner,name:r.repositoryName,assignee:this._credentialStore.getCurrentUser().login}});K.debug("Fetch issues without milestone - done",Ce.ID);const s=[];let l=this;return i&&i.repository.issues.edges&&i.repository.issues.edges.forEach(h=>{if(h.node.id){const b=qs(h.node,this);l=this.getRepoForIssue(l,b),s.push(new ot(l,l.remote,b))}}),{items:s,hasMorePages:i.repository.issues.pageInfo.hasNextPage}}catch(e){K.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${e}`);return}}async getIssues(t,e){try{K.debug("Fetch issues with query - enter",Ce.ID);const{query:r,schema:n}=await this.ensure(),{data:i}=await r({query:n.Issues,variables:{query:`${e} type:issue`}});K.debug("Fetch issues with query - done",Ce.ID);const s=[];let l=this;return i&&i.search.edges&&i.search.edges.forEach(h=>{if(h.node.id){const b=qs(h.node,this);l=this.getRepoForIssue(l,b),s.push(new ot(l,l.remote,b))}}),{items:s,hasMorePages:i.search.pageInfo.hasNextPage}}catch(r){K.appendLine(`GithubRepository> Unable to fetch issues with query: ${r}`);return}}async getMaxIssue(){try{K.debug("Fetch max issue - enter",Ce.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return K.debug("Fetch max issue - done",Ce.ID),n&&n.repository.issues.edges.length===1?n.repository.issues.edges[0].node.number:void 0}catch(t){K.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{K.debug("Fetch viewer permission - enter",Ce.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return K.debug("Fetch viewer permission - done",Ce.ID),xd(n)}catch(t){return K.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),_t.Unknown}}async fork(){try{K.debug("Fork repository",Ce.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){K.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{K.debug("Fetch viewer permission - enter",Ce.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return K.debug("Fetch viewer permission - done",Ce.ID),n.repository}catch(t){K.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{K.debug(`Fetch pull request category ${t} - enter`,Ce.ID);const{octokit:r,remote:n}=await this.ensure(),i=await r.users.getAuthenticated({}),s=await r.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:l,headers:h}=await r.search.issuesAndPullRequests({q:Od(s.data.full_name,i.data.login,t),per_page:Co,page:e||1}),b=[];l.items.forEach($=>{b.push(new Promise(async(V,Y)=>{const Q=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:$.number});V(Q)}))});const T=!!h.link&&h.link.indexOf('rel="next"')>-1,q=(await Promise.all(b)).map($=>$.data.head.repo?this.createOrUpdatePullRequestModel(Gr($.data,this)):(K.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter($=>$!==null);return K.debug(`Fetch pull request category ${t} - done`,Ce.ID),{items:q,hasMorePages:T}}catch(r){if(K.appendLine(`GitHubRepository> Fetching all pull requests failed: ${r}`),r.code===404)o.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw r}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new ar(this._telemetry,this,this.remote,t),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:r}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(Gr(r,this))}async getPullRequest(t){try{K.debug(`Fetch pull request ${t} - enter`,Ce.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.PullRequest,variables:{owner:r.owner,name:r.repositoryName,number:t}});return K.debug(`Fetch pull request ${t} - done`,Ce.ID),this.createOrUpdatePullRequestModel(Do(i,this))}catch(e){K.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{K.debug(`Fetch issue ${t} - enter`,Ce.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:s}=await r({query:e?i.IssueWithComments:i.Issue,variables:{owner:n.owner,name:n.repositoryName,number:t}});return K.debug(`Fetch issue ${t} - done`,Ce.ID),new ot(this,n,Do(s,this))}catch(r){K.appendLine(`GithubRepository> Unable to fetch PR: ${r}`);return}}async listBranches(t,e){const{octokit:r}=await this.ensure();K.debug(`List branches for ${t}/${e} - enter`,Ce.ID);try{const n=await r.paginate("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100});return K.debug(`List branches for ${t}/${e} - done`,Ce.ID),n.map(i=>i.name)}catch(n){throw K.debug(`List branches for ${t}/${e} failed`,Ce.ID),n}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(r){K.appendLine(`GithubRepository> Unable to delete branch: ${r}`);return}}async getMentionableUsers(){K.debug("Fetch mentionable users - enter",Ce.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const s=[];do try{const l=await t({query:r.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});s.push(...l.data.repository.mentionableUsers.nodes.map(h=>({login:h.login,avatarUrl:h.avatarUrl,name:h.name,url:h.url,email:h.email}))),i=l.data.repository.mentionableUsers.pageInfo.hasNextPage,n=l.data.repository.mentionableUsers.pageInfo.endCursor}catch(l){return K.debug(`Unable to fetch mentionable users: ${l}`,Ce.ID),s}while(i);return s}async getAssignableUsers(){K.debug("Fetch assignable users - enter",Ce.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const s=[];do try{const l=await t({query:r.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});s.push(...l.data.repository.assignableUsers.nodes.map(h=>({login:h.login,avatarUrl:h.avatarUrl,name:h.name,url:h.url,email:h.email}))),i=l.data.repository.assignableUsers.pageInfo.hasNextPage,n=l.data.repository.assignableUsers.pageInfo.endCursor}catch(l){return K.debug(`Unable to fetch assignable users: ${l}`,Ce.ID),l.graphQLErrors&&l.graphQLErrors.length>0&&l.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&o.window.showWarningMessage(`GitHub user features will not work. ${l.graphQLErrors[0].message}`),s}while(i);return s}async compareCommits(t,e){const{remote:r,octokit:n}=await this.ensure(),{data:i}=await n.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:t,head:e});return i}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let rn=Ce;qt(rn,"ID","GitHubRepository");var Rd=Object.defineProperty,Ke=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ci=class{constructor(t,e,r,n,i){Ke(this,"commentId"),Ke(this,"id"),Ke(this,"parent"),Ke(this,"body"),Ke(this,"originalBody"),Ke(this,"mode"),Ke(this,"author"),Ke(this,"label"),Ke(this,"commentReactions"),Ke(this,"contextValue"),this.parent=t,this.body=new o.MarkdownString(e),this.mode=o.CommentMode.Preview,this.author={name:n.login,iconPath:n.avatarUrl?o.Uri.parse(`${n.avatarUrl}&s=64`):void 0},this.label=r?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=i?i._rawComment.body:void 0,this.commentReactions=i?i.reactions:void 0,this.id=Ci.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Ci&&t.id===this.id&&(t.mode=o.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof Ci&&t.id===this.id&&(t.mode=o.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let ht=Ci;Ke(ht,"idPool",0);class Le{constructor(e,r){Ke(this,"commentId"),Ke(this,"parent"),Ke(this,"body"),Ke(this,"mode"),Ke(this,"author"),Ke(this,"label"),Ke(this,"reactions"),Ke(this,"_rawComment"),Ke(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new o.MarkdownString(e.body),this.body.isTrusted=!0,this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?o.Uri.parse(e.user.avatarUrl):void 0},To(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const n=[];e.canEdit&&n.push("canEdit"),e.canDelete&&n.push("canDelete"),this.contextValue=n.join(","),this.parent=r}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof Le&&e.commentId===this.commentId&&(e.mode=o.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof Le&&e.commentId===this.commentId&&(e.mode=o.CommentMode.Preview,e.body=e._rawComment.body),e))}}function nn(t,e){var r;const n=e.createCommentThread(t.uri,t.range,[]);n.threadId=t.threadId,n.comments=t.comments.map(l=>new Le(l,n));const i=!!((r=t.comments[0])==null?void 0:r.isResolved);n.isResolved=i,Qt(n);const s=t.uri.scheme!=="pr"&&t.uri.scheme!=="review";return n.collapsibleState=s||i?o.CommentThreadCollapsibleState.Collapsed:o.CommentThreadCollapsibleState.Expanded,n}function Qt(t){if(t.comments.length){const e=f(t.comments,r=>r.author.name).map(r=>`@${r.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function Ro(t){return Ti().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const r=t.find(n=>n.label===e.label);return r?{label:r.label,authorHasReacted:r.viewerHasReacted,count:r.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function To(t,e){t.reactions=Ro(e)}function xs(t,e){e||(t.comments=t.comments.map(r=>(r instanceof Le&&(r._rawComment.isDraft=!1),r.label=void 0,r)))}function Pr(t,e){return{login:t.login,url:t.html_url,avatarUrl:e.isGitHubDotCom?t.avatar_url:void 0}}function So(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function Gr(t,e){const{number:r,body:n,title:i,html_url:s,user:l,state:h,assignees:b,created_at:T,updated_at:N,head:q,base:$,labels:V,node_id:Y,id:Q,draft:ee}=t;return{id:Q,graphNodeId:Y,number:r,body:n,title:i,url:s,user:Pr(l,e),state:h,merged:t.merged||!1,assignees:b?b.map(ue=>Pr(ue,e)):void 0,createdAt:T,updatedAt:N,head:So(q),base:So($),mergeable:t.mergeable?Er.Mergeable:Er.NotMergeable,labels:V.map(ue=>({name:"",color:"",...ue})),isDraft:ee,suggestedReviewers:[]}}function Td(t,e){const{number:r,body:n,title:i,html_url:s,user:l,state:h,assignees:b,created_at:T,updated_at:N,labels:q,node_id:$,id:V}=t;return{id:V,graphNodeId:$,number:r,body:n,title:i,url:s,user:Pr(l,e),state:h,assignees:b?b.map(Q=>Pr(Q,e)):void 0,createdAt:T,updatedAt:N,labels:q.map(Q=>typeof Q=="string"?{name:Q,color:""}:{name:"",color:"",...Q}),suggestedReviewers:[]}}function Sd(t,e){return{event:Ze.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:Pr(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function Po(t){const e=[],r=Ot(t.diffHunk);let n=r.next();for(;!n.done;){const i=n.value;e.push(i),n=r.next()}return e}function No(t,e){const r={url:t.url,id:t.id,pullRequestReviewId:t.pull_request_review_id,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:Pr(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},n=Po(r);return r.diffHunks=n,r}function Pd(t){switch(t){case"PullRequestCommit":return Ze.Committed;case"LabeledEvent":return Ze.Labeled;case"MilestonedEvent":return Ze.Milestoned;case"AssignedEvent":return Ze.Assigned;case"HeadRefDeletedEvent":return Ze.HeadRefDeleted;case"IssueComment":return Ze.Commented;case"PullRequestReview":return Ze.Reviewed;case"MergedEvent":return Ze.Merged;default:return Ze.Other}}function sn(t,e){const r={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:Os(t.reactionGroups),isResolved:e},n=Po(r);return r.diffHunks=n,r}function Io(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function Os(t){const e=Ti().reduce((n,i)=>(n[i.title]=i,n),{});return t.filter(n=>n.users.totalCount>0).map(n=>({label:e[n.content].label,count:n.users.totalCount,icon:e[n.content].icon,viewerHasReacted:n.viewerHasReacted}))}function Ri(t){if(t)return{label:`${t.repository.owner.login}:${t.name}`,ref:t.name,sha:t.target.oid,repo:{cloneUrl:t.repository.url}}}function sr(t,e){return t?{login:t.login,url:t.url,avatarUrl:e.isGitHubDotCom?t.avatarUrl:void 0}:{login:"",url:""}}function Ms(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function Ls(t){switch(t){case"UNKNOWN":return Er.Unknown;case"MERGEABLE":return Er.Mergeable;case"CONFLICTING":return Er.NotMergeable}}function Do(t,e){var r,n;const i=t.repository.pullRequest;return{id:i.databaseId,graphNodeId:i.id,url:i.url,number:i.number,state:i.state,body:i.body,bodyHTML:i.bodyHTML,title:i.title,createdAt:i.createdAt,updatedAt:i.updatedAt,head:Ri(i.headRef),base:Ri(i.baseRef),user:sr(i.author,e),merged:i.merged,mergeable:Ls(i.mergeable),labels:i.labels.nodes,isDraft:i.isDraft,suggestedReviewers:Ao(i.suggestedReviewers),comments:Nd((r=i.comments)==null?void 0:r.nodes,e),milestone:Ms(i.milestone),assignees:(n=i.assignees)==null?void 0:n.nodes}}function Nd(t,e){if(!t)return;const r=[];for(const n of t)r.push({author:sr(n.author,e),body:n.body,databaseId:n.databaseId});return r}function qs(t,e){var r,n,i;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:t.assignees.nodes,user:sr(t.author,e),labels:t.labels.nodes,repositoryName:(r=t.repository)==null?void 0:r.name,repositoryOwner:(n=t.repository)==null?void 0:n.owner.login,repositoryUrl:(i=t.repository)==null?void 0:i.url}}function mv(t,e){const r=t;return{id:r.databaseId,graphNodeId:r.id,url:r.url,number:r.number,state:r.state,body:r.body,bodyHTML:r.bodyHTML,title:r.title,createdAt:r.createdAt,updatedAt:r.updatedAt,head:Ri(r.headRef),base:Ri(r.baseRef),user:sr(r.author,e),merged:r.merged,mergeable:Ls(r.mergeable),labels:r.labels.nodes,isDraft:r.isDraft,suggestedReviewers:Ao(r.suggestedReviewers),milestone:Ms(r.milestone)}}function Ao(t){return t?t.map(r=>({login:r.reviewer.login,avatarUrl:r.reviewer.avatarUrl,name:r.reviewer.name,url:r.reviewer.url,isAuthor:r.isAuthor,isCommenter:r.isCommenter})).sort(Fo):[]}function Fo(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function Id(t,e){return{event:Ze.Reviewed,comments:t.comments.nodes.map(r=>sn(r,!1)).filter(r=>!r.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:sr(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function xo(t,e){const r=[];return t.forEach(n=>{const i=Pd(n.__typename);switch(i){case Ze.Commented:const s=n;r.push({htmlUrl:s.url,body:s.body,bodyHTML:s.bodyHTML,user:sr(s.author,e),event:i,canEdit:s.viewerCanUpdate,canDelete:s.viewerCanDelete,id:s.databaseId,graphNodeId:s.id,createdAt:s.createdAt});return;case Ze.Reviewed:const l=n;r.push({event:i,comments:[],submittedAt:l.submittedAt,body:l.body,bodyHTML:l.bodyHTML,htmlUrl:l.url,user:sr(l.author,e),authorAssociation:l.authorAssociation,state:l.state,id:l.databaseId});return;case Ze.Committed:const h=n;r.push({id:h.databaseId,event:i,sha:h.commit.oid,author:h.commit.author.user?sr(h.commit.author.user,e):{login:h.commit.committer.name},htmlUrl:h.url,message:h.commit.message,authoredDate:new Date(h.commit.authoredDate)});return;case Ze.Merged:const b=n;r.push({id:b.databaseId,event:i,user:sr(b.actor,e),createdAt:b.createdAt,mergeRef:b.mergeRef.name,sha:b.commit.oid,commitUrl:b.commit.commitUrl,url:b.url,graphNodeId:b.id});return;case Ze.Assigned:const T=n;r.push({id:T.databaseId,event:i,user:T.user,actor:T.actor});return;case Ze.HeadRefDeleted:const N=n;r.push({id:N.id,event:i,actor:N.actor,createdAt:N.createdAt,headRef:N.headRefName});return;default:break}}),r}function Dd(t){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:Ad(t.user.contributionsCollection)}}function Ad(t){const e=[];return t.commitContributionsByRepository.forEach(r=>{r.contributions.nodes.forEach(n=>{e.push({createdAt:new Date(n.occurredAt),repoNameWithOwner:r.repository.nameWithOwner})})}),e}function Ti(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:zt.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:zt.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:zt.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:zt.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:zt.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:zt.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:zt.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:zt.icons.reactions.EYES}]}function Fd(t){const e=[];return t.forEach(r=>{var n,i;ic(r)&&e.push({login:r.author.login,name:r.author.name||""}),ms(r)&&e.push({login:r.user.login,name:(n=r.user.name)!=null?n:r.user.login}),sc(r)&&e.push({login:r.user.login,name:(i=r.user.name)!=null?i:r.user.login})}),e}function xd(t){return t&&t.repository.viewerPermission&&Object.values(_t).includes(t.repository.viewerPermission)?t.repository.viewerPermission:_t.Unknown}function Oo(t,e){for(const r of t.repositories)if(e.path.toLowerCase()===r.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(r.rootUri.path.toLowerCase())&&e.path.substring(r.rootUri.path.length).startsWith("/"))return r}function Mo(t,e,r){const n=e.filter(ms).filter(l=>l.state!=="PENDING");let i=[];const s=new Map;s.set(r.login,!0);for(let l=n.length-1;l>=0;l--){const h=n[l].user;s.get(h.login)||(s.set(h.login,!0),i.push({reviewer:h,state:n[l].state}))}return t.forEach(l=>{if(!s.get(l.login))i.push({reviewer:l,state:"REQUESTED"});else{const h=i.find(b=>b.reviewer.login===l.login);h.state="REQUESTED"}}),i=i.sort((l,h)=>l.state==="REQUESTED"&&h.state!=="REQUESTED"?1:h.state==="REQUESTED"&&l.state!=="REQUESTED"||l.reviewer.login.toLowerCase()<h.reviewer.login.toLowerCase()?-1:1),i}function Od(t,e,r){return`is:pull-request ${r.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function Us(){return o.env.remoteName==="codespaces"&&o.env.uiKind===o.UIKind.Web}var Md=Object.defineProperty,mt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Md(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Si=class{constructor(t,e,r,n=!1){mt(this,"id"),mt(this,"graphNodeId"),mt(this,"number"),mt(this,"title"),mt(this,"html_url"),mt(this,"state",We.Open),mt(this,"author"),mt(this,"assignees"),mt(this,"createdAt"),mt(this,"updatedAt"),mt(this,"milestone"),mt(this,"githubRepository"),mt(this,"remote"),mt(this,"item"),mt(this,"bodyHTML"),this.githubRepository=t,this.remote=e,this.item=r,n||this.update(r)}get isOpen(){return this.state===We.Open}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=o.Uri.parse(`${t}&s=${64}`),r=e.toString;return e.toString=function(n){return r.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=We.Open:this.state=We.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return n.updatePullRequest.pullRequest}catch(e){throw new Error(D(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){K.debug(`Fetch issue comments of PR #${this.number} - enter`,Si.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return K.debug(`Fetch issue comments of PR #${this.number} - done`,Si.ID),r.data}async createIssueComment(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return Io(n.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return Io(i.updateIssueComment.issueComment)}catch(r){throw new Error(D(r))}}async deleteIssueComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(D(e))}}async addLabels(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addLabels({owner:r.owner,repo:r.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:r.owner,repo:r.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){K.debug(`Fetch timeline events of issue #${this.number} - enter`,Si.ID);const t=this.githubRepository,{query:e,remote:r,schema:n}=await t.ensure();try{const{data:i}=await e({query:n.IssueTimelineEvents,variables:{owner:r.owner,name:r.repositoryName,number:this.number}}),s=i.repository.pullRequest.timelineItems.nodes;return xo(s,t)}catch(i){return console.log(i),[]}}async addCommentReaction(t,e){const r=Ti().reduce((l,h)=>(l[h.label]=h.title,l),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:s}=await n({mutation:i.AddReaction,variables:{input:{subjectId:t,content:r[e.label]}}});return s}async deleteCommentReaction(t,e){const r=Ti().reduce((l,h)=>(l[h.label]=h.title,l),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:s}=await n({mutation:i.DeleteReaction,variables:{input:{subjectId:t,content:r[e.label]}}});return s}};let ot=Si;mt(ot,"ID","IssueModel");var Ld=Object.defineProperty,Nt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ld(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ut=class extends ot{constructor(t,e,r,n,i){super(e,r,n,!0);Nt(this,"isDraft"),Nt(this,"localBranchName"),Nt(this,"mergeBase"),Nt(this,"suggestedReviewers"),Nt(this,"_hasPendingReview",!1),Nt(this,"_onDidChangePendingReviewState",new o.EventEmitter),Nt(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),Nt(this,"isActive"),Nt(this,"_telemetry"),Nt(this,"head"),Nt(this,"base"),this._telemetry=t,this.isActive=!!i,this.update(n)}get isMerged(){return this.state===We.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=We.Open:this.state=this.item.merged?We.Merged:We.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.head&&(this.head=new Ha(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.base&&(this.base=new Ha(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,o.window.showWarningMessage(t,"Open on GitHub").then(r=>{r&&r==="Open on GitHub"&&o.commands.executeCommand("vscode.open",o.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(rr.Approve,t):this.createReview(rr.Approve,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.approve"),r))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(rr.RequestChanges,t):this.createReview(rr.RequestChanges,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),r))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),Gr(r.data,this.githubRepository)}async createReview(t,e){const{octokit:r,remote:n}=await this.githubRepository.ensure(),{data:i}=await r.pulls.createReview({owner:n.owner,repo:n.repositoryName,pull_number:this.number,event:t,body:e});return Sd(i,this.githubRepository)}async submitReview(t,e){const r=await this.getPendingReviewId(),{mutate:n,schema:i}=await this.githubRepository.ensure();if(r){const{data:s}=await n({mutation:i.SubmitReview,variables:{id:r,event:t||rr.Comment,body:e}});return this.hasPendingReview=!1,await this.updateDraftModeContext(),Id(s.submitPullRequestReview.pullRequestReview,this.githubRepository)}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),n=t==="null"?null:t;try{await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:n}}})}catch(i){K.appendLine(i)}}async updateAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),r=await this.githubRepository.getAuthenticatedUser();try{const{data:n}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:r}});return n.node.reviews.nodes[0].id}catch(n){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:i,databaseId:s}=n.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),{deletedReviewId:s,deletedReviewComments:i.nodes.map(l=>sn(l,!1))}}async startReview(t,e){var r;const{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:s}=await n({mutation:i.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,comments:t,commitOID:e||((r=this.head)==null?void 0:r.sha)}}});if(!s)throw new Error("Failed to start review");return this.hasPendingReview=!0,await this.updateDraftModeContext(),sn(s.addPullRequestReview.pullRequestReview.comments.nodes[0],!1)}async createReviewComment(t,e,r,n){if(!this.validatePullRequestModel("Creating comment failed"))return;const i=await this.getPendingReviewId();if(i)return this.addCommentToPendingReview(i,t,{path:e,position:r},n);const s=this.githubRepository,{octokit:l,remote:h}=await s.ensure();try{const b=await l.pulls.createReviewComment({owner:h.owner,repo:h.repositoryName,pull_number:this.number,body:t,commit_id:n||this.head.sha,path:e,position:r});return this.addCommentPermissions(No(b.data,s))}catch(b){throw D(b)}}async createReviewCommentReply(t,e){const r=await this.getPendingReviewId();if(r)return this.addCommentToPendingReview(r,t,{inReplyTo:e.graphNodeId});const{octokit:n,remote:i}=await this.githubRepository.ensure();try{const s=await n.pulls.createReplyForReviewComment({owner:i.owner,repo:i.repositoryName,pull_number:this.number,body:t,comment_id:Number(e.id)});return this.addCommentPermissions(No(s.data,this.githubRepository))}catch(s){throw D(s)}}async addCommentToPendingReview(t,e,r,n){var i;const{mutate:s,schema:l}=await this.githubRepository.ensure(),{data:h}=await s({mutation:l.AddComment,variables:{input:{pullRequestReviewId:t,body:e,...r,commitOID:n||((i=this.head)==null?void 0:i.sha)}}}),{comment:b}=h.addPullRequestReviewComment;return sn(b,!1)}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await o.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}addCommentPermissions(t){const e=this.githubRepository.isCurrentUser(t.user.login),r=t.position!==null;return t.canEdit=e&&r,t.canDelete=e&&r,t}async editReviewComment(t,e){const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});return sn(i.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved)}async deleteReviewComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.deleteReviewComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(D(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:r}=await t.ensure();return(await r.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(i=>Pr(i,t))}async requestReview(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:[t]})}async getReviewComments(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return n.repository.pullRequest.reviewThreads.nodes.map(s=>s.comments.nodes.map(l=>sn(l,s.isResolved),t)).reduce((s,l)=>s.concat(l),[]).sort((s,l)=>s.createdAt>l.createdAt?1:-1)}catch(n){return K.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getCommits(){try{K.debug(`Fetch commits of PR #${this.number} - enter`,Ut.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),r=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return K.debug(`Fetch commits of PR #${this.number} - done`,Ut.ID),r.data}catch(t){return o.window.showErrorMessage(`Fetching commits failed: ${D(t)}`),[]}}async getCommitChangedFiles(t){try{K.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,Ut.ID);const{octokit:e,remote:r}=await this.githubRepository.ensure(),n=await e.repos.getCommit({owner:r.owner,repo:r.repositoryName,ref:t.sha});return K.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,Ut.ID),n.data.files.filter(i=>!!i.patch)}catch(e){return o.window.showErrorMessage(`Fetching commit file changes failed: ${D(e)}`),[]}}async getFile(t,e){var r;const{octokit:n,remote:i}=await this.githubRepository.ensure(),s=await n.repos.getContent({owner:i.owner,repo:i.repositoryName,path:t,ref:e});if(Array.isArray(s.data))throw new Error(`Unexpected array response when getting file ${t}`);const l=(r=s.data.content)!=null?r:"";return Buffer.from(l,s.data.encoding).toString()}async getTimelineEvents(){K.debug(`Fetch timeline events of PR #${this.number} - enter`,Ut.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await t({query:r.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),i=n.repository.pullRequest.timelineItems.nodes,s=xo(i,this.githubRepository);return await this.addReviewTimelineEventComments(s),s}catch(n){return console.log(n),[]}}async addReviewTimelineEventComments(t){const e=t.filter(ms),r=await this.getReviewComments(),n=e.reduce((b,T)=>(b[T.id]=T,T.comments=[],b),{}),i=r.reduce((b,T)=>(b[T.id]=T,b),{}),s=[];let l=r.length;for(;l-- >0;){const b=r[l];if(!b.inReplyToId){s.unshift(b);continue}const T=i[b.inReplyToId];T.childComments=T.childComments||[],T.childComments=[b,...b.childComments||[],...T.childComments]}s.forEach(b=>{const T=n[b.pullRequestReviewId];T&&(T.comments=T.comments.concat(b).concat(b.childComments||[]))});const h=e.filter(b=>b.state.toLowerCase()==="pending")[0];h&&(h.comments=r.filter(b=>b.isDraft))}async getStatusChecks(){const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),i=(await t({query:r.GetChecks,variables:{owner:e.owner,name:e.repositoryName,number:this.number}})).data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return i?{state:i.state.toLowerCase(),statuses:i.contexts.nodes.map(s=>{var l,h,b,T;return ac(s)?{id:s.id,url:(l=s.checkSuite.app)==null?void 0:l.url,avatar_url:(h=s.checkSuite.app)==null?void 0:h.logoUrl,state:((b=s.conclusion)==null?void 0:b.toLowerCase())||"pending",description:s.title,context:s.name,target_url:s.detailsUrl}:{id:s.id,url:s.targetUrl,avatar_url:s.avatarUrl,state:(T=s.state)==null?void 0:T.toLowerCase(),description:s.description,context:s.context,target_url:s.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,r){const n=await e.getFileChangesInfo(),i=e.mergeBase||e.base.sha,l=(await In(n,t.repository,i)).find(N=>N.fileName===r.path||N.previousFileName===r.path);if(!l)throw new Error("Can't find matching file");let h,b;if(e.equals(t.activePullRequest)){const N=o.Uri.file(v.resolve(t.repository.rootUri.fsPath,l.fileName));h=l.status===ke.DELETE?Vt(N,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):N,b=Vt(N,l.status===ke.RENAME?l.previousFileName:l.fileName,void 0,l.status===ke.ADD?"":i,!1,{base:!0},t.repository.rootUri)}else{const N=e.head.sha,q=l.status===ke.RENAME?l.previousFileName:l.fileName;h=Ft(o.Uri.file(v.resolve(t.repository.rootUri.fsPath,l.fileName)),e,l.baseCommit,N,l.fileName,!1,l.status),b=Ft(o.Uri.file(v.resolve(t.repository.rootUri.fsPath,q)),e,l.baseCommit,N,l.fileName,!0,l.status)}const T=r.path.split("/");o.commands.executeCommand("vscode.diff",b,h,`${T[T.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){K.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,Ut.ID);const t=this.githubRepository,{octokit:e,remote:r}=await t.ensure();if(!this.base){const l=await e.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:this.number});this.update(Gr(l.data,t))}if(this.item.merged){const l=await e.pulls.listFiles({repo:r.repositoryName,owner:r.owner,pull_number:this.number});return this.mergeBase=this.base.sha,l.data}const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=n.merge_base_commit.sha;const i=300;let s=[];return n.files.length>=i?(K.debug(`More than ${i} files changed, fetching all file changes of PR #${this.number}`,Ut.ID),s=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:r.repositoryName,per_page:100})):s=n.files,K.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${s.length} `,Ut.ID),s}async getMergability(){try{K.debug(`Fetch pull request mergeability ${this.number} - enter`,Ut.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await t({query:r.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return K.debug(`Fetch pull request mergeability ${this.number} - done`,Ut.ID),Ls(n.repository.pullRequest.mergeable)}catch(t){return K.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),Er.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:r}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),r.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}};let ar=Ut;Nt(ar,"ID","PullRequestModel");var qd=Object.defineProperty,Br=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?qd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function $s(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class Lo{constructor(){Br(this,"_webview"),Br(this,"_disposables",[]),Br(this,"_waitForReady"),Br(this,"_onIsReady",new o.EventEmitter),Br(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const r=this._onIsReady.event(()=>{r.dispose(),e()})})}initialize(){var e;(e=this._webview)==null||e.onDidReceiveMessage(async r=>{await this._onDidReceiveMessage(r)},null,this._disposables)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var r;await this._waitForReady,(r=this._webview)==null||r.postMessage({res:e})}async _replyMessage(e,r){var n;const i={seq:e.req,res:r};(n=this._webview)==null||n.postMessage(i)}async _throwError(e,r){var n;const i={seq:e.req,err:r};(n=this._webview)==null||n.postMessage(i)}dispose(){this._disposables.forEach(e=>e.dispose())}}class qo extends Lo{constructor(){super(...arguments);Br(this,"viewType"),Br(this,"_view")}show(){this._view?this._view.show():o.commands.executeCommand(`${this.viewType}.focus`)}}var Ud=Object.defineProperty,or=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ud(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Wt=class extends Lo{constructor(t,e,r,n,i=Wt._viewType){super();this._extensionUri=t,or(this,"_panel"),or(this,"_disposables",[]),or(this,"_descriptionNode"),or(this,"_item"),or(this,"_folderRepositoryManager"),or(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=n,this._panel=o.window.createWebviewPanel(i,r,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[o.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(s=>{if(this._folderRepositoryManager&&this._item){const l=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:l})}},null,this._disposables)}static async createOrShow(t,e,r,n=!1){const i=n?o.ViewColumn.Beside:o.window.activeTextEditor?o.window.activeTextEditor.viewColumn:o.ViewColumn.One;if(Wt.currentPanel)Wt.currentPanel._panel.reveal(i,!0);else{const s=`Issue #${r.number.toString()}`;Wt.currentPanel=new Wt(t,i||o.ViewColumn.Active,s,e)}await Wt.currentPanel.update(e,r)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[r,n,i]=e;if(!r)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._panel.title=`Pull Request #${t.number.toString()}`,K.debug("pr.initialize",Wt.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:n,repositoryDefaultBranch:i,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{o.window.showErrorMessage(D(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":o.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function r(i,s){return e=(await i.getLabels(s)).filter(h=>!s.item.labels.some(b=>b.name===h.name)),e.map(h=>({label:h.name}))}const n=await o.window.showQuickPick(r(this._folderRepositoryManager,this._item),{canPickMany:!0});if(n&&n.length){await this._item.addLabels(n.map(s=>s.label));const i=n.map(s=>e.find(l=>l.name===s.label));this._item.item.labels=this._item.item.labels.concat(...i),this._replyMessage(t,{added:i})}}catch(e){o.window.showErrorMessage(D(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(r=>r.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){o.window.showErrorMessage(D(e))}}webviewDebug(t){K.debug(t.args,Wt.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),o.window.showErrorMessage(`Editing description failed: ${D(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),o.window.showErrorMessage(`Editing title failed: ${D(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),o.window.showErrorMessage(D(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){o.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(r=>{this._replyMessage(t,{})}).catch(r=>{this._throwError(t,r),o.window.showErrorMessage(D(r))})})}close(t){o.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){Wt.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose();this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=$s(),r=o.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let Pi=Wt;or(Pi,"ID","PullRequestOverviewPanel"),or(Pi,"currentPanel"),or(Pi,"_viewType","IssueOverview");var $d=Object.defineProperty,an=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Kt=class extends Pi{constructor(t,e,r,n){super(t,e,r,n,Kt._viewType);an(this,"_repositoryDefaultBranch"),an(this,"_existingReviewers",[]),an(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),wm(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables)}static async createOrShow(t,e,r,n=!1){const i=n?o.ViewColumn.Beside:o.window.activeTextEditor?o.window.activeTextEditor.viewColumn:o.ViewColumn.One;if(Kt.currentPanel)Kt.currentPanel._panel.reveal(i,!0);else{const s=`Pull Request #${r.number.toString()}`;Kt.currentPanel=new Kt(t,i||o.ViewColumn.Active,s,e)}await Kt.currentPanel.update(e,r)}set _currentPanel(t){Kt.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t)]).then(e=>{const[r,n,i,s,l,h]=e;if(!r)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._repositoryDefaultBranch=i,this._panel.title=`Pull Request #${t.number.toString()}`;const b=t.equals(this._folderRepositoryManager.activePullRequest),T=h.hasWritePermission,N=h.mergeMethodsAvailability,q=T||this._item.canEdit(),$=o.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),V=Uo(N,$);this._existingReviewers=Mo(l,n,r.author);const Q=r.base&&r.head&&!r.base.repositoryCloneUrl.equals(r.head.repositoryCloneUrl)&&Us();K.debug("pr.initialize",Kt.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:r.number,title:r.title,url:r.html_url,createdAt:r.createdAt,body:r.body,bodyHTML:r.bodyHTML,labels:r.item.labels,author:{login:r.author.login,name:r.author.name,avatarUrl:r.userAvatar,url:r.author.url},state:r.state,events:n,isCurrentlyCheckedOut:b,base:r.base&&r.base.label||"UNKNOWN",head:r.head&&r.head.label||"UNKNOWN",repositoryDefaultBranch:i,canEdit:q,hasWritePermission:T,status:s||{statuses:[]},mergeable:r.item.mergeable,reviewers:this._existingReviewers,isDraft:r.isDraft,mergeMethodsAvailability:N,defaultMergeMethod:V,isIssue:!1,milestone:r.milestone,assignees:r.assignees,showMergeOnGitHub:Q}})}).catch(e=>{o.window.showErrorMessage(D(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink(t);case"pr.openOnGitHub":return Hn(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){if(!t)return[];const r=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],n=new Set([this._item.author.login,...this._existingReviewers.map(s=>s.reviewer.login)]),i=[];for(const s of t){const{login:l,name:h,isAuthor:b,isCommenter:T}=s;if(n.has(l))continue;const N=b&&T?"Recently edited and reviewed changes to these files":b?"Recently edited these files":T?"Recently reviewed changes to these files":"Suggested reviewer";i.push({label:l,description:h,detail:N,reviewer:s}),n.add(l)}for(const s of r)n.has(s.login)||i.push({label:s.login,description:s.name,reviewer:s});return i}getAssigneesQuickPickItems(t,e){if(!e)return[];const r=new Set([...this._item.assignees.map(i=>i.login)]),n=[];for(const i of e){const{login:s,name:l,isAuthor:h,isCommenter:b}=i;if(r.has(s))continue;const T=h&&b?"Recently edited and reviewed changes to these files":h?"Recently edited these files":b?"Recently reviewed changes to these files":"Suggested reviewer";n.push({label:s,description:l,detail:T,assignee:i}),r.add(s)}for(const i of t)r.has(i.login)||n.push({label:i.login,description:i.name,assignee:i});return n}async addReviewers(t){try{const e=await o.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0});if(e){await this._item.requestReview(e.map(n=>n.label));const r=e.map(n=>({reviewer:n.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(r),this._replyMessage(t,{added:r})}}catch(e){o.window.showErrorMessage(D(e))}}async addMilestone(t){try{async function e(n){return(await n.getMilestones()).items.map(i=>({label:i.milestone.title,id:i.milestone.id,milestone:i.milestone}))}const r=await o.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});r&&(await this._item.updateMilestone(r.id),this._replyMessage(t,{added:r.milestone}))}catch(e){o.window.showErrorMessage(D(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){o.window.showErrorMessage(D(e))}}async addAssignees(t){try{const r=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],n=await o.window.showQuickPick(this.getAssigneesQuickPickItems(r,[]),{canPickMany:!0,matchOnDescription:!0});if(n){const i=n.map(s=>s.assignee);this._item.assignees=this._item.assignees.concat(i),await this._item.updateAssignees(i.map(s=>s.login)),this._replyMessage(t,{added:i})}}catch(e){o.window.showErrorMessage(D(e))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(r=>r.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){o.window.showErrorMessage(D(e))}}async removeAssignee(t){try{await this._item.deleteAssignees(t.args);const e=this._item.assignees.findIndex(r=>r.login===t.args);this._item.assignees.splice(e,1),this._replyMessage(t,{})}catch(e){o.window.showErrorMessage(D(e))}}async applyPatch(t){try{const e=t.args.comment,n=/```diff\n([\s\S]*)\n```/g.exec(e.body),i=v.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),s=new TextEncoder,l=o.Uri.parse(i);await o.workspace.fs.writeFile(l,s.encode(n[1])),await this._folderRepositoryManager.repository.apply(i,!0),await o.workspace.fs.delete(l)}catch(e){K.appendLine(`Applying patch failed: ${e}`),o.window.showErrorMessage(`Applying patch failed: ${D(e)}`)}}async openDiff(t){try{const e=t.args.comment;return ar.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){K.appendLine(`Open diff view failed: ${D(e)}`,Kt.ID)}}checkoutPullRequest(t){o.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:r,method:n}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,r,n).then(i=>{o.commands.executeCommand("pr.refreshList"),i.merged||o.window.showErrorMessage(`Merging PR failed: ${i.message}`),this._replyMessage(t,{state:i.merged?We.Merged:We.Open})}).catch(i=>{o.window.showErrorMessage(`Unable to merge pull request. ${D(i)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const i=this._item.head.ref;this._repositoryDefaultBranch===this._item.head.ref||r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${i}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const i=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!i});const s=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&r.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!s})}if(!r.length){o.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const n=await o.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0});if(n){const i=this._item.equals(this._folderRepositoryManager.activePullRequest),s=n.map(async l=>{switch(l.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(i){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await o.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await o.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0);case"remote":return this._folderRepositoryManager.repository.removeRemote(e.remote)}});await Promise.all(s),this.refreshPanel(),o.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch"})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{o.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{o.window.showErrorMessage(`Unable to set PR ready for review. ${D(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(r=>t.user.login===r.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),o.commands.executeCommand("pr.refreshList")},e=>{o.window.showErrorMessage(`Approving pull request failed. ${D(e)}`),this._throwError(t,`${D(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{o.window.showErrorMessage(`Requesting changes failed. ${D(e)}`),this._throwError(t,`${D(e)}`)})}submitReview(t){this._item.submitReview(rr.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{o.window.showErrorMessage(`Submitting review failed. ${D(e)}`),this._throwError(t,`${D(e)}`)})}async copyPrLink(t){await o.env.clipboard.writeText(this._item.html_url),o.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let ur=Kt;an(ur,"ID","PullRequestOverviewPanel"),an(ur,"currentPanel"),an(ur,"_viewType","PullRequestOverview");function Uo(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(n=>t[n])}var Hd=Object.defineProperty,$o=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Gd extends qo{constructor(e,r,n){super();this._extensionUri=e,this._folderRepositoryManager=r,this._item=n,$o(this,"viewType","github:activePullRequest"),$o(this,"_existingReviewers",[])}resolveWebviewView(e,r,n){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":o.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return Hn(this._item,this._item._telemetry)}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){return Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests()]).then(r=>{var n,i,s,l;const[h,b,T,N]=r;if(!h)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(!this._view)return;this._item=h,this._view.title=`${h.title} #${e.number.toString()}`;const q=e.equals(this._folderRepositoryManager.activePullRequest),$=b.hasWritePermission,V=b.mergeMethodsAvailability,Y=$||this._item.canEdit(),Q=o.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),ee=Uo(V,Q),te=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=Mo(N!=null?N:[],T!=null?T:[],h.author);const le=h.base&&h.head&&!h.base.repositoryCloneUrl.equals(h.head.repositoryCloneUrl)&&Us();this._postMessage({command:"pr.initialize",pullrequest:{number:h.number,title:h.title,url:h.html_url,createdAt:h.createdAt,body:h.body,bodyHTML:h.bodyHTML,labels:h.item.labels,author:{login:h.author.login,name:h.author.name,avatarUrl:h.userAvatar,url:h.author.url},state:h.state,isCurrentlyCheckedOut:q,base:(i=(n=h.base)==null?void 0:n.label)!=null?i:"UNKNOWN",head:(l=(s=h.head)==null?void 0:s.label)!=null?l:"UNKNOWN",canEdit:Y,hasWritePermission:$,mergeable:h.item.mergeable,isDraft:h.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:V,defaultMergeMethod:ee,isIssue:!1,isAuthor:te.login===h.author.login,reviewers:this._existingReviewers,showMergeOnGitHub:le}})}).catch(r=>{o.window.showErrorMessage(D(r))})}close(e){o.commands.executeCommand("pr.close",this._item,e.args).then(r=>{r&&this._replyMessage(e,{value:r})})}createComment(e){this._item.createIssueComment(e.args).then(r=>{this._replyMessage(e,{value:r})})}updateReviewers(e){if(e){const r=this._existingReviewers.find(n=>e.user.login===n.reviewer.login);r?r.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers}),o.commands.executeCommand("pr.refreshList")},r=>{o.window.showErrorMessage(`Approving pull request failed. ${D(r)}`),this._throwError(e,`${D(r)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{o.window.showErrorMessage(`Requesting changes failed. ${D(r)}`),this._throwError(e,`${D(r)}`)})}submitReview(e){this._item.submitReview(rr.Comment,e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{o.window.showErrorMessage(`Submitting review failed. ${D(r)}`),this._throwError(e,`${D(r)}`)})}async deleteBranch(e){const r=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),n=[];if(this._item.isResolved()){const s=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||n.push({label:`Delete remote branch ${this._item.remote.remoteName}/${s}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(r){const s=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");n.push({label:`Delete local branch ${r.branch}`,type:"local",picked:!!s});const l=o.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");r.remote&&r.createdForPullRequest&&!r.remoteInUse&&n.push({label:`Delete remote ${r.remote}, which is no longer used by any other branch`,type:"remote",picked:!!l})}if(!n.length){o.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const i=await o.window.showQuickPick(n,{canPickMany:!0,ignoreFocusOut:!0});if(i){const s=this._item.equals(this._folderRepositoryManager.activePullRequest),l=i.map(async h=>{switch(h.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(s){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await o.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await o.commands.executeCommand("git.cleanAll");else return;const b=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(b)}return this._folderRepositoryManager.repository.deleteBranch(r.branch,!0);case"remote":return this._folderRepositoryManager.repository.removeRemote(r.remote)}});await Promise.all(l),o.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch"})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(r=>{o.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:r})}).catch(r=>{o.window.showErrorMessage(`Unable to set PR ready for review. ${D(r)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:r,description:n,method:i}=e.args;if(await o.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:We.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,r,n,i).then(l=>{o.commands.executeCommand("pr.refreshList"),l.merged||o.window.showErrorMessage(`Merging PR failed: ${l.message}`),this._replyMessage(e,{state:l.merged?We.Merged:We.Open})}).catch(l=>{o.window.showErrorMessage(`Unable to merge pull request. ${D(l)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=$s(),r=o.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}class Bd{constructor(e,r){this.reviewManager=e,this.folderRepositoryManager=r}provideTerminalLinks(e,r){var n;const i=e.line.indexOf("https://github.com");if(i===-1)return[];const s=e.line.substring(i),l=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),h=s.match(l);if(h&&h.length===4){const b=h[1],T=h[2],N=h[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex($=>$.remote.owner===b&&$.remote.repositoryName===T)>-1&&((n=this.reviewManager.repository.state.HEAD)==null?void 0:n.name)===N)return[{startIndex:i,length:e.line.length-i,tooltip:"Create a Pull Request",url:s}]}return[]}handleTerminalLink(e){o.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(r=>{r==="Yes"?this.reviewManager.createPullRequest():o.env.openExternal(o.Uri.parse(e.url))})}}var Vr=be(8605),Ni=be(7211),Et=be(8761),Fe=be(2413),Vd=be(5175),Ii=be(1669),jd=be(6030);class Di extends Error{constructor(e,r){super(e);Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class lr extends Di{constructor(e,r,n){super(e,r);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}var Ho=be(6417),zd=be.n(Ho);const Ai=Symbol.toStringTag,Go=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[Ai]==="URLSearchParams",Nr=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[Ai]);function Hs(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[Ai]==="FormData"}const Qd=t=>typeof t=="object"&&t[Ai]==="AbortSignal",on=`\r
`,Gs="-".repeat(2),Wd=Buffer.byteLength(on),Bo=t=>`${Gs}${t}${Gs}${on.repeat(2)}`;function Vo(t,e,r){let n="";return n+=`${Gs}${t}${on}`,n+=`Content-Disposition: form-data; name="${e}"`,Nr(r)&&(n+=`; filename="${r.name}"${on}`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}${on.repeat(2)}`}const Kd=()=>(0,Ho.randomBytes)(8).toString("hex");async function*Yd(t,e){for(const[r,n]of t)yield Vo(e,r,n),Nr(n)?yield*n.stream():yield n,yield on;yield Bo(e)}function Xd(t,e){let r=0;for(const[n,i]of t)r+=Buffer.byteLength(Vo(e,n,i)),Nr(i)?r+=i.size:r+=Buffer.byteLength(String(i)),r+=Wd;return r+=Buffer.byteLength(Bo(e)),r}const Ct=Symbol("Body internals");class Bs{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Go(e)?e=Buffer.from(e.toString()):Nr(e)||Buffer.isBuffer(e)||(Ii.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Fe||(Hs(e)?(n=`NodeFetchFormDataBoundary${Kd()}`,e=Fe.Readable.from(Yd(e,n))):e=Buffer.from(String(e)))),this[Ct]={body:e,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof Fe&&e.on("error",i=>{const s=i instanceof Di?i:new lr(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[Ct].error=s})}get body(){return this[Ct].body}get bodyUsed(){return this[Ct].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:r,byteLength:n}=await Fi(this);return e.slice(r,r+n)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[Ct].body&&this[Ct].body.type||"",r=await this.buffer();return new jd([r],{type:e})}async json(){const e=await Fi(this);return JSON.parse(e.toString())}async text(){return(await Fi(this)).toString()}buffer(){return Fi(this)}}Object.defineProperties(Bs.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function Fi(t){if(t[Ct].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Ct].disturbed=!0,t[Ct].error)throw t[Ct].error;let{body:e}=t;if(e===null)return Buffer.alloc(0);if(Nr(e)&&(e=e.stream()),Buffer.isBuffer(e))return e;if(!(e instanceof Fe))return Buffer.alloc(0);const r=[];let n=0;try{for await(const i of e){if(t.size>0&&n+i.length>t.size){const s=new lr(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}n+=i.length,r.push(i)}}catch(i){throw i instanceof Di?i:new lr(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(i){throw new lr(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new lr(`Premature close of server response while trying to fetch ${t.url}`)}const jo=(t,e)=>{let r,n,{body:i}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Fe&&typeof i.getBoundary!="function"&&(r=new Fe.PassThrough({highWaterMark:e}),n=new Fe.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[Ct].body=r,i=n),i},zo=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Go(t)?"application/x-www-form-urlencoded;charset=UTF-8":Nr(t)?t.type||null:Buffer.isBuffer(t)||Ii.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:Hs(t)?`multipart/form-data; boundary=${e[Ct].boundary}`:t instanceof Fe?null:"text/plain;charset=UTF-8",Jd=t=>{const{body:e}=t;return e===null?0:Nr(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"?e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null:Hs(e)?Xd(t[Ct].boundary):null},Zd=(t,{body:e})=>{e===null?t.end():Nr(e)?e.stream().pipe(t):Buffer.isBuffer(e)?(t.write(e),t.end()):e.pipe(t)},xi=typeof Vr.validateHeaderName=="function"?Vr.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){const e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Vs=typeof Vr.validateHeaderValue=="function"?Vr.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class Ir extends URLSearchParams{constructor(e){let r=[];if(e instanceof Ir){const n=e.raw();for(const[i,s]of Object.entries(n))r.push(...s.map(l=>[i,l]))}else if(e!=null)if(typeof e=="object"&&!Ii.types.isBoxedPrimitive(e)){const n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||Ii.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(xi(n),Vs(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(l,h)=>(xi(l),Vs(l,String(h)),URLSearchParams.prototype[i].call(s,String(l).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return l=>(xi(l),URLSearchParams.prototype[i].call(s,String(l).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e){for(const r of this.keys())e(this.get(r),r)}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{const n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}}Object.defineProperties(Ir.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function eh(t=[]){return new Ir(t.reduce((e,r,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return xi(e),Vs(e,String(r)),!0}catch{return!1}}))}const th=new Set([301,302,303,307,308]),Qo=t=>th.has(t),cr=Symbol("Response internals");class Yt extends Bs{constructor(e=null,r={}){super(e,r);const n=r.status||200,i=new Ir(r.headers);if(e!==null&&!i.has("Content-Type")){const s=zo(e);s&&i.append("Content-Type",s)}this[cr]={url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get url(){return this[cr].url||""}get status(){return this[cr].status}get ok(){return this[cr].status>=200&&this[cr].status<300}get redirected(){return this[cr].counter>0}get statusText(){return this[cr].statusText}get headers(){return this[cr].headers}get highWaterMark(){return this[cr].highWaterMark}clone(){return new Yt(jo(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(e,r=302){if(!Qo(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Yt(null,{headers:{location:new URL(e).toString()},status:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Yt.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var un=be(8835);const rh=t=>{if(t.search)return t.search;const e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""},dr=Symbol("Request internals"),Oi=t=>typeof t=="object"&&typeof t[dr]=="object";class Mn extends Bs{constructor(e,r={}){let n;Oi(e)?n=new URL(e.url):(n=new URL(e),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||Oi(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const s=r.body?r.body:Oi(e)&&e.body!==null?jo(e):null;super(s,{size:r.size||e.size||0});const l=new Ir(r.headers||e.headers||{});if(s!==null&&!l.has("Content-Type")){const b=zo(s,this);b&&l.append("Content-Type",b)}let h=Oi(e)?e.signal:null;if("signal"in r&&(h=r.signal),h!==null&&!Qd(h))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[dr]={method:i,redirect:r.redirect||e.redirect||"follow",headers:l,parsedURL:n,signal:h},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1}get method(){return this[dr].method}get url(){return(0,un.format)(this[dr].parsedURL)}get headers(){return this[dr].headers}get redirect(){return this[dr].redirect}get signal(){return this[dr].signal}clone(){return new Mn(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Mn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const nh=t=>{const{parsedURL:e}=t[dr],r=new Ir(t[dr].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){const h=Jd(t);typeof h=="number"&&!Number.isNaN(h)&&(n=String(h))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close");const s=rh(e);return{path:e.pathname+s,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i}};class ih extends Di{constructor(e,r="aborted"){super(e,r)}}const sh=new Set(["data:","http:","https:"]);async function js(t,e){return new Promise((r,n)=>{const i=new Mn(t,e),s=nh(i);if(!sh.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){const V=Vd(i.url),Y=new Yt(V,{headers:{"Content-Type":V.typeFull}});r(Y);return}const l=(s.protocol==="https:"?Ni:Vr).request,{signal:h}=i;let b=null;const T=()=>{const V=new ih("The operation was aborted.");n(V),i.body&&i.body instanceof Fe.Readable&&i.body.destroy(V),!(!b||!b.body)&&b.body.emit("error",V)};if(h&&h.aborted){T();return}const N=()=>{T(),$()},q=l(s);h&&h.addEventListener("abort",N);const $=()=>{q.abort(),h&&h.removeEventListener("abort",N)};q.on("error",V=>{n(new lr(`request to ${i.url} failed, reason: ${V.message}`,"system",V)),$()}),q.on("response",V=>{q.setTimeout(0);const Y=eh(V.rawHeaders);if(Qo(V.statusCode)){const le=Y.get("Location"),ae=le===null?null:new URL(le,i.url);switch(i.redirect){case"error":n(new lr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),$();return;case"manual":if(ae!==null)try{Y.set("Location",ae)}catch(ye){n(ye)}break;case"follow":{if(ae===null)break;if(i.counter>=i.follow){n(new lr(`maximum redirect reached at: ${i.url}`,"max-redirect")),$();return}const ye={headers:new Ir(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(V.statusCode!==303&&i.body&&e.body instanceof Fe.Readable){n(new lr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),$();return}(V.statusCode===303||(V.statusCode===301||V.statusCode===302)&&i.method==="POST")&&(ye.method="GET",ye.body=void 0,ye.headers.delete("content-length")),r(js(new Mn(ae,ye))),$();return}default:}}V.once("end",()=>{h&&h.removeEventListener("abort",N)});let Q=(0,Fe.pipeline)(V,new Fe.PassThrough,le=>{n(le)});process.version<"v12.10"&&V.on("aborted",N);const ee={url:i.url,status:V.statusCode,statusText:V.statusMessage,headers:Y,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},te=Y.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||te===null||V.statusCode===204||V.statusCode===304){b=new Yt(Q,ee),r(b);return}const ue={flush:Et.Z_SYNC_FLUSH,finishFlush:Et.Z_SYNC_FLUSH};if(te==="gzip"||te==="x-gzip"){Q=(0,Fe.pipeline)(Q,Et.createGunzip(ue),le=>{n(le)}),b=new Yt(Q,ee),r(b);return}if(te==="deflate"||te==="x-deflate"){(0,Fe.pipeline)(V,new Fe.PassThrough,ae=>{n(ae)}).once("data",ae=>{(ae[0]&15)==8?Q=(0,Fe.pipeline)(Q,Et.createInflate(),ye=>{n(ye)}):Q=(0,Fe.pipeline)(Q,Et.createInflateRaw(),ye=>{n(ye)}),b=new Yt(Q,ee),r(b)});return}if(te==="br"){Q=(0,Fe.pipeline)(Q,Et.createBrotliDecompress(),le=>{n(le)}),b=new Yt(Q,ee),r(b);return}b=new Yt(Q,ee),r(b)}),Zd(q,i)})}var ah=be(6149);const Wo=oh();function oh(t=process.env.HTTPS_PROXY){if(!t)return Ni.globalAgent;try{const{hostname:e,port:r,username:n,password:i}=new un.URL(t),s=n&&i&&`${n}:${i}`;return(0,ah.httpsOverHttp)({proxy:{host:e,port:r,proxyAuth:s}})}catch(e){return o.window.showErrorMessage(`HTTPS_PROXY environment variable ignored: ${e.message}`),Ni.globalAgent}}let Ko=!1;const Yo=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(Ko)return o.Uri.parse(e);if(await o.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return Ko=!0,o.Uri.parse(e)}const r=t instanceof o.Uri?t:o.Uri.parse(t.host);return r.authority==="github.com"?o.Uri.parse("https://api.github.com"):o.Uri.parse(`${r.scheme}://${r.authority}`)}static getApiPath(t,e){return(t instanceof o.Uri?t:o.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var uh=Object.defineProperty,lh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?uh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class zs{constructor(){lh(this,"_servers",new Map().set("github.com",!0))}async isGitHub(e){if(e===null)return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[r,n]=await zs.getOptions(e,"HEAD","/rate_limit");let i=!1;try{return i=(await js(r.toString(),n)).headers["x-github-request-id"]!==void 0,i}catch(s){return K.appendLine(`No response from host ${e}: ${s.message}`,"GitHubServer"),i}finally{K.debug(`Host ${e} is associated with GitHub: ${i}`,"GitHubServer"),this._servers.set(e.authority,i)}}static async getOptions(e,r="GET",n,i){const s={"user-agent":"GitHub VSCode Pull Requests"};i&&(s.authorization=`token ${i}`);const l=o.Uri.joinPath(await Yo.getApiHost(e),Yo.getApiPath(e,n));return[l,{hostname:l.authority,port:443,method:r,headers:s,agent:Wo}]}}var ch=be(9593),dh=be.n(ch),Mi=be(7228);const Xo=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function Jo(t){return t.match(Xo)}function hh(t){return!!Jo(t.body)}async function Zo(t,e,r=!0){const n=t[2],i=t[3],s=t[5],l=Number(t[6])-1,h=t[8]?Number(t[8])-1:l;let b;for(const N of e.folderManagers){const q=N.getGitHubRemotes();for(const $ of q)if(n.toLowerCase()===$.owner.toLowerCase()&&i.toLowerCase()===$.repositoryName.toLowerCase()){b=N;break}if(b)break}if(!b)return;const T=o.Uri.joinPath(b.repository.rootUri,s);try{await o.workspace.fs.stat(T)}catch(N){return}return{file:T,start:l,end:h}}async function mh(t,e){const r=Jo(t.body);if(!r){o.window.showInformationMessage("Issue has no link.");return}const n=await Zo(r,e,!1);if(!n)return o.env.openExternal(o.Uri.parse(r[0]));const i=await o.workspace.openTextDocument(n==null?void 0:n.file),s=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),l=new o.Range(n.start,0,n.end,s.text.length);return o.window.showTextDocument(n.file,{selection:l})}var ph=Object.defineProperty,eu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ph(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const pv=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Ln=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Qs=/\@([^\s]+)/,fh=150,Ye="githubIssues",ln="queries",gh="default",tu="workingIssueBranch",Ws="issueBranchTitle",ru="useBranchForIssues",vh="workingIssueFormatScm";function Ks(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function yh(t,e,r,n){var i;const s=(i=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:i.get(r);if(s)return s;{let l,h,b;const T=e.getGitHubRemotes();for(const N of T){if(n)l=n.owner?n.owner:N.owner,h=n.name?n.name:N.repositoryName,b=n.issueNumber;else{const q=Ks(r.match(Ln));q&&(!q.name||!q.owner)&&(l=N.owner,h=N.repositoryName)}if(l&&h&&b!==void 0){let q=await e.resolveIssue(l,h,b,!!n.commentNumber);if(q||(q=await e.resolvePullRequest(l,h,b)),q){let $;return t.resolvedIssues.has(e.repository.rootUri.path)?$=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,$=new(dh())(50)),$.set(r,q),q}}}}}function bh(t,e){let r;return t.commitContributions.forEach(n=>{e.toLowerCase()===n.repoNameWithOwner.toLowerCase()&&(r=n.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),r}class wh extends o.CompletionItem{constructor(){super(...arguments);eu(this,"login"),eu(this,"uri")}}function Ys(t,e){const r=new o.MarkdownString(void 0,!0);r.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&r.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const n=bh(e,t.owner+"/"+t.repo);return(e.location||n)&&r.appendMarkdown(`  \r
\r
---`),e.location&&r.appendMarkdown(`  \r
$(location) ${e.location}`),n&&r.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${n}`),e.company&&r.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),r}function _h(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function kh(t,e){const r=_h(t);let n="ffffff";return r&&(.299*r.r+.587*r.g+.114*r.b)/255>.5&&(n="000000"),`<span style="color:#${n};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function nu(t,e,r){let n=t.search(e),i=0;for(;n>=0&&n<t.length;){let s;if(n===0||t.charAt(n-1)!=="&"){const h=t.substring(n).match(e);if(h){const b=await r(h);b&&(s=t.slice(0,n)+b,t=s+t.slice(n+h[0].length))}}i=s?s.length:n+1;const l=t.substring(i).search(e);n=l>0?i+l:l}return t}function iu(t,e){return nu(t,Ln,async r=>{const n=Ks(r);if(n){const i=ou(n);return(!n.owner||!n.name)&&(n.owner=e.remote.owner,n.name=e.remote.repositoryName),`[${i}](https://github.com/${n.owner}/${n.name}/issues/${n.issueNumber})`}})}async function Eh(t,e){return nu(t,Xo,async r=>{const n=await Zo(r,e);if(n){const i=await o.workspace.openTextDocument(n==null?void 0:n.file),s=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),l=[n.file,{selection:{start:{line:n.start,character:0},end:{line:n.end,character:s.text.length}}}],h=o.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(l))}`);return`[${r[0]}](${h} "Open ${n.file.fsPath}")`}})}const Li=200;async function Xs(t,e,r,n){const i=new o.MarkdownString(void 0,!0);i.isTrusted=!0;const s=new Date(t.createdAt),l=`${t.remote.owner}/${t.remote.repositoryName}`;i.appendMarkdown(`[${l}](https://github.com/${l}) on ${s.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const h=Mi.parse(t.title,{renderer:new ea}).trim();i.appendMarkdown(`${Rh(t,e)} **${h}** [#${t.number}](${t.html_url})  
`);let b=Mi.parse(t.body,{renderer:new ea});if(i.appendMarkdown(`  
`),b=b.length>Li?b.substr(0,Li)+"...":b,b=await iu(b,t),b=await Eh(b,r),i.appendMarkdown(b+`  
`),i.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(T=>{i.appendMarkdown(`[${kh(T.color,T.name)}](https://github.com/${l}/labels/${encodeURIComponent(T.name)}) `)}),t.item.comments&&n){for(const T of t.item.comments)if(T.databaseId===n){i.appendMarkdown(`  \r
\r
---\r
`),i.appendMarkdown(`&nbsp;  
`),i.appendMarkdown(`![Avatar](${T.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${T.author.login}** commented`),i.appendMarkdown(`&nbsp;  
`);let N=Mi.parse(T.body.length>Li?T.body.substr(0,Li)+"...":T.body,{renderer:new ea});N=await iu(N,t),i.appendMarkdown(N)}}return i}function Ch(t){switch(t.state){case We.Open:return t instanceof ar?"$(git-pull-request)":"$(issues)";case We.Closed:return t instanceof ar?"$(git-pull-request)":"$(issue-closed)";case We.Merged:return"$(git-merge)"}}function Rh(t,e){if(t instanceof ar)return Ch(t);switch(t.state){case We.Open:return'<span style="color:#22863a;">$(issues)</span>';case We.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const su="HEAD",Th=1,Sh=2,Ph=3,au=4,qi=new Map([["upstream",Th],["ups",Sh],["origin",Ph]]);async function Nh(t,e){var r,n,i;const s=((r=t.state.HEAD)==null?void 0:r.upstream)&&!qi.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let l;const h=t.state.remotes.map(q=>({name:q.name,remote:q})).filter(q=>(q.name===s&&(l=q.remote),qi.has(q.name))).sort((q,$)=>{var V,Y;const Q=(V=qi.get(q.name))!=null?V:au,ee=(Y=qi.get($.name))!=null?Y:au;return Q-ee});s&&h.push({name:s,remote:l});const b=[su];((n=t.state.HEAD)==null?void 0:n.name)&&t.state.HEAD.name!==su&&b.unshift((i=t.state.HEAD)==null?void 0:i.name);let T,N;for(let q=0;q<b.length&&!T;q++)for(let $=0;$<h.length&&!T;$++){const V=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${h[$].name}/${b[q]}`,count:1})).filter(Y=>Y.remote&&Y.name);V&&V.length>0&&(T=V[0],N=h[$].remote)}return N}async function Js(t,e){let r,n;if(!e&&o.window.activeTextEditor)r=o.window.activeTextEditor.document,n=o.window.activeTextEditor.selection;else if(e)r=e.document,n=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from."};const i=Oo(t,r.uri);if(!i)return{permalink:void 0,error:"The current file isn't part of repository."};const s=await i.log({maxEntries:1,path:r.uri.fsPath});if(s.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file."};const l=new Promise(T=>{var N;if((N=i.state.HEAD)==null?void 0:N.upstream)for(const q of i.state.remotes)i.state.HEAD.upstream.remote===q.name&&T(q);T(void 0)});let h=await Promise.race([Nh(i,s[0]),new Promise(T=>{setTimeout(()=>{T(l)},2e3)})]);if((!h||!h.fetchUrl)&&(h=await l,!h||!h.fetchUrl))return{permalink:void 0,error:"There is no suitable remote."};const b=r.uri.path.substring(i.rootUri.path.length);return{permalink:`https://github.com/${new Be(h.fetchUrl).nameWithOwner}/blob/${s[0].hash}${b}#L${n.start.line+1}-L${n.end.line+1}`,error:void 0}}function Ih(t){const e=/[~^:;'".,~#?%*[\]@\\{}]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const Dh=/\$\{(.*?)\}/g;async function Ui(t,e,r,n){return t.replace(Dh,(i,s)=>{switch(s){case"user":return n||i;case"issueNumber":return e?`${e.number}`:i;case"issueNumberLabel":return e?`${cn(e,r)}`:i;case"issueTitle":return e?e.title:i;case"repository":return r?r.repo:i;case"owner":return r?r.owner:i;case"sanitizedIssueTitle":return e?Ih(e.title):i;default:return i}})}function cn(t,e){const r={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(r.owner=t.remote.owner,r.name=t.remote.repositoryName),ou(r)}function ou(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function uu(t,e,r){var n;const i=await((n=e.currentIssue(t.repository.rootUri))==null?void 0:n.getCommitMessage());if(i)return t.repository.commit(i,{all:r})}const lu="Commit Staged",cu="Commit All";async function Ah(t,e,r){var n,i;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const s=[];switch(t.repository.state.indexChanges&&s.push(lu),t.repository.state.workingTreeChanges&&s.push(cu),await o.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...s)){case lu:{await uu(t,r,!1);break}case cu:{await uu(t,r,!0);break}default:return!1}}if((n=t.repository.state.HEAD)==null?void 0:n.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let s;return t.repository.state.remotes.length===1?s=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(s=await o.window.showQuickPick(t.repository.state.remotes.map(l=>l.name),{placeHolder:"Remote to push to"})),s?(await t.repository.push(s,(i=t.repository.state.HEAD)==null?void 0:i.name,!0),await e.createPullRequest(void 0),!0):(o.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function Zs(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await o.languages.getTokenInformationAtPosition(t,e)).type!==o.StandardTokenType.Comment)}async function du(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:Zs(t,e)}function hu(t){const e=new un.URLSearchParams(t.query).get("rootUri");return e?o.Uri.parse(e):void 0}class ea extends Mi.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,r,n,i){return e+" "}hr(){return""}list(e,r,n){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,r){return e+" "+r}tablerow(e){return e}tablecell(e,r){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,r,n){return""}text(e){return e}link(e,r,n){return n+" "}}var Fh=Object.defineProperty,xh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Fh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const mu="github-pr-remote",pu="github-pr-owner-number",fu=/branch\.(.+)\.github-pr-owner-number/,Oh=/branch\.(.+)\.remote/,Ue=class{static async checkoutFromFork(t,e,r){const n=await Ue.calculateUniqueBranchNameForPR(t,e);r||(K.appendLine(`Branch ${n} is from a fork. Create a remote first.`,Ue.ID),r=await Ue.createRemote(t,e.remote,e.head.repositoryCloneUrl));const i=`${e.head.ref}:${n}`;K.debug(`Fetch ${r}/${e.head.ref}:${n} - start`,Ue.ID),await t.fetch(r,i,1),K.debug(`Fetch ${r}/${e.head.ref}:${n} - done`,Ue.ID),await t.checkout(n),await t.setBranchUpstream(n,`refs/remotes/${r}/${e.head.ref}`),await this.unshallow(t),Ue.associateBranchWithPullRequest(t,e,n)}static async fetchAndCheckout(t,e,r){if(!r.validatePullRequestModel("Checkout pull request failed"))return;const n=Ue.getHeadRemoteForPullRequest(e,r),i=r.head.repositoryCloneUrl.owner!==r.base.repositoryCloneUrl.owner;if(!n||i)return Ue.checkoutFromFork(t,r,n&&n.remoteName);const s=r.head.ref,l=n.remoteName;let h;try{if(h=await t.getBranch(s),K.debug(`Checkout ${s}`,Ue.ID),await t.checkout(s),!h.upstream){const b=`refs/remotes/${l}/${s}`;await t.setBranchUpstream(s,b)}h.behind!==void 0&&h.behind>0&&h.ahead===0&&(K.debug("Pull from upstream",Ue.ID),await t.pull())}catch(b){K.appendLine(`Branch ${l}/${s} doesn't exist on local disk yet.`,Ue.ID);const T=`refs/remotes/${l}/${s}`;K.appendLine(`Fetch tracked branch ${T}`,Ue.ID),await t.fetch(l,s,1);const N=await t.getBranch(T);await t.createBranch(s,!0,N.commit),await t.setBranchUpstream(s,T),await this.unshallow(t)}await Ue.associateBranchWithPullRequest(t,r,s)}static async unshallow(t){try{await t.pull(!0)}catch(e){K.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const r=Ue.buildPullRequestMetadata(e),n=await t.getConfigs(),i=l=>n.filter(({key:h})=>l===h).map(({value:h})=>h)[0],s=n.map(l=>{const h=fu.exec(l.key);return{branch:h&&h.length?h[1]:null,value:l.value}}).filter(l=>l.branch&&l.value===r);if(s&&s.length){const l=s[0].branch;await t.checkout(l);const h=i(`branch.${l}.remote`),b=i(`branch.${l}.merge`);await t.fetch(h,b);const T=await t.getBranch(s[0].branch);return T.behind!==void 0&&T.behind>0&&T.ahead===0&&(K.debug("Pull from upstream",Ue.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const r=Ue.buildPullRequestMetadata(e),n=await t.getConfigs(),i=n.map(s=>{const l=fu.exec(s.key);return{branch:l&&l.length?l[1]:null,value:s.value}}).find(s=>!!s.branch&&s.value===r);if(i){const s=i.branch;try{const l=`branch.${s}.remote`,h=n.filter(q=>q.key===l).map(q=>q.value);let b;h.length&&(b=h[0]);let T=!1;if(b){const q=`remote.${b}.github-pr-remote`;n.filter(V=>V.key===q&&V.value).length&&(T=!0)}let N;return T&&(N=n.some(q=>!!(Oh.exec(q.key)&&q.key!==`branch.${s}.remote`&&q.value===b))),{branch:s,remote:b,createdForPullRequest:T,remoteInUse:N}}catch(l){return{branch:s}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,r,n,i]=e;return{owner:r,repositoryName:n,prNumber:Number(i)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${pu}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const r=this.getMetadataKeyForBranch(e),n=await t.getConfig(r);return Ue.parsePullRequestMetadata(n)}catch(r){return}}static async createRemote(t,e,r){K.appendLine(`create remote for ${r}.`,Ue.ID);const n=On(t);for(const s of n)if(new Be(s.url).equals(r))return s.remoteName;const i=Ue.getUniqueRemoteName(t,r.owner);return r.update({type:e.gitProtocol.type}),await t.addRemote(i,r.toString()),await t.setConfig(`remote.${i}.${mu}`,"true"),i}static async isRemoteCreatedForPullRequest(t,e){try{K.debug(`Check if remote '${e}' is created for pull request - start`,Ue.ID);const r=await t.getConfig(`remote.${e}.${mu}`);return K.debug(`Check if remote '${e}' is created for pull request - end`,Ue.ID),r==="true"}catch(r){return!1}}static async calculateUniqueBranchNameForPR(t,e){const r=`pr/${e.author.login}/${e.number}`;let n=r,i=1;for(;;)try{await t.getBranch(n),n=`${r}-${i++}`}catch(s){break}return n}static getUniqueRemoteName(t,e){let r=e,n=1;const i=On(t);for(;i.find(s=>s.remoteName===r);)r=`${e}${n++}`;return r}static getHeadRemoteForPullRequest(t,e){return t.find(r=>r.gitProtocol&&r.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,r){K.appendLine(`associate ${r} with Pull Request #${e.number}`,Ue.ID);const n=`branch.${r}.${pu}`;await t.setConfig(n,Ue.buildPullRequestMetadata(e))}};let $t=Ue;xh($t,"ID","PullRequestGitHelper");var Mh=Object.defineProperty,$e=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Lh extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class gu extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class qh extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const hr="githubPullRequests",ta="remotes",vu="ReposManagerStateContext";var Rt;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(Rt||(Rt={}));const yu="No Milestone";var bu;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(bu||(bu={}));const Ht=class{constructor(t,e,r,n){this._repository=t,this._telemetry=e,this._git=r,this._credentialStore=n,$e(this,"_subs"),$e(this,"_activePullRequest"),$e(this,"_activeIssue"),$e(this,"_githubRepositories"),$e(this,"_allGitHubRemotes",[]),$e(this,"_mentionableUsers"),$e(this,"_fetchMentionableUsersPromise"),$e(this,"_assignableUsers"),$e(this,"_fetchAssignableUsersPromise"),$e(this,"_gitBlameCache",{}),$e(this,"_githubManager"),$e(this,"_repositoryPageInformation",new Map),$e(this,"_onDidChangeActivePullRequest",new o.EventEmitter),$e(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),$e(this,"_onDidChangeActiveIssue",new o.EventEmitter),$e(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),$e(this,"_onDidLoadRepositories",new o.EventEmitter),$e(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),$e(this,"_onDidChangeRepositories",new o.EventEmitter),$e(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),$e(this,"_onDidChangeAssignableUsers",new o.EventEmitter),$e(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),$e(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new zs,this._subs.push(o.workspace.onDidChangeConfiguration(async i=>{i.affectsConfiguration(`${hr}.${ta}`)&&await this.updateRepositories()})),this.setUpCompletionItemProvider()}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=On(this.repository).filter(r=>r.host);return Promise.all(e.map(r=>this._githubManager.isGitHub(r.gitProtocol.normalizeUri()))).then(r=>e.filter((n,i,s)=>r[i])).catch(r=>(K.appendLine(`Resolving GitHub remotes failed: ${r}`),o.window.showErrorMessage(`Resolving GitHub remotes failed: ${D(r)}`),[]))}async getActiveGitHubRemotes(t){const e=o.workspace.getConfiguration(hr).get(ta);return e?(e.forEach(r=>{t.some(n=>n.remoteName===r)||K.appendLine(`No remote with name '${r}' found.`)}),K.debug(`Displaying configured remotes: ${e.join(", ")}`,Ht.ID),e.map(r=>t.find(n=>n.remoteName===r)).filter(r=>!!r)):(K.appendLine("Unable to read remotes setting"),Promise.resolve([]))}setUpCompletionItemProvider(){let t,e=[],r=[];o.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(n,i,s)=>{try{if(JSON.parse(n.uri.query).extensionId!==xt)return;const h=n.getWordRangeAtPosition(i,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!h||h.isEmpty)return;let b=[];const T={};let N={},q,$;const V=o.window.visibleTextEditors;if(V.length){const le=V.find(ae=>ae.document.uri.scheme==="pr");if(le){const ae=qe(le.document.uri);q=ae.prNumber,$=ae.remoteName}else this._activePullRequest&&(q=this._activePullRequest.number,$=this._activePullRequest.remote.remoteName);if(t&&q&&q===t.number)return r}const Y=new Promise(async le=>{if(q&&$){if(K.debug("get Timeline Events and parse users",Ht.ID),t&&t.number===q)return e;const ae=this._githubRepositories.find(ye=>ye.remote.remoteName===$);ae&&(t=await ae.getPullRequest(q),e=await t.getTimelineEvents()),b=Fd(e),le()}le()}),Q=new Promise(async le=>{if(V.length)try{K.debug("git blame and parse users",Ht.ID);const ae=v.resolve(V[0].document.uri.fsPath);let ye;this._gitBlameCache[ae]?ye=this._gitBlameCache[ae]:(ye=await this.repository.blame(ae),this._gitBlameCache[ae]=ye);const Oe=ye.split(`
`);for(const Me of Oe){const Qe=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(Me);if(Qe&&Qe.length===2){const Ae=Qe[1].trim();T[Ae]=!0}}}catch(ae){K.debug(ae,Ht.ID)}le()}),ee=new Promise(async le=>{K.debug("get mentionable users",Ht.ID),N=await this.getMentionableUsers(),le()});await Promise.all([Y,Q,ee]),r=[];const te={};K.debug("prepare user suggestions",Ht.ID),b.forEach(le=>{te[le.login]||(te[le.login]=le)});const ue={};for(const le in N)for(const ae of N[le])if(!te[ae.login]&&!ue[ae.login]){ue[ae.login]=!0;let ye=2;(T[ae.login]||ae.name&&T[ae.name])&&(ye=1),te[ae.login]&&(ye=0),r.push({label:ae.login,insertText:ae.login,filterText:`${ae.login}`+(ae.name&&ae.name!==ae.login?`_${ae.name.toLowerCase().replace(" ","_")}`:""),sortText:`${ye}_${ae.login}`,detail:ae.name,kind:o.CompletionItemKind.User,login:ae.login,uri:this.repository.rootUri})}for(const le in te)ue[le]||r.push({label:te[le].login,insertText:`${te[le].login}`,filterText:`${te[le].login}`+(te[le].name&&te[le].name!==te[le].login?`_${te[le].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${te[le].login}`,detail:te[le].name,kind:o.CompletionItemKind.User,login:te[le].login,uri:this.repository.rootUri});return K.debug("done",Ht.ID),r}catch(l){return[]}},resolveCompletionItem:async(n,i)=>{try{const s=await this.getPullRequestDefaults(),l=await this.resolveUser(s.owner,s.repo,n.label);l&&(n.documentation=Ys(s,l))}catch(s){}return n}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await o.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),K.appendLine("Found GitHub remote")):(await o.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),K.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){if(this._git.state==="uninitialized"){K.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),r=this._credentialStore.isAuthenticated();o.commands.executeCommand("setContext","github:authenticated",r);const n=[],i=[];return(r?e:[]).forEach(l=>{const h=this.createGitHubRepository(l,this._credentialStore);i.push(h.resolveRemote()),n.push(h)}),Promise.all(i).then(l=>{const h=this._githubRepositories;this._githubRepositories=n,h.forEach(T=>T.dispose());const b=h.length!==this._githubRepositories.length||!h.every(T=>this._githubRepositories.some(N=>N.remote.equals(T.remote)));return this._githubRepositories.length&&b&&this.checkIfMissingUpstream(),this.getMentionableUsers(b),this.getAssignableUsers(b),this._onDidLoadRepositories.fire(r||!e.length?Rt.RepositoriesLoaded:Rt.NeedsAuthentication),t||this._onDidChangeRepositories.fire(),Promise.resolve()})}async checkIfMissingUpstream(){try{const e=await(await this.getOrigin()).getMetadata();if(e.fork){const r=new Be(e.parent.git_url);if(!this._githubRepositories.some(i=>i.remote.owner===r.owner&&i.remote.repositoryName===r.repositoryName)){const s=!this.repository.state.remotes.some(l=>l.name==="upstream")?"upstream":e.parent.owner.login;await this.repository.addRemote(s,e.parent.git_url)}}}catch(t){K.appendLine(`Missing upstream check failed: ${t}`)}}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}async getMentionableUsers(t){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;if(!this._fetchMentionableUsersPromise){const e={};return this._fetchMentionableUsersPromise=new Promise(r=>{const n=this._githubRepositories.map(async i=>{const s=await i.getMentionableUsers();e[i.remote.remoteName]=s});Promise.all(n).then(()=>{this._mentionableUsers=e,this._fetchMentionableUsersPromise=void 0,r(e)})})}return this._fetchMentionableUsersPromise}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},r=[];return this._fetchAssignableUsersPromise=new Promise(n=>{const i=this._githubRepositories.map(async s=>{const l=await s.getAssignableUsers();e[s.remote.remoteName]=l.sort(Fo),r.push(...l)});Promise.all(i).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,n(e),this._onDidChangeAssignableUsers.fire(r)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const r=this.repository.state.refs.filter(n=>n.type===ge.Head&&n.name!==void 0).map(n=>n.name).map(async n=>{const i=await $t.getMatchingPullRequestMetadataForBranch(this.repository,n);if(i){const{owner:s,prNumber:l}=i,h=t.find(b=>b.remote.owner.toLocaleLowerCase()===s.toLocaleLowerCase());if(h){const b=await h.getPullRequest(l);if(b)return b.localBranchName=n,b}}return Promise.resolve(null)});return Promise.all(r).then(n=>n.filter(i=>i!==null))}async getLabels(t,e){const r=t?t.githubRepository:this._githubRepositories.find(b=>b.remote.owner===(e==null?void 0:e.owner)&&b.remote.repositoryName===(e==null?void 0:e.repo));if(!r)throw new Error("No matching repository found for getting labels.");const{remote:n,octokit:i}=await r.ensure();let s=!1,l=1,h=[];do{const b=await i.issues.listLabelsForRepo({owner:n.owner,repo:n.repositoryName,per_page:100,page:l});h=h.concat(b.data.map(T=>({name:T.name,color:T.color}))),h=h.sort((T,N)=>T.name.localeCompare(N.name)),s=!!b.headers.link&&b.headers.link.indexOf('rel="next"')>-1,l+=1}while(s);return h}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let r;try{r=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(i){}if(!r)return;await $t.isRemoteCreatedForPullRequest(this.repository,r)&&((await this.repository.getConfigs()).some(({key:l,value:h})=>/^branch.*\.remote$/.test(l)&&h===r)||await this.repository.removeRemote(r)),this._telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,r=0,n=st.All,i){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const s=()=>this.totalFetchedPages.get(e)||0,l=q=>this.totalFetchedPages.set(e,q);for(const q of this._githubRepositories){const $=q.remote.url.toString()+e;this._repositoryPageInformation.get($)||this._repositoryPageInformation.set($,{pullRequestPage:0,hasMorePages:null})}let h=0;const b={hasMorePages:!1,items:[]},T=q=>{h++,q&&(b.items=b.items.concat(q.items),b.hasMorePages=q.hasMorePages)},N=this._githubRepositories.filter(q=>{const $=this._repositoryPageInformation.get(q.remote.url.toString()+e);return $&&(t.fetchNextPage===!1||$.hasMorePages!==!1)});for(let q=0;q<N.length;q++){const $=N[q],V=$.remote.url.toString()+e,Y=this._repositoryPageInformation.get(V),Q=async ee=>{switch(r){case 0:return n===st.All?$.getAllPullRequests(ee):$.getPullRequestsForCategory(i||"",ee);case 1:return $.getIssuesForUserByMilestone(Y.pullRequestPage);case 2:return $.getIssuesWithoutMilestone(Y.pullRequestPage);case 3:return $.getIssues(Y.pullRequestPage,i)}};if(t.fetchNextPage?(Y.pullRequestPage++,T(await Q(Y.pullRequestPage)),l(s()+1)):(Y.pullRequestPage===0&&(Y.pullRequestPage=1),(await Promise.all(Array.from({length:Y.pullRequestPage}).map((te,ue)=>Q(ue+1)))).forEach(te=>T(te))),Y.hasMorePages=b.hasMorePages,b.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&h>=s()))return s()===0&&l(h),{items:b.items,hasMorePages:Y.hasMorePages,hasUnsearchedRepositories:q<N.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},r){const n=t.toString()+(r||"");return this.fetchPagedData(e,n,0,t,r)}async getMilestones(t={fetchNextPage:!1},e=!1,r){const n=await this.fetchPagedData(t,"issuesKey",1,st.All,r);if(e){const i=await this.fetchPagedData(t,"issuesKey",2,st.All,r);n.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:yu},issues:i.items})}return n}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,st.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(r=>r.getMaxIssue()));let e=0;for(const r of t)r!==void 0&&(e=Math.max(e,r));return e}async getPullRequestTemplates(){const t=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),r=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"PULL_REQUEST_TEMPLATE/*.md")),n=await o.workspace.findFiles(new o.RelativePattern(this._repository.rootUri.path,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...r,...n]}async getPullRequestDefaults(t){if(!t&&!this.repository.state.HEAD)throw new gu(this.repository);const e=await this.getOrigin(t),r=await e.getMetadata(),n=r.fork?r.parent:await(this.findRepo(hn("upstream"))||e).getMetadata();return{owner:n.owner.login,repo:n.name,base:n.default_branch}}async getMetadata(t){const e=this.findRepo(hn(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:r}=await e.getBranch(t);if(r){const{message:n}=await e.getCommit(r);return n}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new Lh(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const i=this.findRepo(hn(e.remote));if(!i){const s=(await this.getAllGitHubRemotes()).find(l=>l.remoteName===e.remote);if(s)return new rn(s,this._credentialStore,this._telemetry);throw K.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new qh(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return i}const[r,...n]=this._githubRepositories;return n.length&&(this.findRepo(hn("origin"))||this.findRepo(Uh))||r}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,r;const n=this._githubRepositories.find(i=>i.remote.owner===t.owner&&i.remote.repositoryName===t.repo);if(!n)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const i=await n.createPullRequest(t),s=t.head.indexOf(":"),l=t.head.slice(s+1);return await $t.associateBranchWithPullRequest(this._repository,i,l),this._telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),i}catch(i){if(i.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await o.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await o.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await o.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((r=this._repository.state.HEAD)==null?void 0:r.upstream))return await o.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(n.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw K.appendLine(`GitHubRepository> Creating pull requests failed: ${i}`),this._telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(D(i))}}async createIssue(t){try{const e=this._githubRepositories.find(s=>s.remote.owner===t.owner&&s.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:r}=await e.octokit.issues.create(t),n=Td(r,e),i=new ot(e,e.remote,n);return this._telemetry.sendTelemetryEvent("issue.create.success"),i}catch(e){K.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this._telemetry.sendTelemetryErrorEvent("issue.create.failure"),o.window.showWarningMessage(`Creating issue failed: ${D(e)}`)}}async assignIssue(t,e){try{const r=this._githubRepositories.find(i=>i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName);if(!r)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await r.ensure();const n={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await r.octokit.issues.addAssignees(n),this._telemetry.sendTelemetryEvent("issue.assign.success")}catch(r){K.appendLine(`GitHubRepository> Assigning issue failed: ${r}`),this._telemetry.sendTelemetryErrorEvent("issue.assign.failure"),o.window.showWarningMessage(`Assigning issue failed: ${D(r)}`)}}getCurrentUser(t){return Pr(this._credentialStore.getCurrentUser(),t.githubRepository)}async mergePullRequest(t,e,r,n){const{octokit:i,remote:s}=await t.githubRepository.ensure(),l=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,h=this.repository.state.HEAD&&this.repository.state.HEAD.commit,b=t.head&&t.head.sha,T=this.repository.state.workingTreeChanges.length>0;if(l===b){if(h!==b){const{ahead:N}=this.repository.state.HEAD;if(N&&await o.window.showWarningMessage(`You have ${N} unpushed ${N>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(T&&await o.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await i.pulls.merge({commit_message:r,commit_title:e,merge_method:n||o.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:s.owner,repo:s.repositoryName,pull_number:t.number}).then(N=>(this._telemetry.sendTelemetryEvent("pr.merge.success"),N.data)).catch(N=>{throw this._telemetry.sendTelemetryErrorEvent("pr.merge.failure"),N})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const s=i.key,l=/^branch\.(.*)\.(.*)$/.exec(s);if(l&&l.length===3){const h=l[1];e.has(h)||e.set(h,{});const b=e.get(h);if(l[2]==="remote"&&(b.remote=i.value),l[2]==="github-pr-owner-number"){const T=$t.parsePullRequestMetadata(i.value);b.metadata=T}e.set(h,b)}});const r=[];e.forEach((i,s)=>{if(i.metadata){const l=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(l?l.owner===i.metadata.owner&&l.repositoryName===i.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===i.metadata.prNumber:!1)||r.push({label:`${s}`,description:`${i.metadata.repositoryName}/${i.metadata.owner} #${i.metadata.prNumber}`,picked:!1,metadata:i.metadata})}});const n=await Promise.all(r.map(async i=>{const s=i.metadata,l=this._githubRepositories.find(N=>N.remote.owner.toLowerCase()===s.owner.toLowerCase()&&N.remote.repositoryName.toLowerCase()===s.repositoryName.toLowerCase());if(!l)return i;const{remote:h,query:b,schema:T}=await l.ensure();try{const{data:N}=await b({query:T.PullRequestState,variables:{owner:h.owner,name:h.repositoryName,number:s.prNumber}});i.legacy=N.repository.pullRequest.state!=="OPEN"}catch{}return i}));return n.forEach(i=>{i.legacy?i.picked=!0:i.description=`${i.description} is still Open`}),n}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const i=n.key;let s=/^branch\.(.*)\.(.*)$/.exec(i);if(s&&s.length===3){const l=s[1];if(s[2]==="remote"){const h=n.value;e.has(h)||e.set(h,{branches:new Set}),e.get(h).branches.add(l)}}if(s=/^remote\.(.*)\.(.*)$/.exec(i),s&&s.length===3){const l=s[1];e.has(l)||e.set(l,{branches:new Set});const h=e.get(l);s[2]==="github-pr-remote"&&(h.createdForPullRequest=n.value==="true"),s[2]==="url"&&(h.url=n.value)}});const r=[];return e.forEach((n,i)=>{if(n.branches.size===0){let s=n.createdForPullRequest?"":"Not created by GitHub Pull Request extension";n.url&&(s=s?s+" "+n.url:n.url),r.push({label:i,description:s,picked:n.createdForPullRequest,remote:i})}}),r}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=o.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const r=await this.getBranchDeletionItems();e.items=r,e.selectedItems=r.filter(i=>i.picked),e.busy=!1;let n=!0;e.onDidAccept(async()=>{if(n){const i=e.selectedItems;if(i.length){e.busy=!0;try{await Promise.all(i.map(async l=>{await this.repository.deleteBranch(l.label,!0)})),e.busy=!1}catch(l){e.hide(),o.window.showErrorMessage(`Deleting branches failed: ${l}`)}}n=!1,e.busy=!0;const s=await this.getRemoteDeletionItems();s?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=s,e.selectedItems=s.filter(l=>l.picked)):e.hide()}else{const i=e.selectedItems;i.length&&(e.busy=!0,await Promise.all(i.map(async s=>{await this.repository.removeRemote(s.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fullfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;K.debug("Fullfill pull request missing info - start",Ht.ID);const e=t.githubRepository,{octokit:r,remote:n}=await e.ensure();if(!t.base){const{data:i}=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:t.number});t.update(Gr(i,e))}if(!t.mergeBase){const{data:i}=await r.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=i.merge_base_commit.sha}}catch(e){o.window.showErrorMessage(`Fetching Pull Request merge base failed: ${D(e)}`)}K.debug("Fullfill pull request missing info - done",Ht.ID)}async resolveItem(t,e){let r=this._githubRepositories.find(n=>n.remote.owner.toLowerCase()===t.toLowerCase()&&n.remote.repositoryName.toLowerCase()===e.toLowerCase());return r||(r=this.createGitHubRepositoryFromOwnerName(t,e)),r}async resolvePullRequest(t,e,r){const n=await this.resolveItem(t,e);if(n)return n.getPullRequest(r)}async resolveIssue(t,e,r,n=!1){const i=await this.resolveItem(t,e);if(i)return i.getIssue(r,n)}async resolveUser(t,e,r){K.debug(`Fetch user ${r}`,Ht.ID);const n=this.createGitHubRepositoryFromOwnerName(t,e),{query:i,schema:s}=await n.ensure();try{const{data:l}=await i({query:s.GetUser,variables:{login:r}});return Dd(l)}catch(l){console.log(l)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await $t.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await $t.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await $t.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await $t.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async checkoutDefaultBranch(t){try{const e=await this.repository.getBranch(t);e.upstream&&t===e.upstream.name?await this.repository.checkout(t):await o.commands.executeCommand("git.checkout")}catch(e){if(e.gitErrorCode&&e.gitErrorCode===_e.DirtyWorkTree){o.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}o.window.showErrorMessage(`Exiting failed: ${e}`)}}createGitHubRepository(t,e){return new rn(t,e,this._telemetry)}createGitHubRepositoryFromOwnerName(t,e){const r=`https://github.com/${t}/${e}`;return new rn(new Ei(e,r,new Be(r)),this._credentialStore,this._telemetry)}async findUpstreamForItem(t){let e,r;for(const i of this.gitHubRepositories){if(!e&&i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName){e=i;continue}const s=await i.getRepositoryForkDetails();if(s&&s.isFork&&s.parent.owner===t.remote.owner&&s.parent.name===t.remote.repositoryName){const l=await i.getViewerPermission();if(l===_t.Admin||l===_t.Maintain||l===_t.Write){r=i.remote;break}}}let n=!1;if(e&&!r){const i=await t.githubRepository.getViewerPermission();(i===_t.Read||i===_t.Triage||i===_t.Unknown)&&(n=!0)}return{needsFork:n,upstream:e,remote:r}}async forkWithProgress(t,e,r,n){t.report({message:`Forking ${r}...`});const i=await e.fork();if(t.report({increment:50}),!i){o.window.showErrorMessage(`Unable to create a fork of ${r}. Check that your GitHub credentials are correct.`);return}const s=n.state.remotes.length>1?"origin":n.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await n.renameRemote(s,"upstream"),await n.addRemote(s,i),await new Promise(l=>{if(this.gitHubRepositories.length===0){const h=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(h.dispose(),l())})}else l()}),t.report({increment:50}),s}async doFork(t,e,r){return o.window.withProgress({location:o.ProgressLocation.Notification,title:"Creating Fork"},async n=>{try{return this.forkWithProgress(n,t,e,r)}catch(i){o.window.showErrorMessage(`Creating fork failed: ${i}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,r="Fork",n="Don't Fork";switch(await o.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},r,n)){case r:return this.doFork(t,e,this.repository);case n:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let dn=Ht;$e(dn,"ID","FolderRepositoryManager");function fv(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const Uh=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},hn=t=>({remote:{remoteName:e}})=>e===t,wu=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};var $h=Object.defineProperty,Tt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Hh extends qo{constructor(e,r,n,i){super();this._extensionUri=e,this._folderRepositoryManager=r,this._pullRequestDefaults=n,Tt(this,"viewType","github:createPullRequest"),Tt(this,"_onDone",new o.EventEmitter),Tt(this,"onDone",this._onDone.event),Tt(this,"_onDidChangeBaseRemote",new o.EventEmitter),Tt(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),Tt(this,"_onDidChangeBaseBranch",new o.EventEmitter),Tt(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),Tt(this,"_onDidChangeCompareRemote",new o.EventEmitter),Tt(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),Tt(this,"_onDidChangeCompareBranch",new o.EventEmitter),Tt(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),Tt(this,"_firstLoad",!0),Tt(this,"_compareBranch"),this._compareBranch=i}resolveWebviewView(e,r,n){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){var r,n;((e==null?void 0:e.name)!==this._compareBranch.name||((r=e==null?void 0:e.upstream)==null?void 0:r.remote)!==((n=this._compareBranch.upstream)==null?void 0:n.remote))&&(this._compareBranch=e,this.initializeParams(!0),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}show(e){e&&(this.compareBranch=e),super.show()}async getTitle(){var e,r;const n=await this._folderRepositoryManager.getOrigin(this._compareBranch);let i=!1;if(this.compareBranch.upstream){const s=this._folderRepositoryManager.findRepo(hn(this.compareBranch.upstream.remote));if(s){const l=`${s.remote.owner}:${(e=this.compareBranch.name)!=null?e:""}`;i=(await n.compareCommits(this._pullRequestDefaults.base,l)).total_commits>1}}return i?(r=this.compareBranch.name)!=null?r:"":this.compareBranch.name?wu(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await o.workspace.fs.readFile(e[0])).toString()}catch(r){K.appendLine(`Reading pull request template failed: ${r}`);return}}async getDescription(){const e=await this.getPullRequestTemplate();return e||(this.compareBranch.name?wu(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body:"")}async initializeParams(e=!1){var r,n;if(!this.compareBranch)throw new gu(this._folderRepositoryManager.repository);const i={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},s=await this._folderRepositoryManager.getOrigin(this.compareBranch),l={owner:s.remote.owner,repositoryName:s.remote.repositoryName},[h,b,T,N]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),q=h.map(V=>({owner:V.owner,repositoryName:V.repositoryName}));let $=b;l.owner!==i.owner&&($=await this._folderRepositoryManager.listBranches(l.owner,l.repositoryName)),this.compareBranch.name&&!$.includes(this.compareBranch.name)&&($.push(this.compareBranch.name),$.sort()),this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:q,defaultBaseRemote:i,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:l,defaultCompareBranch:(r=this.compareBranch.name)!=null?r:"",branchesForRemote:b,branchesForCompare:$,defaultTitle:T,defaultDescription:N,compareBranch:(n=this.compareBranch.name)!=null?n:"",isDraft:!1}})}async changeRemote(e,r){const{owner:n,repositoryName:i}=e.args,s=this._folderRepositoryManager.findRepo(b=>n===b.remote.owner&&i===b.remote.repositoryName);if(!s)throw new Error("No matching GitHub repository found.");const l=await s.getDefaultBranch(),h=await this._folderRepositoryManager.listBranches(n,i);return!r&&this.compareBranch.name&&!h.includes(this.compareBranch.name)&&(h.push(this.compareBranch.name),h.sort()),r?(this._onDidChangeBaseRemote.fire({owner:n,repositoryName:i}),this._onDidChangeBaseBranch.fire(l)):(this._onDidChangeCompareRemote.fire({owner:n,repositoryName:i}),this._onDidChangeCompareBranch.fire(l)),this._replyMessage(e,{branches:h,defaultBranch:l})}async create(e){var r,n;try{let i,s;if(!this.compareBranch.name){this._throwError(e,"Please create a branch.");return}if(this.compareBranch.type===ge.RemoteHead){const T=this.compareBranch.name.indexOf("/");i=this.compareBranch.name.substring(T+1),s=this.compareBranch.name.substring(0,T)}else i=this.compareBranch.name,s=(r=this.compareBranch.upstream)==null?void 0:r.remote;if(!s)if(await o.window.showInformationMessage(`There is no upstream branch for '${i}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch")await o.commands.executeCommand("git.publish"),this._folderRepositoryManager.repository.state.HEAD&&(this.compareBranch=this._folderRepositoryManager.repository.state.HEAD,s=(n=this.compareBranch.upstream)==null?void 0:n.remote);else{this._throwError(e,"No upstream for the compare branch.");return}const l=this._folderRepositoryManager.findRepo(hn(s));if(!l)throw new Error(`Unable to find GitHub repository matching '${s}'.`);const h=`${l.remote.owner}:${i}`,b=await this._folderRepositoryManager.createPullRequest({...e.args,head:h});b?(await this._replyMessage(e,{}),await $t.associateBranchWithPullRequest(this._folderRepositoryManager.repository,b,i),this._onDone.fire(b)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(i){this._throwError(e,i.message)}}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":o.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0);return;case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":this._onDidChangeBaseBranch.fire(e.args);return;case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":this._onDidChangeCompareBranch.fire(e.args);return;default:o.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=$s(),r=o.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}function It(t){return t===void 0||t===0?0:t-1}function _u(t,e,r){let n=-1;if(t.position!==null){const i=jr(e,t.position);i&&(r&&i.type===Ge.Delete&&(n=i.oldLineNumber),!r&&i.type!==Ge.Delete&&(n=i.newLineNumber))}return n}function Gh(t){let e;const r=Ot(t);let n=r.next();for(;!n.done;){const i=n.value;e=i.diffLines[i.diffLines.length-1],n=r.next()}return e}function jr(t,e){for(let r=0;r<t.length;r++){const n=t[r];for(let i=0;i<n.diffLines.length;i++)if(n.diffLines[i].positionInHunk===e)return n.diffLines[i]}}function ku(t,e,r,n=!1){const i=Ot(e);let s=i.next(),l=r;for(;!s.done;){const b=s.value;if(b.oldLineNumber>r)break;l+=b.oldLength-b.newLength,s=i.next()}const h=-1;for(let b=0;b<t.length;b++){const T=t[b];for(let N=0;N<T.diffLines.length;N++)if(n){if(T.diffLines[N].oldLineNumber===l)return T.diffLines[N].positionInHunk}else if(T.diffLines[N].newLineNumber===l)return T.diffLines[N].positionInHunk}return h}function $i(t,e){const r=Ot(t);let n=r.next(),i=0;for(;!n.done;){const s=n.value;if(!(s.oldLineNumber>e))if(s.oldLineNumber+s.oldLength-1<e)i+=s.newLength-s.oldLength;else return i+=s.newLength-s.oldLength,e+i;n=r.next()}return e+i}function Bh(t,e,r){for(let n=0;n<r.length;n++){const i=r[n];if(i.position===null||i.position===void 0)continue;const s=jr(t,i.position);if(s){if(s.type===Ge.Delete)continue;const l=$i(e,s.newLineNumber);i.absolutePosition=l}}return r}var Vh=Object.defineProperty,ra=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class jh{constructor(){ra(this,"fileHasComments",new Map),ra(this,"_onDidChangeFileDecorations",new o.EventEmitter),ra(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,r,n,i){const s=`${r}:${n}`;this.fileHasComments.get(s)!==i&&(this.fileHasComments.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,r){const n=_r(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileHasComments.get(i))return{propagate:!1,tooltip:"Commented",badge:"\u25C6"}}}}const Eu=new jh;var zh=Object.defineProperty,na=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class bt{constructor(){na(this,"childrenDisposables"),na(this,"parent"),na(this,"label")}getParent(){if(this.parent instanceof bt)return this.parent}async reveal(e,r){return this.parent.reveal(e||this,r)}async getChildren(){return[]}dispose(){this.childrenDisposables&&this.childrenDisposables.forEach(e=>e.dispose())}}var Qh=Object.defineProperty,ut=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Cu(t){const e=o.window.activeTextEditor,r={preserveFocus:!0,viewColumn:o.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(r.selection=e.selection),{command:"vscode.open",arguments:[t,r],title:"Open File"}}class Dr extends bt{constructor(e,r,n,i,s,l,h,b){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.previousFileName=s,this.blobUrl=l,this.filePath=h,this.parentFilePath=b,ut(this,"description"),ut(this,"iconPath"),ut(this,"command"),ut(this,"resourceUri"),ut(this,"contextValue"),this.contextValue=`filechange:${ke[n]}`,this.label=v.basename(i),this.description=v.relative(".",v.dirname(i)),this.iconPath=o.ThemeIcon.File,this.resourceUri=ai(o.Uri.parse(this.blobUrl),r.number,i,n),this.command={title:"show remote file",command:"pr.openDiffView",arguments:[this]}}getTreeItem(){return this}}class Ru extends bt{constructor(e,r,n,i,s,l,h,b,T,N){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.blobUrl=s,this.filePath=l,this.parentFilePath=h,this.diffHunks=b,this.comments=T,this.sha=N,ut(this,"description"),ut(this,"iconPath"),ut(this,"resourceUri"),ut(this,"parentSha"),ut(this,"contextValue"),ut(this,"command"),ut(this,"opts"),this.contextValue=`filechange:${ke[n]}`,this.label=v.basename(i),this.description=v.relative(".",v.dirname(i)),this.iconPath=o.ThemeIcon.File,this.opts={preserveFocus:!0},this.update(this.comments),this.resourceUri=ai(o.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status)}findFirstActiveComment(){let e;return this.comments.forEach(r=>{if(!e&&r.position){e=r;return}e&&r.position&&r.position<e.position&&(e=r)}),e}update(e){if(this.comments=e,Eu.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,e.length>0),e&&e.length){const r=this.findFirstActiveComment();if(r){const n=jr(this.diffHunks,r.position===void 0?r.originalPosition:r.position);if(n){const i=Math.max(It(n.type===Ge.Delete?n.oldLineNumber:n.newLineNumber),0);this.opts.selection=new o.Range(i,0,i,0)}}}else delete this.opts.selection}getCommentPosition(e){const r=jr(this.diffHunks,e.position===void 0?e.originalPosition:e.position);return r?Math.max(It(r.type===Ge.Delete?r.oldLineNumber:r.newLineNumber),0):0}getTreeItem(){return this}openFileCommand(){return Cu(this.filePath)}async openDiffCommand(e){const r=this.parentFilePath,n=this.filePath,i=this.opts;let s=await Tn(r,e.repository)||r,l=await Tn(n,e.repository)||n;(s.scheme==="data"||l.scheme==="data")&&(this.status===ke.ADD&&(s=si),this.status===ke.DELETE&&(l=si));const h=n.path.split("/");return{command:"vscode.diff",arguments:[s,l,`${h[h.length-1]} (Pull Request)`,i],title:"Open Changed File in PR"}}async openDiff(e){var r;const n=await this.openDiffCommand(e);o.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}}class Hi extends Ru{constructor(e,r,n,i,s,l,h,b,T,N,q,$,V){super(e,r,n,i,l,h,b,q,$,V);this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.previousFileName=s,this.blobUrl=l,this.filePath=h,this.parentFilePath=b,this.isPartial=T,this.patch=N,this.diffHunks=q,this.comments=$,this.sha=V,this.command={title:"show diff",command:"pr.openDiffView",arguments:[this]}}}class mn extends Ru{constructor(e,r,n,i,s,l,h,b,T,N=[],q){super(e,n,i,s,l,h,b,T,N,q);this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.status=i,this.fileName=s,this.blobUrl=l,this.filePath=h,this.parentFilePath=b,this.diffHunks=T,this.comments=N,this.sha=q,ut(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===ke.DELETE||this.status===ke.ADD){const T=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===ke.DELETE?[this.parentFilePath,T,`${this.fileName}`,{preserveFocus:!0}]:[T,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:r,commit:n,rootPath:i}=kt(this.filePath),s=`${n}^`,l={path:e,ref:r,commit:s,base:!0,isOutdated:!0,rootPath:i},h=this.filePath.with({query:JSON.stringify(l)}),b={preserveFocus:!0};if(this.comments&&this.comments.length){const T=this.comments.filter(N=>N.position===void 0).sort((N,q)=>N.originalPosition-q.originalPosition);if(T.length){const N=jr(this.diffHunks,T[0].originalPosition);if(N){const q=Math.max(It(N.type===Ge.Delete?N.oldLineNumber:N.newLineNumber),0);b.selection=new o.Range(q,0,q,0)}}}return{command:"vscode.diff",arguments:[h,this.filePath,`${this.fileName} from ${(n||"").substr(0,8)}`,b],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():o.workspace.getConfiguration().get("git.openDiffOnClick")?this.command=await this.openDiffCommand(this.pullRequestManager):this.command=this.openFileCommand()}}class Wh extends bt{constructor(e,r,n,i,s,l){super();this.parent=e,this.fileName=r,this.previousFileName=n,this.status=i,this.baseBranch=s,this.headBranch=l,ut(this,"description"),ut(this,"iconPath"),ut(this,"resourceUri"),ut(this,"command"),this.label=r,this.iconPath=o.ThemeIcon.File,this.resourceUri=o.Uri.file(r).with({scheme:"github",query:JSON.stringify({status:i,fileName:r})});let h=o.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:s})}),b=o.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:l})});switch(i){case ke.ADD:h=o.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:s,isEmpty:!0})});break;case ke.RENAME:h=o.Uri.file(n).with({scheme:"github",query:JSON.stringify({fileName:n,branch:s,isEmpty:!0})});break;case ke.DELETE:b=o.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:l,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[h,b,`${r} (Pull Request Preview)`]}}getTreeItem(){return this}}function pn(t){return t.filter(e=>e instanceof mn)}var Kh=Object.defineProperty,fn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Kh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Yh{constructor(e,r,n,i,s,l,h){this.repository=e,this.baseOwner=r,this.baseBranchName=n,this._compareOwner=i,this.compareBranchName=s,this.compareHasUpstream=l,this.folderRepoManager=h,fn(this,"_view"),fn(this,"_onDidChangeTreeData",new o.EventEmitter),fn(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),fn(this,"_contentProvider"),fn(this,"_disposables",[]),fn(this,"_gitHubRepository"),this._view=o.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(b=>b.remote.owner===this._compareOwner),this._disposables.push(this._view)}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var r;if(((r=this.repository.state.HEAD)==null?void 0:r.name)===e){const n=await this.repository.getBranch(e);this.compareHasUpstream=!!n.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(r=>r.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)o.commands.executeCommand("setContext","github:noUpstream",!1);else return o.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new Xh(this._gitHubRepository),this._disposables.push(o.workspace.registerTextDocumentContentProvider("github",this._contentProvider)));const{octokit:e,remote:r}=await this._gitHubRepository.ensure();try{const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return n.files.length?this._view.message=void 0:this._view.message=`The are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,n.files.map(i=>new Wh(this._view,i.filename,i.previous_filename,Nn(i.status),n.merge_base_commit.sha,this.compareBranchName))}catch(n){return K.appendLine(`Comparing changes failed: ${n}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose())}}class Xh{constructor(e){this.gitHubRepository=e}async provideTextDocumentContent(e,r){var n;const i=ts(e);if(!i||i.isEmpty)return"";const{octokit:s,remote:l}=await this.gitHubRepository.ensure(),h=await s.repos.getContent({owner:l.owner,repo:l.repositoryName,path:i.fileName,ref:i.branch}),b=(n=h.data.content)!=null?n:"";return Buffer.from(b,h.data.encoding).toString()}}var Jh=Object.defineProperty,qn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Jh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Zh{constructor(e){this.repository=e,qn(this,"_disposables",[]),qn(this,"_createPRViewProvider"),qn(this,"_treeView"),qn(this,"_onDidCreate",new o.EventEmitter),qn(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async r=>{var n,i;o.commands.executeCommand("setContext","github:createPullRequest",!1),(n=this._createPRViewProvider)==null||n.dispose(),this._createPRViewProvider=void 0,(i=this._treeView)==null||i.dispose(),this._treeView=void 0,this._disposables.forEach(s=>s.dispose()),r&&this._onDidCreate.fire(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(r=>{var n;(n=this._treeView)==null||n.updateCompareBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(r=>{this._treeView&&(this._treeView.compareOwner=r.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(r=>{var n;(n=this._treeView)==null||n.updateBaseBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(r=>{var n;(n=this._treeView)==null||n.updateBaseOwner(r.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(r=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,r){if(e.gitHubRepositories.some(n=>n.remote.owner===r.owner&&n.remote.repositoryName===r.repo))return r;{const n=await e.getOrigin(),i=await e.getMetadata(n.remote.remoteName);return{owner:i.owner.login,repo:i.name,base:i.default_branch}}}async create(e,r,n){var i;o.commands.executeCommand("setContext","github:createPullRequest",!0);const s=(i=n?await r.repository.getBranch(n):void 0)!=null?i:r.repository.state.HEAD;if(!this._createPRViewProvider){const l=await this.ensureDefaultsAreLocal(r,await r.getPullRequestDefaults(s));this._createPRViewProvider=new Hh(e,r,l,s);const h=await r.getOrigin(s);this._treeView=new Yh(this.repository,l.owner,l.base,h.remote.owner,s.name,!!s.upstream,r),this.registerListeners(!n),this._disposables.push(o.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(s)}}var em=Object.defineProperty,Tu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?em(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Su{constructor(e,r,n,i,s=`${e}:${r}`){this.owner=e,this.name=r,this.description=n,this.remote=i,this.label=s,Tu(this,"detail"),Tu(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}const Gi=new Uint8Array(256);let Bi=Gi.length;function tm(){return Bi>Gi.length-16&&(zd().randomFillSync(Gi),Bi=0),Gi.slice(Bi,Bi+=16)}const rm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function nm(t){return typeof t=="string"&&rm.test(t)}const im=nm,lt=[];for(let t=0;t<256;++t)lt.push((t+256).toString(16).substr(1));function sm(t,e=0){const r=(lt[t[e+0]]+lt[t[e+1]]+lt[t[e+2]]+lt[t[e+3]]+"-"+lt[t[e+4]]+lt[t[e+5]]+"-"+lt[t[e+6]]+lt[t[e+7]]+"-"+lt[t[e+8]]+lt[t[e+9]]+"-"+lt[t[e+10]]+lt[t[e+11]]+lt[t[e+12]]+lt[t[e+13]]+lt[t[e+14]]+lt[t[e+15]]).toLowerCase();if(!im(r))throw TypeError("Stringified UUID is invalid");return r}const am=sm;function om(t,e,r){t=t||{};const n=t.random||(t.rng||tm)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return am(n)}const Pu=om;function ia(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];let s,l;if(e){let h;for(let b=0;b<i.diffLines.length;b++){const T=i.diffLines[b];T.type===Ge.Delete?(s!==void 0||(s=It(T.oldLineNumber)),h=It(T.oldLineNumber)):s!==void 0&&h!==void 0&&(r.push(new o.Range(s,0,h,0)),s=void 0,h=void 0)}s!==void 0&&h!==void 0&&(r.push(new o.Range(s,0,h,0)),s=void 0,h=void 0)}else i.newLineNumber&&(s=It(i.newLineNumber),l=It(i.newLength),r.push(new o.Range(s,0,s+l,0)))}return r}var um=Object.defineProperty,lm=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?um(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Nu{constructor(){lm(this,"_data",{})}setDocumentThreads(e,r,n){this._data[e]||(this._data[e]={}),r?this._data[e].original=n:this._data[e].modified=n}getDocuments(){return Object.keys(this._data)}getThreadsForDocument(e,r){const n=this._data[e];return r?n&&n.original:n&&n.modified}getAllThreadsForDocument(e){return this._data[e]&&(this._data[e].original||[]).concat(this._data[e].modified||[])}maybeDisposeThreads(e,r){for(const n in this._data){const i=this._data[n];!e.find(h=>r(h,n,!0))&&i.original&&(i.original.forEach(h=>h.dispose()),this._data[n].original=void 0),!e.find(h=>r(h,n,!1))&&i.modified&&(i.modified.forEach(h=>h.dispose()),this._data[n].modified=void 0),!this._data[n].original&&!this._data[n].modified&&delete this._data[n]}}}var cm=Object.defineProperty,Iu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class dm{constructor(){Iu(this,"_onDidChange",new o.EventEmitter),Iu(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,r){const n=qe(e);if(n&&n.prNumber){const i=this._prFileChangeContentProviders[n.prNumber];if(i)return await i(e)}return""}registerTextDocumentContentProvider(e,r){return this._prFileChangeContentProviders[e]=r,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const hm=new dm;function Du(){return hm}var mm=Object.defineProperty,sa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?mm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class zr extends bt{constructor(e,r,n,i){super();this.parent=e,this.label=r,this.iconPath=n,this.pullRequestModel=i,sa(this,"command"),sa(this,"contextValue"),sa(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${i.number}`}getTreeItem(){return this}}var pm=Object.defineProperty,aa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qr extends bt{constructor(e,r){super();this.parent=e,this.label=r,aa(this,"collapsibleState"),aa(this,"children",[]),aa(this,"pathToChild",new Map),this.collapsibleState=o.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(r=>{r instanceof Qr&&r.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof Qr&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],r=[];this.children.forEach(n=>{n instanceof Qr?(n.sort(),e.push(n)):r.push(n)}),e.sort((n,i)=>n.label<i.label?-1:1),r.sort((n,i)=>n.label<i.label?-1:1),this.children=[...e,...r]}addFile(e){const r=e.fileName.split("/");e.description="",this.addPathRecc(r,e)}addPathRecc(e,r){if(e.length<=0)return;if(e.length===1){this.children.push(r);return}const n=e[0],i=e.slice(1);let s=this.pathToChild.get(n);s||(s=new Qr(this,n),this.pathToChild.set(n,s),this.children.push(s)),s.addPathRecc(i,r)}getTreeItem(){return this}}var fm=Object.defineProperty,mr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function oa(t,e,r,n){if(!r||r instanceof Dr)return[];const i=O(n,l=>String(l.position)),s=[];for(const l in i){const h=i[l],b=h[0],T=_u(b,r.diffHunks,e);if(T<0)continue;const N=new o.Position(It(T),0),q=new o.Range(N,N);s.push({threadId:b.id.toString(),uri:t,range:q,comments:h})}return s}const Au=class extends bt{constructor(t,e,r,n){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=r,this._isLocal=n,mr(this,"_fileChanges"),mr(this,"_commentController"),mr(this,"_prCommentController"),mr(this,"_disposables",[]),mr(this,"_inMemPRContentProvider"),mr(this,"_refreshCommentsInProgress"),mr(this,"_command"),mr(this,"_commentHandlerId"),this._commentHandlerId=Pu(),br(this._commentHandlerId,this)}get commentController(){return this._commentController}get command(){return this._command}set command(t){this._command=t}async getChildren(){K.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,Au.ID);try{this.childrenDisposables&&this.childrenDisposables.length&&this.childrenDisposables.forEach(n=>n.dispose());const t=new zr(this,"Description",new o.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=Du().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this.pullRequestModel.equals(this._folderReposManager.activePullRequest)?(await this.pullRequestModel.githubRepository.ensureCommentsController(),this.pullRequestModel.githubRepository.commentsHandler.clearCommentThreadCache(this.pullRequestModel.number)):((!this._prCommentController||!this._commentController)&&await this.resolvePRCommentController(),await this.refreshExistingPREditors(o.window.visibleTextEditors,!0),await this.pullRequestModel.validateDraftMode(),await this.refreshContextKey(o.window.activeTextEditor));const e=[t];if(o.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const n=new Qr(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?e.push(...n.children):e.push(n)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return K.appendLine(t),[]}}async resolvePRCommentController(){return this._prCommentController?this._prCommentController:(await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._prCommentController=this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this),this.registerListeners(),this._prCommentController)}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(r=>{r instanceof Hi&&r.comments.forEach(n=>n.isDraft=t)});const e=(await this.resolvePRCommentController()).commentThreadCache;for(const r in e)e[r].forEach(n=>{xs(n,t)})})),this._disposables.push(o.window.onDidChangeVisibleTextEditors(async t=>{this._refreshCommentsInProgress?this._refreshCommentsInProgress=this._refreshCommentsInProgress.then(async e=>await this.refreshExistingPREditors(t,!1)):this._refreshCommentsInProgress=this.refreshExistingPREditors(t,!1)})),this._disposables.push(o.window.onDidChangeActiveTextEditor(async t=>{await this.refreshContextKey(t)}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),r=this.pullRequestModel.mergeBase;return r?(await In(e,this._folderReposManager.repository,r)).map(i=>{const s=this.pullRequestModel.head.sha,l=i.status===ke.RENAME?i.previousFileName:i.fileName;return i instanceof tt?new Dr(this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Ft(o.Uri.file(v.resolve(this._folderReposManager.repository.rootUri.fsPath,i.fileName)),this.pullRequestModel,i.baseCommit,s,i.fileName,!1,i.status),Ft(o.Uri.file(v.resolve(this._folderReposManager.repository.rootUri.fsPath,l)),this.pullRequestModel,i.baseCommit,s,i.fileName,!0,i.status)):new Hi(this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,Ft(o.Uri.file(v.resolve(this._folderReposManager.repository.rootUri.fsPath,i.fileName)),this.pullRequestModel,i.baseCommit,s,i.fileName,!1,i.status),Ft(o.Uri.file(v.resolve(this._folderReposManager.repository.rootUri.fsPath,l)),this.pullRequestModel,i.baseCommit,s,i.fileName,!0,i.status),i.isPartial,i.patch,i.diffHunks,t.filter(b=>b.path===i.fileName&&b.position!==null))}):[]}async refreshExistingPREditors(t,e){let r=t.filter(i=>{if(i.document.uri.scheme!=="pr")return!1;const s=qe(i.document.uri);return!(!s||s.prNumber!==this.pullRequestModel.number)}).map(i=>({fileName:qe(i.document.uri).fileName,document:i.document}));const n=(await this.resolvePRCommentController()).commentThreadCache;for(const i in n){const s=n[i];r.find(h=>h.fileName===i)||(s.forEach(h=>h.dispose()),delete n[i])}if(e||(r=r.filter(i=>n[i.fileName]===void 0)),r=f(r,i=>i.fileName),r.length){const i=await this.getFileChanges();await this.pullRequestModel.validateDraftMode(),r.forEach(s=>{const l=i.find($=>$.fileName===s.fileName);if(!l||l instanceof Dr)return;const h=l.parentFilePath,b=l.filePath,T=oa(h,!0,l,l.comments),N=oa(b,!1,l,l.comments);let q=[];if(e){const $=n[s.fileName]||[],V=$.filter(Q=>Q.uri.toString()===h.toString()),Y=$.filter(Q=>Q.uri.toString()===b.toString());q=[...V,...Y]}this.updateFileChangeCommentThreads(q,[...T,...N],l,n)})}}async refreshContextKey(t){if(!t)return;const e=t.document.uri;if(e.scheme!=="pr")return;const r=qe(e);!r||r.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}setContextKey(t){o.commands.executeCommand("setContext","prInDraft",t)}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:r,author:n,isDraft:i,html_url:s}=this.pullRequestModel,{login:l}=n,h=t?"\u2713 ":"",b=t?"Current Branch * ":"",T=r.toString(),N=`${h}#${T}: ${i?"[DRAFT] ":""}${e}`,q=`${b}${e} by @${l}`,$=`by @${l}`;return{label:N,id:`${this.parent instanceof bt?this.parent.label:""}${s}`,tooltip:q,description:$,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new o.ThemeIcon("github")}}hasCommentThread(t){if(t.uri.scheme!=="pr"||this._folderReposManager.activePullRequest&&this._folderReposManager.activePullRequest.number===this.pullRequestModel.number)return!1;const e=qe(t.uri);return!(!e||e.prNumber!==this.pullRequestModel.number)}createCommentThreads(t,e,r){const n=e.map(i=>nn(i,this._commentController));r[t]=n}updateCommentThreadComments(t,e){t.comments=e,Qt(t)}async findMatchingFileNode(t){const e=qe(t);if(!e)throw new Error(`${t.toString()} is not valid PR document`);const r=(await this.getFileChanges()).find(n=>n.fileName===e.fileName);if(!r)throw new Error("No matching file found");if(r instanceof Dr)throw new Error("Comments not supported on remote file changes");return r}calculateCommentPosition(t,e){const r=e.uri,n=qe(r),i=!!(n&&n.isBase),s=ku(t.diffHunks,"",e.range.start.line+1,i);if(s<0)throw new Error("Comment position cannot be negative");return s}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const r=qe(t.uri);if(!r||r.prNumber!==this.pullRequestModel.number)return;const n=(await this.getFileChanges()).find(i=>i.fileName===r.fileName);return!n||n instanceof Dr?void 0:ia(n.diffHunks,r.isBase)}}updateFileChangeCommentThreads(t,e,r,n){if(t.forEach(i=>{(e&&e.filter(l=>l.threadId===i.threadId)).length||i.dispose()}),e&&e.length){const i=[];e.forEach(s=>{const l=t.filter(h=>h.threadId===s.threadId);l.length===0&&i.push(s),l.forEach(h=>{h.comments=h.comments.map(T=>{if(T instanceof ht){const q=s.comments.find($=>$.body===T.body);return q?new Le(q,h):T}const N=s.comments.find(q=>q.id.toString()===T.commentId);if(N)return new Le(N,h)}).filter(T=>!!T);const b=s.comments.filter(T=>!h.comments.some(N=>N instanceof Le&&N.commentId===T.id.toString()));h.comments=[...h.comments,...b.map(T=>new Le(T,h))]})}),i.length&&this.createCommentThreads(r.fileName,i,n)}}async provideDocumentContent(t){const e=qe(t);if(!e)return"";const r=(await this.getFileChanges()).find(n=>n.fileName===e.fileName);if(!r)return K.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&r.status===ke.ADD||!e.isBase&&r.status===ke.DELETE)return"";if(r instanceof Dr||r.isPartial)try{return e.isBase?this.pullRequestModel.getFile(r.previousFileName||r.fileName,e.baseCommit):this.pullRequestModel.getFile(r.fileName,e.headCommit)}catch(n){return K.appendLine(`PR> Fetching file content failed: ${n}`),o.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(i=>{i==="Open on GitHub"&&o.commands.executeCommand("vscode.open",o.Uri.parse(r.blobUrl))}),""}if(r instanceof Hi)if(r.status===ke.ADD||r.status===ke.DELETE)if(e.isBase){const i=[];for(let s=0;s<r.diffHunks.length;s++)for(let l=0;l<r.diffHunks[s].diffLines.length;l++){const h=r.diffHunks[s].diffLines[l];h.type===Ge.Add||(h.type===Ge.Delete?i.push(h.text):h.type===Ge.Control||i.push(h.text))}return i.join(`
`)}else{const i=[];for(let s=0;s<r.diffHunks.length;s++)for(let l=0;l<r.diffHunks[s].diffLines.length;l++){const h=r.diffHunks[s].diffLines[l];h.type===Ge.Add?i.push(h.text):h.type===Ge.Delete||h.type===Ge.Control||i.push(h.text)}return i.join(`
`)}else{const i=r.status===ke.RENAME?r.previousFileName:r.fileName,s=o.Uri.joinPath(this._folderReposManager.repository.rootUri,i),l=await this._folderReposManager.repository.show(e.baseCommit,s.fsPath);return e.isBase?l:us(l,r.patch)}return""}async createOrReplyComment(t,e,r){const n=t.comments.length,i=r!==void 0?r:this.pullRequestModel.hasPendingReview,s=this.optimisticallyAddComment(t,e,i);try{const l=await this.findMatchingFileNode(t.uri),h=n?await this.reply(t,e):await this.createFirstCommentInThread(t,e,l);l.update(l.comments.concat(h)),this.replaceTemporaryComment(t,h,s)}catch(l){o.window.showErrorMessage(`Creating comment failed: ${l}`),t.comments=t.comments.map(h=>(h instanceof ht&&h.id===s&&(h.mode=o.CommentMode.Editing),h))}}optimisticallyAddComment(t,e,r){const n=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new ht(t,e,r,n);return this.updateCommentThreadComments(t,[...t.comments,i]),i.id}optimisticallyEditComment(t,e){const r=this._folderReposManager.getCurrentUser(this.pullRequestModel),n=new ht(t,e.body instanceof o.MarkdownString?e.body.value:e.body,!!e.label,r,e);return t.comments=t.comments.map(i=>i instanceof Le&&i.commentId===e.commentId?n:i),n.id}replaceTemporaryComment(t,e,r){t.comments=t.comments.map(n=>n instanceof ht&&n.id===r?new Le(e,t):n)}reply(t,e){const r=t.comments[0];if(r instanceof Le)return this.pullRequestModel.createReviewCommentReply(e,r._rawComment);throw new Error("Cannot respond to temporary comment")}async updateCommentThreadCache(t,e,r){const n=(await this.resolvePRCommentController()).commentThreadCache,i=n[e.fileName];i?n[e.fileName]=[...i,t]:n[e.fileName]=[t]}async createFirstCommentInThread(t,e,r){const n=this.calculateCommentPosition(r,t),i=await this.pullRequestModel.createReviewComment(e,r.fileName,n);return this.updateCommentThreadCache(t,r,i),i}async editComment(t,e){const r=await this.findMatchingFileNode(t.uri);if(e instanceof Le){const n=this.optimisticallyEditComment(t,e);try{const i=await this.pullRequestModel.editReviewComment(e._rawComment,e.body instanceof o.MarkdownString?e.body.value:e.body),s=r.comments.findIndex(l=>l.id.toString()===e.commentId);s>-1&&r.comments.splice(s,1,i),this.replaceTemporaryComment(t,i,n)}catch(i){o.window.showErrorMessage(`Editing comment failed ${i}`),t.comments=t.comments.map(s=>s instanceof ht&&s.id===n?new Le(e._rawComment,t):s)}}else this.createOrReplyComment(t,e.body instanceof o.MarkdownString?e.body.value:e.body)}async deleteComment(t,e){if(e instanceof Le){await this.pullRequestModel.deleteReviewComment(e.commentId);const r=await this.findMatchingFileNode(t.uri),n=r.comments.findIndex(i=>i.id.toString()===e.commentId);if(n>-1&&r.comments.splice(n,1),t.comments=t.comments.filter(i=>i instanceof Le&&i.commentId!==e.commentId),t.comments.length===0){const i=e._rawComment;if(i.path){const s=(await this.resolvePRCommentController()).commentThreadCache,l=s[i.path].findIndex(h=>h.threadId===t.threadId);s[i.path].splice(l,1)}t.dispose()}r.comments.length===0&&r.update(r.comments)}else t.comments=t.comments.filter(r=>r instanceof ht&&r.id===e.id);await this.pullRequestModel.validateDraftMode()}async startReview(t,e){const r=this.optimisticallyAddComment(t,e,!0);try{const n=await this.findMatchingFileNode(t.uri),i=this.calculateCommentPosition(n,t),s=await this.pullRequestModel.startReview({body:e,path:n.fileName,position:i});await this.updateCommentThreadCache(t,n,s),this.replaceTemporaryComment(t,s,r),n.update(n.comments.concat(s)),this.setContextKey(!0)}catch(n){o.window.showErrorMessage(`Starting a review failed: ${n}`),t.comments=t.comments.map(i=>(i instanceof ht&&i.id===r&&(i.mode=o.CommentMode.Editing),i))}}async finishReview(t,e){try{await this.createOrReplyComment(t,e,!1),await this.pullRequestModel.submitReview(),this.setContextKey(!1)}catch(r){o.window.showErrorMessage(`Failed to submit the review: ${r}`)}}async deleteReview(){const{deletedReviewId:t,deletedReviewComments:e}=await this.pullRequestModel.deleteReview(),r=O(e,n=>n.path||"");for(const n in r){const i=(await this.getFileChanges()).find(s=>s.fileName===n);if(i&&i instanceof Hi){i.comments=i.comments.filter(l=>l.pullRequestReviewId!==t),i.update(i.comments);const s=(await this.resolvePRCommentController()).commentThreadCache;if(s[i.fileName]){const l=[];s[i.fileName].forEach(h=>{this.updateCommentThreadComments(h,h.comments.filter(b=>!e.some(T=>T.id.toString()===b.commentId))),h.comments.length?l.push(h):h.dispose()}),l.length?s[i.fileName]=l:delete s[i.fileName]}}}this.setContextKey(!1)}async toggleReaction(t,e){if(t.parent.uri.scheme!=="pr")return;const r=qe(t.parent.uri);if(!r)return;const n=await this.findMatchingFileNode(t.parent.uri),i=n.comments.findIndex(h=>h.id.toString()===t.commentId);if(i<0)return;let s;t.reactions&&!t.reactions.find(h=>h.label===e.label&&!!h.authorHasReacted)?s=(await this.pullRequestModel.addCommentReaction(t._rawComment.graphNodeId,e)).addReaction.subject.reactionGroups:s=(await this.pullRequestModel.deleteCommentReaction(t._rawComment.graphNodeId,e)).removeReaction.subject.reactionGroups,n.comments[i].reactions=Os(s),To(t,n.comments[i].reactions);const l=(await this.resolvePRCommentController()).commentThreadCache;l[r.fileName]&&l[r.fileName].forEach(h=>{!h.comments||h.comments.find(b=>b.commentId===t.commentId)&&(h.comments=h.comments)})}dispose(){super.dispose(),Je(this._commentHandlerId),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._prCommentController&&this._prCommentController.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose())}};let gn=Au;mr(gn,"ID","PRNode");var gm=Object.defineProperty,Xt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?gm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Fu(t,e,r){if(!e)return[];if(!r||!r.length)return[];const n=[],i=O(r,s=>String(s.position));for(const s in i){const l=i[s],h=l[0],b=new o.Position(It(h.absolutePosition||0),0),T=new o.Range(b,b),N=v.join(t.rootUri.path,h.path).replace(/\\/g,"/"),q=t.rootUri.with({path:N});n.push({threadId:h.id.toString(),uri:q,range:T,comments:l})}return n}function vm(t,e,r){r.forEach(n=>{if(n.comments&&n.comments.length){const i=n.comments[0];if(i instanceof Le){const s=jr(t,i._rawComment.position||i._rawComment.originalPosition);if(s){const l=s.type===Ge.Delete?s.oldLineNumber:s.newLineNumber,h=It($i(e,l)),b=new o.Range(h,0,h,0);n.range=b}}}})}class ym{constructor(e,r,n,i,s){this._reposManager=e,this._repository=r,this._localFileChanges=n,this._obsoleteFileChanges=i,this._comments=s,Xt(this,"_localToDispose",[]),Xt(this,"_onDidChangeComments",new o.EventEmitter),Xt(this,"onDidChangeComments",this._onDidChangeComments.event),Xt(this,"_commentHandlerId"),Xt(this,"_commentController"),Xt(this,"_workspaceFileChangeCommentThreads",{}),Xt(this,"_obsoleteFileChangeCommentThreads",{}),Xt(this,"_reviewDocumentCommentThreads",new Nu),Xt(this,"_prDocumentCommentThreads",new Nu),Xt(this,"_visibleNormalTextEditors",[]),this._commentController=o.comments.createCommentController(`review-${e.activePullRequest.number}`,e.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=Pu(),br(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=o.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this.initializeWorkspaceCommentThreads(),await this.initializeDocumentCommentThreadsAndListeners()}async initializeWorkspaceCommentThreads(){await this._reposManager.activePullRequest.validateDraftMode();const e=this._localFileChanges.map(async n=>{const i=await this.getWorkspaceFileThreadDatas(n);this._workspaceFileChangeCommentThreads[n.fileName]=i.map(s=>nn(s,this._commentController))}),r=pn(this._obsoleteFileChanges).map(n=>{const i=this.outdatedCommentsToCommentThreads(n,n.comments).map(s=>nn(s,this._commentController));this._obsoleteFileChangeCommentThreads[n.fileName]=i});return Promise.all([...e,...r])}async getWorkspaceFileThreadDatas(e){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return[];const r=await this._repository.diffWithHEAD(e.fileName),n=Bh(e.diffHunks,r,e.comments).filter(i=>i.absolutePosition!==void 0);return Fu(this._repository,e,n)}async initializeDocumentCommentThreadsAndListeners(){this._localToDispose.push(o.window.onDidChangeVisibleTextEditors(async e=>{if(this.visibleEditorsEqual(this._visibleNormalTextEditors,e))return;this._visibleNormalTextEditors=e.filter(i=>i.document.uri.scheme!=="comment");const r=e.filter(i=>{if(i.document.uri.scheme!=="pr")return!1;const s=qe(i.document.uri);return!!s&&s.prNumber===this._reposManager.activePullRequest.number});this._prDocumentCommentThreads.maybeDisposeThreads(r,(i,s,l)=>{const h=qe(i.document.uri);return!!h&&h.fileName===s&&h.isBase===l}),this._reviewDocumentCommentThreads.maybeDisposeThreads(e,(i,s,l)=>{const h=this.gitRelativeRootPath(i.document.uri.path);if(i.document.uri.scheme!=="review"&&i.document.uri.scheme===this._repository.rootUri.scheme&&i.document.uri.query){const b=kt(i.document.uri);if(s===h&&b.base===l)return!0}if(i.document.uri.scheme!=="review")return!1;try{const b=kt(i.document.uri);if(s===h&&b.base===l)return!0}catch{return!1}return!1}),e.filter(i=>i.document.uri.scheme===this._repository.rootUri.scheme).forEach(i=>{const s=this.gitRelativeRootPath(i.document.uri.path),l=this._workspaceFileChangeCommentThreads[s]||[],h=!i.viewColumn;this._workspaceFileChangeCommentThreads[s]=l.map(b=>(b.collapsibleState=h&&!b.isResolved?o.CommentThreadCollapsibleState.Expanded:o.CommentThreadCollapsibleState.Collapsed,b))});for(const i of this._visibleNormalTextEditors)await this.updateCommentThreadsForEditor(i)})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads].forEach(r=>{for(const n in r)r[n].forEach(i=>{xs(i,e),Qt(i)})}),this._reviewDocumentCommentThreads.getDocuments().forEach(r=>{this._reviewDocumentCommentThreads.getAllThreadsForDocument(r).forEach(n=>{xs(n,e),Qt(n)})}),this._prDocumentCommentThreads.getDocuments().forEach(r=>{this._prDocumentCommentThreads.getAllThreadsForDocument(r).forEach(n=>{n.comments=n.comments.map(i=>(i.label=e?"Pending":void 0,i)),Qt(n)})})}))}async updateCommentThreadsForEditor(e){if(e.document.uri.scheme==="pr"){const i=qe(e.document.uri);if(i&&i.prNumber===this._reposManager.activePullRequest.number){if(this._prDocumentCommentThreads.getThreadsForDocument(i.fileName,i.isBase))return;this._prDocumentCommentThreads.setDocumentThreads(i.fileName,i.isBase,[]);const l=this._localFileChanges.filter(h=>h.fileName===i.fileName);if(l.length){await this._reposManager.activePullRequest.validateDraftMode();const b=oa(e.document.uri,i.isBase,l[0],l[0].comments).map(T=>nn(T,this._commentController));this._prDocumentCommentThreads.setDocumentThreads(i.fileName,i.isBase,b)}}return}const r=this.gitRelativeRootPath(e.document.uri.path);if(e.document.uri.scheme===this._repository.rootUri.scheme&&e.viewColumn!==void 0){const i=this._localFileChanges.filter(h=>h.fileName===r);if(i&&!i.length)return;const s=this._workspaceFileChangeCommentThreads[r];if(!this._reposManager.activePullRequest.isResolved())return;const l=await this.getContentDiff(e.document,r);vm(i[0].diffHunks,l,s);return}let n;try{n=kt(e.document.uri)}catch(i){}if(n){if(n.isOutdated||this._reviewDocumentCommentThreads.getThreadsForDocument(r,n.base))return;this._reviewDocumentCommentThreads.setDocumentThreads(r,n.base,[]),await this._reposManager.activePullRequest.validateDraftMode();const l=this.provideCommentsForReviewUri(e.document,n).map(h=>nn(h,this._commentController));this._reviewDocumentCommentThreads.setDocumentThreads(r,n.base,l)}}visibleEditorsEqual(e,r){if(e=e.filter(n=>n.document.uri.scheme!=="comment"),r=r.filter(n=>n.document.uri.scheme!=="comment"),e=f(e,n=>n.document.uri.toString()),r=f(r,n=>n.document.uri.toString()),e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!r.find(s=>s.document.uri.toString()===e[n].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;if(e.uri.scheme==="pr"){const n=qe(e.uri);return!!(this._reposManager.activePullRequest&&n&&this._reposManager.activePullRequest.number===n.prNumber)}const r=o.workspace.getWorkspaceFolder(e.uri);return r?!!(e.uri.scheme===r.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}addToCommentThreadCache(e){const r=e.uri,n=o.workspace.getWorkspaceFolder(r);switch(r.scheme){case"pr":const i=qe(r);if(i){const{fileName:b,isBase:T}=i,N=this._prDocumentCommentThreads.getThreadsForDocument(b,T)||[];this._prDocumentCommentThreads.setDocumentThreads(b,T,N.concat(e))}return;case"review":const s=r.query&&kt(r);if(s){const b=this.gitRelativeRootPath(r.path),T=this._reviewDocumentCommentThreads.getThreadsForDocument(b,s.base)||[];this._reviewDocumentCommentThreads.setDocumentThreads(b,s.base,T.concat(e));return}break;case n.uri.scheme:const l=this.gitRelativeRootPath(r.path);this._workspaceFileChangeCommentThreads[l].push(e);return;default:return}}async provideCommentingRanges(e,r){if(e.uri.scheme==="pr"){const s=qe(e.uri);if(!s||s.prNumber!==this._reposManager.activePullRequest.number)return;const l=this._localFileChanges.find(h=>h.fileName===s.fileName);return!l||l instanceof Dr?void 0:ia(l.diffHunks,s.isBase)}let n;try{n=kt(e.uri)}catch(s){}if(n){const s=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(s)return ia(s.diffHunks,n.base)}const i=o.workspace.getWorkspaceFolder(e.uri);if(!!i&&e.uri.scheme===i.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const s=this.gitRelativeRootPath(e.uri.path),l=pn(this._localFileChanges).find(b=>b.fileName===s),h=[];if(l){if(l.status===ke.RENAME)return[];const b=await this.getContentDiff(e,l.fileName),T=l.diffHunks;for(let N=0;N<T.length;N++){const q=T[N],$=$i(b,q.newLineNumber),V=$i(b,q.newLineNumber+q.newLength-1);$>0&&V>0&&h.push(new o.Range($-1,0,V-1,0))}}return h}}async getNewCommentPosition(e,r){const n=e.uri;let i=!1;if(n.query){if(n.scheme==="review")try{i=kt(n).base}catch{}if(n.scheme==="pr"){const h=qe(n);i=!!h&&h.isBase}}if(!this._reposManager.activePullRequest)throw new Error("No active pull request");if(!this._reposManager.activePullRequest.validatePullRequestModel("Creating new comment failed"))throw new Error("No upstream branch");const s=await this._repository.diffWithHEAD(r.fileName),l=ku(r.diffHunks,s,e.range.start.line+1,i);if(l<0)throw new Error("Comment position cannot be negative");return l}async createNewThread(e,r,n){var i;const s=await this.getNewCommentPosition(e,r),l=e.uri.scheme!=="pr"?(i=this._repository.state.HEAD)==null?void 0:i.commit:void 0;return await this._reposManager.activePullRequest.createReviewComment(n,r.fileName,s,l)}async getContentDiff(e,r){let n;if(e.isDirty){const i=this._repository.state.HEAD.commit,s=e.getText(),h=(await this._repository.getObjectDetails(i,r)).object,b=await this._repository.hashObject(s);n=await this._repository.diffBlobs(h,b)}else n=await this._repository.diffWithHEAD(r);return n}outdatedCommentsToCommentThreads(e,r){if(!r||!r.length)return[];const n=[],i=O(r,s=>String(s.position));for(const s in i){const l=i[s],h=l[0],b=jr(h.diffHunks||[],h.originalPosition);b&&(h.absolutePosition=b.newLineNumber);const T=new o.Position(It(h.absolutePosition||0),0),N=new o.Range(T,T);n.push({threadId:h.id.toString(),uri:e.filePath,range:N,comments:l})}return n}provideCommentsForReviewUri(e,r){const n=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(n){const b=n.comments,T=r.base;return b.forEach(N=>{N.absolutePosition=_u(N,n.diffHunks,T)}),Fu(this._repository,n,b.filter(N=>N.absolutePosition!==void 0&&N.absolutePosition>0)).map(N=>(N.uri=e.uri,N))}const i=this.findMatchedFileChangeForReviewDiffView(this._obsoleteFileChanges,e.uri);let s=[];if(i)s=i.comments;else{try{s=this._comments.filter(b=>b.path===r.path&&`${b.originalCommitId}^`===r.commit)}catch(b){}if(!s.length)return[]}const l=O(s,b=>String(b.originalPosition)),h=[];for(const b in l){const N=l[b][0],q=Gh(N.diffHunk);if(!q)continue;const $=r.base?q.oldLineNumber:q.oldLineNumber>0?-1:q.newLineNumber;if($<0)continue;const V=new o.Range(new o.Position($,0),new o.Position($,0));h.push({threadId:String(N.id),uri:e.uri,range:V,comments:s})}return h}findMatchedFileChangeForReviewDiffView(e,r){const n=kt(r),i=e.filter(s=>{if(s instanceof Dr||s.fileName!==n.path)return!1;if(s.filePath.scheme!=="review"&&s.sha===n.commit)return!0;try{if(JSON.parse(s.filePath.query).commit===n.commit)return!0}catch(l){}try{if(JSON.parse(s.parentFilePath.query).commit===n.commit)return!0}catch(l){}return!1});if(i&&i.length)return i[0]}findMatchedFileByUri(e){let r,n=!1;if(e.scheme==="review"){const l=kt(e);n=l.isOutdated,r=l.path}e.scheme==="pr"&&(r=qe(e).fileName);const i=n?this._obsoleteFileChanges:this._localFileChanges,s=pn(i).filter(l=>e.scheme==="review"||e.scheme==="pr"?l.fileName===r:l.filePath.path===e.path);if(s&&s.length)return s[0]}gitRelativeRootPath(e){return v.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,r){var n;const i=this.optimisticallyAddComment(e,r,!0);try{const s=this.findMatchedFileByUri(e.uri);if(!s)throw new Error("No matching file found");const l=await this.getNewCommentPosition(e,s),h=e.uri.scheme!=="pr"?(n=this._repository.state.HEAD)==null?void 0:n.commit:void 0,b=await this._reposManager.activePullRequest.startReview({body:r,path:s.fileName,position:l},h);e.threadId=b.id.toString(),this.addToCommentThreadCache(e),this.replaceTemporaryComment(e,b,i),await this.updateWithNewComment(b,s)}catch(s){o.window.showErrorMessage(`Starting review failed: ${s}`),e.comments=e.comments.map(l=>(l instanceof ht&&l.id===i&&(l.mode=o.CommentMode.Editing),l))}}async finishReview(e,r){try{await this.createOrReplyComment(e,r),await this._reposManager.activePullRequest.submitReview()}catch(n){o.window.showErrorMessage(`Failed to submit the review: ${n}`)}}getUpdatedThreads(e,r){const n=[];return e.forEach(i=>{i.comments=i.comments.filter(s=>!r.some(l=>l.id.toString()===s.commentId)),Qt(i),i.comments.length?n.push(i):i.dispose()}),n}async deleteReview(){const{deletedReviewComments:e}=await this._reposManager.activePullRequest.deleteReview();[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads].forEach(r=>{for(const n in r){const i=this.getUpdatedThreads(r[n],e);i.length?r[n]=i:delete r[n]}}),this._reviewDocumentCommentThreads.getDocuments().forEach(r=>{const n=this._reviewDocumentCommentThreads.getThreadsForDocument(r,!0);if(n){const s=this.getUpdatedThreads(n,e);this._reviewDocumentCommentThreads.setDocumentThreads(r,!0,s.length?s:void 0)}const i=this._reviewDocumentCommentThreads.getThreadsForDocument(r,!1);if(i){const s=this.getUpdatedThreads(i,e);this._reviewDocumentCommentThreads.setDocumentThreads(r,!1,s.length?s:void 0)}}),this._prDocumentCommentThreads.getDocuments().forEach(r=>{const n=this._prDocumentCommentThreads.getThreadsForDocument(r,!0);if(n){const s=this.getUpdatedThreads(n,e);this._prDocumentCommentThreads.setDocumentThreads(r,!0,s.length?s:void 0)}const i=this._prDocumentCommentThreads.getThreadsForDocument(r,!1);if(i){const s=this.getUpdatedThreads(i,e);this._prDocumentCommentThreads.setDocumentThreads(r,!1,s.length?s:void 0)}})}optimisticallyAddComment(e,r,n){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),s=new ht(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,s]),s.id}updateCommentThreadComments(e,r){e.comments=r,Qt(e)}optimisticallyEditComment(e,r){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),i=new ht(e,r.body instanceof o.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(s=>s instanceof Le&&s.commentId===r.commentId?i:s),i.id}replaceTemporaryComment(e,r,n){e.comments=e.comments.map(i=>i instanceof ht&&i.id===n?new Le(r,e):i)}async updateWithNewComment(e,r){r.update(r.comments.concat(e)),this._comments.push(e),await this.update(this._localFileChanges,this._obsoleteFileChanges),this._onDidChangeComments.fire(this._comments)}async createOrReplyComment(e,r,n){const i=e.comments.length,s=n!==void 0?n:this._reposManager.activePullRequest.hasPendingReview,l=this.optimisticallyAddComment(e,r,s);try{const h=this.findMatchedFileByUri(e.uri);if(!h)throw new Error(`Cannot find document ${e.uri.toString()}`);let b;if(!i)b=await this.createNewThread(e,h,r),e.threadId=b.id.toString(),this.addToCommentThreadCache(e);else{const T=e.comments[0];if(T instanceof Le)b=await this._reposManager.activePullRequest.createReviewCommentReply(r,T._rawComment);else throw new Error("Cannot reply to temporary comment")}this.replaceTemporaryComment(e,b,l),this.updateWithNewComment(b,h)}catch(h){o.window.showErrorMessage(`Creating comment failed: ${h}`),e.comments=e.comments.map(b=>(b instanceof ht&&b.id===l&&(b.mode=o.CommentMode.Editing),b))}}async editComment(e,r){if(r instanceof Le){const n=this.optimisticallyEditComment(e,r);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const i=this.findMatchedFileByUri(e.uri);if(!i)throw new Error("Unable to find matching file");const s=await this._reposManager.activePullRequest.editReviewComment(r._rawComment,r.body instanceof o.MarkdownString?r.body.value:r.body),l=i.comments.findIndex(b=>String(b.id)===r.commentId);l>-1&&i.comments.splice(l,1,s);const h=this._comments.findIndex(b=>String(b.id)===r.commentId);h>-1&&this._comments.splice(h,1,s),this.replaceTemporaryComment(e,s,n),Qt(e)}catch(i){o.window.showErrorMessage(D(i)),e.comments=e.comments.map(s=>s instanceof ht&&s.id===n?new Le(r._rawComment,e):s)}}else this.createOrReplyComment(e,r.body instanceof o.MarkdownString?r.body.value:r.body)}async deleteComment(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const n=this.findMatchedFileByUri(e.uri);if(!n)throw new Error("Unable to find matching file");if(r instanceof Le){await this._reposManager.activePullRequest.deleteReviewComment(r.commentId);const s=n.comments.findIndex(h=>h.id.toString()===r.commentId);s>-1&&(n.comments.splice(s,1),n.update(n.comments));const l=this._comments.findIndex(h=>h.id.toString()===r.commentId);l>-1&&this._comments.splice(l,1),e.comments=e.comments.filter(h=>h instanceof Le&&h.commentId!==r.commentId)}else e.comments=e.comments.filter(s=>s instanceof ht&&s.id===r.id);e.comments.length===0?e.dispose():Qt(e);const i=await this._reposManager.activePullRequest.validateDraftMode();i!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=i),this.update(this._localFileChanges,this._obsoleteFileChanges)}catch(n){throw new Error(D(n))}}async update(e,r){await this._reposManager.activePullRequest.validateDraftMode();for(const n in this._workspaceFileChangeCommentThreads)this.updateFileChangeCommentThreads(e,n,!1);this._localFileChanges=e;for(const n in this._obsoleteFileChangeCommentThreads)this.updateFileChangeCommentThreads(pn(r),n,!0);this._obsoleteFileChanges=r;for(const n of o.window.visibleTextEditors)await this.updateCommentThreadsForEditor(n)}async updateFileChangeCommentThreads(e,r,n){const i=e.find(s=>s.fileName===r);if(!i)this._workspaceFileChangeCommentThreads[r].forEach(s=>s.dispose()),delete this._workspaceFileChangeCommentThreads[r];else{const s=n?this._obsoleteFileChangeCommentThreads[r]:this._workspaceFileChangeCommentThreads[r],l=n?this.outdatedCommentsToCommentThreads(i,i.comments):await this.getWorkspaceFileThreadDatas(i),h=[];l.forEach(b=>{const T=s.find(N=>N.threadId===b.threadId);T?(h.push(T),T.range=b.range,T.comments=b.comments.map(N=>new Le(N,T)),Qt(T)):h.push(nn(b,this._commentController))}),s.forEach(b=>{l.filter(N=>N.threadId===b.threadId)||b.dispose()}),this._workspaceFileChangeCommentThreads[r]=h}}async toggleReaction(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const n=this.findMatchedFileByUri(e.parent.uri);if(!n)throw new Error("Unable to find matching file");let i=[];e.reactions&&!e.reactions.find(l=>l.label===r.label&&!!l.authorHasReacted)?i=(await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,r)).addReaction.subject.reactionGroups:i=(await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,r)).removeReaction.subject.reactionGroups;const s=n.comments.findIndex(l=>l.id.toString()===e.commentId);if(s>-1){const l=n.comments[s];l.reactions=Os(i);const h=Ro(l.reactions),b=n.fileName;[...this._prDocumentCommentThreads.getAllThreadsForDocument(b)||[],...this._reviewDocumentCommentThreads.getAllThreadsForDocument(b)||[],...this._workspaceFileChangeCommentThreads[b]||[],...this._obsoleteFileChangeCommentThreads[b]||[]].filter(N=>!!N.comments.find(q=>q.commentId===e.commentId)).forEach(N=>{N.comments=N.comments.map(q=>(q.commentId===e.commentId&&Le.is(q)&&(q.reactions=h),q))})}}catch(n){throw new Error(D(n))}}dispose(){this._commentController&&this._commentController.dispose(),Je(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var bm=Object.defineProperty,rt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const xu=class{constructor(t,e,r,n,i){this._context=t,this._repository=e,this._folderRepoManager=r,this._telemetry=n,this.changesInPrDataProvider=i,rt(this,"_localToDispose",[]),rt(this,"_disposables"),rt(this,"_comments",[]),rt(this,"_localFileChanges",[]),rt(this,"_obsoleteFileChanges",[]),rt(this,"_lastCommitSha"),rt(this,"_updateMessageShown",!1),rt(this,"_validateStatusInProgress"),rt(this,"_reviewCommentController"),rt(this,"_statusBarItem"),rt(this,"_prNumber"),rt(this,"_previousRepositoryState"),rt(this,"_webviewViewProvider"),rt(this,"_createPullRequestHelper"),rt(this,"_switchingToReviewMode"),rt(this,"justSwitchedToRevieMode",!1),rt(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:On(this._repository)},this.registerListeners(),this.updateState(),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,r=this._repository.state.HEAD;if(!e&&!r)return;let n;!e||!r?n=!1:n=e.upstream?r.upstream&&e.upstream.name===r.upstream.name&&e.upstream.remote===r.upstream.remote:!r.upstream;const i=n&&e.ahead===r.ahead&&e.behind===r.behind&&e.commit===r.commit&&e.name===r.name&&e.remote===r.remote&&e.type===r.type,s=On(this._repository),l=this._previousRepositoryState.remotes.length===s.length&&this._previousRepositoryState.remotes.every(h=>s.some(b=>h.equals(b)));(!i||!l)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:s},this.updateState(!!e))})),this._disposables.push(o.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(o.window.registerTerminalLinkProvider(new Bd(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=o.window.createStatusBarItem(o.StatusBarAlignment.Left)),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e;const r=this._repository.state.HEAD;if(r){const n=r.upstream?r.upstream.remote:null;n&&(await this._repository.fetch(n,(e=this._repository.state.HEAD)==null?void 0:e.name),(t.head.sha!==this._lastCommitSha||r.behind!==void 0&&r.behind>0)&&!this._updateMessageShown&&(this._updateMessageShown=!0,await o.window.showInformationMessage("There are updates available for this pull request.",{},"Pull")==="Pull"&&(await o.commands.executeCommand("git.pull"),this._updateMessageShown=!1)))}}async updateState(t=!1){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(K.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async e=>await this.validateState(t)),this._validateStatusInProgress):(K.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateState(t),this._validateStatusInProgress)}async validateState(t){if(K.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(t),!this._repository.state.HEAD){this.clear(!0);return}const e=this._repository.state.HEAD;let r=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!r){K.appendLine(`Review> no matching pull request metadata found for current branch ${e.name}`);const b=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();b&&($t.associateBranchWithPullRequest(this._repository,b.model,e.name),r=b)}if(!r){K.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${e.name}`),this.clear(!0);return}const n=e.commit!==this._lastCommitSha&&e.ahead===0&&e.behind===0;if(this._prNumber===r.prNumber&&!n){o.commands.executeCommand("pr.refreshList");return}if(!(e.upstream?e.upstream.remote:null)){K.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}K.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${r.prNumber}`),this.clear(!1),this._prNumber=r.prNumber,this._lastCommitSha=void 0;const{owner:s,repositoryName:l}=r;K.appendLine("Review> Resolving pull request");const h=await this._folderRepoManager.resolvePullRequest(s,l,r.prNumber);if(!h||!h.isResolved()){this._prNumber=void 0,K.appendLine("Review> This PR is no longer valid");return}if(this._folderRepoManager.activePullRequest=h,this._lastCommitSha=h.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(h)),K.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(h),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,h,this._localFileChanges,this._comments,this.justSwitchedToRevieMode),this.justSwitchedToRevieMode=!1,K.appendLine("Review> register comments provider"),await this.registerCommentController(),this._webviewViewProvider?this._webviewViewProvider.updatePullRequest(h):(this._webviewViewProvider=new Gd(this._context.extensionUri,this._folderRepoManager,h),this._context.subscriptions.push(o.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(o.commands.registerCommand("pr.refreshActivePullRequest",b=>{var T;(T=this._webviewViewProvider)==null||T.refresh()})),!t&&this._context.workspaceState.get(De)&&o.env.remoteName==="codespaces"&&this._webviewViewProvider.show()),this.statusBarItem.text=`$(git-branch) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[h]},K.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),o.commands.executeCommand("pr.refreshList"),!t&&this._context.workspaceState.get(De)&&o.env.remoteName==="codespaces"&&this.localFileChanges.length>0){let b;for(const T of this.localFileChanges)if(T.status===ke.MODIFY){b=T;break}b=b!=null?b:this.localFileChanges[0],b.openDiff(this._folderRepoManager)}this._validateStatusInProgress=void 0}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const n=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!n||!n.isResolved()){K.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(n),await this.getPullRequestData(n),await this._reviewCommentController.update(this._localFileChanges,this._obsoleteFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,r){const n=[],i=t.mergeBase||t.base.sha,s=t.head.sha;for(let l=0;l<e.length;l++){const h=e[l];let b=[];if(h instanceof ui)b=h.diffHunks;else if(h.status!==ke.RENAME)try{const Y=await this._repository.diffBetween(t.base.sha,t.head.sha,h.fileName);b=Pn(Y)}catch(Y){K.appendLine(`Failed to parse patch for outdated comments: ${Y}`)}const T=v.join(this._repository.rootUri.path,h.fileName).replace(/\\/g,"/"),N=this._repository.rootUri.with({path:T}),q=h.status===ke.DELETE?Vt(N,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):N,$=Vt(N,h.status===ke.RENAME?h.previousFileName:h.fileName,void 0,h.status===ke.ADD?"":i,!1,{base:!0},this._repository.rootUri),V=new mn(this.changesInPrDataProvider.view,this._folderRepoManager,t,h.status,h.fileName,h.blobUrl,q,$,b,r.filter(Y=>Y.path===h.fileName),s);n.push(V)}return n}async getPullRequestData(t){try{this._comments=await t.getReviewComments();const e=this._comments.filter(h=>h.position),r=this._comments.filter(h=>!h.position),n=await t.getFileChangesInfo(),i=t.mergeBase||t.base.sha,s=await In(n,this._repository,i);this._localFileChanges=await this.getLocalChangeNodes(t,s,e);const l=O(r,h=>h.originalCommitId);this._obsoleteFileChanges=[];for(const h in l){const b=l[h],T=O(b,N=>N.path);for(const N in T){let q=[];try{const Q=await this._repository.diffBetween(t.base.sha,h,N);q=Pn(Q)}catch(Q){K.appendLine(`Failed to parse patch for outdated comments: ${Q}`)}const $=T[N],V=o.Uri.file(v.join(`commit~${h.substr(0,8)}`,N)),Y=new mn(this.changesInPrDataProvider.view,this._folderRepoManager,t,ke.MODIFY,N,void 0,Vt(V,N,void 0,$[0].originalCommitId,!0,{base:!1},this._repository.rootUri),Vt(V,N,void 0,$[0].originalCommitId,!0,{base:!0},this._repository.rootUri),q,$,h);this._obsoleteFileChanges.push(Y)}}return Promise.resolve(void 0)}catch(e){K.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new ym(this._folderRepoManager,this._repository,this._localFileChanges,this._obsoleteFileChanges,this._comments),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){K.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){if(K.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.gitErrorCode&&(e.gitErrorCode===_e.LocalChangesOverwritten||e.gitErrorCode===_e.DirtyWorkTree)){o.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}o.window.showErrorMessage(D(e));return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fullfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),K.appendLine(`Review> switch to Pull Request #${t.number} - done`,xu.ID)}finally{this.switchingToReviewMode=!1,this.justSwitchedToRevieMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._repository.status()}}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let r=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!r||t.name===void 0)return;const n=this._folderRepoManager.createGitHubRepository(r,this._folderRepoManager.credentialStore),i=await n.getViewerPermission();if(i===_t.Read||i===_t.Triage||i===_t.Unknown){const l=await this._folderRepoManager.tryOfferToFork(n);if(!l)return;r=this._folderRepoManager.getGitHubRemotes().find(h=>h.remoteName===l)}if(!r)return;const s=r;return new Promise(async l=>{const h=o.window.createInputBox();h.value=t.name,h.ignoreFocusOut=!0,h.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const b=async function(T){try{h.busy=!0,await this._reposManager.getBranch(s,T)?h.validationMessage=`Branch ${T} already exists in ${s.owner}/${s.repositoryName}`:h.validationMessage=void 0}catch(N){h.validationMessage=void 0}h.busy=!1};await b(t.name),h.onDidChangeValue(b.bind(this)),h.onDidAccept(async()=>{h.validationMessage=void 0,h.hide();try{await this._repository.push(s.remoteName,`${t.name}:${h.value}`,!0)}catch(N){throw N.gitErrorCode===_e.PushRejected&&(o.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),l(void 0)),N.gitErrorCode===_e.RemoteConnectionError&&(o.window.showWarningMessage(`Could not read from remote repository '${s.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),l(void 0)),N}const T=await this._repository.getBranch(t.name);(!T||!T.upstream)&&l(void 0),l(T)}),h.show()})}async getRemote(t,e,r){if(!t.length){o.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!r)return Su.fromRemote(t[0]);if(t.length===1&&r&&r.owner===t[0].owner&&r.name===t[0].repositoryName)return r;let n=!1;const i=t.map(l=>{const h=Su.fromRemote(l);if(r){const{owner:b,name:T}=r;h.picked=h.owner===b&&h.name===T,h.picked&&(n=!0)}return h});!n&&r&&i.unshift(r);const s=await o.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:e});if(!!s)return s}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new Zh(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState();const r=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Ou(this._context,this._telemetry,e,r,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){o.workspace.getConfiguration(hr).get("focusedMode")&&this._folderRepoManager.activePullRequest?(o.commands.executeCommand("setContext",De,!0),await this._context.workspaceState.update(De,!0)):(o.commands.executeCommand("setContext",De,!1),this._context.workspaceState.update(De,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],o.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:r}=kt(t);let n=pn(this._localFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r);if(n.length){const i=n[0],s=r===i.sha?Ge.Delete:Ge.Add;return i.diffHunks.map(h=>h.diffLines.filter(b=>b.type!==s).map(b=>b.text)).reduce((h,b)=>h.concat(...b),[]).join(`
`)}if(n=pn(this._obsoleteFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r),n.length){const i=n[0],s=r===i.sha?Ge.Delete:Ge.Add,l=[],h=O(i.comments,b=>String(b.originalPosition));for(const b in h){if(!h[b][0].diffHunks)continue;const T=h[b][0].diffHunks.map(N=>N.diffLines.filter(q=>q.type!==s).map(q=>q.text)).reduce((N,q)=>N.concat(...q),[]);l.push(...T)}return l.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(r=>r._folderRepoManager.gitHubRepositories.some(n=>n.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(r=>r._folderRepoManager===e)}};let Wr=xu;rt(Wr,"ID","Review");const Vi=new o.EventEmitter,wm=Vi.event;function Un(t,e){if(e)return e instanceof gn?e.pullRequestModel:e;if(!t.activePullRequest)throw o.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function Ou(t,e,r,n,i){const s=Un(i,r);n==null||n.reveal(n,{select:!0,focus:!0}),ur.createOrShow(t.extensionUri,i,s),e.sendTelemetryEvent("pr.openDescription")}async function $n(t,e,r){var n;if(t.length===1)return t[0];const i=t.map(s=>({label:e(s),itemValue:s}));return(n=await o.window.showQuickPick(i,r))==null?void 0:n.itemValue}async function Hn(t,e){t instanceof gn||t instanceof zr?o.commands.executeCommand("vscode.open",o.Uri.parse(t.pullRequestModel.html_url)):o.commands.executeCommand("vscode.open",o.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function _m(t,e,r,n,i,s){t.subscriptions.push(o.commands.registerCommand("auth.signout",async()=>{i.logout()})),t.subscriptions.push(o.commands.registerCommand("pr.openPullRequestOnGitHub",async b=>{if(b)Hn(b,n);else{const T=e.folderManagers.map(N=>N.activePullRequest).filter(N=>!!N);if(T.length>=1){const N=await $n(T,q=>q.html_url);N&&Hn(N,n)}}})),t.subscriptions.push(o.commands.registerCommand("review.suggestDiff",async b=>{try{const T=await $n(e.folderManagers,ue=>v.basename(ue.repository.rootUri.fsPath));if(!T||!T.activePullRequest)return;const{indexChanges:N,workingTreeChanges:q}=T.repository.state;if(!N.length)if(q.length)if(await o.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await o.commands.executeCommand("git.stageAll");else return;else{o.window.showInformationMessage("There are no changes to suggest.");return}const $=await T.repository.diff(!0);let V="";b&&b.inputBox&&b.inputBox.value&&(V=`${b.inputBox.value}
`,b.inputBox.value="");const Y=`${V}\`\`\`diff
${$}
\`\`\``;await T.activePullRequest.createIssueComment(Y),await o.commands.executeCommand("git.unstageAll");const Q=v.join(T.repository.rootUri.path,".git",`${T.activePullRequest.number}.diff`),ee=new TextEncoder,te=o.Uri.parse(Q);await o.workspace.fs.writeFile(te,ee.encode($)),await T.repository.apply(Q,!0),await o.workspace.fs.delete(te)}catch(T){K.appendLine(`Applying patch failed: ${T}`),o.window.showErrorMessage(`Applying patch failed: ${D(T)}`)}})),t.subscriptions.push(o.commands.registerCommand("pr.openFileOnGitHub",b=>{o.commands.executeCommand("vscode.open",o.Uri.parse(b.blobUrl))})),t.subscriptions.push(o.commands.registerCommand("pr.copyCommitHash",b=>{o.env.clipboard.writeText(b.sha)})),t.subscriptions.push(o.commands.registerCommand("pr.openOriginalFile",async b=>{const T=e.getManagerForIssueModel(b.pullRequest);if(T){const N=await Tn(b.parentFilePath,T.repository);o.commands.executeCommand("vscode.open",N||b.parentFilePath)}})),t.subscriptions.push(o.commands.registerCommand("pr.openModifiedFile",b=>{o.commands.executeCommand("vscode.open",b.filePath)})),t.subscriptions.push(o.commands.registerCommand("pr.openDiffView",b=>{const T=e.getManagerForIssueModel(b.pullRequest);!T||b.openDiff(T)})),t.subscriptions.push(o.commands.registerCommand("pr.deleteLocalBranch",async b=>{const T=e.getManagerForIssueModel(b.pullRequestModel);if(!T)return;const N=Un(T,b),q="delete branch (even if not merged)";let $=null;try{await T.deleteLocalPullRequest(N)}catch(V){if(V.gitErrorCode===_e.BranchNotFullyMerged){if(await o.window.showErrorMessage(`The branch '${N.localBranchName}' is not fully merged, are you sure you want to delete it? `,q)!==q)return;try{await T.deleteLocalPullRequest(N,!0)}catch(Q){$=Q}}else $=V}$?(n.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await o.window.showErrorMessage(`Deleting local pull request branch failed: ${$}`)):(n.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),o.commands.executeCommand("pr.refreshList"))}));function l(b){if(b){const T=o.Uri.file(b).toString();for(const N of r)if(N.repository.rootUri.toString()===T)return N}return $n(r,T=>v.basename(T.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function h(b){return!!(b==null?void 0:b.rootUri)}t.subscriptions.push(o.commands.registerCommand("pr.create",async b=>{var T,N;h(b)?(T=await l(b.rootUri.fsPath))==null||T.createPullRequest():(N=await l(b==null?void 0:b.repoPath))==null||N.createPullRequest(b==null?void 0:b.compareBranch)})),t.subscriptions.push(o.commands.registerCommand("pr.pick",async b=>{let T;b instanceof gn||b instanceof zr?T=b.pullRequestModel:T=b;const N=b instanceof ar;return n.sendTelemetryEvent("pr.checkout",{fromDescription:N.toString()}),o.window.withProgress({location:o.ProgressLocation.SourceControl,title:`Switching to Pull Request #${T.number}`},async(q,$)=>{var V;await((V=Wr.getReviewManagerForRepository(r,T.githubRepository))==null?void 0:V.switch(T))})})),t.subscriptions.push(o.commands.registerCommand("pr.exit",async b=>{let T;b instanceof gn||b instanceof zr?T=b.pullRequestModel:T=b;const N=b instanceof ar;return n.sendTelemetryEvent("pr.exit",{fromDescription:N.toString()}),o.window.withProgress({location:o.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async(q,$)=>{const V=await T.githubRepository.getDefaultBranch(),Y=e.getManagerForIssueModel(T);Y&&Y.checkoutDefaultBranch(V)})})),t.subscriptions.push(o.commands.registerCommand("pr.merge",async b=>{const T=e.getManagerForIssueModel(b==null?void 0:b.pullRequestModel);if(!T)return;const N=Un(T,b);return N.base&&N.head&&!N.base.repositoryCloneUrl.equals(N.head.repositoryCloneUrl)&&Us()?Hn(N,n):o.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async V=>{let Y;if(V==="Yes")try{return Y=await T.mergePullRequest(N),Y}catch(Q){return o.window.showErrorMessage(`Unable to merge pull request. ${D(Q)}`),Y}})})),t.subscriptions.push(o.commands.registerCommand("pr.readyForReview",async b=>{const T=e.getManagerForIssueModel(b==null?void 0:b.pullRequestModel);if(!T)return;const N=Un(T,b);return o.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async q=>{let $;if(q==="Yes")try{return $=await N.setReadyForReview(),o.commands.executeCommand("pr.refreshList"),$}catch(V){return o.window.showErrorMessage(`Unable to mark pull request as ready to review. ${D(V)}`),$}})})),t.subscriptions.push(o.commands.registerCommand("pr.close",async(b,T)=>{let N;if(b)N=b instanceof ar?b:b.pullRequestModel;else{const $=e.folderManagers.map(V=>V.activePullRequest).filter(V=>!!V);N=await $n($,V=>`${V.number}: ${V.title}`,{placeHolder:"Pull request to close"})}if(!N)return;const q=N;return o.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async $=>{if($==="Yes")try{let V;T&&(V=await q.createIssueComment(T));const Y=await q.close();return o.commands.executeCommand("pr.refreshList"),Vi.fire(Y),V}catch(V){o.window.showErrorMessage(`Unable to close pull request. ${D(V)}`),Vi.fire()}Vi.fire()})})),t.subscriptions.push(o.commands.registerCommand("pr.openDescription",async b=>{let T;if(b)T=b instanceof zr?b.pullRequestModel:b;else{const $=e.folderManagers.map(V=>V.activePullRequest).filter(V=>!!V);$.length>=1&&(T=await $n($,V=>V.title))}if(!T){K.appendLine("No pull request found.");return}const N=e.getManagerForIssueModel(T);if(!N)return;let q;if(b instanceof zr)q=b;else{const $=Wr.getReviewManagerForFolderManager(r,N);if(!$)return;q=$.changesInPrDataProvider.getDescriptionNode(N)}await Ou(t,n,T,q,N)})),t.subscriptions.push(o.commands.registerCommand("pr.refreshDescription",async()=>{ur.currentPanel&&ur.refresh()})),t.subscriptions.push(o.commands.registerCommand("pr.openDescriptionToTheSide",async b=>{const T=e.getManagerForIssueModel(b.pullRequestModel);if(!T)return;const N=b.pullRequestModel,q=Un(T,N);b.reveal(b,{select:!0,focus:!0}),ur.createOrShow(t.extensionUri,T,q,!0),n.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(o.commands.registerCommand("pr.signin",async()=>{await e.authenticate()})),t.subscriptions.push(o.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const b of e.folderManagers)await b.deleteLocalBranchesNRemotes()})),t.subscriptions.push(o.commands.registerCommand("pr.signinAndRefreshList",async()=>{await e.authenticate()&&o.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(o.commands.registerCommand("pr.configureRemotes",async()=>o.commands.executeCommand("workbench.action.openSettings",`@ext:${xt} remotes`))),t.subscriptions.push(o.commands.registerCommand("pr.startReview",async b=>{n.sendTelemetryEvent("pr.startReview");const T=wr(b.thread);T&&T.startReview(b.thread,b.text)})),t.subscriptions.push(o.commands.registerCommand("pr.finishReview",async b=>{n.sendTelemetryEvent("pr.finishReview");const T=wr(b.thread);T&&await T.finishReview(b.thread,b.text)})),t.subscriptions.push(o.commands.registerCommand("pr.deleteReview",async b=>{if(n.sendTelemetryEvent("pr.deleteReview"),await o.window.showWarningMessage("Delete this review and all associated comments?",{modal:!0},"Delete")){const N=wr(b.thread);N&&await N.deleteReview(),b.thread.comments.length||b.thread.dispose()}})),t.subscriptions.push(o.commands.registerCommand("pr.createComment",async b=>{n.sendTelemetryEvent("pr.createComment");const T=wr(b.thread);T&&T.createOrReplyComment(b.thread,b.text)})),t.subscriptions.push(o.commands.registerCommand("pr.editComment",async b=>{n.sendTelemetryEvent("pr.editComment"),b.startEdit()})),t.subscriptions.push(o.commands.registerCommand("pr.cancelEditComment",async b=>{n.sendTelemetryEvent("pr.cancelEditComment"),b.cancelEdit()})),t.subscriptions.push(o.commands.registerCommand("pr.saveComment",async b=>{n.sendTelemetryEvent("pr.saveComment");const T=wr(b.parent);T&&await T.editComment(b.parent,b)})),t.subscriptions.push(o.commands.registerCommand("pr.deleteComment",async b=>{if(n.sendTelemetryEvent("pr.deleteComment"),await o.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const N=wr(b.parent);N&&await N.deleteComment(b.parent,b)}})),t.subscriptions.push(o.commands.registerCommand("review.openFile",b=>{var T;const N=b instanceof mn?b.openFileCommand():Cu(b);o.commands.executeCommand(N.command,...(T=N.arguments)!=null?T:[])})),t.subscriptions.push(o.commands.registerCommand("pr.refreshChanges",b=>{r.forEach(T=>{T.updateComments(),ur.refresh(),T.changesInPrDataProvider.refresh()})})),t.subscriptions.push(o.commands.registerCommand("pr.setFileListLayoutAsTree",b=>{o.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(o.commands.registerCommand("pr.setFileListLayoutAsFlat",b=>{o.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(o.commands.registerCommand("pr.refreshPullRequest",b=>{var T;const N=e.getManagerForIssueModel(b.pullRequestModel);N&&b.pullRequestModel.equals(N==null?void 0:N.activePullRequest)&&((T=Wr.getReviewManagerForFolderManager(r,N))==null||T.updateComments()),ur.refresh(),s.refresh(b)}))}let Gn;const km={};function Em(t){Gn=t.globalState}const Mu=(t,e)=>{if(!Gn)throw new Error("Persistent store not initialized.");return Gn.get(t+":"+e,km)},Lu=(t,e,r)=>{if(!Gn)throw new Error("Persistent store not initialized.");return Gn.update(t+":"+e,r)};var vn=be(9035),Cm=Object.defineProperty,qu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function Rm(t){const e=await o.workspace.fs.readFile(o.Uri.file(v.join(t,"product.json")));return JSON.parse(e.toString())}async function Tm(t){const e=await o.workspace.fs.readFile(o.Uri.file(v.join(t,"package.json")));return JSON.parse(e.toString())}class Sm{constructor(e){this.baseReporter=e,qu(this,"sharedProperties",{})}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...r},n)}sendTelemetryErrorEvent(e,r,n){this.baseReporter.sendTelemetryErrorEvent(e,{...this.sharedProperties,...r})}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){const n={};for(const[i,s]of r)n[i]=s;this.sendTelemetryEvent(e,n)}dispose(){return this.baseReporter.dispose()}}function Pm(t){switch(t.quality){case"stable":return vn.aU.Public;case"insider":return vn.aU.Insiders;case"exploration":return vn.aU.Internal;case void 0:return vn.aU.Team;default:return vn.aU.Public}}class Nm{constructor(){qu(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}}async function Im(t,e){const r=await Tm(t.extensionPath),n=await Rm(o.env.appRoot),i=Pm(n);return r.name==="vscode-pull-request-github"?(0,vn.X7)(`${r.publisher}.${r.name}`,r.version,i,e,t.globalState):new Nm}function ji(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var Dm=be(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Uu(t){return Object.prototype.toString.call(t)==="[object Object]"}function $u(t){var e,r;return Uu(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Uu(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function Am(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function Hu(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{$u(e[n])?n in t?r[n]=Hu(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function Gu(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function ua(t,e,r){if(typeof e=="string"){let[i,s]=e.split(" ");r=Object.assign(s?{method:i,url:s}:{url:i},r)}else r=Object.assign({},e);r.headers=Am(r.headers),Gu(r),Gu(r.headers);const n=Hu(t||{},r);return t&&t.mediaType.previews.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function Fm(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}const xm=/\{[^}]+\}/g;function Om(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Mm(t){const e=t.match(xm);return e?e.map(Om).reduce((r,n)=>r.concat(n),[]):[]}function Bu(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,n)=>(r[n]=t[n],r),{})}function Vu(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function yn(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Bn(t,e,r){return e=t==="+"||t==="#"?Vu(e):yn(e),r?yn(r)+"="+e:e}function bn(t){return t!=null}function la(t){return t===";"||t==="&"||t==="?"}function Lm(t,e,r,n){var i=t[r],s=[];if(bn(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),s.push(Bn(e,i,la(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(bn).forEach(function(l){s.push(Bn(e,l,la(e)?r:""))}):Object.keys(i).forEach(function(l){bn(i[l])&&s.push(Bn(e,i[l],l))});else{const l=[];Array.isArray(i)?i.filter(bn).forEach(function(h){l.push(Bn(e,h))}):Object.keys(i).forEach(function(h){bn(i[h])&&(l.push(yn(h)),l.push(Bn(e,i[h].toString())))}),la(e)?s.push(yn(r)+"="+l.join(",")):l.length!==0&&s.push(l.join(","))}else e===";"?bn(i)&&s.push(yn(r)):i===""&&(e==="&"||e==="?")?s.push(yn(r)+"="):i===""&&s.push("");return s}function qm(t){return{expand:Um.bind(null,t)}}function Um(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,s){if(i){let h="";const b=[];if(r.indexOf(i.charAt(0))!==-1&&(h=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(T){var N=/([^:\*]*)(?::(\d+)|(\*))?/.exec(T);b.push(Lm(e,h,N[1],N[2]||N[3]))}),h&&h!=="+"){var l=",";return h==="?"?l="&":h!=="#"&&(l=h),(b.length!==0?h:"")+b.join(l)}else return b.join(",")}else return Vu(s)})}function ju(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,s=Bu(t,["method","baseUrl","url","headers","request","mediaType"]);const l=Mm(r);r=qm(r).expand(s),/^http/.test(r)||(r=t.baseUrl+r);const h=Object.keys(t).filter(N=>l.includes(N)).concat("baseUrl"),b=Bu(s,h);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(N=>N.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const N=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=N.concat(t.mediaType.previews).map(q=>{const $=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${q}-preview${$}`}).join(",")}return["GET","HEAD"].includes(e)?r=Fm(r,b):"data"in b?i=b.data:Object.keys(b).length?i=b:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}function $m(t,e,r){return ju(ua(t,e,r))}function zu(t,e){const r=ua(t,e),n=$m.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:zu.bind(null,r),merge:ua.bind(null,r),parse:ju})}const Hm=`octokit-endpoint.js/6.0.11 ${ji()}`,Gm=zu(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Hm},mediaType:{format:"",previews:[]}}),Bm=Fe.Readable,pr=Symbol("buffer"),ca=Symbol("type");class wn{constructor(){this[ca]="";const e=arguments[0],r=arguments[1],n=[];let i=0;if(e){const l=e,h=Number(l.length);for(let b=0;b<h;b++){const T=l[b];let N;T instanceof Buffer?N=T:ArrayBuffer.isView(T)?N=Buffer.from(T.buffer,T.byteOffset,T.byteLength):T instanceof ArrayBuffer?N=Buffer.from(T):T instanceof wn?N=T[pr]:N=Buffer.from(typeof T=="string"?T:String(T)),i+=N.length,n.push(N)}}this[pr]=Buffer.concat(n);let s=r&&r.type!==void 0&&String(r.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[ca]=s)}get size(){return this[pr].length}get type(){return this[ca]}text(){return Promise.resolve(this[pr].toString())}arrayBuffer(){const e=this[pr],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){const e=new Bm;return e._read=function(){},e.push(this[pr]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,r=arguments[0],n=arguments[1];let i,s;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?s=e:n<0?s=Math.max(e+n,0):s=Math.min(n,e);const l=Math.max(s-i,0),b=this[pr].slice(i,i+l),T=new wn([],{type:arguments[2]});return T[pr]=b,T}}Object.defineProperties(wn.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(wn.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function wt(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}wt.prototype=Object.create(Error.prototype),wt.prototype.constructor=wt,wt.prototype.name="FetchError";let da;try{da=require("encoding").convert}catch(t){}const fr=Symbol("Body internals"),Qu=Fe.PassThrough;function nt(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var s=r.timeout;let l=s===void 0?0:s;t==null?t=null:Wu(t)?t=Buffer.from(t.toString()):Vn(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Fe||(t=Buffer.from(String(t)))),this[fr]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=l,t instanceof Fe&&t.on("error",function(h){const b=h.name==="AbortError"?h:new wt(`Invalid response body while trying to fetch ${e.url}: ${h.message}`,"system",h);e[fr].error=b})}nt.prototype={get body(){return this[fr].body},get bodyUsed(){return this[fr].disturbed},arrayBuffer(){return _n.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return _n.call(this).then(function(e){return Object.assign(new wn([],{type:t.toLowerCase()}),{[pr]:e})})},json(){var t=this;return _n.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return nt.Promise.reject(new wt(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return _n.call(this).then(function(t){return t.toString()})},buffer(){return _n.call(this)},textConverted(){var t=this;return _n.call(this).then(function(e){return Vm(e,t.headers)})}},Object.defineProperties(nt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),nt.mixIn=function(t){for(const e of Object.getOwnPropertyNames(nt.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(nt.prototype,e);Object.defineProperty(t,e,r)}};function _n(){var t=this;if(this[fr].disturbed)return nt.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[fr].disturbed=!0,this[fr].error)return nt.Promise.reject(this[fr].error);let e=this.body;if(e===null)return nt.Promise.resolve(Buffer.alloc(0));if(Vn(e)&&(e=e.stream()),Buffer.isBuffer(e))return nt.Promise.resolve(e);if(!(e instanceof Fe))return nt.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new nt.Promise(function(s,l){let h;t.timeout&&(h=setTimeout(function(){i=!0,l(new wt(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(b){b.name==="AbortError"?(i=!0,l(b)):l(new wt(`Invalid response body while trying to fetch ${t.url}: ${b.message}`,"system",b))}),e.on("data",function(b){if(!(i||b===null)){if(t.size&&n+b.length>t.size){i=!0,l(new wt(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=b.length,r.push(b)}}),e.on("end",function(){if(!i){clearTimeout(h);try{s(Buffer.concat(r,n))}catch(b){l(new wt(`Could not create Buffer from response body for ${t.url}: ${b.message}`,"system",b))}}})})}function Vm(t,e){if(typeof da!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n="utf-8",i,s;return r&&(i=/charset=([^;]*)/i.exec(r)),s=t.slice(0,1024).toString(),!i&&s&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(s)),!i&&s&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(s),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&s&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),da(t,"UTF-8",n).toString()}function Wu(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function Vn(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function Ku(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof Fe&&typeof n.getBoundary!="function"&&(e=new Qu,r=new Qu,n.pipe(e),n.pipe(r),t[fr].body=e,n=r),n}function Yu(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Wu(t)?"application/x-www-form-urlencoded;charset=UTF-8":Vn(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof Fe?null:"text/plain;charset=UTF-8"}function Xu(t){const e=t.body;return e===null?0:Vn(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function jm(t,e){const r=e.body;r===null?t.end():Vn(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}nt.Promise=global.Promise;const Ju=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,ha=/[^\t\x20-\x7e\x80-\xff]/;function jn(t){if(t=`${t}`,Ju.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function Zu(t){if(t=`${t}`,ha.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function kn(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const ze=Symbol("map");class Gt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[ze]=Object.create(null),e instanceof Gt){const r=e.raw(),n=Object.keys(r);for(const i of n)for(const s of r[i])this.append(i,s);return}if(e!=null)if(typeof e=="object"){const r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(const i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const n of Object.keys(e)){const i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,jn(e);const r=kn(this[ze],e);return r===void 0?null:this[ze][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=ma(this),i=0;for(;i<n.length;){var s=n[i];const l=s[0],h=s[1];e.call(r,h,l,this),n=ma(this),i++}}set(e,r){e=`${e}`,r=`${r}`,jn(e),Zu(r);const n=kn(this[ze],e);this[ze][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,jn(e),Zu(r);const n=kn(this[ze],e);n!==void 0?this[ze][n].push(r):this[ze][e]=[r]}has(e){return e=`${e}`,jn(e),kn(this[ze],e)!==void 0}delete(e){e=`${e}`,jn(e);const r=kn(this[ze],e);r!==void 0&&delete this[ze][r]}raw(){return this[ze]}keys(){return fa(this,"key")}values(){return fa(this,"value")}[Symbol.iterator](){return fa(this,"key+value")}}Gt.prototype.entries=Gt.prototype[Symbol.iterator],Object.defineProperty(Gt.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Gt.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function ma(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[ze]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[ze][n].join(", ")}:function(n){return[n.toLowerCase(),t[ze][n].join(", ")]})}const pa=Symbol("internal");function fa(t,e){const r=Object.create(ga);return r[pa]={target:t,kind:e,index:0},r}const ga=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==ga)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[pa];const e=t.target,r=t.kind,n=t.index,i=ma(e,r),s=i.length;return n>=s?{value:void 0,done:!0}:(this[pa].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(ga,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function zm(t){const e=Object.assign({__proto__:null},t[ze]),r=kn(t[ze],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function Qm(t){const e=new Gt;for(const r of Object.keys(t))if(!Ju.test(r))if(Array.isArray(t[r]))for(const n of t[r])ha.test(n)||(e[ze][r]===void 0?e[ze][r]=[n]:e[ze][r].push(n));else ha.test(t[r])||(e[ze][r]=[t[r]]);return e}const Ar=Symbol("Response internals"),Wm=Vr.STATUS_CODES;class Jt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nt.call(this,e,r);const n=r.status||200,i=new Gt(r.headers);if(e!=null&&!i.has("Content-Type")){const s=Yu(e);s&&i.append("Content-Type",s)}this[Ar]={url:r.url,status:n,statusText:r.statusText||Wm[n],headers:i,counter:r.counter}}get url(){return this[Ar].url||""}get status(){return this[Ar].status}get ok(){return this[Ar].status>=200&&this[Ar].status<300}get redirected(){return this[Ar].counter>0}get statusText(){return this[Ar].statusText}get headers(){return this[Ar].headers}clone(){return new Jt(Ku(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}nt.mixIn(Jt.prototype),Object.defineProperties(Jt.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Jt.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const gr=Symbol("Request internals"),va=un.parse,Km=un.format,Ym="destroy"in Fe.Readable.prototype;function zi(t){return typeof t=="object"&&typeof t[gr]=="object"}function Xm(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class Kr{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;zi(e)?n=va(e.url):(e&&e.href?n=va(e.href):n=va(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||zi(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body!=null?r.body:zi(e)&&e.body!==null?Ku(e):null;nt.call(this,s,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const l=new Gt(r.headers||e.headers||{});if(s!=null&&!l.has("Content-Type")){const b=Yu(s);b&&l.append("Content-Type",b)}let h=zi(e)?e.signal:null;if("signal"in r&&(h=r.signal),h!=null&&!Xm(h))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[gr]={method:i,redirect:r.redirect||e.redirect||"follow",headers:l,parsedURL:n,signal:h},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[gr].method}get url(){return Km(this[gr].parsedURL)}get headers(){return this[gr].headers}get redirect(){return this[gr].redirect}get signal(){return this[gr].signal}clone(){return new Kr(this)}}nt.mixIn(Kr.prototype),Object.defineProperty(Kr.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Kr.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Jm(t){const e=t[gr].parsedURL,r=new Gt(t[gr].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof Fe.Readable&&!Ym)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){const s=Xu(t);typeof s=="number"&&(n=String(s))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:zm(r),agent:i})}function zn(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}zn.prototype=Object.create(Error.prototype),zn.prototype.constructor=zn,zn.prototype.name="AbortError";const el=Fe.PassThrough,Zm=un.resolve;function Fr(t,e){if(!Fr.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return nt.Promise=Fr.Promise,new Fr.Promise(function(r,n){const i=new Kr(t,e),s=Jm(i),l=(s.protocol==="https:"?Ni:Vr).request,h=i.signal;let b=null;const T=function(){let Q=new zn("The user aborted a request.");n(Q),i.body&&i.body instanceof Fe.Readable&&i.body.destroy(Q),!(!b||!b.body)&&b.body.emit("error",Q)};if(h&&h.aborted){T();return}const N=function(){T(),V()},q=l(s);let $;h&&h.addEventListener("abort",N);function V(){q.abort(),h&&h.removeEventListener("abort",N),clearTimeout($)}i.timeout&&q.once("socket",function(Y){$=setTimeout(function(){n(new wt(`network timeout at: ${i.url}`,"request-timeout")),V()},i.timeout)}),q.on("error",function(Y){n(new wt(`request to ${i.url} failed, reason: ${Y.message}`,"system",Y)),V()}),q.on("response",function(Y){clearTimeout($);const Q=Qm(Y.headers);if(Fr.isRedirect(Y.statusCode)){const ae=Q.get("Location"),ye=ae===null?null:Zm(i.url,ae);switch(i.redirect){case"error":n(new wt(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),V();return;case"manual":if(ye!==null)try{Q.set("Location",ye)}catch(Me){n(Me)}break;case"follow":if(ye===null)break;if(i.counter>=i.follow){n(new wt(`maximum redirect reached at: ${i.url}`,"max-redirect")),V();return}const Oe={headers:new Gt(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(Y.statusCode!==303&&i.body&&Xu(i)===null){n(new wt("Cannot follow redirect with body being a readable stream","unsupported-redirect")),V();return}(Y.statusCode===303||(Y.statusCode===301||Y.statusCode===302)&&i.method==="POST")&&(Oe.method="GET",Oe.body=void 0,Oe.headers.delete("content-length")),r(Fr(new Kr(ye,Oe))),V();return}}Y.once("end",function(){h&&h.removeEventListener("abort",N)});let ee=Y.pipe(new el);const te={url:i.url,status:Y.statusCode,statusText:Y.statusMessage,headers:Q,size:i.size,timeout:i.timeout,counter:i.counter},ue=Q.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||ue===null||Y.statusCode===204||Y.statusCode===304){b=new Jt(ee,te),r(b);return}const le={flush:Et.Z_SYNC_FLUSH,finishFlush:Et.Z_SYNC_FLUSH};if(ue=="gzip"||ue=="x-gzip"){ee=ee.pipe(Et.createGunzip(le)),b=new Jt(ee,te),r(b);return}if(ue=="deflate"||ue=="x-deflate"){Y.pipe(new el).once("data",function(ye){(ye[0]&15)==8?ee=ee.pipe(Et.createInflate()):ee=ee.pipe(Et.createInflateRaw()),b=new Jt(ee,te),r(b)});return}if(ue=="br"&&typeof Et.createBrotliDecompress=="function"){ee=ee.pipe(Et.createBrotliDecompress()),b=new Jt(ee,te),r(b);return}b=new Jt(ee,te),r(b)}),jm(q,i)})}Fr.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308},Fr.Promise=global.Promise;const ep=Fr;class tp extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var rp=be(778),np=be.n(rp);const ip=np()(t=>console.warn(t));class Qn extends Error{constructor(e,r,n){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return ip(new tp("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}const sp="5.4.14";function ap(t){return t.arrayBuffer()}function tl(t){($u(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},r,n;return(t.request&&t.request.fetch||ep)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(s=>{n=s.url,r=s.status;for(const h of s.headers)e[h[0]]=h[1];if(r===204||r===205)return;if(t.method==="HEAD"){if(r<400)return;throw new Qn(s.statusText,r,{headers:e,request:t})}if(r===304)throw new Qn("Not modified",r,{headers:e,request:t});if(r>=400)return s.text().then(h=>{const b=new Qn(h,r,{headers:e,request:t});try{let T=JSON.parse(b.message);Object.assign(b,T);let N=T.errors;b.message=b.message+": "+N.map(JSON.stringify).join(", ")}catch(T){}throw b});const l=s.headers.get("content-type");return/application\/json/.test(l)?s.json():!l||/^text\/|charset=utf-8$/.test(l)?s.text():ap(s)}).then(s=>({status:r,url:n,headers:e,data:s})).catch(s=>{throw s instanceof Qn?s:new Qn(s.message,500,{headers:e,request:t})})}function ya(t,e){const r=t.defaults(e);return Object.assign(function(i,s){const l=r.merge(i,s);if(!l.request||!l.request.hook)return tl(r.parse(l));const h=(b,T)=>tl(r.parse(r.merge(b,T)));return Object.assign(h,{endpoint:r,defaults:ya.bind(null,r)}),l.request.hook(h,l)},{endpoint:r,defaults:ya.bind(null,r)})}const Qi=ya(Gm,{headers:{"user-agent":`octokit-request.js/${sp} ${ji()}`}}),op="4.6.1";class up extends Error{constructor(e,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const lp=["method","baseUrl","url","headers","request","query","mediaType"],cp=["query","method","url"],rl=/\/api\/v3\/?$/;function dp(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const l in r)if(!!cp.includes(l))return Promise.reject(new Error(`[@octokit/graphql] "${l}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((l,h)=>lp.includes(h)?(l[h]=n[h],l):(l.variables||(l.variables={}),l.variables[h]=n[h],l),{}),s=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return rl.test(s)&&(i.url=s.replace(rl,"/api/graphql")),t(i).then(l=>{if(l.data.errors){const h={};for(const b of Object.keys(l.headers))h[b]=l.headers[b];throw new up(i,{headers:h,data:l.data})}return l.data.data})}function ba(t,e){const r=t.defaults(e);return Object.assign((i,s)=>dp(r,i,s),{defaults:ba.bind(null,r),endpoint:Qi.endpoint})}const yv=ba(Qi,{headers:{"user-agent":`octokit-graphql.js/${op} ${ji()}`},method:"POST",url:"/graphql"});function hp(t){return ba(t,{method:"POST",url:"/graphql"})}async function mp(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function pp(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function fp(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=pp(t),e(i)}const gp=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(mp.bind(null,e),{hook:fp.bind(null,e)})},nl="3.3.1";class wa{constructor(e={}){const r=new Dm.Collection,n={baseUrl:Qi.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[e.userAgent,`octokit-core.js/${nl} ${ji()}`].filter(Boolean).join(" "),e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=Qi.defaults(n),this.graphql=hp(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:s,...l}=e,h=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:l},e.auth));r.wrap("request",h.hook),this.auth=h}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=gp(e.auth);r.wrap("request",s.hook),this.auth=s}this.constructor.plugins.forEach(s=>{Object.assign(this,s(this,e))})}static defaults(e){return class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(e.filter(s=>!n.includes(s))),r}}wa.VERSION=nl,wa.plugins=[];const vp="1.0.3";function il(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),i=t.request.endpoint.parse(r),s=i.url.replace(r.baseUrl,"");return e(r).then(l=>(t.log.info(`${i.method} ${s} - ${l.status} in ${Date.now()-n}ms`),l)).catch(l=>{throw t.log.info(`${i.method} ${s} - ${l.status} in ${Date.now()-n}ms`),l})})}il.VERSION=vp;const yp="2.13.2";function bp(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],l=t.data[s];return t.data=l,typeof r!="undefined"&&(t.data.incomplete_results=r),typeof n!="undefined"&&(t.data.repository_selection=n),t.data.total_count=i,t}function _a(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),i=typeof e=="function"?e:t.request,s=n.method,l=n.headers;let h=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!h)return{done:!0};const b=await i({method:s,url:h,headers:l}),T=bp(b);return h=((T.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:T}}})}}function sl(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),al(t,[],_a(t,e,r)[Symbol.asyncIterator](),n)}function al(t,e,r,n){return r.next().then(i=>{if(i.done)return e;let s=!1;function l(){s=!0}return e=e.concat(n?n(i.value,l):i.value.data),s?e:al(t,e,r,n)})}const bv=Object.assign(sl,{iterator:_a}),wp=null;function wv(t){return typeof t=="string"?wp.includes(t):!1}function ol(t){return{paginate:Object.assign(sl.bind(null,t),{iterator:_a.bind(null,t)})}}ol.VERSION=yp;const _p={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},kp="4.12.0";function Ep(t,e){const r={};for(const[n,i]of Object.entries(e))for(const[s,l]of Object.entries(i)){const[h,b,T]=l,[N,q]=h.split(/ /),$=Object.assign({method:N,url:q},b);r[n]||(r[n]={});const V=r[n];if(T){V[s]=Cp(t,n,s,$,T);continue}V[s]=t.request.defaults($)}return r}function Cp(t,e,r,n,i){const s=t.request.defaults(n);function l(...h){let b=s.endpoint.merge(...h);if(i.mapToData)return b=Object.assign({},b,{data:b[i.mapToData],[i.mapToData]:void 0}),s(b);if(i.renamed){const[T,N]=i.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${T}.${N}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const T=s.endpoint.merge(...h);for(const[N,q]of Object.entries(i.renamedParameters))N in T&&(t.log.warn(`"${N}" parameter is deprecated for "octokit.${e}.${r}()". Use "${q}" instead`),q in T||(T[q]=T[N]),delete T[N]);return s(T)}return s(...h)}return Object.assign(l,s)}function ul(t){return Ep(t,_p)}ul.VERSION=kp;const Rp="18.2.0",Tp=wa.plugin(il,ul,ol).defaults({userAgent:`octokit-rest.js/${Rp}`});function Sp(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Wi(t)},r={kind:"Document",definitions:[e]};return r}function Pp(t,e){var r={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Wi(t)},n={kind:"Document",definitions:[r]};return n}function Wi(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return Wi(t[0]);var e=[];Object.keys(t).forEach(function(n){var i=Wi(t[n]),s={kind:"Field",name:{kind:"Name",value:n},selectionSet:i||void 0};e.push(s)});var r={kind:"SelectionSet",selections:e};return r}var Np={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},Ip=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.read({query:e.query,variables:e.variables,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.read({query:Za(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:r})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Za(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var r=e.id,n=e.data;if(typeof r!="undefined"){var i=null;try{i=this.read({rootId:r,optimistic:!1,query:Np})}catch(h){}var s=i&&i.__typename||"__ClientData",l=Object.assign({__typename:s},n);this.writeFragment({id:r,fragment:Pp(l,s),data:l})}else this.writeQuery({query:Sp(n),data:n})},t}(),ll;(function(t){})(ll||(ll={}));var ct=null,cl={},Dp=1,Ap=function(){return function(){function t(){this.id=["slot",Dp++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=ct;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===cl)break;return e!==ct&&(ct.slots[this.id]=r),!0}return ct&&(ct.slots[this.id]=cl),!1},t.prototype.getValue=function(){if(this.hasValue())return ct.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var s,l=(s={__proto__:null},s[this.id]=e,s),h=ct;ct={parent:h,slots:l};try{return r.apply(i,n)}finally{ct=h}},t.bind=function(e){var r=ct;return function(){var n=ct;try{return ct=r,e.apply(this,arguments)}finally{ct=n}}},t.noContext=function(e,r,n){if(ct){var i=ct;try{return ct=null,e.apply(n,r)}finally{ct=i}}else return e.apply(n,r)},t}()},ka="@wry/context:Slot",Ea=Array,Ca=Ea[ka]||function(){var t=Ap();try{Object.defineProperty(Ea,ka,{value:Ea[ka]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),Ra=Ca.bind,Fp=Ca.noContext;function _v(t,e){return setTimeout(Ra(t),e)}function kv(t){return function(){var e=t.apply(this,arguments),r=Ra(e.next),n=Ra(e.throw);return new Promise(function(i,s){function l(T,N){try{var q=T.call(e,N)}catch(V){return s(V)}var $=q.done?i:h;xp(q.value)?q.value.then($,q.done?s:b):$(q.value)}var h=function(T){return l(r,T)},b=function(T){return l(n,T)};h()})}}function xp(t){return t&&typeof t.then=="function"}var dl=null;function Ev(t){if(dl.indexOf(t)<0){var e=function(r,n){var i=r[n];r[n]=function(){return Fp(i,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),dl.push(t)}return t}function Op(){}var Mp=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=Op),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var n=r.older,i=r.newer;i&&(i.older=n),n&&(n.newer=i),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=i)}return r},t.prototype.set=function(e,r){var n=this.getEntry(e);return n?n.value=r:(n={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),Ki=new Ca,Lp=[],Ta=[],qp=100;function En(t,e){if(!t)throw new Error(e||"assertion failure")}function Up(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function hl(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function $p(t){return t.slice(0)}var Hp=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(En(!this.recomputing,"already recomputing"),!(!Gp(this)&&Sa(this)))return Cn(this)?Bp(this):hl(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,ml(this),Pa(this))},t.prototype.dispose=function(){var e=this;yl(this).forEach(Sa),Pa(this),this.parents.forEach(function(r){r.setDirty(),bl(r,e)})},t.count=0,t}();function Gp(t){var e=Ki.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),Cn(t)?fl(e,t):gl(e,t),e}function Bp(t){var e=yl(t);return Ki.withValue(t,Vp,[t]),zp(t)&&jp(t),e.forEach(Sa),hl(t.value)}function Vp(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function Cn(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function jp(t){t.dirty=!1,!Cn(t)&&pl(t)}function ml(t){t.parents.forEach(function(e){return fl(e,t)})}function pl(t){t.parents.forEach(function(e){return gl(e,t)})}function fl(t,e){if(En(t.childValues.has(e)),En(Cn(e)),!t.dirtyChildren)t.dirtyChildren=Ta.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),ml(t)}function gl(t,e){En(t.childValues.has(e)),En(!Cn(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,$p(e.value)):Up(r,e.value)||t.setDirty(),vl(t,e),!Cn(t)&&pl(t)}function vl(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(Ta.length<qp&&Ta.push(r),t.dirtyChildren=null))}function Sa(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function yl(t){var e=Lp;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(r,n){bl(t,n),e.push(n)})),En(t.dirtyChildren===null),e}function bl(t,e){e.parents.delete(t),t.childValues.delete(e),vl(t,e)}function zp(t){if(typeof t.subscribe=="function")try{Pa(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function Pa(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var Na=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return e.forEach(function(n){return r=r.getChildTrie(n)}),r.data||(r.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&Qp(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}();function Qp(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var Wp=new Na(typeof WeakMap=="function");function Kp(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Wp.lookupArray(t)}var Ia=new Set;function Wn(t,e){e===void 0&&(e=Object.create(null));var r=new Mp(e.max||Math.pow(2,16),function(l){return l.dispose()}),n=!!e.disposable,i=e.makeCacheKey||Kp;function s(){if(!(n&&!Ki.hasValue())){var l=i.apply(null,arguments);if(l===void 0)return t.apply(null,arguments);var h=Array.prototype.slice.call(arguments),b=r.get(l);b?b.args=h:(b=new Hp(t,h),r.set(l,b),b.subscribe=e.subscribe,n&&(b.reportOrphan=function(){return r.delete(l)}));var T=b.recompute();return r.set(l,b),Ia.add(r),Ki.hasValue()||(Ia.forEach(function(N){return N.clean()}),Ia.clear()),n?void 0:T}}return s.dirty=function(){var l=i.apply(null,arguments),h=l!==void 0&&r.get(l);h&&h.setDirty()},s}var wl=!1;function _l(){var t=!wl;return Ns()||(wl=!0),t}var Yp=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,r,n){var i=n.store.get(e.id),s=e.id==="ROOT_QUERY";if(!i)return s;var l=i.__typename,h=l===void 0?s&&"Query":l;return h&&h===r?!0:(_l(),"heuristic")},t}(),Cv=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,r,n){Ie(this.isReady,1);var i=n.store.get(e.id),s=e.id==="ROOT_QUERY";if(!i)return s;var l=i.__typename,h=l===void 0?s&&"Query":l;if(Ie(h,2),h===r)return!0;var b=this.possibleTypesMap[r];return!!(h&&b&&b.indexOf(h)>-1)},t.prototype.parseIntrospectionResult=function(e){var r={};return e.__schema.types.forEach(function(n){(n.kind==="UNION"||n.kind==="INTERFACE")&&(r[n.name]=n.possibleTypes.map(function(i){return i.name}))}),r},t}(),kl=Object.prototype.hasOwnProperty,Rn=function(){function t(e){var r=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=Wn(function(n){return r.data[n]},{disposable:!0,makeCacheKey:function(n){return n}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,r){var n=this.data[e];r!==n&&(this.data[e]=r,this.depend.dirty(e))},t.prototype.delete=function(e){kl.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var r=this;e?(Object.keys(e).forEach(function(n){r.set(n,e[n])}),Object.keys(this.data).forEach(function(n){kl.call(e,n)||r.delete(n)})):Object.keys(this.data).forEach(function(n){r.delete(n)})},t}();function El(t){return new Rn(t)}var Xp=function(){function t(e){var r=this,n=e===void 0?{}:e,i=n.cacheKeyRoot,s=i===void 0?new Na(Ts):i,l=n.freezeResults,h=l===void 0?!1:l,b=this,T=b.executeStoreQuery,N=b.executeSelectionSet,q=b.executeSubSelectedArray;this.freezeResults=h,this.executeStoreQuery=Wn(function($){return T.call(r,$)},{makeCacheKey:function($){var V=$.query,Y=$.rootValue,Q=$.contextValue,ee=$.variableValues,te=$.fragmentMatcher;if(Q.store instanceof Rn)return s.lookup(Q.store,V,te,JSON.stringify(ee),Y.id)}}),this.executeSelectionSet=Wn(function($){return N.call(r,$)},{makeCacheKey:function($){var V=$.selectionSet,Y=$.rootValue,Q=$.execContext;if(Q.contextValue.store instanceof Rn)return s.lookup(Q.contextValue.store,V,Q.fragmentMatcher,JSON.stringify(Q.variableValues),Y.id)}}),this.executeSubSelectedArray=Wn(function($){return q.call(r,$)},{makeCacheKey:function($){var V=$.field,Y=$.array,Q=$.execContext;if(Q.contextValue.store instanceof Rn)return s.lookup(Q.contextValue.store,V,Y,JSON.stringify(Q.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(ie(ie({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,n=e.query,i=e.variables,s=e.previousResult,l=e.returnPartialData,h=l===void 0?!0:l,b=e.rootId,T=b===void 0?"ROOT_QUERY":b,N=e.fragmentMatcherFunction,q=e.config,$=Ac(n);i=_s({},Cs($),i);var V={store:r,dataIdFromObject:q&&q.dataIdFromObject,cacheRedirects:q&&q.cacheRedirects||{}},Y=this.executeStoreQuery({query:n,rootValue:{type:"id",id:T,generated:!0,typename:"Query"},contextValue:V,variableValues:i,fragmentMatcher:N}),Q=Y.missing&&Y.missing.length>0;return Q&&!h&&Y.missing.forEach(function(ee){if(!ee.tolerable)throw new at(8)}),s&&Mt(s,Y.result)&&(Y.result=s),{result:Y.result,complete:!Q}},t.prototype.executeStoreQuery=function(e){var r=e.query,n=e.rootValue,i=e.contextValue,s=e.variableValues,l=e.fragmentMatcher,h=l===void 0?Jp:l,b=Es(r),T=vi(r),N=yi(T),q={query:r,fragmentMap:N,contextValue:i,variableValues:s,fragmentMatcher:h};return this.executeSelectionSet({selectionSet:b.selectionSet,rootValue:n,execContext:q})},t.prototype.executeSelectionSet=function(e){var r=this,n=e.selectionSet,i=e.rootValue,s=e.execContext,l=s.fragmentMap,h=s.contextValue,b=s.variableValues,T={result:null},N=[],q=h.store.get(i.id),$=q&&q.__typename||i.id==="ROOT_QUERY"&&"Query"||void 0;function V(Y){var Q;return Y.missing&&(T.missing=T.missing||[],(Q=T.missing).push.apply(Q,Y.missing)),Y.result}return n.selections.forEach(function(Y){var Q;if(!!ws(Y,b))if(Tr(Y)){var ee=V(r.executeField(q,$,Y,s));typeof ee!="undefined"&&N.push((Q={},Q[An(Y)]=ee,Q))}else{var te=void 0;if(mi(Y))te=Y;else if(te=l[Y.name.value],!te)throw new at(9);var ue=te.typeCondition&&te.typeCondition.name.value,le=!ue||s.fragmentMatcher(i,ue,h);if(le){var ae=r.executeSelectionSet({selectionSet:te.selectionSet,rootValue:i,execContext:s});le==="heuristic"&&ae.missing&&(ae=ie(ie({},ae),{missing:ae.missing.map(function(ye){return ie(ie({},ye),{tolerable:!0})})})),N.push(V(ae))}}}),T.result=Ds(N),this.freezeResults,T},t.prototype.executeField=function(e,r,n,i){var s=i.variableValues,l=i.contextValue,h=n.name.value,b=bs(n,s),T={resultKey:An(n),directives:Sc(n,s)},N=Zp(e,r,h,b,l,T);return Array.isArray(N.result)?this.combineExecResults(N,this.executeSubSelectedArray({field:n,array:N.result,execContext:i})):n.selectionSet?N.result==null?N:this.combineExecResults(N,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:N.result,execContext:i})):(Cl(n,N.result),this.freezeResults,N)},t.prototype.combineExecResults=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e.forEach(function(i){i.missing&&(n=n||[],n.push.apply(n,i.missing))}),{result:e.pop().result,missing:n}},t.prototype.executeSubSelectedArray=function(e){var r=this,n=e.field,i=e.array,s=e.execContext,l;function h(b){return b.missing&&(l=l||[],l.push.apply(l,b.missing)),b.result}return i=i.map(function(b){return b===null?null:Array.isArray(b)?h(r.executeSubSelectedArray({field:n,array:b,execContext:s})):n.selectionSet?h(r.executeSelectionSet({selectionSet:n.selectionSet,rootValue:b,execContext:s})):(Cl(n,b),b)}),this.freezeResults,{result:i,missing:l}},t}();function Cl(t,e){if(!t.selectionSet&&pi(e))throw new at(10)}function Jp(){return!0}function Rv(t){invariant(isIdValue(t),11)}function Zp(t,e,r,n,i,s){var l=s.resultKey,h=s.directives,b=r;(n||h)&&(b=Xa(b,n,h));var T=void 0;if(t&&(T=t[b],typeof T=="undefined"&&i.cacheRedirects&&typeof e=="string")){var N=i.cacheRedirects[e];if(N){var q=N[r];q&&(T=q(t,n,{getCacheKey:function($){var V=i.dataIdFromObject($);return V&&fi({id:V,typename:$.__typename})}}))}}return typeof T=="undefined"?{result:T,missing:[{object:t,fieldName:b,tolerable:!1}]}:(Rc(T)&&(T=T.json),{result:T})}var Yi=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){this.data[e]=r},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function Tv(t){return new Yi(t)}var ef=function(t){nr(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="WriteError",r}return e}(Error);function tf(t,e){var r=new ef(`Error writing result to store for query:
 `+JSON.stringify(e));return r.message+=`
`+t.message,r.stack=t.stack,r}var rf=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var r=e.query,n=e.result,i=e.store,s=i===void 0?El():i,l=e.variables,h=e.dataIdFromObject,b=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:r,store:s,variables:l,dataIdFromObject:h,fragmentMatcherFunction:b})},t.prototype.writeResultToStore=function(e){var r=e.dataId,n=e.result,i=e.document,s=e.store,l=s===void 0?El():s,h=e.variables,b=e.dataIdFromObject,T=e.fragmentMatcherFunction,N=Zr(i);try{return this.writeSelectionSetToStore({result:n,dataId:r,selectionSet:N.selectionSet,context:{store:l,processedData:{},variables:_s({},Cs(N),h),dataIdFromObject:b,fragmentMap:yi(vi(i)),fragmentMatcherFunction:T}})}catch(q){throw tf(q,i)}},t.prototype.writeSelectionSetToStore=function(e){var r=this,n=e.result,i=e.dataId,s=e.selectionSet,l=e.context,h=l.variables,b=l.store,T=l.fragmentMap;return s.selections.forEach(function(N){var q;if(!!ws(N,h))if(Tr(N)){var $=An(N),V=n[$];if(typeof V!="undefined")r.writeFieldToStore({dataId:i,value:V,field:N,context:l});else{var Y=!1,Q=!1;N.directives&&N.directives.length&&(Y=N.directives.some(function(Oe){return Oe.name&&Oe.name.value==="defer"}),Q=N.directives.some(function(Oe){return Oe.name&&Oe.name.value==="client"})),!Y&&!Q&&l.fragmentMatcherFunction}}else{var ee=void 0;mi(N)?ee=N:(ee=(T||{})[N.name.value],Ie(ee,3));var te=!0;if(l.fragmentMatcherFunction&&ee.typeCondition){var ue=i||"self",le=fi({id:ue,typename:void 0}),ae={store:new Yi((q={},q[ue]=n,q)),cacheRedirects:{}},ye=l.fragmentMatcherFunction(le,ee.typeCondition.name.value,ae);!ao()&&ye==="heuristic",te=!!ye}te&&r.writeSelectionSetToStore({result:n,selectionSet:ee.selectionSet,dataId:i,context:l})}}),b},t.prototype.writeFieldToStore=function(e){var r,n=e.field,i=e.value,s=e.dataId,l=e.context,h=l.variables,b=l.dataIdFromObject,T=l.store,N,q,$=Ec(n,h);if(!n.selectionSet||i===null)N=i!=null&&typeof i=="object"?{type:"json",json:i}:i;else if(Array.isArray(i)){var V=s+"."+$;N=this.processArrayValue(i,V,n.selectionSet,l)}else{var Y=s+"."+$,Q=!0;if(Da(Y)||(Y="$"+Y),b){var ee=b(i);Ie(!ee||!Da(ee),4),(ee||typeof ee=="number"&&ee===0)&&(Y=ee,Q=!1)}Tl(Y,n,l.processedData)||this.writeSelectionSetToStore({dataId:Y,result:i,selectionSet:n.selectionSet,context:l});var te=i.__typename;N=fi({id:Y,typename:te},Q),q=T.get(s);var ue=q&&q[$];if(ue!==N&&pi(ue)){var le=ue.typename!==void 0,ae=te!==void 0,ye=le&&ae&&ue.typename!==te;Ie(!Q||ue.generated||ye,5),Ie(!le||ae,6),ue.generated&&(ye?Q||T.delete(ue.id):Rl(ue.id,N.id,T))}}q=T.get(s),(!q||!Mt(N,q[$]))&&T.set(s,ie(ie({},q),(r={},r[$]=N,r)))},t.prototype.processArrayValue=function(e,r,n,i){var s=this;return e.map(function(l,h){if(l===null)return null;var b=r+"."+h;if(Array.isArray(l))return s.processArrayValue(l,b,n,i);var T=!0;if(i.dataIdFromObject){var N=i.dataIdFromObject(l);N&&(b=N,T=!1)}return Tl(b,n,i.processedData)||s.writeSelectionSetToStore({dataId:b,result:l,selectionSet:n,context:i}),fi({id:b,typename:l.__typename},T)})},t}();function Da(t){return t[0]==="$"}function Rl(t,e,r){if(t===e)return!1;var n=r.get(t),i=r.get(e),s=!1;Object.keys(n).forEach(function(h){var b=n[h],T=i[h];pi(b)&&Da(b.id)&&pi(T)&&!Mt(b,T)&&Rl(b.id,T.id,r)&&(s=!0)}),r.delete(t);var l=ie(ie({},n),i);return Mt(l,i)?s:(r.set(e,l),!0)}function Tl(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var nf={fragmentMatcher:new Yp,dataIdFromObject:sf,addTypename:!0,resultCaching:!0,freezeResults:!1};function sf(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var af=Object.prototype.hasOwnProperty,Sl=function(t){nr(e,t);function e(r,n,i){var s=t.call(this,Object.create(null))||this;return s.optimisticId=r,s.parent=n,s.transaction=i,s}return e.prototype.toObject=function(){return ie(ie({},this.parent.toObject()),this.data)},e.prototype.get=function(r){return af.call(this.data,r)?this.data[r]:this.parent.get(r)},e}(Yi),of=function(t){nr(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new Na(Ts),n.silenceBroadcast=!1,n.config=ie(ie({},nf),r),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new Rn:new Yi,n.optimisticData=n.data,n.storeWriter=new rf,n.storeReader=new Xp({cacheKeyRoot:n.cacheKeyRoot,freezeResults:r.freezeResults});var i=n,s=i.maybeBroadcastWatch;return n.maybeBroadcastWatch=Wn(function(l){return s.call(n,l)},{makeCacheKey:function(l){if(!l.optimistic&&!l.previousResult&&i.data instanceof Rn)return i.cacheKeyRoot.lookup(l.query,JSON.stringify(l.variables))}}),n}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).toObject()},e.prototype.read=function(r){if(typeof r.rootId=="string"&&typeof this.data.get(r.rootId)=="undefined")return null;var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.readQueryFromStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,rootId:r.rootId,fragmentMatcherFunction:i,previousResult:r.previousResult,config:this.config})||null},e.prototype.write=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;this.storeWriter.writeResultToStore({dataId:r.dataId,result:r.result,variables:r.variables,document:this.transformDocument(r.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},e.prototype.diff=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,returnPartialData:r.returnPartialData,previousResult:r.previousResult,fragmentMatcherFunction:i,config:this.config})},e.prototype.watch=function(r){var n=this;return this.watches.add(r),function(){n.watches.delete(r)}},e.prototype.evict=function(r){throw new at(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){for(var n=[],i=0,s=this.optimisticData;s instanceof Sl;)s.optimisticId===r?++i:n.push(s),s=s.parent;if(i>0){for(this.optimisticData=s;n.length>0;){var l=n.pop();this.performTransaction(l.transaction,l.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(r,n){var i=this,s=i.data,l=i.silenceBroadcast;this.silenceBroadcast=!0,typeof n=="string"&&(this.data=this.optimisticData=new Sl(n,this.optimisticData,r));try{r(this)}finally{this.silenceBroadcast=l,this.data=s}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(r,n){return this.performTransaction(r,n)},e.prototype.transformDocument=function(r){if(this.addTypename){var n=this.typenameDocumentCache.get(r);return n||(n=Oc(r),this.typenameDocumentCache.set(r,n),this.typenameDocumentCache.set(n,n)),n}return r},e.prototype.broadcastWatches=function(){var r=this;this.silenceBroadcast||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n)})},e.prototype.maybeBroadcastWatch=function(r){r.callback(this.diff({query:r.query,variables:r.variables,previousResult:r.previousResult&&r.previousResult(),optimistic:r.optimistic}))},e}(Ip);function uf(t){return new Lt(function(e,r){var n=Ba(e,[]);return new yt(function(i){var s;return Promise.resolve(n).then(function(l){return t(l,e.getContext())}).then(e.setContext).then(function(){s=r(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){s&&s.unsubscribe()}})})}var lf=be(3033),cf={includeQuery:!0,includeExtensions:!1},df={accept:"*/*","content-type":"application/json"},hf={method:"POST"},mf={http:cf,headers:df,options:hf},Pl=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n},pf=function(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(i){var n=i;return n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=r,Promise.reject(n)}}).then(function(r){return e.status>=300&&Pl(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!r.hasOwnProperty("data")&&!r.hasOwnProperty("errors")&&Pl(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(n){return n.operationName}):t.operationName)+"'."),r})}},ff=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new at(1)}},gf=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},vf=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=ie({},e.options,{headers:e.headers,credentials:e.credentials}),s=e.http;r.forEach(function(q){i=ie({},i,q.options,{headers:ie({},i.headers,q.headers)}),q.credentials&&(i.credentials=q.credentials),s=ie({},s,q.http)});var l=t.operationName,h=t.extensions,b=t.variables,T=t.query,N={operationName:l,variables:b};return s.includeExtensions&&(N.extensions=h),s.includeQuery&&(N.query=(0,lf.S)(T)),{options:i,body:N}},Aa=function(t,e){var r;try{r=JSON.stringify(t)}catch(i){var n=new at(2);throw n.parseError=i,n}return r},yf=function(t,e){var r=t.getContext(),n=r.uri;return n||(typeof e=="function"?e(t):e||"/graphql")},Nl=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,n=t.fetch,i=t.includeExtensions,s=t.useGETForQueries,l=Ba(t,["uri","fetch","includeExtensions","useGETForQueries"]);ff(n),n||(n=fetch);var h={http:{includeExtensions:i},options:l.fetchOptions,credentials:l.credentials,headers:l.headers};return new Lt(function(b){var T=yf(b,r),N=b.getContext(),q={};if(N.clientAwareness){var $=N.clientAwareness,V=$.name,Y=$.version;V&&(q["apollographql-client-name"]=V),Y&&(q["apollographql-client-version"]=Y)}var Q=ie({},q,N.headers),ee={http:N.http,options:N.fetchOptions,credentials:N.credentials,headers:Q},te=vf(b,mf,h,ee),ue=te.options,le=te.body,ae;if(!ue.signal){var ye=gf(),Oe=ye.controller,Me=ye.signal;ae=Oe,ae&&(ue.signal=Me)}var Qe=function(Bt){return Bt.kind==="OperationDefinition"&&Bt.operation==="mutation"};if(s&&!b.query.definitions.some(Qe)&&(ue.method="GET"),ue.method==="GET"){var Ae=bf(T,le),Mr=Ae.newURI,ni=Ae.parseError;if(ni)return mo(ni);T=Mr}else try{ue.body=Aa(le,"Payload")}catch(Bt){return mo(Bt)}return new yt(function(Bt){return n(T,ue).then(function(ft){return b.setContext({response:ft}),ft}).then(pf(b)).then(function(ft){return Bt.next(ft),Bt.complete(),ft}).catch(function(ft){ft.name!=="AbortError"&&(ft.result&&ft.result.errors&&ft.result.data&&Bt.next(ft.result),Bt.error(ft))}),function(){ae&&ae.abort()}})})};function bf(t,e){var r=[],n=function(q,$){r.push(q+"="+encodeURIComponent($))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=Aa(e.variables,"Variables map")}catch(q){return{parseError:q}}n("variables",i)}if(e.extensions){var s=void 0;try{s=Aa(e.extensions,"Extensions map")}catch(q){return{parseError:q}}n("extensions",s)}var l="",h=t,b=t.indexOf("#");b!==-1&&(l=t.substr(b),h=t.substr(0,b));var T=h.indexOf("?")===-1?"?":"&",N=h+T+r.join("&")+l;return{newURI:N}}var Sv=function(t){nr(e,t);function e(r){return t.call(this,Nl(r).request)||this}return e}(Lt),wf=Object.defineProperty,Kn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Il="Try again?",_f="Cancel",Dl="Sign in",kf="Don't show again",Al="prompt for sign in",Fl="login",xl="github",Ol=["read:user","user:email","repo"];class Ef{constructor(e){this._telemetry=e,Kn(this,"_githubAPI"),Kn(this,"_sessionId"),Kn(this,"_disposables"),Kn(this,"_onDidInitialize",new o.EventEmitter),Kn(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(o.authentication.onDidChangeSessions(()=>{if(!this.isAuthenticated())return this.initialize()}))}async initialize(){const e=await o.authentication.getSession(xl,Ol,{createIfNone:!1});if(e){const r=e.accessToken;this._sessionId=e.id;const n=await this.createHub(r);this._githubAPI=n,await this.setCurrentUser(n),this._onDidInitialize.fire()}else K.debug("No token found.","Authentication")}async reset(){this._githubAPI=void 0,await this.initialize()}isAuthenticated(){return!!this._githubAPI}getHub(){return this._githubAPI}async getHubOrLogin(){var e;return(e=this._githubAPI)!=null?e:await this.login()}async showSignInNotification(){if(Mu(Al,Fl)===!1)return;if(await o.window.showInformationMessage("In order to use the Pull Requests functionality, you must sign in to GitHub",Dl,kf)===Dl)return await this.login();Lu(Al,Fl,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async logout(){this._sessionId&&o.authentication.logout("github",this._sessionId)}async login(){this._telemetry.sendTelemetryEvent("auth.start");let e=!0,r;for(;e;){try{const n=await this.getSessionOrLogin();r=await this.createHub(n)}catch(n){K.appendLine(`Error signing in to GitHub: ${n}`),n instanceof Error&&n.stack&&K.appendLine(n.stack)}r?e=!1:e=await o.window.showErrorMessage("Error signing in to GitHub",Il,_f)===Il}return r?(this._githubAPI=r,await this.setCurrentUser(r),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),r}isCurrentUser(e){var r,n;return((n=(r=this._githubAPI)==null?void 0:r.currentUser)==null?void 0:n.login)===e}getCurrentUser(){var e;return((e=this._githubAPI)==null?void 0:e.octokit)&&this._githubAPI.currentUser}async setCurrentUser(e){const r=await e.octokit.users.getAuthenticated({});e.currentUser=r.data}async getSessionOrLogin(){const e=await o.authentication.getSession(xl,Ol,{createIfNone:!0});return this._sessionId=e.id,e.accessToken}async createHub(e){const r=new Tp({request:{agent:Wo},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`}),n=new yd({link:Cf("https://api.github.com",e||""),cache:new of,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),i={octokit:r,graphql:n};return await this.setCurrentUser(i),i}dispose(){this._disposables.forEach(e=>e.dispose())}}const Cf=(t,e)=>uf((r,{headers:n})=>({headers:{...n,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Nl({uri:`${t}/graphql`,fetch:js}));var Rf=Object.defineProperty,Yn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Pv extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Nv extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Iv extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const Dv="remotes",Av="No Milestone";class Ml{constructor(e,r,n){this._folderManagers=e,this._credentialStore=r,this._telemetry=n,Yn(this,"_subs"),Yn(this,"_onDidChangeState",new o.EventEmitter),Yn(this,"onDidChangeState",this._onDidChangeState.event),Yn(this,"_state",Rt.Initializing),this._subs=[],o.commands.executeCommand("setContext",vu,this._state),this._subs.push(...e.map(i=>i.onDidLoadRepositories(s=>this.state=s)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const r=o.workspace.workspaceFolders;if(r){const n=r.findIndex(i=>i.uri.toString()===e.repository.rootUri.toString());if(n>-1){const i=this._folderManagers.slice(n,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,n),this._folderManagers.push(e),this._folderManagers.push(...i);return}}this._folderManagers.push(e)}removeRepo(e){const r=this._folderManagers.findIndex(n=>n.repository.rootUri.toString()===e.rootUri.toString());if(r>-1){const n=this._folderManagers[r];this._folderManagers.splice(r),n.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const r=e.remote.url.substring(0,e.remote.url.length-v.extname(e.remote.url).length);for(const n of this._folderManagers)if(n.gitHubRepositories.map(i=>i.remote.url.substring(0,i.remote.url.length-v.extname(i.remote.url).length)).includes(r))return n}getManagerForFile(e){for(const r of this._folderManagers){const n=r.repository.rootUri.path,i=e.path.substring(n.length>1?n.length+1:n.length);if(o.Uri.joinPath(r.repository.rootUri,i).path===e.path)return r}}get state(){return this._state}set state(e){const r=e!==this._state;this._state=e,r&&(o.commands.executeCommand("setContext",vu,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=Rt.Initializing}async authenticate(){return!!await this._credentialStore.login()}createGitHubRepository(e,r){return new rn(e,r,this._telemetry)}createGitHubRepositoryFromOwnerName(e,r){const n=`https://github.com/${e}/${r}`;return new rn(new Ei(r,n,new Be(n)),this._credentialStore,this._telemetry)}dispose(){this._subs.forEach(e=>e.dispose())}}Yn(Ml,"ID","RepositoriesManager");function Fv(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var Tf=Object.defineProperty,Zt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Fa{constructor(e){Zt(this,"_onDidOpenRepository",new o.EventEmitter),Zt(this,"onDidOpenRepository",this._onDidOpenRepository.event),Zt(this,"_onDidCloseRepository",new o.EventEmitter),Zt(this,"onDidCloseRepository",this._onDidCloseRepository.event),Zt(this,"_onDidChangeState",new o.EventEmitter),Zt(this,"onDidChangeState",this._onDidChangeState.event),Zt(this,"_onDidPublish",new o.EventEmitter),Zt(this,"onDidPublish",this._onDidPublish.event),Zt(this,"_gitAPI"),Zt(this,"_disposables");const r=e.exports;this._gitAPI=r.getAPI(1),this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(n=>this._onDidCloseRepository.fire(n))),this._disposables.push(this._gitAPI.onDidOpenRepository(n=>this._onDidOpenRepository.fire(n))),this._disposables.push(this._gitAPI.onDidChangeState(n=>this._onDidChangeState.fire(n))),this._disposables.push(this._gitAPI.onDidPublish(n=>this._onDidPublish.fire(n)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static createProvider(){const e=o.extensions.getExtension("vscode.git");if(e)return new Fa(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var Sf=Object.defineProperty,et=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Pf{constructor(e){this._liveShareAPI=e,et(this,"_onDidOpenRepository",new o.EventEmitter),et(this,"onDidOpenRepository",this._onDidOpenRepository.event),et(this,"_onDidCloseRepository",new o.EventEmitter),et(this,"onDidCloseRepository",this._onDidCloseRepository.event),et(this,"_openRepositories",[]),et(this,"_sharedServiceProxy"),et(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(qr)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(o.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(r)}),e.removed.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(r)})}async _refreshWorkspaces(e){o.workspace.workspaceFolders&&o.workspace.workspaceFolders.forEach(async r=>{r.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(r):await this.closeVSLSRepository(r))})}async openVSLSRepository(e){if(this.getRepository(e))return;const n=new Df(e,this._sharedServiceProxy),i=new Nf,s=new Proxy(n,i);await s.initialize(),this.openRepository(s)}async closeVSLSRepository(e){const r=this.getRepository(e);!r||this.closeRepository(r)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(r=>r!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(r=>r.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class Nf{constructor(){}get(e,r){return r in e?e[r]:function(...n){return e.proxy.request(Lr,[r,e.workspaceFolder.uri.toString(),...n])}}}class If{constructor(e){et(this,"HEAD"),et(this,"refs"),et(this,"remotes"),et(this,"submodules",[]),et(this,"rebaseCommit"),et(this,"mergeChanges",[]),et(this,"indexChanges",[]),et(this,"workingTreeChanges",[]),et(this,"_onDidChange",new o.EventEmitter),et(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Df{constructor(e,r){this.workspaceFolder=e,this.proxy=r,et(this,"rootUri"),et(this,"state")}async initialize(){const e=await this.proxy.request(Lr,[gt,this.workspaceFolder.uri.toString()]);this.state=new If(e),this.rootUri=o.Uri.parse(e.rootUri),this.proxy.onNotify(kr,this._notifyHandler.bind(this))}_notifyHandler(e){var r;(r=this.state)==null||r.update(e)}}var Af=Object.defineProperty,Ll=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ff{constructor(e,r){this._liveShareAPI=e,this._api=r,Ll(this,"_sharedService"),Ll(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(qr)||void 0,this._sharedService&&this._sharedService.onRequest(Lr,this._gitHandler.bind(this))}async _gitHandler(e){const r=e[0],n=e[1],i=o.Uri.parse(n),s=this._liveShareAPI.convertSharedUriToLocal(i),l=this._api.getGitProvider(s);if(!l)return;const h=l.repositories.filter(b=>b.rootUri.toString()===s.toString())[0];if(h){const b=e.slice(2);if(r===gt)return this._disposables.push(h.state.onDidChange(T=>{this._sharedService.notify(kr,{HEAD:h.state.HEAD,remotes:h.state.remotes,refs:h.state.refs})})),{HEAD:h.state.HEAD,remotes:h.state.remotes,refs:h.state.refs,rootUri:i.toString()};if(r==="show"){const T=b[1],N=i.with({path:T}),q=this._liveShareAPI.convertSharedUriToLocal(N);return b[1]=q.fsPath,h[r](...b)}if(h[r])return h[r](...b)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var xf=Object.defineProperty,Xn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function Of(){const t=o.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const r="0.3.967";return e.getApi?e.getApi(r):e.getApiAsync(r)}class Mf{constructor(e){this._api=e,Xn(this,"_liveShareAPI"),Xn(this,"_host"),Xn(this,"_guest"),Xn(this,"_localDisposables"),Xn(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await Of()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(r=>r.dispose()),e.role===1){this._host=new Ff(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new Pf(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function Lf(t){return new Mf(t)}function qf(t,e){const r=Fa.createProvider();if(r)return e.registerGitProvider(r),r}var Uf=Object.defineProperty,ql=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $f{constructor(e){this.pullRequestManager=e,ql(this,"onNotifiedEmitter",new o.EventEmitter),ql(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(r=>{r.onDidChangeAssignableUsers(n=>{this.notifySuggestedAccounts(n)})})}async requestAsync(e,r,n){let i=null;switch(e){case"initialize":i={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const s=new Map;for(const l of this.pullRequestManager.folderManagers){const h=l.getAllAssignableUsers();if(!!h)for(const b of h)s.has(b.login)||s.set(b.login,b)}s.size>0&&this.notifySuggestedAccounts(Array.from(s.values()));break;default:throw new Error(`type:${e} not supported`)}return i}async notifySuggestedAccounts(e){let r;try{r=await this.getCurrentUserLogin()}catch(n){}r&&e.findIndex(n=>n.login===r)!==-1&&this.notifySuggestedUsers(e.filter(n=>n.email).map(n=>({id:n.login,displayName:n.name?n.name:n.login,email:n.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const r=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(r){const n=r.hub.currentUser;if(n)return n.login}}notify(e,r){this.onNotifiedEmitter.fire({type:e,body:r})}notifySuggestedUsers(e,r){this.notify("suggestedUsers",{contacts:e,exclusive:r})}}var Hf=Object.defineProperty,Ul=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Gf{constructor(){Ul(this,"_extensionsDisposable"),Ul(this,"_subscriptions",[]),this._extensionsDisposable=o.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),o.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(r){r.branch.isRemote||o.commands.executeCommand("pr.create",{repoPath:r.repoPath,compareBranch:r.branch.name})}}))}async onExtensionsChanged(){var e;const r=(e=o.extensions.getExtension("eamodio.gitlens"))!=null?e:o.extensions.getExtension("eamodio.gitlens-insiders");if(r)if(this._extensionsDisposable.dispose(),r.isActive)this.register(await r.exports);else{let n=0;const i=setInterval(async()=>{r.isActive?(clearInterval(i),this.register(await r.exports)):(n++,n>60&&clearInterval(i))},1e3)}}}var Bf=Object.defineProperty,Yr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $l{constructor(e,r,n,i,s){this.issueModel=e,this.manager=r,this.stateManager=n,this.shouldPromptForBranch=s,Yr(this,"repoChangeDisposable"),Yr(this,"_branchName"),Yr(this,"user"),Yr(this,"repo"),Yr(this,"_repoDefaults"),Yr(this,"_onDidChangeCurrentIssueState",new o.EventEmitter),Yr(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(i!=null?i:this.issueModel.githubRepository.remote)}setRepo(e){var r;for(let n=0;n<this.stateManager.gitAPI.repositories.length;n++){const i=this.stateManager.gitAPI.repositories[n];for(let s=0;s<i.state.remotes.length;s++){const l=i.state.remotes[s];if(l.name===(e==null?void 0:e.remoteName)&&((r=l.fetchUrl)==null?void 0:r.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=i;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const r=this.manager.getCurrentUser(this.issueModel).login;return o.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(n=>n.login===r))&&(await this.manager.assignIssue(this.issueModel,r),await this.stateManager.refresh()),!0}}catch(r){o.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(r){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(r){return o.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${r.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async ensureBranchTitleConfigMigrated(){var e;const r=o.workspace.getConfiguration(Ye),n=r.inspect(tu);async function i(s,l){await r.update(Ws,s,l),await r.update(tu,void 0,l)}return(n==null?void 0:n.globalValue)&&await i(n.globalValue,o.ConfigurationTarget.Global),(n==null?void 0:n.workspaceValue)&&await i(n.workspaceValue,o.ConfigurationTarget.Workspace),(n==null?void 0:n.workspaceFolderValue)&&await i(n.workspaceFolderValue,o.ConfigurationTarget.WorkspaceFolder),(e=o.workspace.getConfiguration(Ye).get(Ws))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const r=/[^ \\@\~\^\?\*\[]+/,n=e.match(r);if(n&&n.length>0&&n[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const r="Edit Setting";o.window.showErrorMessage(e,r).then(n=>{n===r&&o.commands.executeCommand("workbench.action.openSettings",`${Ye}.${Ws}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":o.workspace.getConfiguration(Ye).get(ru);if(e==="off")return!0;const r=this.stateManager.getSavedIssueState(this.issueModel.number);if(this._branchName=this.shouldPromptForBranch?void 0:r.branch,!this._branchName){const n=await Ui(await this.ensureBranchTitleConfigMigrated(),this.issue,void 0,await this.getUser());if(e==="on"){const i=this.validateBranchName(n);if(i)return this.showBranchNameError(i),!1;this._branchName=n}else this._branchName=await o.window.showInputBox({value:n,prompt:"Enter the label for the new branch."})}return this._branchName?(r.branch=this._branchName,this.stateManager.setSavedIssueState(this.issueModel,r),await this.createOrCheckoutBranch(this._branchName)||(this._branchName=void 0),!0):!1}async getCommitMessage(){const e=o.workspace.getConfiguration(Ye).get(vh);if(typeof e=="string")return Ui(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}class Hl extends o.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,o.CompletionItemKind.Issue);this.issue=e}}class Vf{constructor(e,r,n){this.stateManager=e,this.repositoriesManager=r,this.context=n}async provideCompletionItems(e,r,n,i){var s,l,h,b;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&r.character>0&&i.triggerKind===o.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(r)).match(/#[0-9]*$/))return[];if(r.character<=6&&e.languageId==="markdown"&&e.getText(new o.Range(r.with(void 0,0),r))===new Array(r.character+1).join("#"))return[];if(i.triggerKind===o.CompletionTriggerKind.TriggerCharacter&&o.workspace.getConfiguration(Ye).get("ignoreCompletionTrigger",[]).find(Q=>Q===e.languageId))return[];if(e.languageId!=="scminput"&&!await Zs(e,r))return[];let T=new o.Range(r,r);r.character-1>=0&&e.getText(new o.Range(r.translate(0,-1),r))==="#"&&(T=new o.Range(r.translate(0,-1),r)),await this.stateManager.tryInitializeAndWait();const N=new Map,q=new Date;let $,V;if(e.languageId==="scminput"?V=hu(e.uri):e.uri.scheme==="comment"?V=o.window.visibleTextEditors.length>0?(s=o.workspace.getWorkspaceFolder(o.Uri.file(o.window.visibleTextEditors[0].document.uri.fsPath)))==null?void 0:s.uri:void 0:V=(l=o.workspace.getWorkspaceFolder(e.uri))==null?void 0:l.uri,!V)return[];try{$=await((h=this.repositoriesManager.getManagerForFile(V))==null?void 0:h.getPullRequestDefaults())}catch(Q){}const Y=this.stateManager.getIssueCollection(V);for(const Q of Y){const ee=(b=await Q[1])!=null?b:[];if(ee.length!==0)if(ee[0]instanceof ot){let te=0;for(const ue of ee)N.set(cn(ue),await this.completionItemFromIssue($,ue,q,T,e,te++))}else for(let te=0;te<ee.length;te++){const ue=ee[te];for(const le of ue.issues)N.set(cn(le),await this.completionItemFromIssue($,le,q,T,e,te,ue.milestone))}}return[...N.values()]}async completionItemFromIssue(e,r,n,i,s,l,h){var b;const T=new Hl(r);if(s.languageId==="markdown")T.insertText=`[${cn(r,e)}](${r.html_url})`;else{const q=o.workspace.getConfiguration(Ye).get("issueCompletionFormatScm");s.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof q=="string"?T.insertText=await Ui(q,r,e):T.insertText=`${cn(r,e)}`}T.documentation=r.body,T.range=i,T.detail=h?h.title:(b=r.milestone)==null?void 0:b.title;let N=(n.getTime()-new Date(r.updatedAt).getTime()).toString();return N=new Array(20-N.length).join("0")+N,T.sortText=`${l} ${N}`,T.filterText=`${T.detail} # ${r.number} ${r.title} ${T.documentation}`,T}async resolveCompletionItem(e,r){return e instanceof Hl&&(e.documentation=await Xs(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}var jf=Object.defineProperty,Jn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const vr="newIssue",zf="NewIssue.md",Xi="Assignees:",Zn="Labels:";function xa(t){const e=JSON.parse(t.query);if(e.origin)return o.Uri.parse(e.origin)}class Qf{constructor(){Jn(this,"content"),Jn(this,"createTime",0),Jn(this,"modifiedTime",0),Jn(this,"_onDidChangeFile",new o.EventEmitter),Jn(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){const n=this.onDidChangeFile(i=>{i.length===0&&i[0].type===o.FileChangeType.Deleted&&n.dispose()});return n}stat(e){var r,n;return{type:o.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(n=(r=this.content)==null?void 0:r.length)!=null?n:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var r;return(r=this.content)!=null?r:new Uint8Array(0)}writeFile(e,r,n={create:!1,overwrite:!1}){const i=this.content;this.content=r,i===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:o.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:o.FileChangeType.Changed}]))}delete(e,r){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:o.FileChangeType.Deleted}])}rename(e,r,n){}}class Wf{constructor(e){this.manager=e}async provideCompletionItems(e,r,n,i){if(!e.lineAt(r.line).text.startsWith(Zn))return[];const s=xa(e.uri);if(!s)return[];const l=this.manager.getManagerForFile(s);if(!l)return[];const h=await l.getPullRequestDefaults();return(await l.getLabels(void 0,h)).map(T=>{const N=new o.CompletionItem(T.name,o.CompletionItemKind.Color);return N.documentation=`#${T.color}`,N.commitCharacters=[" ",","],N})}}class Kf{constructor(e,r,n,i){this.manager=e,this.stateManager=r,this.context=n,this.telemetry=i}async provideHover(e,r,n){if(!await du(e,r))return;let i=e.getWordRangeAtPosition(r,Ln);if(i&&i.start.character>0){i=new o.Range(new o.Position(i.start.line,i.start.character-1),i.end);const l=e.getText(i).match(Ln),h=Ks(l),b=this.manager.getManagerForFile(e.uri);if(!b)return;if(h&&l&&h.issueNumber<=this.stateManager.maxIssueNumber(b.repository.rootUri))return this.createHover(b,l[0],h,i)}else return}async createHover(e,r,n,i){const s=await yh(this.stateManager,e,r,n);if(!!s)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new o.Hover(await Xs(s,this.context,this.manager,n.commentNumber),i)}}var Yf=Object.defineProperty,Gl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Yf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Xr extends o.TreeItem{constructor(e,r,n){super(r,n);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class Xf{constructor(e,r,n){this.stateManager=e,this.manager=r,this.context=n,Gl(this,"_onDidChangeTreeData",new o.EventEmitter),Gl(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),n.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var r;let n;return e instanceof Xr?n=e:e instanceof dn?n=new Xr(e.repository.rootUri,v.basename(e.repository.rootUri.fsPath),o.TreeItemCollapsibleState.Expanded):e instanceof ot?(n=new Xr(void 0,`${e.number}: ${e.title}`,o.TreeItemCollapsibleState.None),n.iconPath=e.isOpen?new o.ThemeIcon("issues",new o.ThemeColor("issues.open")):new o.ThemeIcon("issue-closed",new o.ThemeColor("issues.closed")),((r=this.stateManager.currentIssue(e.uri))==null?void 0:r.issue.number)===e.number?(n.label=`\u2713 ${n.label}`,n.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?n.contextValue="continueissue":n.contextValue="issue",hh(e)&&(n.contextValue="link"+n.contextValue)):n=new Xr(e.uri,e.milestone.title,e.issues.length>0?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.None),n}getChildren(e){return e===void 0&&this.manager.state!==Rt.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,r){return r instanceof ot&&(e.tooltip=await Xs(r,this.context,this.manager)),e}getStateChildren(){return this.manager.state===Rt.NeedsAuthentication?[]:[new Xr(void 0,"Loading...")]}getQueryItems(e){const r=this.stateManager.getIssueCollection(e.repository.rootUri);if(r.size===1)return Array.from(r.values())[0];const n=Array.from(r.keys()),i=n[0];return n.map(s=>{const l=new Xr(e.repository.rootUri,s);return l.contextValue="query",l.collapsibleState=s===i?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.Collapsed,l})}getIssuesChildren(e){var r;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof dn?this.getQueryItems(e):e instanceof Xr?e.uri?(r=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?r:[]:[]:e instanceof ot?[]:e.issues.map(n=>{const i=Object.assign(n);return i.uri=e.uri,i})}}var Jf=Object.defineProperty,Zf=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Jf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class eg{constructor(e){Zf(this,"expression"),e.subscriptions.push(o.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=o.workspace.getConfiguration(Ye).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,r,n,i){if(this.expression===void 0||n.only&&n.only!==o.CodeActionKind.QuickFix)return[];const s=[];let l=r.start.line;do{const h=e.lineAt(l).text,b=h.substring(0,fh);if(!b.match(Ln)){const N=b.search(this.expression);if(N>=0){const q=new o.CodeAction("Create GitHub Issue",o.CodeActionKind.QuickFix),$=b.substring(N).search(/\s/),V=N+($>0?$:b.match(this.expression)[0].length);q.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:l,line:h,insertIndex:V,range:r}]},s.push(q);break}}l++}while(r.end.line>=l);return s}}var tg=Object.defineProperty,St=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rg=["Recovery"],ng="currentIssue",Oa="issues",Bl="ignoreMilestones",Ma=[{label:"My Issues",query:"default"}];class xv extends null{constructor(){super(...arguments);St(this,"uri")}}class ig{constructor(e,r,n){this.gitAPI=e,this.manager=r,this.context=n,St(this,"resolvedIssues",new Map),St(this,"_singleRepoStates",new Map),St(this,"_onRefreshCacheNeeded",new o.EventEmitter),St(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),St(this,"_onDidChangeIssueData",new o.EventEmitter),St(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),St(this,"_queries",[]),St(this,"_onDidChangeCurrentIssue",new o.EventEmitter),St(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),St(this,"initializePromise"),St(this,"statusBarItem"),St(this,"isSettingIssue",!1),r.folderManagers.forEach(i=>{this.context.subscriptions.push(i.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var r;let n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.issueCollection;return n||(n=new Map,n)}getOrCreateSingleRepoState(e,r){let n=this._singleRepoStates.get(e.path);return n||(r||(r=this.manager.getManagerForFile(e)),n={issueCollection:new Map,maxIssueNumber:0,folderManager:r},this._singleRepoStates.set(e.path,n),n)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===Rt.RepositoriesLoaded)this.doInitialize(),e();else{const r=this.manager.onDidChangeState(()=>{this.manager.state===Rt.RepositoriesLoaded&&(this.doInitialize(),r.dispose(),e())});this.context.subscriptions.push(r)}})),this.initializePromise}registerRepositoryChangeEvent(){this.gitAPI.repositories.forEach(e=>{this.context.subscriptions.push(e.state.onDidChange(async()=>{var r;const n=this.getOrCreateSingleRepoState(e.rootUri),i=n.lastHead,s=n.lastBranch,l=e.state.HEAD?e.state.HEAD.commit:void 0;(e.state.HEAD?e.state.HEAD.commit:void 0)!==i&&await this.setIssueData(n.folderManager);const h=(r=e.state.HEAD)==null?void 0:r.name;(i!==l||s!==h)&&(!n.currentIssue||h!==n.currentIssue.branchName)&&(h?n.folderManager&&await this.setCurrentIssueFromBranch(n,h):await this.setCurrentIssue(n,void 0)),n.lastHead=e.state.HEAD?e.state.HEAD.commit:void 0,n.lastBranch=e.state.HEAD?e.state.HEAD.name:void 0}))})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=o.workspace.getConfiguration(Ye).get(ln,Ma),this._queries.length===0&&(this._queries=Ma),this.context.subscriptions.push(o.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${Ye}.${ln}`)?(this._queries=o.workspace.getConfiguration(Ye).get(ln,Ma),this._onRefreshCacheNeeded.fire()):r.affectsConfiguration(`${Ye}.${Bl}`)&&this._onRefreshCacheNeeded.fire()})),await this.setAllIssueData(),this.registerRepositoryChangeEvent(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const r of this.manager.folderManagers){const n=this.getOrCreateSingleRepoState(r.repository.rootUri,r);n.lastHead=r.repository.state.HEAD?r.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(r.repository.rootUri.path,n);const i=(e=r.repository.state.HEAD)==null?void 0:e.name;!n.currentIssue&&i&&await this.setCurrentIssueFromBranch(n,i)}}cleanIssueState(){const e=this.context.workspaceState.get(Oa),r=e?JSON.parse(e):{issues:[],branches:[]},n=new Date().valueOf()-30*864e5;for(const i in r.issues)r.issues[i].stateModifiedTime<n&&(r.branches&&r.branches[i]&&delete r.branches[i],delete r.issues[i])}async getUsers(e){var r;await this.initializePromise;const n=await((r=this.manager.getManagerForFile(e))==null?void 0:r.getAssignableUsers()),i=new Map;for(const s in n)n[s].forEach(l=>{i.set(l.login,l)});return i}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const r=this.getOrCreateSingleRepoState(e);return r.userMap||(r.userMap=this.getUsers(e)),r.userMap}async getCurrentUser(){var e;return(e=this.manager.credentialStore.getCurrentUser())==null?void 0:e.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var r,n;const i=this.getOrCreateSingleRepoState(e.repository.rootUri,e);i.issueCollection.clear();let s,l;for(const h of this._queries){let b;if(h.query===gh)b=this.setMilestones(e);else{if(!s)try{s=await e.getPullRequestDefaults()}catch(T){}l||(l=await this.getCurrentUser()),b=this.setIssues(e,await Ui(h.query,void 0,s,l))}i.issueCollection.set(h.label,b)}i.maxIssueNumber=await e.getMaxIssue(),i.lastHead=(r=e.repository.state.HEAD)==null?void 0:r.commit,i.lastBranch=(n=e.repository.state.HEAD)==null?void 0:n.name}setIssues(e,r){return new Promise(async n=>{const i=await e.getIssues({fetchNextPage:!1},r);this._onDidChangeIssueData.fire(),n(i.items.map(s=>{const l=s;return l.uri=e.repository.rootUri,l}))})}async setCurrentIssueFromBranch(e,r){if(o.workspace.getConfiguration(Ye).get(ru)==="off")return;let i;try{i=await e.folderManager.getPullRequestDefaults()}catch(l){return}if(r===i.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===r)return;const s=this.getSavedState();for(const l in s.branches)if(l===r){const h=await e.folderManager.resolveIssue(s.branches[l].owner,s.branches[l].repositoryName,s.branches[l].number);h&&await this.setCurrentIssue(e,new $l(h,e.folderManager,this));return}}setMilestones(e){return new Promise(async r=>{const n=new Date,i=o.workspace.getConfiguration(Ye).get(Bl,[]),s=await e.getMilestones({fetchNextPage:!1},i.indexOf(yu)<0);let l;const h=new Map,b=[];for(let T=0;T<s.items.length;T++){const N=s.items[T];N.uri=e.repository.rootUri;const q=s.items[T].milestone;if(N.issues&&N.issues.length<=0||i.indexOf(q.title)>=0)continue;b.push(N);let $=q.dueOn?new Date(q.dueOn):void 0;$||($=new Date(this.removeDateExcludeStrings(q.title)),isNaN($.getTime())&&($=new Date(q.createdAt))),$<n&&(l===void 0||$>l)&&(l=$),h.set(q.id?q.id:q.title,$)}b.sort((T,N)=>{const q=h.get(T.milestone.id?T.milestone.id:T.milestone.title),$=h.get(N.milestone.id?N.milestone.id:N.milestone.title);return l&&q>=l&&$>=l?q<=$?-1:1:q>=$?-1:1}),this._onDidChangeIssueData.fire(),r(b)})}removeDateExcludeStrings(e){return rg.forEach(r=>e=e.replace(r,"")),e}currentIssue(e){var r;return(r=this._singleRepoStates.get(e.path))==null?void 0:r.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var r,n;return(n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.maxIssueNumber)!=null?n:0}async setCurrentIssue(e,r){if(!(this.isSettingIssue&&r===void 0)){if(this.isSettingIssue=!0,e instanceof dn){const n=this._singleRepoStates.get(e.repository.rootUri.path);if(!n)return;e=n}try{if(e.currentIssue&&(r==null?void 0:r.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),r&&this.context.subscriptions.push(r.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(ng,r==null?void 0:r.issue.number),(!r||await r.startWorking())&&(e.currentIssue=r,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(n){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),r=e.length>0;if(!r){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}r&&!this.statusBarItem&&(this.statusBarItem=o.window.createStatusBarItem(o.StatusBarAlignment.Left,0));const n=this.statusBarItem;n.text=`$(issues) Issue ${e.map(i=>cn(i.issue,i.repoDefaults)).join(", ")}`,n.tooltip=e.map(i=>i.issue.title).join(", "),n.command="issue.statusBar",n.show()}getSavedState(){const e=this.context.workspaceState.get(Oa);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var r;return(r=this.getSavedState().issues[`${e}`])!=null?r:{}}setSavedIssueState(e,r){const n=this.getSavedState();n.issues[`${e.number}`]={...r,stateModifiedTime:new Date().valueOf()},r.branch&&(n.branches||(n.branches=Object.create(null)),n.branches[r.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(Oa,JSON.stringify(n))}}class sg{constructor(e,r,n){this.stateManager=e,this.manager=r}async provideCompletionItems(e,r,n,i){var s;if(e.languageId!=="scminput"&&e.uri.scheme!==vr&&r.character>0&&i.triggerKind===o.CompletionTriggerKind.Invoke&&e.getText(new o.Range(r.with(void 0,r.character-1),r))!=="@")return[];if(i.triggerKind===o.CompletionTriggerKind.TriggerCharacter&&o.workspace.getConfiguration(Ye).get("ignoreUserCompletionTrigger",[]).find(T=>T===e.languageId))return[];if(e.languageId!=="scminput"&&!await Zs(e,r))return[];let l=new o.Range(r,r);r.character-1>=0&&e.getText(new o.Range(r.translate(0,-1),r))==="@"&&(l=new o.Range(r.translate(0,-1),r));const h=e.uri.scheme===vr?(s=xa(e.uri))!=null?s:e.uri:e.languageId==="scminput"?hu(e.uri):e.uri;if(!h)return[];const b=[];return(await this.stateManager.getUserMap(h)).forEach(T=>{const N=new wh(T.login,o.CompletionItemKind.User);N.insertText=`@${T.login}`,N.login=T.login,N.uri=h,N.range=l,N.detail=T.name,N.filterText=`@ ${T.login} ${T.name}`,e.uri.scheme===vr&&(N.commitCharacters=[" ",","]),b.push(N)}),b}async resolveCompletionItem(e,r){const n=this.manager.getManagerForFile(e.uri);if(!n)return e;const i=await n.getPullRequestDefaults(),s=await n.resolveUser(i.owner,i.repo,e.login);return s&&(e.documentation=Ys(i,s),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}class ag{constructor(e,r){this.manager=e,this.telemetry=r}async provideHover(e,r,n){if(!await du(e,r))return;let i=e.getWordRangeAtPosition(r,Qs);if(i&&i.start.character>0){i=new o.Range(new o.Position(i.start.line,i.start.character),i.end);const l=e.getText(i).match(Qs);if(l)return this.createHover(e.uri,l[1],i)}else return}async createHover(e,r,n){try{const i=this.manager.getManagerForFile(e);if(!i)return;const s=await i.getPullRequestDefaults(),l=await i.resolveUser(s.owner,s.repo,r);return l&&l.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new o.Hover(Ys(s,l),n)):void 0}catch(i){return}}}var og=Object.defineProperty,La=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ug="issueCompletions.enabled",lg="userCompletions.enabled";class cg{constructor(e,r,n,i,s){this.gitAPI=e,this.manager=r,this.reviewManagers=n,this.context=i,this.telemetry=s,La(this,"_stateManager"),La(this,"createIssueInfo"),La(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new ig(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(o.workspace.registerFileSystemProvider(vr,new Qf)),this.registerCompletionProviders(),this.context.subscriptions.push(o.languages.registerCompletionItemProvider({scheme:vr},new Wf(this.manager)," ",",")),this.context.subscriptions.push(o.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new Xf(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssueFromSelection",(e,r)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,r)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.copyGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(o.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(o.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(o.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.createIssueFromFile",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),this.createIssueFromFile()),this)),this.context.subscriptions.push(o.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(o.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(o.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(o.commands.registerCommand("issue.goToLinkedCode",async e=>mh(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(o.languages.registerHoverProvider("*",new Kf(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(o.languages.registerHoverProvider("*",new ag(this.manager,this.telemetry))),this.context.subscriptions.push(o.languages.registerCodeActionsProvider("*",new eg(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:Vf,trigger:"#",disposable:void 0,configuration:ug},{provider:sg,trigger:"@",disposable:void 0,configuration:lg}];for(const r of e)o.workspace.getConfiguration(Ye).get(r.configuration,!0)&&this.context.subscriptions.push(r.disposable=o.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));this.context.subscriptions.push(o.workspace.onDidChangeConfiguration(r=>{for(const n of e)if(r.affectsConfiguration(`${Ye}.${n.configuration}`)){const i=o.workspace.getConfiguration(Ye).get(n.configuration,!0);!i&&n.disposable?(n.disposable.dispose(),n.disposable=void 0):i&&!n.disposable&&this.context.subscriptions.push(n.disposable=o.languages.registerCompletionItemProvider(this.documentFilters,new n.provider(this._stateManager,this.manager,this.context),n.trigger));break}}))}async createIssue(){var e,r;let n=(e=o.window.activeTextEditor)==null?void 0:e.document.uri;if(n||(n=(r=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:r.repository.rootUri),n)return this.makeNewIssueFile(n)}async createIssueFromFile(){var e,r,n,i;let s;if(!o.window.activeTextEditor||o.window.activeTextEditor.document.uri.scheme!==vr)return;s=o.window.activeTextEditor.document.getText();const l=s.indexOf(`\r
\r
`),h=s.indexOf(`

`);let b;if(l<0&&h<0)return;l<0?b=h:h<0?b=l:b=Math.min(l,h);const T=s.substring(0,b);let N;if(s=s.substring(b+2).trim(),s.startsWith(Xi)){const Y=s.split(/\r\n|\n/,1);Y.length===1&&(N=Y[0].substring(Xi.length).split(",").map(Q=>(Q=Q.trim(),Q.startsWith("@")&&(Q=Q.substring(1)),Q)),s=s.substring(Y[0].length).trim())}let q;if(s.startsWith(Zn)){const Y=s.split(/\r\n|\n/,1);Y.length===1&&(q=Y[0].substring(Zn.length).split(",").map(Q=>Q.trim()).filter(Q=>Q),s=s.substring(Y[0].length).trim())}const $=s;if(!T||!$)return;const V=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(r=this.createIssueInfo)==null?void 0:r.newIssue,T,$,N,q,(n=this.createIssueInfo)==null?void 0:n.lineNumber,(i=this.createIssueInfo)==null?void 0:i.insertIndex,xa(o.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,V&&await o.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const r=o.workspace.getConfiguration(Ye),n=r.inspect(ln);let i;if(n==null?void 0:n.workspaceValue)i="workbench.action.openWorkspaceSettingsFile";else{const l=r.get(ln);(n==null?void 0:n.defaultValue)&&JSON.stringify(n==null?void 0:n.defaultValue)===JSON.stringify(l)&&r.update(ln,n.defaultValue,o.ConfigurationTarget.Global),i="workbench.action.openSettingsJson"}await o.commands.executeCommand(i);const s=o.window.activeTextEditor;if(s){const h=s.document.getText().search(e.labelAsString);if(h>=0){const b=s.document.positionAt(h);s.revealRange(new o.Range(b,b)),s.selection=new o.Selection(b,b)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await o.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),o.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof ot)return o.env.openExternal(o.Uri.parse(e.html_url))}async doStartWorking(e,r,n){if(!e){o.window.showErrorMessage(`There are no repositories open that match ${r.remote.url}`);return}const i=await e.findUpstreamForItem(r);i.needsFork&&await e.tryOfferToFork(r.githubRepository)===void 0||await this._stateManager.setCurrentIssue(e,new $l(r,e,this._stateManager,i.remote,n))}async startWorking(e){e instanceof ot&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof ot&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var r;const n=this.manager.getManagerForIssueModel(e);!n||e instanceof ot&&((r=this._stateManager.currentIssue(n.repository.rootUri))==null?void 0:r.issue.number)===e.number&&await this._stateManager.setCurrentIssue(n,void 0)}async statusBarActions(e){const r=`$(globe) Open #${e.issue.number} ${e.issue.title}`,n=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let i;try{i=await e.manager.getPullRequestDefaults()}catch(b){}const s=`$(primitive-square) Stop working on #${e.issue.number}`,l=e.branchName&&i?[r,n,s]:[r,n,s];switch(await o.window.showQuickPick(l,{placeHolder:"Current issue options"})){case r:return this.openIssue(e.issue);case n:{const b=Wr.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(b)return Ah(e.manager,b,this._stateManager);break}case s:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const r=e.map(i=>({label:`#${i.issue.number} from ${i.issue.githubRepository.remote.owner}/${i.issue.githubRepository.remote.repositoryName}`,currentIssue:i})),n=await o.window.showQuickPick(r);if(n)return this.statusBarActions(n.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof ot)return o.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof ot)return o.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await o.env.clipboard.readText())}async createTodoIssue(e,r){let n,i,s,l,h,b;if(!e&&o.window.activeTextEditor)n=o.window.activeTextEditor.document,b=n.getText(o.window.activeTextEditor.selection);else if(e)n=e.document,s=e.insertIndex,l=e.lineNumber,i=e.line.substring(s,e.line.length).trim(),b=n.getText(e.range.isEmpty?n.lineAt(e.range.start.line).range:e.range);else return;const T=b.match(Qs);T&&T.length===2&&(await this._stateManager.getUserMap(n.uri)).has(T[1])&&(h=[T[1]]);let N;const q=r||(e==null?void 0:e.document.isUntitled)?r:(await Js(this.gitAPI,e)).permalink,$=o.window.createInputBox();$.value=i!=null?i:"",$.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",$.title="Create Issue",$.buttons=[{iconPath:new o.ThemeIcon("edit"),tooltip:"Edit Description"}],$.onDidAccept(async()=>{N=$.value,N&&($.busy=!0,await this.doCreateIssue(n,e,N,q,h,void 0,l,s),$.busy=!1),$.hide()}),$.onDidTriggerButton(async()=>{N=$.value,$.busy=!0,this.createIssueInfo={document:n,newIssue:e,lineNumber:l,insertIndex:s},this.makeNewIssueFile(n.uri,N,q,h),$.busy=!1,$.hide()}),$.show()}async makeNewIssueFile(e,r,n,i){const s=`?{"origin":"${e.toString()}"}`,l=o.Uri.parse(`${vr}:/${zf}${s}`);if(o.window.visibleTextEditors.filter(Q=>Q.document.uri.scheme===vr).length>0)return;await o.workspace.fs.delete(l);const h=`${Xi} ${i&&i.length>0?i.map(Q=>"@"+Q).join(", ")+" ":""}`,b=`${Zn} `,T=`${r!=null?r:"Issue Title"}

${h}
${b}

${n!=null?n:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await o.workspace.fs.writeFile(l,this.stringToUint8Array(T));const N=o.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new o.ThemeColor("issues.newIssueDecoration")}}),q=o.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new o.ThemeColor("issues.newIssueDecoration")}}),$=o.window.onDidChangeActiveTextEditor(Q=>{if((Q==null?void 0:Q.document.uri.scheme)===vr){const ee=Q.document.lineAt(2);ee.text.startsWith(Xi)&&Q.setDecorations(N,[new o.Range(new o.Position(2,0),new o.Position(2,ee.text.length))]);const te=Q.document.lineAt(3);te.text.startsWith(Zn)&&Q.setDecorations(q,[new o.Range(new o.Position(3,0),new o.Position(3,te.text.length))])}}),V=await o.window.showTextDocument(l),Y=o.workspace.onDidCloseTextDocument(Q=>{Q===V.document&&($.dispose(),Y.dispose())})}async verifyLabels(e,r){var n;if(!r.labels)return!0;const i=(await e.getLabels(void 0,r)).map(h=>h.name),s=[],l=[];if((n=r.labels)==null||n.forEach(h=>{typeof h!="string"&&(h=h.name),i.includes(h)?l.push(h):s.push(h)}),s.length>0){const h="Yes",b="No";switch(await o.window.showInformationMessage(`The following labels don't exist in this repository: ${s.join(", ")}. 
Do you want to create these labels?`,{modal:!0},h,b)){case h:return!0;case b:return r.labels=l,!0;default:return!1}}return!0}async chooseRepo(e){const r=[];for(const i of this.manager.folderManagers)try{const s=await i.getPullRequestDefaults();r.push({label:`${s.owner}/${s.repo}`,repo:i})}catch(s){}if(r.length===0)return;if(r.length===1)return r[0].repo;const n=await o.window.showQuickPick(r,{placeHolder:e});return n==null?void 0:n.repo}async doCreateIssue(e,r,n,i,s,l,h,b,T){let N,q;if(e?q=this.manager.getManagerForFile(e.uri):T?q=this.manager.getManagerForFile(T):q=await this.chooseRepo("Choose where to create the issue."),!q)return!1;try{N=await q.getPullRequestDefaults()}catch(Q){return o.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const $=i||(r==null?void 0:r.document.isUntitled)?i:(await Js(this.gitAPI,r)).permalink,V={owner:N.owner,repo:N.repo,title:n,body:$,assignees:s,labels:l};if(!await this.verifyLabels(q,V))return!1;const Y=await q.createIssue(V);if(Y){if(e!==void 0&&b!==void 0&&h!==void 0){const Q=new o.WorkspaceEdit,ee=o.workspace.getConfiguration(Ye).get("createInsertFormat","number")==="number"?`#${Y.number}`:Y.html_url;Q.insert(e.uri,new o.Position(h,b),` ${ee}`),await o.workspace.applyEdit(Q)}else{const Q="Copy URL",ee="Open Issue";o.window.showInformationMessage("Issue created",Q,ee).then(async te=>{switch(te){case Q:await o.env.clipboard.writeText(Y.html_url);break;case ee:await o.env.openExternal(o.Uri.parse(Y.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(){const e=await Js(this.gitAPI);return e.error&&o.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${e.error}`),e.permalink}async copyPermalink(){const e=await this.getPermalinkWithError();if(e)return o.env.clipboard.writeText(e)}getMarkdownLinkText(){if(!o.window.activeTextEditor)return;let e=o.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new o.Range(e.start,new o.Position(e.start.line+1,0)));const r=o.window.activeTextEditor.document.getText(e);if(r)return r;if(e=o.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return o.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),r=this.getMarkdownLinkText();if(e&&r)return o.env.clipboard.writeText(`[${r.trim()}](${e})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e)return o.env.openExternal(o.Uri.parse(e))}}var dg=Object.defineProperty,hg=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?dg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class mg{constructor(){hg(this,"_disposables"),this._disposables=[],this._disposables.push(o.window.registerFileDecorationProvider(this))}provideFileDecoration(e,r){const n=_r(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status)};const i=qe(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status)}}letter(e){switch(e){case ke.MODIFY:return"M";case ke.ADD:return"A";case ke.DELETE:return"D";case ke.RENAME:return"R";case ke.UNKNOWN:return"U";case ke.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var pg=Object.defineProperty,Ji=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class fg extends bt{constructor(e,r,n,i,s){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.commit=i,this.comments=s,Ji(this,"sha"),Ji(this,"collapsibleState"),Ji(this,"iconPath"),Ji(this,"contextValue"),this.label=i.commit.message,this.sha=i.sha,this.collapsibleState=o.TreeItemCollapsibleState.Collapsed;let l;try{i.author&&i.author.avatar_url&&(l=o.Uri.parse(`${i.author.avatar_url}&s=${64}`))}catch(h){}this.iconPath=l,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){const r=(await this.pullRequest.getCommitChangedFiles(this.commit)).map(n=>{const i=this.comments.filter(b=>b.path===n.filename&&b.originalCommitId===this.commit.sha),s=n.filename,l=o.Uri.parse(v.join(`commit~${this.commit.sha.substr(0,8)}`,s)),h=new mn(this,this.pullRequestManager,this.pullRequest,Nn(n.status),s,void 0,Vt(l,s,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),Vt(l,s,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],i,this.commit.sha);return h.useViewChangesCommand(),h});return Promise.resolve(r)}}var gg=Object.defineProperty,ei=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?gg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class vg extends bt{constructor(e,r,n,i){super();ei(this,"label","Commits"),ei(this,"collapsibleState"),ei(this,"_folderRepoManager"),ei(this,"_pr"),ei(this,"_comments"),this.parent=e,this._pr=n,this._folderRepoManager=r,this._comments=i,this.collapsibleState=o.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const r=(await this._pr.getCommits()).map(n=>new fg(this,this._folderRepoManager,this._pr,n,this._comments));return Promise.resolve(r)}catch(e){return Promise.resolve([])}}}var yg=Object.defineProperty,qa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?yg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class bg extends bt{constructor(e,r){super();this.parent=e,this._fileChanges=r,qa(this,"label","Files"),qa(this,"collapsibleState"),qa(this,"directories",[]),this.collapsibleState=o.TreeItemCollapsibleState.Expanded;const n=new Qr(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?this.directories=n.children:this.directories=[n]}getTreeItem(){return this}async getChildren(){let e;return o.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var wg=Object.defineProperty,Zi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _g extends zr{constructor(e,r,n,i,s){super(e,r.title,r.userAvatarUri,r);this.parent=e,this._pullRequest=r,this._pullRequestManager=n,this._comments=i,this._localFileChanges=s,Zi(this,"_filesCategoryNode"),Zi(this,"_commitsCategoryNode"),Zi(this,"collapsibleState",o.TreeItemCollapsibleState.Expanded),Zi(this,"_disposables",[]),this.label=this._pullRequest.title,this._disposables.push(o.window.onDidChangeActiveTextEditor(l=>{const h=l==null?void 0:l.document.uri.toString();this.revealActiveEditorInTree(h)})),this._disposables.push(this.parent.onDidChangeVisibility(l=>{var h;const b=(h=o.window.activeTextEditor)==null?void 0:h.document.uri.toString();this.revealActiveEditorInTree(b)}))}revealActiveEditorInTree(e){if(this.parent.visible&&e){const r=this._localFileChanges.find(n=>n.filePath.toString()===e);r&&this.reveal(r,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new bg(this.parent,this._localFileChanges),this._commitsCategoryNode=new vg(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var kg=Object.defineProperty,ti=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?kg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Vl extends o.Disposable{constructor(e){super(()=>this.dispose());this._context=e,ti(this,"_onDidChangeTreeData",new o.EventEmitter),ti(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),ti(this,"_disposables",[]),ti(this,"_pullRequestManagerMap",new Map),ti(this,"_view"),this._view=o.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(o.workspace.onDidChangeConfiguration(async r=>{if(r.affectsConfiguration(`${hr}.fileListLayout`)){this._onDidChangeTreeData.fire();const n=o.workspace.getConfiguration(`${hr}`).get("fileListLayout");await o.commands.executeCommand("setContext","fileListLayout:flat",n==="flat")}else r.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const r=this._pullRequestManagerMap.values().next();r.done||(e=r.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,r,n,i,s){const l=new _g(this._view,r,e,i,n);this._pullRequestManagerMap.set(e,l),this.updateViewTitle(),await o.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),s&&this._view.reveal(l)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await o.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,r){this._view.reveal(e,r)}async getChildren(e){if(e)return await e.getChildren();{const r=[];if(this._pullRequestManagerMap.size>=1)for(const n of this._pullRequestManagerMap.values())r.push(n);return r}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,r){return r instanceof mn&&await r.resolve(),r}dispose(){this._disposables.forEach(e=>e.dispose())}}var Eg=Object.defineProperty,xr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Eg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),yr;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoOpenFolder=6]="NoOpenFolder",t[t.NoMatchingRemotes=7]="NoMatchingRemotes",t[t.ConfigureRemotes=8]="ConfigureRemotes",t[t.Initializing=9]="Initializing"})(yr||(yr={}));class er extends bt{constructor(e,r,n){super();switch(xr(this,"collapsibleState"),xr(this,"iconPath"),xr(this,"type"),xr(this,"command"),this.parent=e,this.type=r,this.collapsibleState=o.TreeItemCollapsibleState.None,r){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="You have not yet opened a folder.";break;case 7:this.label="No remotes match the current setting.";break;case 8:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 9:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class Ua extends bt{constructor(e,r,n,i,s,l){super();switch(this.parent=e,this._folderRepoManager=r,this._telemetry=n,this._type=i,this._categoryQuery=l,xr(this,"collapsibleState"),xr(this,"prs"),xr(this,"fetchNextPage",!1),xr(this,"repositoryPageInformation",new Map),this.prs=[],this.collapsibleState=o.TreeItemCollapsibleState.Collapsed,i){case st.All:this.label="All Open";break;case st.Query:this.label=s;break;case st.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}}async getChildren(){let e=!1,r=!1,n=!1;if(this._type===st.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(i){o.window.showErrorMessage(`Fetching local pull requests failed: ${D(i)}`),n=i instanceof ki}else if(this.fetchNextPage){try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(i.items),e=i.hasMorePages,r=i.hasUnsearchedRepositories}catch(i){o.window.showErrorMessage(`Fetching pull requests failed: ${D(i)}`),n=i instanceof ki}this.fetchNextPage=!1}else try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=i.items,e=i.hasMorePages,r=i.hasUnsearchedRepositories,this._type){case st.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case st.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(i){o.window.showErrorMessage(`Fetching pull requests failed: ${D(i)}`),n=i instanceof ki}if(this.prs&&this.prs.length){const i=this.prs.map(s=>new gn(this,this._folderRepoManager,s,this._type===st.LocalPullRequest));return e?i.push(new er(this,1,this)):r&&i.push(new er(this,2,this)),this.childrenDisposables=i,i}else{const i=n?3:0,s=[new er(this,i)];return this.childrenDisposables=s,s}}getTreeItem(){return this}}var Cg=Object.defineProperty,jl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const zl="queries";class ri extends bt{constructor(e,r,n,i){super();this.folderManager=n,this.telemetry=i,jl(this,"collapsibleState"),jl(this,"iconPath"),this.parent=e,this.collapsibleState=o.TreeItemCollapsibleState.Expanded,this.label=v.basename(r.fsPath)}static getQueries(e){return o.workspace.getConfiguration(hr,e.repository.rootUri).get(zl)||[]}getTreeItem(){return this}async getChildren(){return ri.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,r,n){const i=ri.getQueries(e).map(s=>new Ua(n,e,r,st.Query,s.label,s.query));return[new Ua(n,e,r,st.LocalPullRequest),...i,new Ua(n,e,r,st.All)]}}var Rg=Object.defineProperty,Or=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ql{constructor(e){this._telemetry=e,Or(this,"_onDidChangeTreeData",new o.EventEmitter),Or(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Or(this,"_onDidChange",new o.EventEmitter),Or(this,"_disposables"),Or(this,"_childrenDisposables"),Or(this,"_view"),Or(this,"_reposManager"),Or(this,"_initialized",!1),this._disposables=[],this._disposables.push(o.workspace.registerTextDocumentContentProvider("pr",Du())),this._disposables.push(o.window.registerFileDecorationProvider(Eu)),this._disposables.push(o.commands.registerCommand("pr.refreshList",r=>{this._onDidChangeTreeData.fire()})),this._disposables.push(o.commands.registerCommand("pr.loadMore",r=>{r.fetchNextPage=!0,this._onDidChangeTreeData.fire(r)})),this._view=o.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(o.commands.registerCommand("pr.configurePRViewlet",async()=>{var r;const n=((r=this._reposManager)==null?void 0:r.state)===Rt.RepositoriesLoaded;switch(await o.window.showQuickPick(["Configure Remotes...","Configure Queries...",...n?["Sign out of GitHub..."]:[]])){case"Configure Queries...":return o.commands.executeCommand("workbench.action.openSettings",`@ext:${xt} queries`);case"Configure Remotes...":return o.commands.executeCommand("workbench.action.openSettings",`@ext:${xt} remotes`);case"Sign out of GitHub...":return o.commands.executeCommand("auth.signout");default:return}})),this._disposables.push(o.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${hr}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(r=>r.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(o.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${hr}.${zl}`)&&this.refresh()}))}async refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===Rt.NeedsAuthentication?Promise.resolve([]):o.workspace.getConfiguration(hr).get(ta)?Promise.resolve([new er(this._view,yr.NoMatchingRemotes),new er(this._view,yr.ConfigureRemotes)]):Promise.resolve([new er(this._view,yr.NoRemotes)])}async getChildren(e){if(!this._reposManager)return o.workspace.workspaceFolders?Promise.resolve([new er(this._view,yr.NoGitRepositories)]):Promise.resolve([new er(this._view,yr.NoOpenFolder)]);if(this._reposManager.state===Rt.Initializing)return Promise.resolve([new er(this._view,yr.Initializing)]);if(this._reposManager.folderManagers.filter(r=>r.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(n=>n.dispose());let r;return this._reposManager.folderManagers.length===1?ri.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this._view):(r=this._reposManager.folderManagers.map(n=>new ri(this._view,n.repository.rootUri,n,this._telemetry)),this._childrenDisposables=r,Promise.resolve(r))}return this._reposManager.folderManagers.filter(r=>r.repository.state.remotes.length>0).length===0?Promise.resolve([new er(this._view,yr.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var Tg=Object.defineProperty,Wl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Sg{constructor(e){this.gitAPI=e,Wl(this,"_onDidChange",new o.EventEmitter),Wl(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,r){if(!this._fallback)return"";const{path:n,commit:i,rootPath:s}=kt(e);if(!n||!i)return"";const l=Oo(this.gitAPI,o.Uri.file(s));if(!l)return o.window.showErrorMessage(`We couldn't find an open repository for ${i} locally.`),"";const h=v.join(l.rootUri.fsPath,n).replace(/\\/g,"/");let b;try{if(b=await l.show(i,h),!b)throw new Error}catch(T){if(b=await this._fallback(e),!b)try{await l.getCommit(i)}catch(N){o.window.showErrorMessage(`We couldn't find commit ${i} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return b||""}registerTextDocumentContentFallback(e){this._fallback=e}}var Pg=Object.defineProperty,Kl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Yl{constructor(e,r,n,i,s,l,h){this._context=e,this._reposManager=r,this._reviewManagers=n,this._prsTreeDataProvider=i,this._prFileChangesProvider=s,this._telemetry=l,Kl(this,"_disposables"),this._disposables=[];const b=new Sg(h);b.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(o.workspace.registerTextDocumentContentProvider("review",b)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(o.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new Vl(this._context);for(const r of this._reviewManagers)r.updateState()}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new Ql(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const r of this._reviewManagers)if(e.fsPath.startsWith(r.repository.rootUri.fsPath))return r.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}Kl(Yl,"ID","Reviews");const Ng="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let pt;const Xl="prompts",Jl="createPROnPublish";async function Zl(t,e,r,n,i,s){t.subscriptions.push(K),K.appendLine("Git repository found, initializing review manager and pr tree view."),o.authentication.onDidChangeSessions(async Q=>{Q.provider.id==="github"&&(await b.clearCredentialCache(),N&&N.forEach(ee=>ee.updateState()))}),t.subscriptions.push(e.onDidPublish(async Q=>{if(!Q.branch||Mu(Xl,Jl)===!1)return;const ee=N.find(ae=>ae.repository.rootUri.toString()===Q.repository.rootUri.toString());if(ee==null?void 0:ee.isCreatingPullRequest)return;const te="Create Pull Request...",ue="Don't Show Again",le=await o.window.showInformationMessage(`Would you like to create a Pull Request for branch '${Q.branch}'?`,te,ue);le===te?o.commands.executeCommand("pr.create"):le===ue&&Lu(Xl,Jl,!1)})),t.subscriptions.push(o.window.registerUriHandler(oi)),t.subscriptions.push(new mg);const l=o.workspace.workspaceFolders;l&&(n=n.sort((Q,ee)=>{let te=l.length,ue=l.length;for(let le=0;le<l.length&&(l[le].uri.toString()===Q.rootUri.toString()?te=le:l[le].uri.toString()===ee.rootUri.toString()&&(ue=le),!(te!==l.length&&ue!==l.length));le++);return te-ue}));const h=n.map(Q=>new dn(Q,pt,e,r));t.subscriptions.push(...h);const b=new Ml(h,r,pt);t.subscriptions.push(b),s.then(Q=>{Q&&Q.registerContactServiceProvider("github-pr",new $f(b))});const T=new Vl(t);t.subscriptions.push(T);const N=h.map(Q=>new Wr(t,Q.repository,Q,pt,T)),q=new Yl(t,b,N,i,T,pt,e);t.subscriptions.push(q),e.onDidChangeState(()=>{K.appendLine(`Git initialization state changed: state=${e.state}}`),N.forEach(Q=>Q.updateState())}),e.onDidOpenRepository(Q=>{const ee=Q.state.onDidChange(()=>{const te=new dn(Q,pt,e,r);b.insertFolderManager(te);const ue=new Wr(t,te.repository,te,pt,T);N.push(ue),i.refresh(),ee.dispose()})}),e.onDidCloseRepository(Q=>{b.removeRepo(Q);const ee=N.findIndex(te=>te.repository.rootUri.toString()===Q.rootUri.toString());if(ee){const te=N[ee];N.splice(ee),te.dispose()}i.refresh()}),i.initialize(b),_m(t,b,N,pt,r,i);const $=o.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await o.commands.executeCommand("setContext","fileListLayout:flat",$==="flat");const V=new cg(e,b,N,t,pt);t.subscriptions.push(V),await V.initialize(),t.subscriptions.push(new Gf),await o.commands.executeCommand("setContext","github:initialized",!0),pt.sendTelemetryEvent("startup"),(await Im(t,pt)).isCachedFlightEnabled("githubaa")}async function Ig(t){if(xt==="GitHub.vscode-pull-request-github-insiders"&&o.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");o.commands.registerCommand("github.api.preloadPullRequest",async()=>{await o.commands.executeCommand("setContext",De,!0),await o.commands.executeCommand("github:activePullRequest:welcome.focus")}),zt.initialize(t);const e=new it,r=o.extensions.getExtension(xt).packageJSON.version;return pt=new Sm(new C.Z(xt,r,Ng)),t.subscriptions.push(pt),Dg(t,e),e}async function Dg(t,e){Em(t);const r=new Ef(pt);t.subscriptions.push(r),await r.initialize();const n=qf(r,e);n&&t.subscriptions.push(n);const i=Lf(e);t.subscriptions.push(i);const s=i.initialize();t.subscriptions.push(e);const l=new Ql(pt);t.subscriptions.push(l),K.appendLine("Looking for git repository");const h=e.repositories;h.length>0?await Zl(t,e,r,h,l,s):E(e.onDidOpenRepository)(async b=>{await Zl(t,e,r,[b],l,s)})}async function Ag(){pt&&pt.dispose()}})(),module.exports=es})();
